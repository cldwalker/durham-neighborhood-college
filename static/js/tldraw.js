(function(){
shadow$provide[612]=function(xa,ba,Sa,D){function u(v,x,A){var B,K={},g=null,k=null;void 0!==A&&(g=""+A);void 0!==x.key&&(g=""+x.key);void 0!==x.ref&&(k=x.ref);for(B in x)q.call(x,B)&&!b.hasOwnProperty(B)&&(K[B]=x[B]);if(v&&v.defaultProps)for(B in x=v.defaultProps,x)void 0===K[B]&&(K[B]=x[B]);return{$$typeof:W,type:v,key:g,ref:k,props:K,_owner:y.current}}ba(19);xa=ba(22);var W=60103;D.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ba=Symbol.for,W=ba("react.element"),D.Fragment=ba("react.fragment"));
var y=xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};D.jsx=u;D.jsxs=u};
shadow$provide[614]=function(xa,ba,Sa,D){Sa.exports=ba(612)};
shadow$provide[615]=function(xa,ba,Sa,D){function u(Bb){for(var Dc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Bb,Lc=1;Lc<arguments.length;Lc++)Dc+="\x26args[]\x3d"+encodeURIComponent(arguments[Lc]);return"Minified React error #"+Bb+"; visit "+Dc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function W(Bb){if(null==Bb)return null;if("function"===typeof Bb)return Bb.displayName||Bb.name||null;if("string"===typeof Bb)return Bb;
switch(Bb){case U:return"Fragment";case V:return"Portal";case E:return"Profiler";case J:return"StrictMode";case ka:return"Suspense";case S:return"SuspenseList"}if("object"===typeof Bb)switch(Bb.$$typeof){case Q:return(Bb.displayName||"Context")+".Consumer";case M:return(Bb._context.displayName||"Context")+".Provider";case O:var Dc=Bb.render;Dc=Dc.displayName||Dc.name||"";return Bb.displayName||(""!==Dc?"ForwardRef("+Dc+")":"ForwardRef");case aa:return W(Bb.type);case T:return W(Bb._render);case X:Dc=
Bb._payload;Bb=Bb._init;try{return W(Bb(Dc))}catch(Lc){}}return null}function y(Bb,Dc){for(var Lc=Bb._threadCount|0;Lc<=Dc;Lc++)Bb[Lc]=Bb._currentValue2,Bb._threadCount=Lc+1}function q(Bb,Dc,Lc,Cc){if(Cc&&(Cc=Bb.contextType,"object"===typeof Cc&&null!==Cc))return y(Cc,Lc),Cc[Lc];if(Bb=Bb.contextTypes){Lc={};for(var Zc in Bb)Lc[Zc]=Dc[Zc];Dc=Lc}else Dc=wa;return Dc}function b(Bb){if(Ka.call(Xa,Bb))return!0;if(Ka.call(Pa,Bb))return!1;if(Ba.test(Bb))return Xa[Bb]=!0;Pa[Bb]=!0;return!1}function v(Bb,
Dc,Lc,Cc){if(null!==Lc&&0===Lc.type)return!1;switch(typeof Dc){case "function":case "symbol":return!0;case "boolean":if(Cc)return!1;if(null!==Lc)return!Lc.acceptsBooleans;Bb=Bb.toLowerCase().slice(0,5);return"data-"!==Bb&&"aria-"!==Bb;default:return!1}}function x(Bb,Dc,Lc,Cc){if(null===Dc||"undefined"===typeof Dc||v(Bb,Dc,Lc,Cc))return!0;if(Cc)return!1;if(null!==Lc)switch(Lc.type){case 3:return!Dc;case 4:return!1===Dc;case 5:return isNaN(Dc);case 6:return isNaN(Dc)||1>Dc}return!1}function A(Bb,Dc,
Lc,Cc,Zc,kd,gd){this.acceptsBooleans=2===Dc||3===Dc||4===Dc;this.attributeName=Cc;this.attributeNamespace=Zc;this.mustUseProperty=Lc;this.propertyName=Bb;this.type=Dc;this.sanitizeURL=kd;this.removeEmptyString=gd}function B(Bb){return Bb[1].toUpperCase()}function K(Bb){if("boolean"===typeof Bb||"number"===typeof Bb)return""+Bb;Bb=""+Bb;var Dc=Ma.exec(Bb);if(Dc){var Lc="",Cc,Zc=0;for(Cc=Dc.index;Cc<Bb.length;Cc++){switch(Bb.charCodeAt(Cc)){case 34:Dc="\x26quot;";break;case 38:Dc="\x26amp;";break;case 39:Dc=
"\x26#x27;";break;case 60:Dc="\x26lt;";break;case 62:Dc="\x26gt;";break;default:continue}Zc!==Cc&&(Lc+=Bb.substring(Zc,Cc));Zc=Cc+1;Lc+=Dc}Bb=Zc!==Cc?Lc+Bb.substring(Zc,Cc):Lc}return Bb}function g(Bb,Dc){var Lc=Ya.hasOwnProperty(Bb)?Ya[Bb]:null,Cc;if(Cc="style"!==Bb)Cc=null!==Lc?0===Lc.type:!(2<Bb.length)||"o"!==Bb[0]&&"O"!==Bb[0]||"n"!==Bb[1]&&"N"!==Bb[1]?!1:!0;if(Cc||x(Bb,Dc,Lc,!1))return"";if(null!==Lc){Bb=Lc.attributeName;Cc=Lc.type;if(3===Cc||4===Cc&&!0===Dc)return Bb+'\x3d""';Lc.sanitizeURL&&
(Dc=""+Dc);return Bb+'\x3d"'+(K(Dc)+'"')}return b(Bb)?Bb+'\x3d"'+(K(Dc)+'"'):""}function k(Bb,Dc){return Bb===Dc&&(0!==Bb||1/Bb===1/Dc)||Bb!==Bb&&Dc!==Dc}function c(){if(null===ja)throw Error(u(321));return ja}function h(){if(0<Va)throw Error(u(312));return{memoizedState:null,queue:null,next:null}}function l(){null===ia?null===oa?(sa=!1,oa=ia=h()):(sa=!0,ia=oa):null===ia.next?(sa=!1,ia=ia.next=h()):(sa=!0,ia=ia.next);return ia}function n(Bb,Dc,Lc,Cc){for(;Fa;)Fa=!1,Va+=1,ia=null,Lc=Bb(Dc,Cc);F();
return Lc}function F(){ja=null;Fa=!1;oa=null;Va=0;ia=Qa=null}function w(Bb,Dc){return"function"===typeof Dc?Dc(Bb):Dc}function t(Bb,Dc,Lc){ja=c();ia=l();if(sa){var Cc=ia.queue;Dc=Cc.dispatch;if(null!==Qa&&(Lc=Qa.get(Cc),void 0!==Lc)){Qa.delete(Cc);Cc=ia.memoizedState;do Cc=Bb(Cc,Lc.action),Lc=Lc.next;while(null!==Lc);ia.memoizedState=Cc;return[Cc,Dc]}return[ia.memoizedState,Dc]}Bb=Bb===w?"function"===typeof Dc?Dc():Dc:void 0!==Lc?Lc(Dc):Dc;ia.memoizedState=Bb;Bb=ia.queue={last:null,dispatch:null};
Bb=Bb.dispatch=f.bind(null,ja,Bb);return[ia.memoizedState,Bb]}function r(Bb,Dc){ja=c();ia=l();Dc=void 0===Dc?null:Dc;if(null!==ia){var Lc=ia.memoizedState;if(null!==Lc&&null!==Dc){var Cc=Lc[1];a:if(null===Cc)Cc=!1;else{for(var Zc=0;Zc<Cc.length&&Zc<Dc.length;Zc++)if(!ma(Dc[Zc],Cc[Zc])){Cc=!1;break a}Cc=!0}if(Cc)return Lc[0]}}Bb=Bb();ia.memoizedState=[Bb,Dc];return Bb}function f(Bb,Dc,Lc){if(!(25>Va))throw Error(u(301));if(Bb===ja)if(Fa=!0,Bb={action:Lc,next:null},null===Qa&&(Qa=new Map),Lc=Qa.get(Dc),
void 0===Lc)Qa.set(Dc,Bb);else{for(Dc=Lc;null!==Dc.next;)Dc=Dc.next;Dc.next=Bb}}function G(){}function C(Bb){switch(Bb){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H(Bb){if(void 0===Bb||null===Bb)return Bb;var Dc="";P.Children.forEach(Bb,function(Lc){null!=Lc&&(Dc+=Lc)});return Dc}function Z(Bb,Dc){if(void 0===Bb)throw Error(u(152,W(Dc)||"Component"));}function I(Bb,Dc,Lc){function Cc(gd,
sd){var Ib=sd.prototype&&sd.prototype.isReactComponent,dc=q(sd,Dc,Lc,Ib),Zb=[],pb=!1,wb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Zb)return null},enqueueReplaceState:function(de,cf){pb=!0;Zb=[cf]},enqueueSetState:function(de,cf){if(null===Zb)return null;Zb.push(cf)}};if(Ib){if(Ib=new sd(gd.props,dc,wb),"function"===typeof sd.getDerivedStateFromProps){var ec=sd.getDerivedStateFromProps.call(null,gd.props,Ib.state);null!=ec&&(Ib.state=R({},Ib.state,ec))}}else if(ja={},
Ib=sd(gd.props,dc,wb),Ib=n(sd,gd.props,Ib,dc),null==Ib||null==Ib.render){Bb=Ib;Z(Bb,sd);return}Ib.props=gd.props;Ib.context=dc;Ib.updater=wb;wb=Ib.state;void 0===wb&&(Ib.state=wb=null);if("function"===typeof Ib.UNSAFE_componentWillMount||"function"===typeof Ib.componentWillMount)if("function"===typeof Ib.componentWillMount&&"function"!==typeof sd.getDerivedStateFromProps&&Ib.componentWillMount(),"function"===typeof Ib.UNSAFE_componentWillMount&&"function"!==typeof sd.getDerivedStateFromProps&&Ib.UNSAFE_componentWillMount(),
Zb.length){wb=Zb;var Nc=pb;Zb=null;pb=!1;if(Nc&&1===wb.length)Ib.state=wb[0];else{ec=Nc?wb[0]:Ib.state;var od=!0;for(Nc=Nc?1:0;Nc<wb.length;Nc++){var wd=wb[Nc];wd="function"===typeof wd?wd.call(Ib,ec,gd.props,dc):wd;null!=wd&&(od?(od=!1,ec=R({},ec,wd)):R(ec,wd))}Ib.state=ec}}else Zb=null;Bb=Ib.render();Z(Bb,sd);if("function"===typeof Ib.getChildContext&&(gd=sd.childContextTypes,"object"===typeof gd)){var Id=Ib.getChildContext(),ne;for(ne in Id)if(!(ne in gd))throw Error(u(108,W(sd)||"Unknown",ne));
}Id&&(Dc=R({},Dc,Id))}for(;P.isValidElement(Bb);){var Zc=Bb,kd=Zc.type;if("function"!==typeof kd)break;Cc(Zc,kd)}return{child:Bb,context:Dc}}var R=ba(19),P=ba(22),V=60106,U=60107,J=60108,E=60114,M=60109,Q=60110,O=60112,ka=60113,S=60120,aa=60115,X=60116,T=60121,ca=60117,Y=60119,pa=60129,va=60131;"function"===typeof Symbol&&Symbol.for&&(xa=Symbol.for,V=xa("react.portal"),U=xa("react.fragment"),J=xa("react.strict_mode"),E=xa("react.profiler"),M=xa("react.provider"),Q=xa("react.context"),O=xa("react.forward_ref"),
ka=xa("react.suspense"),S=xa("react.suspense_list"),aa=xa("react.memo"),X=xa("react.lazy"),T=xa("react.block"),ca=xa("react.fundamental"),Y=xa("react.scope"),pa=xa("react.debug_trace_mode"),va=xa("react.legacy_hidden"));xa=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var wa={},Ca=new Uint16Array(16);for(ba=0;15>ba;ba++)Ca[ba]=ba+1;Ca[15]=0;var Ba=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ka=Object.prototype.hasOwnProperty,Pa={},Xa={},Ya={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Bb){Ya[Bb]=new A(Bb,0,!1,Bb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Bb){var Dc=Bb[0];Ya[Dc]=new A(Dc,1,!1,Bb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Bb){Ya[Bb]=
new A(Bb,2,!1,Bb.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Bb){Ya[Bb]=new A(Bb,2,!1,Bb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Bb){Ya[Bb]=new A(Bb,3,!1,Bb.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(Bb){Ya[Bb]=new A(Bb,3,!0,Bb,null,!1,!1)});["capture","download"].forEach(function(Bb){Ya[Bb]=new A(Bb,4,!1,Bb,null,!1,!1)});["cols","rows","size","span"].forEach(function(Bb){Ya[Bb]=new A(Bb,6,!1,Bb,null,!1,!1)});["rowSpan","start"].forEach(function(Bb){Ya[Bb]=new A(Bb,5,!1,Bb.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Bb){var Dc=
Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Bb){var Dc=Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Bb){var Dc=Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Bb){Ya[Bb]=new A(Bb,1,!1,Bb.toLowerCase(),null,!1,!1)});
Ya.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Bb){Ya[Bb]=new A(Bb,1,!1,Bb.toLowerCase(),null,!0,!0)});var Ma=/["'&<>]/,ma="function"===typeof Object.is?Object.is:k,ja=null,oa=null,ia=null,sa=!1,Fa=!1,Qa=null,Va=0,Na=null,eb={readContext:function(Bb){var Dc=Na.threadID;y(Bb,Dc);return Bb[Dc]},useContext:function(Bb){c();var Dc=Na.threadID;y(Bb,Dc);return Bb[Dc]},useMemo:r,useReducer:t,useRef:function(Bb){ja=
c();ia=l();var Dc=ia.memoizedState;return null===Dc?(Bb={current:Bb},ia.memoizedState=Bb):Dc},useState:function(Bb){return t(w,Bb)},useLayoutEffect:function(){},useCallback:function(Bb,Dc){return r(function(){return Bb},Dc)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(Bb){c();return Bb},useTransition:function(){c();return[function(Bb){Bb()},!1]},useOpaqueIdentifier:function(){return(Na.identifierPrefix||"")+"R:"+(Na.uniqueID++).toString(36)},useMutableSource:function(Bb,
Dc){c();return Dc(Bb._source)}},ob={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Lb=R({menuitem:!0},ob),Cb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sb=["Webkit","ms","Moz","O"];Object.keys(Cb).forEach(function(Bb){sb.forEach(function(Dc){Dc=Dc+Bb.charAt(0).toUpperCase()+Bb.substring(1);Cb[Dc]=Cb[Bb]})});var Ja=/([A-Z])/g,cb=/^ms-/,lb=P.Children.toArray,
Rb=xa.ReactCurrentDispatcher,zb={listing:!0,pre:!0,textarea:!0},ac=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,fc={},Ec={},qc=Object.prototype.hasOwnProperty,Gb={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},nc=function(){function Bb(Lc,Cc,Zc){P.isValidElement(Lc)?Lc.type!==U?Lc=[Lc]:(Lc=Lc.props.children,Lc=P.isValidElement(Lc)?[Lc]:lb(Lc)):Lc=lb(Lc);Lc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Lc,childIndex:0,context:wa,footer:""};
var kd=Ca[0];if(0===kd){var gd=Ca;kd=gd.length;var sd=2*kd;if(!(65536>=sd))throw Error(u(304));var Ib=new Uint16Array(sd);Ib.set(gd);Ca=Ib;Ca[0]=kd+1;for(gd=kd;gd<sd-1;gd++)Ca[gd]=gd+1;Ca[sd-1]=0}else Ca[0]=Ca[kd];this.threadID=kd;this.stack=[Lc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Cc;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Zc&&Zc.identifierPrefix||""}
var Dc=Bb.prototype;Dc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Lc=this.threadID;Ca[Lc]=Ca[0];Ca[0]=Lc}};Dc.pushProvider=function(Lc){var Cc=++this.contextIndex,Zc=Lc.type._context,kd=this.threadID;y(Zc,kd);var gd=Zc[kd];this.contextStack[Cc]=Zc;this.contextValueStack[Cc]=gd;Zc[kd]=Lc.props.value};Dc.popProvider=function(){var Lc=this.contextIndex,Cc=this.contextStack[Lc],Zc=this.contextValueStack[Lc];this.contextStack[Lc]=null;this.contextValueStack[Lc]=
null;this.contextIndex--;Cc[this.threadID]=Zc};Dc.clearProviders=function(){for(var Lc=this.contextIndex;0<=Lc;Lc--)this.contextStack[Lc][this.threadID]=this.contextValueStack[Lc]};Dc.read=function(Lc){if(this.exhausted)return null;var Cc=Na;Na=this;var Zc=Rb.current;Rb.current=eb;try{for(var kd=[""],gd=!1;kd[0].length<Lc;){if(0===this.stack.length){this.exhausted=!0;var sd=this.threadID;Ca[sd]=Ca[0];Ca[0]=sd;break}var Ib=this.stack[this.stack.length-1];if(gd||Ib.childIndex>=Ib.children.length){var dc=
Ib.footer;""!==dc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Ib.type)this.currentSelectValue=null;else if(null!=Ib.type&&null!=Ib.type.type&&Ib.type.type.$$typeof===M)this.popProvider(Ib.type);else if(Ib.type===ka){this.suspenseDepth--;var Zb=kd.pop();if(gd){gd=!1;var pb=Ib.fallbackFrame;if(!pb)throw Error(u(303));this.stack.push(pb);kd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else kd[this.suspenseDepth]+=Zb}kd[this.suspenseDepth]+=dc}else{var wb=Ib.children[Ib.childIndex++],
ec="";try{ec+=this.render(wb,Ib.context,Ib.domNamespace)}catch(Nc){if(null!=Nc&&"function"===typeof Nc.then)throw Error(u(294));throw Nc;}finally{}kd.length<=this.suspenseDepth&&kd.push("");kd[this.suspenseDepth]+=ec}}return kd[0]}finally{Rb.current=Zc,Na=Cc,F()}};Dc.render=function(Lc,Cc,Zc){if("string"===typeof Lc||"number"===typeof Lc){Zc=""+Lc;if(""===Zc)return"";if(this.makeStaticMarkup)return K(Zc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+K(Zc);this.previousWasTextNode=!0;return K(Zc)}Cc=
I(Lc,Cc,this.threadID);Lc=Cc.child;Cc=Cc.context;if(null===Lc||!1===Lc)return"";if(!P.isValidElement(Lc)){if(null!=Lc&&null!=Lc.$$typeof){Zc=Lc.$$typeof;if(Zc===V)throw Error(u(257));throw Error(u(258,Zc.toString()));}Lc=lb(Lc);this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""});return""}var kd=Lc.type;if("string"===typeof kd)return this.renderDOM(Lc,Cc,Zc);switch(kd){case va:case pa:case J:case E:case S:case U:return Lc=lb(Lc.props.children),this.stack.push({type:null,
domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""}),"";case ka:throw Error(u(294));case Y:throw Error(u(343));}if("object"===typeof kd&&null!==kd)switch(kd.$$typeof){case O:ja={};var gd=kd.render(Lc.props,Lc.ref);gd=n(kd.render,Lc.props,gd,Lc.ref);gd=lb(gd);this.stack.push({type:null,domNamespace:Zc,children:gd,childIndex:0,context:Cc,footer:""});return"";case aa:return Lc=[P.createElement(kd.type,R({ref:Lc.ref},Lc.props))],this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,
context:Cc,footer:""}),"";case M:return kd=lb(Lc.props.children),Zc={type:Lc,domNamespace:Zc,children:kd,childIndex:0,context:Cc,footer:""},this.pushProvider(Lc),this.stack.push(Zc),"";case Q:kd=Lc.type;gd=Lc.props;var sd=this.threadID;y(kd,sd);kd=lb(gd.children(kd[sd]));this.stack.push({type:Lc,domNamespace:Zc,children:kd,childIndex:0,context:Cc,footer:""});return"";case ca:throw Error(u(338));case X:return kd=Lc.type,gd=kd._init,kd=gd(kd._payload),Lc=[P.createElement(kd,R({ref:Lc.ref},Lc.props))],
this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""}),""}throw Error(u(130,null==kd?kd:typeof kd,""));};Dc.renderDOM=function(Lc,Cc,Zc){var kd=Lc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Zc&&C(kd);if(!fc.hasOwnProperty(kd)){if(!ac.test(kd))throw Error(u(65,kd));fc[kd]=!0}var gd=Lc.props;if("input"===kd)gd=R({type:void 0},gd,{defaultChecked:void 0,defaultValue:void 0,value:null!=gd.value?gd.value:gd.defaultValue,checked:null!=gd.checked?gd.checked:gd.defaultChecked});
else if("textarea"===kd){var sd=gd.value;if(null==sd){sd=gd.defaultValue;var Ib=gd.children;if(null!=Ib){if(null!=sd)throw Error(u(92));if(Array.isArray(Ib)){if(!(1>=Ib.length))throw Error(u(93));Ib=Ib[0]}sd=""+Ib}null==sd&&(sd="")}gd=R({},gd,{value:void 0,children:""+sd})}else if("select"===kd)this.currentSelectValue=null!=gd.value?gd.value:gd.defaultValue,gd=R({},gd,{value:void 0});else if("option"===kd){Ib=this.currentSelectValue;var dc=H(gd.children);if(null!=Ib){var Zb=null!=gd.value?gd.value+
"":dc;sd=!1;if(Array.isArray(Ib))for(var pb=0;pb<Ib.length;pb++){if(""+Ib[pb]===Zb){sd=!0;break}}else sd=""+Ib===Zb;gd=R({selected:void 0,children:void 0},gd,{selected:sd,children:dc})}}if(sd=gd){if(Lb[kd]&&(null!=sd.children||null!=sd.dangerouslySetInnerHTML))throw Error(u(137,kd));if(null!=sd.dangerouslySetInnerHTML){if(null!=sd.children)throw Error(u(60));if(!("object"===typeof sd.dangerouslySetInnerHTML&&"__html"in sd.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=sd.style&&"object"!==
typeof sd.style)throw Error(u(62));}sd=gd;Ib=this.makeStaticMarkup;dc=1===this.stack.length;Zb="\x3c"+Lc.type;a:if(-1===kd.indexOf("-"))pb="string"===typeof sd.is;else switch(kd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":pb=!1;break a;default:pb=!0}for(cf in sd)if(qc.call(sd,cf)){var wb=sd[cf];if(null!=wb){if("style"===cf){var ec=void 0,Nc="",od="";for(ec in wb)if(wb.hasOwnProperty(ec)){var wd=
0===ec.indexOf("--"),Id=wb[ec];if(null!=Id){if(wd)var ne=ec;else if(ne=ec,Ec.hasOwnProperty(ne))ne=Ec[ne];else{var de=ne.replace(Ja,"-$1").toLowerCase().replace(cb,"-ms-");ne=Ec[ne]=de}Nc+=od+ne+":";od=ec;wd=null==Id||"boolean"===typeof Id||""===Id?"":wd||"number"!==typeof Id||0===Id||Cb.hasOwnProperty(od)&&Cb[od]?(""+Id).trim():Id+"px";Nc+=wd;od=";"}}wb=Nc||null}ec=null;pb?Gb.hasOwnProperty(cf)||(ec=cf,ec=b(ec)&&null!=wb?ec+'\x3d"'+(K(wb)+'"'):""):ec=g(cf,wb);ec&&(Zb+=" "+ec)}}Ib||dc&&(Zb+=' data-reactroot\x3d""');
var cf=Zb;sd="";ob.hasOwnProperty(kd)?cf+="/\x3e":(cf+="\x3e",sd="\x3c/"+Lc.type+"\x3e");a:{Ib=gd.dangerouslySetInnerHTML;if(null!=Ib){if(null!=Ib.__html){Ib=Ib.__html;break a}}else if(Ib=gd.children,"string"===typeof Ib||"number"===typeof Ib){Ib=K(Ib);break a}Ib=null}null!=Ib?(gd=[],zb.hasOwnProperty(kd)&&"\n"===Ib.charAt(0)&&(cf+="\n"),cf+=Ib):gd=lb(gd.children);Lc=Lc.type;Zc=null==Zc||"http://www.w3.org/1999/xhtml"===Zc?C(Lc):"http://www.w3.org/2000/svg"===Zc&&"foreignObject"===Lc?"http://www.w3.org/1999/xhtml":
Zc;this.stack.push({domNamespace:Zc,type:kd,children:gd,childIndex:0,context:Cc,footer:sd});this.previousWasTextNode=!1;return cf};return Bb}();D.renderToNodeStream=function(){throw Error(u(207));};D.renderToStaticMarkup=function(Bb,Dc){Bb=new nc(Bb,!0,Dc);try{return Bb.read(Infinity)}finally{Bb.destroy()}};D.renderToStaticNodeStream=function(){throw Error(u(208));};D.renderToString=function(Bb,Dc){Bb=new nc(Bb,!1,Dc);try{return Bb.read(Infinity)}finally{Bb.destroy()}};D.version="17.0.2"};
shadow$provide[617]=function(xa,ba,Sa,D){Sa.exports=ba(615)};
shadow$provide[618]=function(xa,ba,Sa,D){function u(){if(!mr&&(mr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mr(yu)}function W(a,d=0){return(pl[a[d+0]]+pl[a[d+1]]+pl[a[d+2]]+pl[a[d+3]]+"-"+pl[a[d+4]]+pl[a[d+5]]+"-"+pl[a[d+6]]+pl[a[d+7]]+"-"+pl[a[d+8]]+pl[a[d+9]]+"-"+pl[a[d+10]]+pl[a[d+11]]+pl[a[d+12]]+pl[a[d+13]]+pl[a[d+14]]+
pl[a[d+15]]).toLowerCase()}function y(a){let d=0;var m=0;for(var L of a)d+=L.w*L.h,m=Math.max(m,L.w);a.sort((ua,Ha)=>Ha.h-ua.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),m),h:Infinity}];let ha=L=0;for(const ua of a)for(a=m.length-1;0<=a;a--){var na=m[a];if(!(ua.w>na.w||ua.h>na.h)){ua.x=na.x;ua.y=na.y;ha=Math.max(ha,ua.y+ua.h);L=Math.max(L,ua.x+ua.w);ua.w===na.w&&ua.h===na.h?(na=m.pop(),a<m.length&&(m[a]=na)):ua.h===na.h?(na.x+=ua.w,na.w-=ua.w):(ua.w!==na.w&&m.push({x:na.x+ua.w,y:na.y,w:na.w-
ua.w,h:ua.h}),na.y+=ua.h,na.h-=ua.h);break}}return{w:L,h:ha,fill:d/(L*ha)||0}}function q(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,m=0){const L=[a[0]+d[0]/2,a[1]+d[1]/2],ha=Hd.rotWith(a,L,m),na=Hd.rotWith(Hd.add(a,[d[0],0]),L,m),ua=Hd.rotWith(Hd.add(a,d),L,m);a=Hd.rotWith(Hd.add(a,[0,d[1]]),L,m);return[["top",[ha,na]],["right",[na,ua]],["bottom",[ua,a]],["left",[a,ha]]]}function v(a,d,m,L){const [ha,na]=a,[ua,Ha]=d,[Ua,$a]=m,[jb,mb]=L;return Ha/ua!==(mb-$a)/(jb-Ua)&&
(d=ua*(mb-$a)-Ha*(jb-Ua),0!==d&&(a=((na-$a)*(jb-Ua)-(ha-Ua)*(mb-$a))/d,d=((na-$a)*ua-(ha-Ua)*Ha)/d,0<=a&&0<=d&&1>=d))?q("intersection",[ha+a*ua,na+a*Ha]):q("no intersection")}function x(a,d,m,L,ha=0){return c(m,L,ha,a,d)}function A(a,d,m,L=0){const {minX:ha,minY:na,width:ua,height:Ha}=m;return x(a,d,[ha,na],[ua,Ha],L)}function B(a,d,m,L){var ha=Hd.sub(a,m);m=Hd.sub(L,m);d=Hd.sub(d,a);L=m[0]*ha[1]-m[1]*ha[0];ha=d[0]*ha[1]-d[1]*ha[0];m=m[1]*d[0]-m[0]*d[1];return 0===L||0===ha?q("coincident"):0===m?
q("parallel"):0!==m&&(L/=m,ha/=m,0<=L&&1>=L&&0<=ha&&1>=ha)?q("intersection",Hd.add(a,Hd.mul(d,L))):q("no intersection")}function K(a,d,m,L){var ha=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),na=2*((d[0]-a[0])*(a[0]-m[0])+(d[1]-a[1])*(a[1]-m[1]));m=na*na-4*ha*(m[0]*m[0]+m[1]*m[1]+a[0]*a[0]+a[1]*a[1]-2*(m[0]*a[0]+m[1]*a[1])-L*L);if(0>m)return q("outside");if(0===m)return q("tangent");L=Math.sqrt(m);m=(-na+L)/(2*ha);ha=(-na-L)/(2*ha);if((0>m||1<m)&&(0>ha||1<ha))return 0>m&&0>ha||1<m&&1<ha?q("outside"):
q("inside");na=[];0<=m&&1>=m&&na.push(Hd.lrp(a,d,m));0<=ha&&1>=ha&&na.push(Hd.lrp(a,d,ha));return q("intersection",...na)}function g(a,d,m,L,ha,na=0){if(0===L||0===ha||Hd.isEqual(a,d))return q("no intersection");L=0>L?L:-L;ha=0>ha?ha:-ha;a=Hd.sub(Hd.rotWith(a,m,-na),m);d=Hd.sub(Hd.rotWith(d,m,-na),m);var ua=Hd.sub(d,a),Ha=ua[0]*ua[0]/L/L+ua[1]*ua[1]/ha/ha;ua=2*a[0]*ua[0]/L/L+2*a[1]*ua[1]/ha/ha;const Ua=[];L=ua*ua-4*Ha*(a[0]*a[0]/L/L+a[1]*a[1]/ha/ha-1);0===L?Ua.push(-ua/2/Ha):0<L&&(L=Math.sqrt(L),
Ua.push((-ua+L)/2/Ha),Ua.push((-ua-L)/2/Ha));Ha=Ua.filter($a=>0<=$a&&1>=$a).map($a=>Hd.add(m,Hd.add(a,Hd.mul(Hd.sub(d,a),$a)))).map($a=>Hd.rotWith($a,m,na));return q("intersection",...Ha)}function k(a,d,m){const L=[];for(let ha=1;ha<m.length;ha++){const na=B(a,d,m[ha-1],m[ha]);na&&L.push(...na.points)}return 0===L.length?q("no intersection"):q("intersection",...m)}function c(a,d,m,L,ha){return b(a,d,m).reduce((na,[ua,[Ha,Ua]])=>{(Ha=v(L,ha,Ha,Ua))&&na.push(q(ua,...Ha.points));return na},[]).filter(na=>
na.didIntersect)}function h(a,d,m,L){return b(a,d).reduce((ha,[na,[ua,Ha]])=>{(ua=B(m,L,ua,Ha))&&ha.push(q(na,...ua.points));return ha},[]).filter(ha=>ha.didIntersect)}function l(a,d,m,L){return b(a,d).reduce((ha,[na,[ua,Ha]])=>{(ua=K(ua,Ha,m,L))&&ha.push(Bf(qe({},ua),{message:na}));return ha},[]).filter(ha=>ha.didIntersect)}function n(a,d,m,L,ha,na=0){return b(a,d).reduce((ua,[Ha,[Ua,$a]])=>{(Ua=g(Ua,$a,m,L,ha,na))&&ua.push(Bf(qe({},Ua),{message:Ha}));return ua},[]).filter(ua=>ua.didIntersect)}function F(a,
d,m){return b(a,d).reduce((L,[ha,[na,ua]])=>{na=k(na,ua,m);na.didIntersect&&L.push(q(ha,...na.points));return L},[]).filter(L=>L.didIntersect)}function w(a,d,m){return b(a,d).reduce((L,[ha,[na,ua]])=>{{const Ha=[];for(let Ua=1;Ua<m.length+1;Ua++){const $a=B(na,ua,m[Ua-1],m[Ua%m.length]);$a&&Ha.push(...$a.points)}na=0===Ha.length?q("no intersection"):q("intersection",...m)}na.didIntersect&&L.push(q(ha,...na.points));return L},[]).filter(L=>L.didIntersect)}function t(a,d,m,L=0,ha,na){return d===m?l(ha,
na,a,d):n(ha,na,a,d,m,L)}function r(a,d,m){const {minX:L,minY:ha,width:na,height:ua}=a;return h([L,ha],[na,ua],d,m)}function f(a){for(var d=arguments.length,m=Array(1<d?d-1:0),L=1;L<d;L++)m[L-1]=arguments[L];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:px}function C(){Ga||f("Proxy not available")}function H(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function Z(a){return"function"===typeof a}function I(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function R(a){return null!==a&&"object"===typeof a}function P(a){if(!R(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===hb}function V(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function U(a,d,m){yp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:m})}function J(a,d,m){yp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:m})}function E(a,d){var m="isMobX"+a;d.prototype[m]=!0;return function(L){return R(L)&&!0===L[m]}}function M(a){return a instanceof Map}function Q(a){return a instanceof
Set}function O(a){var d=Object.keys(a);if(!oc)return d;var m=Object.getOwnPropertySymbols(a);return m.length?[].concat(d,m.filter(function(L){return cq.propertyIsEnumerable.call(a,L)})):d}function ka(a){return null===a?null:"object"===typeof a?""+a:a}function S(a,d){return cq.hasOwnProperty.call(a,d)}function aa(a,d){for(var m=0;m<d.length;m++){var L=d[m];L.enumerable=L.enumerable||!1;L.configurable=!0;"value"in L&&(L.writable=!0);Object.defineProperty(a,L.key,L)}}function X(a,d,m){d&&aa(a.prototype,
d);m&&aa(a,m);Object.defineProperty(a,"prototype",{writable:!1});return a}function T(){T=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a};return T.apply(this,arguments)}function ca(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;Y(a,d)}function Y(a,d){Y=Object.setPrototypeOf||function(m,L){m.__proto__=L;return m};return Y(a,d)}function pa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function va(a,d){if(a){if("string"===typeof a)return wa(a,d);var m=Object.prototype.toString.call(a).slice(8,-1);"Object"===m&&a.constructor&&(m=a.constructor.name);if("Map"===m||"Set"===m)return Array.from(a);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return wa(a,d)}}function wa(a,d){if(null==d||d>a.length)d=a.length;for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function Ca(a,d){var m="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(m)return(m=
m.call(a)).next.bind(m);if(Array.isArray(a)||(m=va(a))||d&&a&&"number"===typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ba(a){return Object.assign(function(d,m){Ka(d,m,a)},a)}function Ka(a,d,m){S(a,Nd)||U(a,Nd,T({},a[Nd]));m.annotationType_!==kh&&(a[Nd][d]=m)}function Pa(a){S(a,
Nd)||U(a,Nd,T({},a[Nd]));return a[Nd]}function Xa(a,d,m){void 0===d&&(d=Db);void 0===m&&(m=Db);a=new Ng(a);d!==Db&&id(fE,a,d,void 0);m!==Db&&he(a,m);return a}function Ya(a,d,m){return td(a)?a:Array.isArray(a)?df.array(a,{name:m}):P(a)?df.object(a,void 0,{name:m}):M(a)?df.map(a,{name:m}):Q(a)?df.set(a,{name:m}):"function"!==typeof a||wd(a)||Pd(a)?a:V(a)?Hu(a):Gu(m,a)}function Wa(a){return a}function Ma(a,d){return{annotationType_:a,options_:d,make_:ma,extend_:ja}}function ma(a,d,m,L){var ha;if(null!=
(ha=this.options_)&&ha.bound)return null===this.extend_(a,d,m,!1)?0:1;if(L===a.target_)return null===this.extend_(a,d,m,!1)?0:2;if(wd(m.value))return 1;a=oa(a,this,d,m,!1);yp(L,d,a);return 2}function ja(a,d,m,L){m=oa(a,this,d,m);return a.defineProperty_(d,m,L)}function oa(a,d,m,L,ha){var na,ua,Ha,Ua,$a,jb,mb;void 0===ha&&(ha=hg.safeDescriptors);L=L.value;if(null!=(na=d.options_)&&na.bound){var Kb;L=L.bind(null!=(Kb=a.proxy_)?Kb:a.target_)}return{value:zb(null!=(ua=null==(Ha=d.options_)?void 0:Ha.name)?
ua:m.toString(),L,null!=(Ua=null==($a=d.options_)?void 0:$a.autoAction)?Ua:!1,null!=(jb=d.options_)&&jb.bound?null!=(mb=a.proxy_)?mb:a.target_:void 0),configurable:ha?a.isPlainObject_:!0,enumerable:!1,writable:ha?!1:!0}}function ia(a,d){return{annotationType_:a,options_:d,make_:sa,extend_:Fa}}function sa(a,d,m,L){var ha;if(L===a.target_)return null===this.extend_(a,d,m,!1)?0:2;if(null!=(ha=this.options_)&&ha.bound&&(!S(a.target_,d)||!Pd(a.target_[d]))&&null===this.extend_(a,d,m,!1))return 0;if(Pd(m.value))return 1;
a=Qa(a,this,d,m,!1,!1);yp(L,d,a);return 2}function Fa(a,d,m,L){var ha;m=Qa(a,this,d,m,null==(ha=this.options_)?void 0:ha.bound);return a.defineProperty_(d,m,L)}function Qa(a,d,m,L,ha,na){void 0===na&&(na=hg.safeDescriptors);d=L.value;Pd(d)||(d=Hu(d));if(ha){var ua;d=d.bind(null!=(ua=a.proxy_)?ua:a.target_);d.isMobXFlow=!0}return{value:d,configurable:na?a.isPlainObject_:!0,enumerable:!1,writable:na?!1:!0}}function Va(a,d){return{annotationType_:a,options_:d,make_:Na,extend_:eb}}function Na(a,d,m){return null===
this.extend_(a,d,m,!1)?0:1}function eb(a,d,m,L){return a.defineComputedProperty_(d,T({},this.options_,{get:m.get,set:m.set}),L)}function ob(a,d){return{annotationType_:a,options_:d,make_:Lb,extend_:Cb}}function Lb(a,d,m){return null===this.extend_(a,d,m,!1)?0:1}function Cb(a,d,m,L){var ha,na;return a.defineObservableProperty_(d,m.value,null!=(ha=null==(na=this.options_)?void 0:na.enhancer)?ha:Ya,L)}function sb(a){return{annotationType_:"true",options_:a,make_:Ja,extend_:cb}}function Ja(a,d,m,L){var ha,
na;if(m.get)return Wf.make_(a,d,m,L);if(m.set){m=zb(d.toString(),m.set);if(L===a.target_)return null===a.defineProperty_(d,{configurable:hg.safeDescriptors?a.isPlainObject_:!0,set:m})?0:2;yp(L,d,{configurable:!0,set:m});return 2}if(L!==a.target_&&"function"===typeof m.value){var ua;if(V(m.value)){var Ha;return(null!=(Ha=this.options_)&&Ha.autoBind?Hu.bound:Hu).make_(a,d,m,L)}return(null!=(ua=this.options_)&&ua.autoBind?Gu.bound:Gu).make_(a,d,m,L)}ua=!1===(null==(ha=this.options_)?void 0:ha.deep)?
df.ref:df;if("function"===typeof m.value&&null!=(na=this.options_)&&na.autoBind){var Ua;m.value=m.value.bind(null!=(Ua=a.proxy_)?Ua:a.target_)}return ua.make_(a,d,m,L)}function cb(a,d,m,L){var ha,na;if(m.get)return Wf.extend_(a,d,m,L);if(m.set)return a.defineProperty_(d,{configurable:hg.safeDescriptors?a.isPlainObject_:!0,set:zb(d.toString(),m.set)},L);if("function"===typeof m.value&&null!=(ha=this.options_)&&ha.autoBind){var ua;m.value=m.value.bind(null!=(ua=a.proxy_)?ua:a.target_)}return(!1===(null==
(na=this.options_)?void 0:na.deep)?df.ref:df).extend_(a,d,m,L)}function lb(a){if(!0===a.deep)var d=Ya;else{if(!1===a.deep)a=Wa;else{a=a.defaultDecorator;var m;a=a?null!=(d=null==(m=a.options_)?void 0:m.enhancer)?d:Ya:Ya}d=a}return d}function Rb(a,d,m){if(I(d))Ka(a,d,we);else return td(a)?a:P(a)?df.object(a,d,m):Array.isArray(a)?df.array(a,d):M(a)?df.map(a,d):Q(a)?df.set(a,d):"object"===typeof a&&null!==a?a:df.box(a,d)}function zb(a,d,m,L){function ha(){a:{var na=L||this,ua=arguments,Ha=hg.trackingDerivation,
Ua=!m||!Ha;gd();var $a=hg.allowStateChanges;Ua&&(Bb(),$a=fc(!0));var jb=Dc(!0),mb=XD++,Kb=Qv;Qv=mb;try{var Vb=d.apply(na,ua);break a}catch(jc){var Ob=jc;throw jc;}finally{Qv!==mb&&f(30),Qv=Kb,void 0!==Ob&&(hg.suppressReactionErrors=!0),hg.allowStateChanges=$a,hg.allowStateReads=jb,sd(),Ua&&(hg.trackingDerivation=Ha),hg.suppressReactionErrors=!1}Vb=void 0}return Vb}void 0===m&&(m=!1);ha.isMobxAction=!0;YD&&(Az.value=a,Object.defineProperty(ha,"name",Az));return ha}function ac(a,d){a=fc(a);try{return d()}finally{hg.allowStateChanges=
a}}function fc(a){var d=hg.allowStateChanges;hg.allowStateChanges=a;return d}function Ec(a){switch(a.dependenciesState_){case Fj.UP_TO_DATE_:return!1;case Fj.NOT_TRACKING_:case Fj.STALE_:return!0;case Fj.POSSIBLY_STALE_:for(var d=Dc(!0),m=Bb(),L=a.observing_,ha=L.length,na=0;na<ha;na++){var ua=L[na];if(Fu(ua)){if(hg.disableErrorBoundaries)ua.get();else try{ua.get()}catch(Ha){return hg.trackingDerivation=m,hg.allowStateReads=d,!0}if(a.dependenciesState_===Fj.STALE_)return hg.trackingDerivation=m,hg.allowStateReads=
d,!0}}Lc(a);hg.trackingDerivation=m;hg.allowStateReads=d;return!1}}function qc(a,d,m){var L=Dc(!0);Lc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++hg.runId;var ha=hg.trackingDerivation;hg.trackingDerivation=a;hg.inBatch++;if(!0===hg.disableErrorBoundaries)var na=d.call(m);else try{na=d.call(m)}catch(jb){na=new Gs(jb)}hg.inBatch--;hg.trackingDerivation=ha;var ua=a.observing_;d=a.observing_=a.newObserving_;m=Fj.UP_TO_DATE_;ha=0;for(var Ha=a.unboundDepsCount_,Ua=
0;Ua<Ha;Ua++){var $a=d[Ua];0===$a.diffValue_&&($a.diffValue_=1,ha!==Ua&&(d[ha]=$a),ha++);$a.dependenciesState_>m&&(m=$a.dependenciesState_)}d.length=ha;a.newObserving_=null;for(Ha=ua.length;Ha--;)Ua=ua[Ha],0===Ua.diffValue_&&Zc(Ua,a),Ua.diffValue_=0;for(;ha--;)ua=d[ha],1===ua.diffValue_&&(ua.diffValue_=0,Ha=a,ua.observers_.add(Ha),ua.lowestObserverState_>Ha.dependenciesState_&&(ua.lowestObserverState_=Ha.dependenciesState_));m!==Fj.UP_TO_DATE_&&(a.dependenciesState_=m,a.onBecomeStale_());hg.allowStateReads=
L;return na}function Gb(a){var d=a.observing_;a.observing_=[];for(var m=d.length;m--;)Zc(d[m],a);a.dependenciesState_=Fj.NOT_TRACKING_}function nc(a){var d=Bb();try{return a()}finally{hg.trackingDerivation=d}}function Bb(){var a=hg.trackingDerivation;hg.trackingDerivation=null;return a}function Dc(a){var d=hg.allowStateReads;hg.allowStateReads=a;return d}function Lc(a){if(a.dependenciesState_!==Fj.UP_TO_DATE_){a.dependenciesState_=Fj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Fj.UP_TO_DATE_}}function Cc(){(hg.pendingReactions.length||hg.inBatch||hg.isRunningReactions)&&f(36);Bz=!0;if(Sv){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);hg=new Rv}}function Zc(a,d){a.observers_["delete"](d);0===a.observers_.size&&kd(a)}function kd(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,hg.pendingUnobservations.push(a))}function gd(){hg.inBatch++}function sd(){if(0===--hg.inBatch){0<hg.inBatch||hg.isRunningReactions||Tv(wb);for(var a=hg.pendingUnobservations,
d=0;d<a.length;d++){var m=a[d];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof Eu&&m.suspend_())}hg.pendingUnobservations=[]}}function Ib(a){var d=hg.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&hg.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<hg.inBatch&&kd(a);return!1}
function dc(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Fj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Fj.STALE_}))}function Zb(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.POSSIBLY_STALE_?d.dependenciesState_=Fj.STALE_:d.dependenciesState_===Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.UP_TO_DATE_)}))}function pb(a){a.lowestObserverState_===
Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.UP_TO_DATE_&&(d.dependenciesState_=Fj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function wb(){hg.isRunningReactions=!0;for(var a=hg.pendingReactions,d=0;0<a.length;){++d===bE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var m=a.splice(0),L=0,ha=m.length;L<ha;L++)m[L].runReaction_()}hg.isRunningReactions=!1}function ec(a){var d=Tv;Tv=function(m){return a(function(){return d(m)})}}
function Nc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function od(a){return function(d,m){if(Z(d))return zb(d.name||"\x3cunnamed action\x3e",d,a);if(Z(m))return zb(d,m,a);if(I(m))return Ka(d,m,a?Ez:Dz);if(I(d))return Ba(Ma(a?"autoAction":Cz,{name:d,autoAction:a}))}}function wd(a){return Z(a)&&!0===a.isMobxAction}function Id(a,d){function m(){a(Ua)}var L,ha;void 0===d&&(d=qa);var na=null!=(L=null==(ha=d)?void 0:ha.name)?L:"Autorun";if(d.scheduler||d.delay){var ua=
ne(d),Ha=!1;var Ua=new At(na,function(){Ha||(Ha=!0,ua(function(){Ha=!1;Ua.isDisposed_||Ua.track(m)}))},d.onError,d.requiresObservable)}else Ua=new At(na,function(){this.track(m)},d.onError,d.requiresObservable);Ua.schedule_();return Ua.getDisposer_()}function ne(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:eE}function de(a,d,m){function L(){jb=!1;if(!Ob.isDisposed_){var jc=!1;Ob.track(function(){var xc=ac(!1,function(){return a(Ob)});jc=$a||!Vb(mb,xc);Kb=mb;
mb=xc});$a&&m.fireImmediately?ua(mb,Kb,Ob):!$a&&jc&&ua(mb,Kb,Ob);$a=!1}}var ha;void 0===m&&(m=qa);var na=null!=(ha=m.name)?ha:"Reaction",ua=Tg(na,m.onError?cf(m.onError,d):d),Ha=!m.scheduler&&!m.delay,Ua=ne(m),$a=!0,jb=!1,mb,Kb,Vb=m.compareStructural?Ef.structural:m.equals||Ef["default"],Ob=new At(na,function(){$a||Ha?L():jb||(jb=!0,Ua(L))},m.onError,m.requiresObservable);Ob.schedule_();return Ob.getDisposer_()}function cf(a,d){return function(){try{return d.apply(this,arguments)}catch(m){a.call(this,
m)}}}function he(a,d,m){return id(gE,a,d,m)}function id(a,d,m,L){var ha="function"===typeof L?Mf(d,m):Mf(d),na=Z(L)?L:m,ua=a+"L";ha[ua]?ha[ua].add(na):ha[ua]=new Set([na]);return function(){var Ha=ha[ua];Ha&&(Ha["delete"](na),0===Ha.size&&delete ha[ua])}}function nb(a){!0===a.isolateGlobalState&&Cc();var d=a.useProxies,m=a.enforceActions;void 0!==d&&(hg.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(hg.verifyProxies=!0);void 0!==m&&(d="always"===m?"always":
"observed"===m,hg.enforceActions=d,hg.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(L){L in a&&(hg[L]=!!a[L])});hg.allowStateReads=!hg.observableRequiresReaction;a.reactionScheduler&&ec(a.reactionScheduler)}function yc(a,d,m,L){var ha=ed(d),na=ld(a,L)[ke];gd();try{Qc(ha).forEach(function(ua){na.extend_(ua,ha[ua],m?ua in m?m[ua]:!0:!0)})}finally{sd()}return a}
function zd(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(zd));return d}function ie(){this.message="FLOW_CANCELLED"}function Pd(a){return!0===(null==a?void 0:a.isMobXFlow)}function td(a,d){return a?void 0!==d?fe(a)?a[ke].values_.has(d):!1:fe(a)||!!a[ke]||di(a)||Uv(a)||Fu(a):!1}function Od(a){if(fe(a))return a[ke].ownKeys_();f(38)}function Xe(a,d,m){a.set(d,m);return m}function of(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!td(a))return a;if($D(a)||Fu(a))return of(a.get(),d);if(d.has(a))return d.get(a);if(Vc(a)){var m=Xe(d,a,Array(a.length));a.forEach(function(ua,Ha){m[Ha]=of(ua,d)});return m}if(Hs(a)){var L=Xe(d,a,new Set);a.forEach(function(ua){L.add(of(ua,d))});return L}if(zr(a)){var ha=Xe(d,a,new Map);a.forEach(function(ua,Ha){ha.set(Ha,of(ua,d))});return ha}var na=Xe(d,a,{});Od(a).forEach(function(ua){cq.propertyIsEnumerable.call(a,ua)&&(na[ua]=of(a[ua],d))});return na}function uc(a,d){return of(a,new Map)}
function Ve(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];"boolean"===typeof m[m.length-1]&&(a=m.pop());a:{switch(m.length){case 0:d=hg.trackingDerivation;break a;case 1:d=Mf(m[0]);break a;case 2:d=Mf(m[0],m[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===zt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?zt.BREAK:zt.LOG}function bd(a,d){void 0===d&&(d=void 0);gd();try{return a.apply(d)}finally{sd()}}function Fb(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Qb(a,d){var m=a.interceptors_||(a.interceptors_=[]);m.push(d);return H(function(){var L=m.indexOf(d);-1!==L&&m.splice(L,1)})}function Ra(a,d){var m=Bb();try{var L=[].concat(a.interceptors_||[]);a=0;for(var ha=L.length;a<ha&&((d=L[a](d))&&!d.type&&f(14),d);a++);return d}finally{hg.trackingDerivation=
m}}function Pb(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function tc(a,d){var m=a.changeListeners_||(a.changeListeners_=[]);m.push(d);return H(function(){var L=m.indexOf(d);-1!==L&&m.splice(L,1)})}function Jc(a,d){var m=Bb();if(a=a.changeListeners_){a=a.slice();for(var L=0,ha=a.length;L<ha;L++)a[L](d);hg.trackingDerivation=m}}function cd(a,d,m){var L=ld(a,m)[ke];gd();try{var ha;null!=(ha=d)?ha:d=Pa(a);Qc(d).forEach(function(na){return L.make_(na,d[na])})}finally{sd()}return a}
function ab(a,d,m,L){void 0===m&&(m="ObservableArray");void 0===L&&(L=!1);C();d=new tx(m,d,L,!1);J(d.values_,ke,d);m=new Proxy(d.values_,kE);d.proxy_=m;a&&a.length&&(L=fc(!0),d.spliceWithArray_(0,0,a),hg.allowStateChanges=L);return m}function ib(a,d){"function"===typeof Array.prototype[a]&&(Vv[a]=d(a))}function fb(a){return function(){var d=this[ke];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function vb(a){return function(d,m){var L=this,ha=this[ke];ha.atom_.reportObserved();
return ha.dehanceValues_(ha.values_)[a](function(na,ua){return d.call(m,na,ua,L)})}}function xb(a){return function(){var d=this,m=this[ke];m.atom_.reportObserved();m=m.dehanceValues_(m.values_);var L=arguments[0];arguments[0]=function(ha,na,ua){return L(ha,na,ua,d)};return m[a].apply(m,arguments)}}function Vc(a){return R(a)&&lE(a[ke])}function Wc(a){if(M(a)||zr(a))return a;if(Array.isArray(a))return new Map(a);if(P(a)){var d=new Map,m;for(m in a)d.set(m,a[m]);return d}return f(21,a)}function ld(a,
d){var m;if(S(a,ke))return a;var L=null!=(m=null==d?void 0:d.name)?m:"ObservableObject";m=Jz;var ha=new Map;L=String(L);var na;var ua=d?null!=(na=d.defaultDecorator)?na:sb(d):void 0;d=new m(a,ha,L,ua);U(a,ke,d);return a}function Md(a){return Iz[a]||(Iz[a]={get:function(){return this[ke].getObservablePropValue_(a)},set:function(d){return this[ke].setObservablePropValue_(a,d)}})}function fe(a){return R(a)?sE(a[ke]):!1}function ze(a){return{enumerable:!1,configurable:!0,get:function(){return this[ke].get_(a)},
set:function(d){this[ke].set_(a,d)}}}function ge(a){if(a>ux){for(var d=ux;d<a+100;d++)yp(vx.prototype,""+d,ze(d));ux=a}}function Ne(a,d,m){return new vx(a,d,m)}function Mf(a,d){if("object"===typeof a&&null!==a){if(Vc(a))return void 0!==d&&f(23),a[ke].atom_;if(Hs(a))return a[ke];if(zr(a)){if(void 0===d)return a.keysAtom_;var m=a.data_.get(d)||a.hasMap_.get(d);m||f(25,d,ub(a));return m}if(fe(a)){if(!d)return f(26);(m=a[ke].values_.get(d))||f(27,d,ub(a));return m}if(di(a)||Fu(a)||Uv(a))return a}else if(Z(a)&&
Uv(a[ke]))return a[ke];f(28)}function dg(a,d){a||f(29);if(void 0!==d)return dg(Mf(a,d));if(di(a)||Fu(a)||Uv(a)||zr(a)||Hs(a))return a;if(a[ke])return a[ke];f(24,a)}function ub(a,d){if(void 0!==d)a=Mf(a,d);else{if(wd(a))return a.name;a=fe(a)||zr(a)||Hs(a)?dg(a):Mf(a)}return a.name_}function ya(a,d,m){void 0===m&&(m=-1);return da(a,d,m)}function da(a,d,m,L,ha){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var na=typeof a;if("function"!==na&&"object"!==na&&"object"!=
typeof d)return!1;na=Lz.call(a);if(na!==Lz.call(d))return!1;switch(na){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=m&&m++}a=ta(a);d=ta(d);na="[object Array]"===na;if(!na){if("object"!=typeof a||"object"!=
typeof d)return!1;var ua=a.constructor,Ha=d.constructor;if(ua!==Ha&&!(Z(ua)&&ua instanceof ua&&Z(Ha)&&Ha instanceof Ha)&&"constructor"in a&&"constructor"in d)return!1}if(0===m)return!1;0>m&&(m=-1);L=L||[];ha=ha||[];for(ua=L.length;ua--;)if(L[ua]===a)return ha[ua]===d;L.push(a);ha.push(d);if(na){ua=a.length;if(ua!==d.length)return!1;for(;ua--;)if(!da(a[ua],d[ua],m-1,L,ha))return!1}else{na=Object.keys(a);ua=na.length;if(Object.keys(d).length!==ua)return!1;for(;ua--;)if(Ha=na[ua],!S(d,Ha)||!da(a[Ha],
d[Ha],m-1,L,ha))return!1}L.pop();ha.pop();return!0}function ta(a){return Vc(a)?a.slice():M(a)||zr(a)||Q(a)||Hs(a)?Array.from(a.entries()):a}function La(a){a[Symbol.iterator]=bb;return a}function bb(){return this}function Hb(a,d){const m=new Set(d),L=Object.values(a),ha=new Set(L.filter(na=>m.has(na.toId)||m.has(na.fromId)));a=ha.size;for(d=-1;0!==d;)ha.forEach(na=>{na=na.fromId;for(const ua of L)ua.fromId===na&&ha.add(ua),ua.toId===na&&ha.add(ua)}),d=ha.size-a,a=ha.size;return Array.from(ha.values())}
function kc(a,d,m,L,ha,na,ua,Ha){if(ha=d.getBindingPoint(ha,na,ua,Ha))return{id:L,type:"line",fromId:a.id,toId:d.id,handleId:m,point:me.toFixed(ha.point),distance:ha.distance}}function Kc(a,d){const m=a.getCenter(),L=d.getCenter();var ha=ek();ha=Bf(qe({},Iu.defaultProps),{id:ha,type:Iu.id,parentId:a.props.parentId,point:m});a=kc(ha,a,"start",ek(),m,m,me.uni(me.sub(L,m)),!1);d=kc(ha,d,"end",ek(),L,L,me.uni(me.sub(m,L)),!1);return a&&d?(ha.handles.start.point=[0,0],ha.handles.end.point=me.sub(L,m),
ha.handles.start.bindingId=a.id,ha.handles.end.bindingId=d.id,[ha,[a,d]]):null}function Yc(){return new BE}function Sd(){return new WeakMap}function Fd(a){if(!a)return Dx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Dx(a);if(~zE.call(d).indexOf("[native code]"))try{return new d}catch(m){}return Dx(a)}function Oe(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Se(a){return a.flags}function hf(a){a=
AE.call(a);return a.substring(8,a.length-1)}function He(a){return a[Symbol.toStringTag]||hf(a)}function Af(a){return xA(a).concat(Ex(a))}function Rf(a,d,m){for(var L=IE(a),ha=0,na=L.length,ua,Ha;ha<na;++ha)if(ua=L[ha],"callee"!==ua&&"caller"!==ua)if(Ha=GE(a,ua)){Ha.get||Ha.set||(Ha.value=m.copier(Ha.value,m));try{FE(d,ua,Ha)}catch(Ua){d[ua]=Ha.value}}else d[ua]=m.copier(a[ua],m);return d}function ig(a,d){var m=new d.Constructor;d.cache.set(a,m);a.forEach(function(L,ha){m.set(ha,d.copier(L,d))});return m}
function Xf(a,d){var m=Fd(d.prototype);d.cache.set(a,m);for(var L in a)zA.call(a,L)&&(m[L]=d.copier(a[L],d));return m}function tg(a,d){var m=Fd(d.prototype);d.cache.set(a,m);for(var L in a)zA.call(a,L)&&(m[L]=d.copier(a[L],d));L=Ex(a);for(var ha=0,na=L.length,ua;ha<na;++ha)ua=L[ha],HE.call(a,ua)&&(m[ua]=d.copier(a[ua],d));return m}function Ah(a,d){return new d.Constructor(a.valueOf())}function Og(a,d){return a}function Gh(a,d){var m=new d.Constructor;d.cache.set(a,m);a.forEach(function(L){m.add(d.copier(L,
d))});return m}function Hh(a){function d(na,ua){ua.prototype=ua.Constructor=void 0;if(!na||"object"!==typeof na)return na;if(ua.cache.has(na))return ua.cache.get(na);ua.prototype=na.__proto__||KE(na);ua.Constructor=ua.prototype&&ua.prototype.constructor;if(!ua.Constructor||ua.Constructor===Object)return ha(na,ua);if(JE(na))return L(na,ua);var Ha=m[EE(na)];return Ha?Ha(na,ua):"function"===typeof na.then?na:ha(na,ua)}a=Fx({},BA,a);var m={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:Ah,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:Ah,Object:a.object,Promise:Og,RegExp:a.regExp,Set:a.set,String:Ah,WeakMap:Og,WeakSet:Og,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},L=m.Array,ha=m.Object;return function(na){return d(na,{Constructor:void 0,cache:CE(),
copier:d,prototype:void 0})}}function Ei(a,d){return(0,OE.default)(a,d,{arrayMerge:(m,L,ha)=>L})}function Oi(a,d,m,L=!1){const [ha,na]=d,[ua,Ha]=m;a=ua+(a-ha)/(na-ha)*(Ha-ua);return L?ua<Ha?Math.max(Math.min(a,Ha),ua):Math.max(Math.min(a,ua),Ha):a}function Pi(a,d){return new Promise((m,L)=>{if("video"===d){const ha=document.createElement("video");ha.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);ha.src=a}else if("image"===d){const ha=new Image;ha.onload=()=>
m([ha.width,ha.height]);ha.src=a;ha.onerror=na=>L(na)}else"pdf"===d&&m([595,842])})}function uf(a){return Object.values(is).includes(a)}function wf(a,d){return uf(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function lg(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Vg(a,d,m=0){var L,ha,na;if(!a)return[16,32];let ua;ua="string"===typeof d?d:`${null!=(L=d.fontStyle)?L:"normal"} ${null!=(ha=d.fontVariant)?ha:"normal"} ${null!=(na=d.fontWeight)?na:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Gx.has(`${a}-${ua}-${m}`)){if(!Dr)return[10,
10];Dr.parentNode||document.body.appendChild(Dr);Dr.innerHTML=`${a}&#8203;`;Dr.style.font=ua;Dr.style.padding=m+"px";d=Dr.getBoundingClientRect();Gx.set(`${a}-${ua}-${m}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Gx.get(`${a}-${ua}-${m}`)}function Wg(a){try{if("string"!==typeof a||!bh.test(a))throw TypeError("Invalid UUID");let d;const m=new Uint8Array(16);m[0]=(d=parseInt(a.slice(0,8),16))>>>24;m[1]=d>>>16&255;m[2]=d>>>8&255;m[3]=d&255;m[4]=(d=parseInt(a.slice(9,13),16))>>>8;m[5]=d&
255;m[6]=(d=parseInt(a.slice(14,18),16))>>>8;m[7]=d&255;m[8]=(d=parseInt(a.slice(19,23),16))>>>8;m[9]=d&255;m[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;m[11]=d/4294967296&255;m[12]=d>>>24&255;m[13]=d>>>16&255;m[14]=d>>>8&255;m[15]=d&255;return!0}catch(d){return!1}}function Cg(a,d=0,m){let L;return function(...ha){null==m?void 0:m(...ha);clearTimeout(L);L=setTimeout(()=>a.apply(ha),d)}}function yb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Mb(){var a,d,m;return(null==
(m=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:m.call(d,"ui/developer-mode?"))||!1}function ic(a){return!!a}function gc(a=0){return new Promise(d=>setTimeout(d,a))}function Hc(a="noid"){Hx[a]||(Hx[a]=EA.createContext({}));return Hx[a]}function Gc(a="noid"){return EA.useContext(Hc(a))}function Cd(a){const {callbacks:d}=Gc(),m=DA.useRef(-1);return DA.useMemo(()=>{const L=ha=>{var na,ua;const {order:Ha=0}=ha;if(!Ha){var Ua=ha.target;Ua.removeEventListener("pointerup",
L);Ua.releasePointerCapture(ha.pointerId);null==(na=d.onPointerUp)?void 0:na.call(d,{type:"selection",handle:a,order:Ha},ha);na=Date.now();Ua=na-m.current;300<Ua?m.current=na:300>=Ua&&(null==(ua=d.onDoubleClick)?void 0:ua.call(d,{type:"selection",handle:a,order:Ha},ha),m.current=-1);ha.order=Ha+1}};return{onPointerDown:ha=>{var na;const {order:ua=0}=ha;if(!ua){var Ha=Td(ha.currentTarget);Ha.setPointerCapture(ha.pointerId);Ha.addEventListener("pointerup",L);null==(na=d.onPointerDown)?void 0:na.call(d,
{type:"selection",handle:a,order:ua},ha);ha.order=ua+1}},onPointerMove:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerMove)?void 0:na.call(d,{type:"selection",handle:a,order:ua},ha),ha.order=ua+1)},onPointerEnter:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerEnter)?void 0:na.call(d,{type:"selection",handle:a,order:ua},ha),ha.order=ua+1)},onPointerLeave:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerLeave)?void 0:na.call(d,{type:"selection",handle:a,order:ua},
ha),ha.order=ua+1)},onKeyDown:ha=>{var na;null==(na=d.onKeyDown)?void 0:na.call(d,{type:"selection",handle:a,order:-1},ha)},onKeyUp:ha=>{var na;null==(na=d.onKeyUp)?void 0:na.call(d,{type:"selection",handle:a,order:-1},ha)}}},[d])}function Td(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return Td(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function ae(a,d,m){const L=Ku.useRef(!1),ha=Ku.useCallback(()=>{var na;if(L.current){const ua=
null==(na=a.current)?void 0:na.getBoundingClientRect();ua&&(na={minX:ua.left,maxX:ua.left+ua.width,minY:ua.top,maxY:ua.top+ua.height,width:ua.width,height:ua.height},d.updateBounds(na),null==m?void 0:m(na))}else L.current=!0},[a,m]);Ku.useEffect(()=>{const na=a.current?RE(a.current):document,ua=Cg(ha,100);na.addEventListener("scroll",ua);window.addEventListener("resize",ua);return()=>{na.removeEventListener("scroll",ua);window.removeEventListener("resize",ua)}},[]);Ku.useLayoutEffect(()=>{const na=
new ResizeObserver(ua=>{ua[0].contentRect&&ha()});a.current&&na.observe(a.current);return()=>{na.disconnect()}},[a]);Ku.useEffect(()=>{ha();setTimeout(()=>{var na,ua;null==(ua=null==(na=a.current)?void 0:na.querySelector(".tl-canvas"))?void 0:ua.focus()})},[a])}function Fe(a,d){return Object.keys(d).reduce((m,L)=>{const ha=d[L];return ha?m+`${`--${a}-${L}`}: ${ha};
`:m},"")}function ud(a,d,m=".logseq-tldraw"){Ix.useLayoutEffect(()=>{const L=document.createElement("style"),ha=Fe(a,d);L.setAttribute("id",`${a}-theme`);L.setAttribute("data-selector",m);L.innerHTML=`
        ${m} {
          ${ha}
        }
      `;document.head.appendChild(L);return()=>{L&&document.head.contains(L)&&document.head.removeChild(L)}},[a,d,m])}function Pe(a,d){Ix.useLayoutEffect(()=>{if(Jx.get(a))return()=>{};const m=document.createElement("style");m.innerHTML=d;m.setAttribute("id",a);document.head.appendChild(m);Jx.set(a,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),Jx.delete(a))}},[a,d])}function ye(a,d){const m=Ix.useMemo(()=>qe(qe({},SE),a),[a]);ud("tl",m,d);Pe("tl-canvas",TE)}function De(a=
"noid"){Kx[a]||(Kx[a]=GA.createContext({}));return Kx[a]}function Ie(a="noid"){return GA.useContext(De(a))}function Ye(){const a=Ie(),{callbacks:d}=Gc(),m=FA.useRef(-1);return FA.useMemo(()=>({onPointerDown:L=>{var ha,na,ua;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:Ha=0}=L;Ha||(null==(ha=L.currentTarget)?void 0:ha.setPointerCapture(L.pointerId));L.isPrimary&&(null==(na=d.onPointerDown)?void 0:na.call(d,{type:"canvas",order:Ha},L),ha=Date.now(),na=ha-m.current,300<na?m.current=
ha:300>=na&&(null==(ua=d.onDoubleClick)?void 0:ua.call(d,{type:"canvas",order:Ha},L),m.current=-1))}},onPointerMove:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerMove)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onPointerUp:L=>{var ha,na;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:ua=0}=L;ua||(null==(ha=L.currentTarget)?void 0:ha.releasePointerCapture(L.pointerId));null==(na=d.onPointerUp)?void 0:na.call(d,
{type:"canvas",order:ua},L)}},onPointerEnter:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerEnter)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onPointerLeave:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerLeave)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onDrop:L=>wi(this,null,function*(){L.preventDefault();"clientX"in L&&a.drop(L.dataTransfer,[L.clientX,L.clientY])}),
onDragOver:L=>{L.preventDefault()},onTouchEnd:L=>{let ha=a.selectedTool.id;"pencil"!==ha&&"highlighter"!==ha||L.preventDefault()}}),[d])}function pf(a,d,m){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*m):a*d*m/(d+m*a)}function Nf(a,d,m,L=.15){return 0===L?Math.max(d,Math.min(a,m)):a<d?-pf(d-a,m-d,L)+d:a>m?+pf(a-m,m-d,L)+m:a}function qf(a,[d,m],[L,ha]){const [[na,ua],[Ha,Ua]]=a;return[Nf(d,na,ua,L),Nf(m,Ha,Ua,ha)]}function Yf(a,d,m){d in a?Object.defineProperty(a,d,{value:m,enumerable:!0,configurable:!0,
writable:!0}):a[d]=m;return a}function Xg(a,d){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(a);d&&(L=L.filter(function(ha){return Object.getOwnPropertyDescriptor(a,ha).enumerable}));m.push.apply(m,L)}return m}function yf(a){for(var d=1;d<arguments.length;d++){var m=null!=arguments[d]?arguments[d]:{};d%2?Xg(Object(m),!0).forEach(function(L){Yf(a,L,m[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):Xg(Object(m)).forEach(function(L){Object.defineProperty(a,
L,Object.getOwnPropertyDescriptor(m,L))})}return a}function Bg(a){return a?a[0].toUpperCase()+a.slice(1):""}function wh(a=!1,d){return a&&!UE.includes(d)}function Rg(a,d="",m=!1){const L=HA[a];d=L?L[d]||d:d;return"on"+Bg(a)+Bg(d)+(wh(m,d)?"Capture":"")}function Lf(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var m=VE.includes(a)?"capturecapture":"capture";(m=!!~a.indexOf(m))&&(a=a.replace("capture",""));return{device:a,capture:m,passive:d}}function ki(a,
d=""){const m=HA[a];return a+(m?m[d]||d:d)}function $g(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function vi(a){return Array.from(a.touches).filter(d=>{var m,L;return d.target===a.currentTarget||(null===(m=a.currentTarget)||void 0===m?void 0:null===(L=m.contains)||void 0===L?void 0:L.call(m,d.target))})}function lh(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function mf(a,d){const m=d.clientX-a.clientX,L=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(m,L))/Math.PI,distance:Math.hypot(m,L),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function ef(a){return vi(a).map(d=>d.identifier)}function vf(a,d){const [m,L]=Array.from(a.touches).filter(ha=>d.includes(ha.identifier));return mf(m,L)}function mh(a){const d=lh(a);return"touches"in a?d.identifier:d.pointerId}function fg(a){a=lh(a);return[a.clientX,a.clientY]}function ni(a){let {deltaX:d,deltaY:m,deltaMode:L}=a;1===L?(d*=40,m*=40):2===L&&(d*=800,
m*=800);return[d,m]}function Jg(a,...d){return"function"===typeof a?a(...d):a}function Bh(){}function Th(...a){return 0===a.length?Bh:1===a.length?a[0]:function(){let d;for(const m of a)d=m.apply(this,arguments)||d;return d}}function uj([a,d],m){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>m)return"x";if(d>a&&d>m)return"y"}function Gl(a){const [d,m]=a.overflow,[L,ha]=a._delta,[na,ua]=a._direction;if(0>d&&0<L&&0>na||0<d&&0>L&&0<na)a._movement[0]=a._movementBound[0];if(0>m&&0<ha&&0>ua||0<m&&0>ha&&0<ua)a._movement[1]=
a._movementBound[1]}function Rh(a){Lx.set(a.key,a.engine);Mx.set(a.key,a.resolver)}function Rk(a={},d){const m={};for(const [L,ha]of Object.entries(d))switch(typeof ha){case "function":m[L]=ha.call(m,a[L],L,a);break;case "object":m[L]=Rk(a[L],ha);break;case "boolean":ha&&(m[L]=a[L])}return m}function xj(a,d,m={}){const {target:L,eventOptions:ha,window:na,enabled:ua,transform:Ha}=a;var Ua=rF;if(null==a)a={};else{if(null==a)var $a={};else{$a={};var jb=Object.keys(a),mb;for(mb=0;mb<jb.length;mb++){var Kb=
jb[mb];0<=Ua.indexOf(Kb)||($a[Kb]=a[Kb])}}if(Object.getOwnPropertySymbols)for(mb=Object.getOwnPropertySymbols(a),Kb=0;Kb<mb.length;Kb++)jb=mb[Kb],0<=Ua.indexOf(jb)||Object.prototype.propertyIsEnumerable.call(a,jb)&&($a[jb]=a[jb]);a=$a}m.shared=Rk({target:L,eventOptions:ha,window:na,enabled:ua,transform:Ha},qF);if(d){var Vb=Mx.get(d);m[d]=Rk(yf({shared:m.shared},a),Vb)}else for(Vb in a)(d=Mx.get(Vb))&&(m[Vb]=Rk(yf({shared:m.shared},a[Vb]),d));return m}function tj(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new PA(a,d);a.gestureTimeoutStores[d]=new sF}function nj(a,d,m,L,ha,na){if(a.has(m)&&Lx.has(L)){var ua=m+"Start",Ha=m+"End";ha[L]=Ua=>{let $a=void 0;if(Ua.first&&ua in d)d[ua](Ua);m in d&&($a=d[m](Ua));if(Ua.last&&Ha in d)d[Ha](Ua);return $a};na[L]=na[L]||{}}}function Ke(a,d={},m,L){const ha=Nx.default.useMemo(()=>new tF(a),[]);ha.applyHandlers(a,L);ha.applyConfig(d,m);Nx.default.useEffect(ha.effect.bind(ha));Nx.default.useEffect(()=>ha.clean.bind(ha),[]);if(void 0===d.target)return ha.bind.bind(ha)}
function rh(a){a.forEach(Rh);return function(d,m){m=m||{};const L={},ha={},na=new Set;for(let Kb in d)uF.test(Kb)?(na.add(RegExp.lastMatch),ha[Kb]=d[Kb]):L[Kb]=d[Kb];const [ua,Ha,Ua]=[ha,L,na];d={};nj(Ua,ua,"onDrag","drag",d,m);nj(Ua,ua,"onWheel","wheel",d,m);nj(Ua,ua,"onScroll","scroll",d,m);nj(Ua,ua,"onPinch","pinch",d,m);nj(Ua,ua,"onMove","move",d,m);nj(Ua,ua,"onHover","hover",d,m);const {handlers:$a,nativeHandlers:jb,config:mb}={handlers:d,config:m,nativeHandlers:Ha};return Ke($a,mb,void 0,jb)}}
function Ti(a,d){return rh([kF,nF,oF,pF,mF,lF])(a,d||{})}function Lj(a){const {viewport:d,inputs:m,callbacks:L}=Gc(),ha=$v.useRef(void 0),na=$v.useRef([0,0]),ua=$v.useRef(0),Ha=$v.useMemo(()=>({onWheel:Ua=>{var $a;({event:Ua}=Ua);Ua.preventDefault();const {deltaY:jb,deltaX:mb}=Ua;var Kb=0;if(Ua.ctrlKey||Ua.metaKey){Kb=Math.sign(Ua.deltaY);let xc=jb;10<Math.abs(Ua.deltaY)&&(xc=10*Kb);Kb=xc}const [Vb,Ob,jc]=[mb,jb,Kb];"pinching"===m.state||ua.current>=Ua.timeStamp||(ua.current=Ua.timeStamp,(Ua.altKey||
Ua.ctrlKey||Ua.metaKey)&&0===Ua.buttons?(Kb=d.bounds,Ua=null!=($a=m.currentScreenPoint)?$a:[Kb.width/2,Kb.height/2],$a=d.camera.zoom,d.onZoom(Ua,$a-jc/100*$a)):($a=me.mul(Ua.shiftKey&&!yb()?[Ob,0]:[Vb,Ob],.8),me.isEqual($a,[0,0])||d.panCamera($a)))},onPinchStart:({event:Ua,delta:$a,offset:jb,origin:mb})=>{var Kb;const Vb=a.current;Ua instanceof WheelEvent||!(Ua.target===Vb||null!=Vb&&Vb.contains(Ua.target))||(null==(Kb=L.onPinchStart)?void 0:Kb.call(L,{type:"canvas",order:0,delta:[...$a,jb[0]],offset:jb,
point:me.sub(mb,m.containerOffset)},Ua),ha.current=mb,na.current=[0,0])},onPinchEnd:({event:Ua,offset:$a,origin:jb})=>{var mb;const Kb=a.current;Ua instanceof WheelEvent||!(Ua.target===Kb||null!=Kb&&Kb.contains(Ua.target))||"pinching"!==m.state||(null==(mb=L.onPinchEnd)?void 0:mb.call(L,{type:"canvas",order:0,delta:[0,0,$a[0]],offset:$a,point:me.sub(jb,m.containerOffset)},Ua),na.current=[0,0])},onPinch:({event:Ua,offset:$a,origin:jb})=>{var mb,Kb=a.current;if(!(Ua instanceof WheelEvent)&&(Ua.target===
Kb||null!=Kb&&Kb.contains(Ua.target))){ha.current||(ha.current=jb);Kb=me.sub(ha.current,jb);var Vb=me.sub(Kb,na.current);null==(mb=L.onPinch)?void 0:mb.call(L,{type:"canvas",order:0,delta:[...Vb,$a[0]],offset:$a,point:me.sub(jb,m.containerOffset)},Ua);na.current=Kb}}}),[L]);Ti(Ha,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:ep.maxZoom,min:ep.minZoom})}})}function Wj(a,d,m,L){Ox.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,m,d.rotation]);Ox.useLayoutEffect(()=>{const ha=a.current;ha.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;ha.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Ox.useLayoutEffect(()=>{const ha=a.current;void 0!==L&&(ha.style.zIndex=L.toString())},[L])}function En(a,d){const {onPersist:m,onError:L,onMount:ha,onCreateAssets:na,onCreateShapes:ua,onDeleteAssets:Ha,onDeleteShapes:Ua,onDrop:$a,
onPaste:jb,onCopy:mb,onCanvasDBClick:Kb}=d;RA.useLayoutEffect(()=>{const Vb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,ha&&ha(a,null),()=>{Vb.forEach(Ob=>Ob());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);RA.useLayoutEffect(()=>{const Vb=[];m&&Vb.push(a.subscribe("persist",m));L&&Vb.push(a.subscribe("error",L));ua&&Vb.push(a.subscribe("create-shapes",ua));na&&Vb.push(a.subscribe("create-assets",na));Ua&&Vb.push(a.subscribe("delete-shapes",Ua));Ha&&Vb.push(a.subscribe("delete-assets",
Ha));$a&&Vb.push(a.subscribe("drop",$a));jb&&Vb.push(a.subscribe("paste",jb));mb&&Vb.push(a.subscribe("copy",mb));Kb&&Vb.push(a.subscribe("canvas-dbclick",Kb));return()=>Vb.forEach(Ob=>Ob())},[a,m,L])}function Zn(a){if("app"in a)return a.app;const [d]=SA.useState(()=>new PE(a.model,a.Shapes,a.Tools,a.readOnly));SA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Zk(a,d){vF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function Rm(a){const d=Gc(),{viewport:{bounds:m}}=
d;wF.useEffect(()=>{const L=ua=>{ua.preventDefault()},ha=ua=>{if(0!==ua.touches.length){var Ha=ua.touches[0].pageX,Ua=ua.touches[0].radiusX||0;(10>Ha-Ua||Ha+Ua>m.width-10)&&ua.preventDefault()}},na=a.current;if(!na)return()=>{};na.addEventListener("touchstart",L,{passive:!0});na.addEventListener("gestureend",L,{passive:!0});na.addEventListener("gesturechange",L,{passive:!0});na.addEventListener("gesturestart",L,{passive:!0});na.addEventListener("touchstart",ha,{passive:!0});return()=>{na&&(na.removeEventListener("touchstart",
L),na.removeEventListener("gestureend",L),na.removeEventListener("gesturechange",L),na.removeEventListener("gesturestart",L),na.removeEventListener("touchstart",ha))}},[a,m.width])}function up(a,d){const {inputs:m,callbacks:L}=Gc();return xF.useMemo(()=>({onPointerDown:ha=>{var na,ua;const {order:Ha=0}=ha;Ha||(null==(na=ha.currentTarget)?void 0:na.setPointerCapture(ha.pointerId));na=a.props.handles[d];null==(ua=L.onPointerDown)?void 0:ua.call(L,{type:"handle",shape:a,handle:na,id:d,order:Ha},ha);
ha.order=Ha+1},onPointerMove:ha=>{var na;const {order:ua=0}=ha,Ha=a.props.handles[d];null==(na=L.onPointerMove)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onPointerUp:ha=>{var na,ua;const {order:Ha=0}=ha;Ha||(null==(na=ha.currentTarget)?void 0:na.releasePointerCapture(ha.pointerId));na=a.props.handles[d];null==(ua=L.onPointerUp)?void 0:ua.call(L,{type:"handle",shape:a,handle:na,id:d,order:Ha},ha);ha.order=Ha+1},onPointerEnter:ha=>{var na;const {order:ua=0}=
ha,Ha=a.props.handles[d];null==(na=L.onPointerEnter)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onPointerLeave:ha=>{var na;const {order:ua=0}=ha,Ha=a.props.handles[d];null==(na=L.onPointerLeave)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onKeyUp:ha=>{var na;const ua=a.props.handles[d];null==(na=L.onKeyUp)?void 0:na.call(L,{type:"handle",shape:a,handle:ua,id:d,order:-1},ha)},onKeyDown:ha=>{var na;const ua=a.props.handles[d];
null==(na=L.onKeyDown)?void 0:na.call(L,{type:"handle",shape:a,handle:ua,id:d,order:-1},ha)}}),[a.id,m,L])}function mk(a,d,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${m?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Hl(a,d,m=0){yF.useEffect(()=>{const L=a.current;L&&(L.style.cursor=
zF[d](cm.radiansToDegrees(m)))},[d,m])}function Tk(a){const {viewport:d}=Gc(),m=Ie();AF.useLayoutEffect(()=>Id(()=>{const L=Cg(()=>{var ha;null==(ha=a.current)?void 0:ha.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==m.inputs.state&&null!=d.camera.zoom&&L()}),[])}function Fn(a,d=0){const [m,L]=(0,TA.useState)(a);(0,TA.useEffect)(()=>{let ha=!1;const na=setTimeout(()=>{ha||L(a)},d);return()=>{ha=!0;clearTimeout(na)}},[a,d]);return m}function fm(){const a=Ie();UA.useEffect(()=>
{de(()=>qe({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);UA.useEffect(()=>{var d;const m=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");m?a.viewport.update(m):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Sm(a){a()}function yk(a){return zd(Mf(a,void 0))}function Tm(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+CF}}function Dh(a){var d=new Map,m=1,L=new a(function(ha){var na=d.get(ha);na&&(na.reaction.dispose(),d.delete(ha))});return{addReactionToTrack:function(ha,na,ua){var Ha=m++;L.register(ua,Ha,ha);ha.current=Tm(na);ha.current.finalizationRegistryCleanupToken=Ha;d.set(Ha,ha.current);return ha.current},recordReactionAsCommitted:function(ha){L.unregister(ha);ha.current&&ha.current.finalizationRegistryCleanupToken&&d.delete(ha.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function ym(){function a(){void 0===L&&(L=setTimeout(d,1E4))}function d(){L=void 0;var ha=Date.now();m.forEach(function(na){var ua=na.current;ua&&ha>=ua.cleanAt&&(ua.reaction.dispose(),na.current=null,m.delete(na))});0<m.size&&a()}var m=new Set,L;return{addReactionToTrack:function(ha,na,ua){ha.current=Tm(na);m.add(ha);a();return ha.current},recordReactionAsCommitted:function(ha){m.delete(ha)},forceCleanupTimerToRunNowForTests:function(){L&&(clearTimeout(L),
d())},resetCleanupScheduleForTests:function(){var ha;if(0<m.size){try{for(var na=DF(m),ua=na.next();!ua.done;ua=na.next()){var Ha=ua.value,Ua=Ha.current;Ua&&(Ua.reaction.dispose(),Ha.current=null)}}catch(jb){var $a={error:jb}}finally{try{ua&&!ua.done&&(ha=na.return)&&ha.call(na)}finally{if($a)throw $a.error;}}m.clear()}L&&(clearTimeout(L),L=void 0)}}}function gi(){return new GF}function Sj(a,d){void 0===d&&(d="observed");var m=XA(Nu.default.useState(gi),1)[0],L=XA(Nu.default.useState(),2)[1],ha=Nu.default.useRef(null);
if(!ha.current)var na=new At("observer".concat(d),function(){ua.mounted?L([]):ua.changedBeforeMount=!0}),ua=EF(ha,na,m);m=ha.current.reaction;Nu.default.useDebugValue(m,yk);Nu.default.useEffect(function(){FF(ha);ha.current?(ha.current.mounted=!0,ha.current.changedBeforeMount&&(ha.current.changedBeforeMount=!1,L([]))):(ha.current={reaction:new At("observer".concat(d),function(){L([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},L([]));return function(){ha.current.reaction.dispose();ha.current=
null}},[]);var Ha,Ua;m.track(function(){try{Ha=a()}catch($a){Ua=$a}});if(Ua)throw Ua;return Ha}function If(a,d){var m;if($A&&a.$$typeof===$A)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(m=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==m?m:!1;var L=a,ha=a.displayName||a.name;if(ZA&&a.$$typeof===ZA&&(d=!0,L=a.render,"function"!==typeof L))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
m=function(na,ua){return Sj(function(){return L(na,ua)},ha)};""!==ha&&(m.displayName=ha);a.contextTypes&&(m.contextTypes=a.contextTypes);d&&(m=(0,Jt.forwardRef)(m));m=(0,Jt.memo)(m);yj(a,m);return m}function yj(a,d){Object.keys(a).forEach(function(m){HF[m]||Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(a,m))})}function Xj(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Sj(a)}function Gn(a){const d=Ie(),{callbacks:m}=Gc(),L=aB.useRef(!1);aB.useEffect(()=>{const ha=Ua=>
{var $a,jb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(jb=m.onKeyDown)?void 0:jb.call(m,{type:"canvas",order:-1},Ua),L.current=Ua.shiftKey},na=Ua=>{var $a,jb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(jb=m.onKeyUp)?void 0:jb.call(m,{type:"canvas",order:-1},Ua),L.current=Ua.shiftKey},ua=Ua=>{var $a,jb,mb;!d.editingShape&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(jb=document.activeElement)?
void 0:jb.tagName)?mb:"")&&(Ua.preventDefault(),d.paste(Ua,L.current))},Ha=Ua=>{var $a,jb,mb;!d.editingShape&&0<d.selectedShapes.size&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(jb=document.activeElement)?void 0:jb.tagName)?mb:"")&&(Ua.preventDefault(),d.copy())};window.addEventListener("keydown",ha);window.addEventListener("keyup",na);document.addEventListener("paste",ua);document.addEventListener("copy",Ha);return()=>{window.removeEventListener("keydown",
ha);window.removeEventListener("keyup",na);document.removeEventListener("paste",ua);document.removeEventListener("copy",Ha)}},[])}function Il(a){const d=Ie(),{inputs:m,callbacks:L}=Gc(),ha=fB.useRef(-1);return fB.useMemo(()=>({onPointerDown:na=>{var ua,Ha;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ua=0}=na;Ua||(null==(ua=na.currentTarget)?void 0:ua.setPointerCapture(na.pointerId));null==(Ha=L.onPointerDown)?void 0:Ha.call(L,{type:"shape",shape:a,order:Ua},na);na.order=
Ua+1}},onPointerMove:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerMove)?void 0:ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onPointerUp:na=>{var ua,Ha,Ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:$a=0}=na;$a||(null==(ua=na.currentTarget)?void 0:ua.releasePointerCapture(na.pointerId));null==(Ha=L.onPointerUp)?void 0:Ha.call(L,{type:"shape",shape:a,order:$a},na);ua=Date.now();Ha=ua-
ha.current;300<Ha?ha.current=ua:300>=Ha&&(null==(Ua=L.onDoubleClick)?void 0:Ua.call(L,{type:"shape",shape:a,order:$a},na),ha.current=-1);na.order=$a+1}},onPointerEnter:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerEnter)?void 0:ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onPointerLeave:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerLeave)?void 0:
ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onKeyUp:na=>{var ua;null==(ua=L.onKeyUp)?void 0:ua.call(L,{type:"shape",shape:a,order:-1},na)},onKeyDown:na=>{var ua;null==(ua=L.onKeyDown)?void 0:ua.call(L,{type:"shape",shape:a,order:-1},na)}}),[a.id,m,L])}function sn(a){var {viewport:d,inputs:m,callbacks:L,components:ha}=a;a=ag(a,["viewport","inputs","callbacks","components"]);return(0,xB.jsx)(aG,{id:a.id,viewport:d,inputs:m,callbacks:L,components:ha,meta:a.meta,children:(0,xB.jsx)(XF,
qe({},a))})}function nf(){nf=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a};return nf.apply(this,arguments)}function vg(a,d,{checkForDefaultPrevented:m=!0}={}){return function(L){null===a||void 0===a||a(L);if(!1===m||!L.defaultPrevented)return null===d||void 0===d?void 0:d(L)}}function hh(...a){return d=>a.forEach(m=>{"function"===typeof m?m(d):null!==m&&void 0!==m&&
(m.current=d)})}function Uh(...a){return(0,fG.useCallback)(hh(...a),a)}function oj(a,d=[]){let m=[];const L=()=>{const ha=m.map(na=>(0,Ms.createContext)(na));return function(na){const ua=(null===na||void 0===na?void 0:na[a])||ha;return(0,Ms.useMemo)(()=>({[`__scope${a}`]:Bf(qe({},na),{[a]:ua})}),[na,ua])}};L.scopeName=a;return[function(ha,na){function ua($a){const {scope:jb,children:mb}=$a,Kb=ag($a,["scope","children"]);$a=(null===jb||void 0===jb?void 0:jb[a][Ua])||Ha;const Vb=(0,Ms.useMemo)(()=>
Kb,Object.values(Kb));return(0,Ms.createElement)($a.Provider,{value:Vb},mb)}const Ha=(0,Ms.createContext)(na),Ua=m.length;m=[...m,na];ua.displayName=ha+"Provider";return[ua,function($a,jb){if(jb=(0,Ms.useContext)((null===jb||void 0===jb?void 0:jb[a][Ua])||Ha))return jb;if(void 0!==na)return na;throw Error(`\`${$a}\` must be used within \`${ha}\``);}]},ql(L,...d)]}function ql(...a){const d=a[0];if(1===a.length)return d;const m=()=>{const L=a.map(ha=>({useScope:ha(),scopeName:ha.scopeName}));return function(ha){const na=
L.reduce((ua,{useScope:Ha,scopeName:Ua})=>{Ha=Ha(ha)[`__scope${Ua}`];return qe(qe({},ua),Ha)},{});return(0,Ms.useMemo)(()=>({[`__scope${d.scopeName}`]:na}),[na])}};m.scopeName=d.scopeName;return m}function Yg(a){return(0,bn.isValidElement)(a)&&a.type===yB}function rl(a,d){const m=qe({},d);for(const L in d){const ha=a[L],na=d[L];/^on[A-Z]/.test(L)?ha&&na?m[L]=(...ua)=>{na(...ua);ha(...ua)}:ha&&(m[L]=ha):"style"===L?m[L]=qe(qe({},ha),na):"className"===L&&(m[L]=[ha,na].filter(Boolean).join(" "))}return qe(qe({},
a),m)}function $k(a,d){a&&(0,gG.flushSync)(()=>a.dispatchEvent(d))}function ij(a){const d=(0,Zx.useRef)(a);(0,Zx.useEffect)(()=>{d.current=a});return(0,Zx.useMemo)(()=>(...m)=>{var L;return null===(L=d.current)||void 0===L?void 0:L.call(d,...m)},[])}function Uk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(a);(0,hG.useEffect)(()=>{const L=ha=>{"Escape"===ha.key&&m(ha)};d.addEventListener("keydown",L);return()=>d.removeEventListener("keydown",L)},[m,d])}function Kj(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(a),L=(0,ao.useRef)(!1),ha=(0,ao.useRef)(()=>{});(0,ao.useEffect)(()=>{const na=Ha=>{if(Ha.target&&!L.current){let Ua=function(){al("dismissableLayer.pointerDownOutside",m,$a,{discrete:!0})};const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",ha.current),ha.current=Ua,d.addEventListener("click",ha.current,{once:!0})):Ua()}L.current=!1},ua=window.setTimeout(()=>{d.addEventListener("pointerdown",
na)},0);return()=>{window.clearTimeout(ua);d.removeEventListener("pointerdown",na);d.removeEventListener("click",ha.current)}},[d,m]);return{onPointerDownCapture:()=>L.current=!0}}function Jj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(a),L=(0,ao.useRef)(!1);(0,ao.useEffect)(()=>{const ha=na=>{na.target&&!L.current&&al("dismissableLayer.focusOutside",m,{originalEvent:na},{discrete:!1})};d.addEventListener("focusin",ha);return()=>d.removeEventListener("focusin",
ha)},[d,m]);return{onFocusCapture:()=>L.current=!0,onBlurCapture:()=>L.current=!1}}function nl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function al(a,d,m,{discrete:L}){const ha=m.originalEvent.target;m=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:m});d&&ha.addEventListener(a,d,{once:!0});L?$k(ha,m):ha.dispatchEvent(m)}function Ai(a){const [d,m]=AB.useState(kG());Fm(()=>{a||m(L=>null!==L&&void 0!==L?L:String(lG++))},[a]);return a||(d?`radix-${d}`:"")}function aj(a){return a.split("-")[0]}
function ol(a){return["top","bottom"].includes(aj(a))?"x":"y"}function bl(a){return"y"===a?"height":"width"}function zj(a,d,m){let {reference:L,floating:ha}=a;var na=L.x+L.width/2-ha.width/2;const ua=L.y+L.height/2-ha.height/2;a=ol(d);var Ha=bl(a);Ha=L[Ha]/2-ha[Ha]/2;const Ua="x"===a;switch(aj(d)){case "top":na={x:na,y:L.y-ha.height};break;case "bottom":na={x:na,y:L.y+L.height};break;case "right":na={x:L.x+L.width,y:ua};break;case "left":na={x:L.x-ha.width,y:ua};break;default:na={x:L.x,y:L.y}}switch(d.split("-")[1]){case "start":na[a]-=
Ha*(m&&Ua?-1:1);break;case "end":na[a]+=Ha*(m&&Ua?-1:1)}return na}function im(a){return"number"!=typeof a?qe({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function zm(a){return Bf(qe({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Sk(a,d){return wi(this,null,function*(){var m;void 0===d&&(d={});const {x:L,y:ha,platform:na,rects:ua,elements:Ha,strategy:Ua}=a,{boundary:$a="clippingAncestors",rootBoundary:jb="viewport",elementContext:mb="floating",altBoundary:Kb=
!1,padding:Vb=0}=d,Ob=im(Vb),jc=Ha[Kb?"floating"===mb?"reference":"floating":mb],xc=zm(yield na.getClippingRect({element:null==(m=yield null==na.isElement?void 0:na.isElement(jc))||m?jc:jc.contextElement||(yield null==na.getDocumentElement?void 0:na.getDocumentElement(Ha.floating)),boundary:$a,rootBoundary:jb,strategy:Ua}));m=zm(na.convertOffsetParentRelativeRectToViewportRelativeRect?yield na.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===mb?Bf(qe({},ua.floating),{x:L,y:ha}):
ua.reference,offsetParent:yield null==na.getOffsetParent?void 0:na.getOffsetParent(Ha.floating),strategy:Ua}):ua[mb]);return{top:xc.top-m.top+Ob.top,bottom:m.bottom-xc.bottom+Ob.bottom,left:xc.left-m.left+Ob.left,right:m.right-xc.right+Ob.right}})}function Um(a){return a.replace(/left|right|bottom|top/g,d=>nG[d])}function In(a,d,m){void 0===m&&(m=!1);const L=a.split("-")[1],ha=ol(a);a=bl(ha);m="x"===ha?L===(m?"end":"start")?"right":"left":"start"===L?"bottom":"top";return d.reference[a]>d.floating[a]&&
(m=Um(m)),{main:m,cross:Um(m)}}function hm(a){return a.replace(/start|end/g,d=>oG[d])}function Xb(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function Ta(a){return CB.some(d=>0<=a[d])}function Bc(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Ac(a){return Bc(a).getComputedStyle(a)}function Yb(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function wc(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function rc(a){return a instanceof Bc(a).HTMLElement}function Tb(a){return a instanceof Bc(a).Element}function Sb(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Bc(a).ShadowRoot||a instanceof ShadowRoot}function mc(a){const {overflow:d,overflowX:m,overflowY:L}=Ac(a);return/auto|scroll|overlay|hidden/.test(d+L+m)}function Sc(a){const d=
/firefox/i.test(wc());a=Ac(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function ad(){return!/^((?!chrome|android).)*safari/i.test(wc())}function fd(a,d,m){var L,ha,na,ua;void 0===d&&(d=!1);void 0===m&&(m=!1);var Ha=a.getBoundingClientRect();let Ua=1,$a=1;d&&rc(a)&&(Ua=0<a.offsetWidth&&hw(Ha.width)/a.offsetWidth||1,$a=0<a.offsetHeight&&hw(Ha.height)/a.offsetHeight||
1);a=Tb(a)?Bc(a):window;d=!ad()&&m;m=(Ha.left+(d&&null!=(L=null==(ha=a.visualViewport)?void 0:ha.offsetLeft)?L:0))/Ua;L=(Ha.top+(d&&null!=(na=null==(ua=a.visualViewport)?void 0:ua.offsetTop)?na:0))/$a;na=Ha.width/Ua;Ha=Ha.height/$a;return{width:na,height:Ha,top:L,right:m+na,bottom:L+Ha,left:m,x:m,y:L}}function xd(a){return(d=a,(d instanceof Bc(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function je(a){return Tb(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function Qe(a){return fd(xd(a)).left+je(a).scrollLeft}function ue(a){return"html"===Yb(a)?a:a.assignedSlot||a.parentNode||(Sb(a)?a.host:null)||xd(a)}function Ee(a){return rc(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function Kf(a){for(var d=Bc(a),m=Ee(a);m&&["table","td","th"].includes(Yb(m))&&"static"===getComputedStyle(m).position;)m=Ee(m);if(!m||"html"!==Yb(m)&&("body"!==Yb(m)||"static"!==getComputedStyle(m).position||Sc(m))){if(!m)a:{a=ue(a);for(Sb(a)&&
(a=a.host);rc(a)&&!["html","body"].includes(Yb(a));){if(Sc(a)){m=a;break a}a=a.parentNode}m=null}d=m||d}return d}function Vf(a){if(rc(a))return{width:a.offsetWidth,height:a.offsetHeight};a=fd(a);return{width:a.width,height:a.height}}function Ge(a){const d=ue(a);return["html","body","#document"].includes(Yb(d))?a.ownerDocument.body:rc(d)&&mc(d)?d:Ge(d)}function ch(a,d){var m;void 0===d&&(d=[]);var L=Ge(a);a=L===(null==(m=a.ownerDocument)?void 0:m.body);m=Bc(L);L=a?[m].concat(m.visualViewport||[],mc(L)?
L:[]):L;d=d.concat(L);return a?d:d.concat(ch(L))}function Ch(a,d,m){return"viewport"===d?zm(function(L,ha){var na=Bc(L),ua=xd(L);na=na.visualViewport;L=ua.clientWidth;ua=ua.clientHeight;let Ha=0,Ua=0;if(na){L=na.width;ua=na.height;const $a=ad();($a||!$a&&"fixed"===ha)&&(Ha=na.offsetLeft,Ua=na.offsetTop)}return{width:L,height:ua,x:Ha,y:Ua}}(a,m)):Tb(d)?function(L,ha){var na=fd(L,!1,"fixed"===ha);ha=na.top+L.clientTop;na=na.left+L.clientLeft;return{top:ha,left:na,x:na,y:ha,right:na+L.clientWidth,bottom:ha+
L.clientHeight,width:L.clientWidth,height:L.clientHeight}}(d,m):zm(function(L){var ha;const na=xd(L);var ua=je(L);const Ha=null==(ha=L.ownerDocument)?void 0:ha.body;ha=Pu(na.scrollWidth,na.clientWidth,Ha?Ha.scrollWidth:0,Ha?Ha.clientWidth:0);const Ua=Pu(na.scrollHeight,na.clientHeight,Ha?Ha.scrollHeight:0,Ha?Ha.clientHeight:0);L=-ua.scrollLeft+Qe(L);ua=-ua.scrollTop;return"rtl"===Ac(Ha||na).direction&&(L+=Pu(na.clientWidth,Ha?Ha.clientWidth:0)-ha),{width:ha,height:Ua,x:L,y:ua}}(xd(a)))}function yg(a){const d=
ch(a),m=["absolute","fixed"].includes(Ac(a).position)&&rc(a)?Kf(a):a;return Tb(m)?d.filter(L=>{var ha;if(ha=Tb(L))a:if(ha=null==m.getRootNode?void 0:m.getRootNode(),L.contains(m))ha=!0;else{if(ha&&Sb(ha)){ha=m;do{if(ha&&L===ha){ha=!0;break a}ha=ha.parentNode||ha.host}while(ha)}ha=!1}return ha&&"body"!==Yb(L)}):[]}function zg(a,d,m,L){void 0===L&&(L={});const {ancestorScroll:ha=!0,ancestorResize:na=!0,elementResize:ua=!0,animationFrame:Ha=!1}=L,Ua=ha&&!Ha,$a=na&&!Ha,jb=Ua||$a?[...(Tb(a)?ch(a):[]),
...ch(d)]:[];jb.forEach(Ob=>{Ua&&Ob.addEventListener("scroll",m,{passive:!0});$a&&Ob.addEventListener("resize",m)});let mb,Kb=null;if(ua){let Ob=!0;Kb=new ResizeObserver(()=>{Ob||m();Ob=!1});Tb(a)&&!Ha&&Kb.observe(a);Kb.observe(d)}let Vb=Ha?fd(a):null;return Ha&&function jc(){const xc=fd(a);!Vb||xc.x===Vb.x&&xc.y===Vb.y&&xc.width===Vb.width&&xc.height===Vb.height||m();Vb=xc;mb=requestAnimationFrame(jc)}(),m(),()=>{var jc;jb.forEach(xc=>{Ua&&xc.removeEventListener("scroll",m);$a&&xc.removeEventListener("resize",
m)});null==(jc=Kb)||jc.disconnect();Kb=null;Ha&&cancelAnimationFrame(mb)}}function sh(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let m,L;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var ha=a.length;if(ha!=d.length)return!1;for(m=ha;0!==m--;)if(!sh(a[m],d[m]))return!1;return!0}L=Object.keys(a);ha=L.length;if(ha!==Object.keys(d).length)return!1;for(m=ha;0!==m--;)if(!Object.prototype.hasOwnProperty.call(d,L[m]))return!1;
for(m=ha;0!==m--;)if(ha=L[m],!("_owner"===ha&&a.$$typeof||sh(a[ha],d[ha])))return!1;return!0}return a!==a&&d!==d}function Ih(a){const d=Fo.useRef(a);by(()=>{d.current=a});return d}function Dg(a){let {middleware:d,placement:m="bottom",strategy:L="absolute",whileElementsMounted:ha}=void 0===a?{}:a;const na=Fo.useRef(null),ua=Fo.useRef(null),Ha=Ih(ha),Ua=Fo.useRef(null),[$a,jb]=Fo.useState({x:null,y:null,strategy:L,placement:m,middlewareData:{}}),[mb,Kb]=Fo.useState(d);sh(null==mb?void 0:mb.map(lc=>
{({options:lc}=lc);return lc}),null==d?void 0:d.map(lc=>{({options:lc}=lc);return lc}))||Kb(d);const Vb=Fo.useCallback(()=>{na.current&&ua.current&&rG(na.current,ua.current,{middleware:mb,placement:m,strategy:L}).then(lc=>{Ob.current&&sG.flushSync(()=>{jb(lc)})})},[mb,m,L]);by(()=>{Ob.current&&Vb()},[Vb]);const Ob=Fo.useRef(!1);by(()=>{Ob.current=!0;return()=>{Ob.current=!1}},[]);const jc=Fo.useCallback(()=>{"function"===typeof Ua.current&&(Ua.current(),Ua.current=null);if(na.current&&ua.current)if(Ha.current){const lc=
Ha.current(na.current,ua.current,Vb);Ua.current=lc}else Vb()},[Vb,Ha]),xc=Fo.useCallback(lc=>{na.current=lc;jc()},[jc]),bc=Fo.useCallback(lc=>{ua.current=lc;jc()},[jc]),pc=Fo.useMemo(()=>({reference:na,floating:ua}),[]);return Fo.useMemo(()=>Bf(qe({},$a),{update:Vb,refs:pc,reference:xc,floating:bc}),[$a,Vb,pc,xc,bc])}function xi(a){const [d,m]=(0,uG.useState)(void 0);Fm(()=>{if(a){m({width:a.offsetWidth,height:a.offsetHeight});const L=new ResizeObserver(ha=>{if(Array.isArray(ha)&&ha.length){ha=ha[0];
if("borderBoxSize"in ha){ha=ha.borderBoxSize;var na=Array.isArray(ha)?ha[0]:ha;ha=na.inlineSize;na=na.blockSize}else ha=a.offsetWidth,na=a.offsetHeight;m({width:ha,height:na})}});L.observe(a,{box:"border-box"});return()=>L.unobserve(a)}m(void 0)},[a]);return d}function fk(a){return void 0!==a}function Kg(a){return null!==a}function bj(a){const [d,m="center"]=a.split("-");return[d,m]}function jm(a,d){return(0,Qq.useReducer)((m,L)=>{L=d[m][L];return null!==L&&void 0!==L?L:m},a)}function ih(a){const [d,
m]=(0,Qq.useState)(),L=(0,Qq.useRef)({}),ha=(0,Qq.useRef)(a),na=(0,Qq.useRef)("none"),[ua,Ha]=jm(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Qq.useEffect)(()=>{const Ua=pj(L.current);na.current="mounted"===ua?Ua:"none"},[ua]);Fm(()=>{const Ua=L.current,$a=ha.current;if($a!==a){const jb=na.current,mb=pj(Ua);a?Ha("MOUNT"):"none"===mb||"none"===(null===Ua||void 0===
Ua?void 0:Ua.display)?Ha("UNMOUNT"):$a&&jb!==mb?Ha("ANIMATION_OUT"):Ha("UNMOUNT");ha.current=a}},[a,Ha]);Fm(()=>{if(d){const Ua=jb=>{const mb=pj(L.current).includes(jb.animationName);jb.target===d&&mb&&(0,EG.flushSync)(()=>Ha("ANIMATION_END"))},$a=jb=>{jb.target===d&&(na.current=pj(L.current))};d.addEventListener("animationstart",$a);d.addEventListener("animationcancel",Ua);d.addEventListener("animationend",Ua);return()=>{d.removeEventListener("animationstart",$a);d.removeEventListener("animationcancel",
Ua);d.removeEventListener("animationend",Ua)}}Ha("ANIMATION_END")},[d,Ha]);return{isPresent:["mounted","unmountSuspended"].includes(ua),ref:(0,Qq.useCallback)(Ua=>{Ua&&(L.current=getComputedStyle(Ua));m(Ua)},[])}}function pj(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function oi({prop:a,defaultProp:d,onChange:m=()=>{}}){const [L,ha]=Jl({defaultProp:d,onChange:m}),na=void 0!==a;d=na?a:L;const ua=ij(m);m=(0,iw.useCallback)(Ha=>{na?(Ha="function"===typeof Ha?Ha(a):Ha,Ha!==a&&ua(Ha)):
ha(Ha)},[na,a,ha,ua]);return[d,m]}function Jl({defaultProp:a,onChange:d}){a=(0,iw.useState)(a);const [m]=a,L=(0,iw.useRef)(m),ha=ij(d);(0,iw.useEffect)(()=>{L.current!==m&&(ha(m),L.current=m)},[m,L,ha]);return a}function sm(a,d){const m=Math.abs(d.top-a.y),L=Math.abs(d.bottom-a.y),ha=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(m,L,ha,a)){case a:return"left";case ha:return"right";case m:return"top";case L:return"bottom";default:return null}}function Xh(a){a=a.slice();a.sort((d,m)=>
d.x<m.x?-1:d.x>m.x?1:d.y<m.y?-1:d.y>m.y?1:0);return dk(a)}function dk(a){if(1>=a.length)return a.slice();const d=[];for(var m=0;m<a.length;m++){for(var L=a[m];2<=d.length;){var ha=d[d.length-1],na=d[d.length-2];if((ha.x-na.x)*(L.y-na.y)>=(ha.y-na.y)*(L.x-na.x))d.pop();else break}d.push(L)}d.pop();m=[];for(L=a.length-1;0<=L;L--){for(ha=a[L];2<=m.length;){na=m[m.length-1];const ua=m[m.length-2];if((na.x-ua.x)*(ha.y-ua.y)>=(na.y-ua.y)*(ha.x-ua.x))m.pop();else break}m.push(ha)}m.pop();return 1===d.length&&
1===m.length&&d[0].x===m[0].x&&d[0].y===m[0].y?d:d.concat(m)}function ck(a){var {side:d,content:m,sideOffset:L=10}=a;a=ag(a,["side","content","sideOffset"]);return m?(0,Gr.jsx)(QG,{delayDuration:300,children:(0,Gr.jsxs)(RG,{children:[(0,Gr.jsx)(SG,{asChild:!0,children:a.children}),(0,Gr.jsx)(TG,{children:(0,Gr.jsxs)(UG,Bf(qe({className:"tl-tooltip-content",sideOffset:L,side:d},a),{children:[m,(0,Gr.jsx)(VG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Gr.jsx)(Gr.Fragment,{children:a.children})}function Ug(a){var {className:d,
tooltip:m,tooltipSide:L}=a;a=ag(a,["className","tooltip","tooltipSide"]);return(0,QB.jsx)(ck,{content:m,side:L,children:(0,QB.jsx)("button",qe({className:"tl-button "+(null!=d?d:"")},a))})}function cj(a){var {toggle:d=!0,pressed:m,onPressedChange:L,className:ha,tooltip:na}=a;a=ag(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,jy.jsx)(ck,{content:na,children:(0,jy.jsx)("div",{className:"inline-block",children:(0,jy.jsx)(XG,Bf(qe({},a),{"data-toggle":d,className:"tl-toggle-input"+
(ha?" "+ha:""),pressed:m,onPressedChange:L}))})})}function gl(a){var d=a+"CollectionProvider";const [m,L]=oj(d),[ha,na]=m(d,{collectionRef:{current:null},itemMap:new Map}),ua=jb=>{const {scope:mb,children:Kb}=jb;jb=mq.default.useRef(null);const Vb=mq.default.useRef(new Map).current;return mq.default.createElement(ha,{scope:mb,itemMap:Vb,collectionRef:jb},Kb)};Object.assign(ua,{displayName:d});const Ha=a+"CollectionSlot";d=mq.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb;jb=na(Ha,Kb);
mb=Uh(mb,jb.collectionRef);return mq.default.createElement(lq,{ref:mb},Vb)});Object.assign(d,{displayName:Ha});const Ua=a+"CollectionItemSlot",$a=mq.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb,Ob=ag(jb,["scope","children"]),jc=mq.default.useRef(null);jb=Uh(mb,jc);const xc=na(Ua,Kb);mq.default.useEffect(()=>{xc.itemMap.set(jc,qe({ref:jc},Ob));return()=>void xc.itemMap.delete(jc)});return mq.default.createElement(lq,{["data-radix-collection-item"]:"",ref:jb},Vb)});Object.assign($a,
{displayName:Ua});return[{Provider:ua,Slot:d,ItemSlot:$a},function(jb){const mb=na(a+"CollectionConsumer",jb);return mq.default.useCallback(()=>{const Kb=mb.collectionRef.current;if(!Kb)return[];const Vb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Ob,jc)=>Vb.indexOf(Ob.ref.current)-Vb.indexOf(jc.ref.current))},[mb.collectionRef,mb.itemMap])},L]}function Wn(a){const d=(0,TB.useContext)(YG);return a||d||"ltr"}function Ri(){(0,ZG.useEffect)(()=>
{var a,d;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=m[0])&&void 0!==a?a:jn());document.body.insertAdjacentElement("beforeend",null!==(d=m[1])&&void 0!==d?d:jn());ky++;return()=>{1===ky&&document.querySelectorAll("[data-radix-focus-guard]").forEach(L=>L.remove());ky--}},[])}function jn(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function wk(a,{select:d=!1}={}){const m=document.activeElement;for(const L of a)if(xk(L,{select:d}),document.activeElement!==m)break}function Mj(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const L="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||L?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function gk(a,d){for(const m of a)if(!kk(m,{upTo:d}))return m}
function kk(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function xk(a,{select:d=!1}={}){if(a&&a.focus){const m=document.activeElement;a.focus({preventScroll:!0});a!==m&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Nk(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function rp(a){return a.filter(d=>"A"!==d.tagName)}function lo(a,d,m){a=
a.key;m="rtl"!==m?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(m))return fH[m]}function zn(a){const d=document.activeElement;for(const m of a){if(m===d)break;m.focus();if(document.activeElement!==d)break}}function Eh(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Zi(a,d){var m=(0,jH.useState)(function(){return{value:a,callback:d,facade:{get current(){return m.value},
set current(L){var ha=m.value;ha!==L&&(m.value=L,m.callback(L,ha))}}}})[0];m.callback=d;return m.facade}function Uj(a,d){return Zi(d||null,function(m){return a.forEach(function(L){"function"===typeof L?L(m):L&&(L.current=m);return L})})}function So(a){return a}function rm(a,d){void 0===d&&(d=So);var m=[],L=!1;return{read:function(){if(L)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:a},useMedium:function(ha){var na=
d(ha,L);m.push(na);return function(){m=m.filter(function(ua){return ua!==na})}},assignSyncMedium:function(ha){for(L=!0;m.length;){var na=m;m=[];na.forEach(ha)}m={push:function(ua){return ha(ua)},filter:function(){return m}}},assignMedium:function(ha){L=!0;var na=[];if(m.length){var ua=m;m=[];ua.forEach(ha);na=m}var Ha=function(){var Ua=na;na=[];Ua.forEach(ha)};Promise.resolve().then(Ha);m={push:function(Ua){na.push(Ua);Promise.resolve().then(Ha)},filter:function(Ua){na=na.filter(Ua);return m}}}}}
function To(a){const d=document.activeElement;for(const m of a){if(m===d)break;m.focus();if(document.activeElement!==d)break}}function Dl(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Ij(a,d,m){const L=1<d.length&&Array.from(d).every(na=>na===d[0])?d[0]:d,ha=m?a.indexOf(m):-1;a=Dl(a,Math.max(ha,0));1===L.length&&(a=a.filter(na=>na!==m));a=a.find(na=>na.toLowerCase().startsWith(L.toLowerCase()));return a!==m?a:void 0}function xo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function yo(a,
[d,m]){return Math.min(m,Math.max(d,a))}function Jn(a){const d=(0,By.useRef)({value:a,previous:a});return(0,By.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Aj(a=[],d,m){a=[...a];a[m]=d;return a.sort((L,ha)=>L-ha)}function Yi(a,d,m){return 100/(m-d)*(a-d)}function hl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function zq(a,d){if(1===a.length)return 0;a=a.map(L=>Math.abs(L-d));
const m=Math.min(...a);return a.indexOf(m)}function Sl(a,d,m){a/=2;const L=rn([0,50],[0,a]);return(a-L(d)*m)*m}function Bm(a){return a.slice(0,-1).map((d,m)=>a[m+1]-d)}function rn(a,d){return m=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(m-a[0])}function kn(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function Xm(a){function d($a){return $a?(0,Jk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:$a},children:(0,Jk.jsx)("div",{className:`w-full h-full bg-${$a}-500`})}):
(0,Jk.jsx)("div",{className:"tl-color-bg",children:(0,Jk.jsx)(Wh,{name:"color-swatch"})})}var {color:m,opacity:L,popoverSide:ha,setColor:na,setOpacity:ua}=a;a=ag(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ha}}=Ze.default.useContext(kj),Ua=Ze.default.useMemo(()=>{let $a="";return Cg(jb=>{na($a)},100,jb=>{$a=jb.target.value})},[]);return(0,Jk.jsx)(Ln,Bf(qe({},a),{border:!0,arrow:!0,side:ha,label:(0,Jk.jsx)(ck,{content:Ha("whiteboard/color"),side:ha,sideOffset:14,
children:d(m)}),children:(0,Jk.jsxs)("div",{className:"p-1",children:[(0,Jk.jsx)("div",{className:"tl-color-palette",children:Object.values(is).map($a=>(0,Jk.jsx)("button",{className:`tl-color-drip m-1${$a===m?" active":""}`,onClick:()=>na($a),children:d($a)},$a))}),(0,Jk.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,Jk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${uf(m)?"":"active"}`,children:(0,Jk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Jk.jsx)("input",
qe({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(m)?m:"#000000",onChange:Ua,style:{opacity:uf(m)?0:1}},a))})}),(0,Jk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ha("whiteboard/select-custom-color")})]}),ua&&(0,Jk.jsx)("div",{className:"mx-1 my-2",children:(0,Jk.jsxs)(wl,{defaultValue:[null!=L?L:0],onValueCommit:$a=>ua($a[0]),max:1,step:.1,"aria-label":Ha("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,Jk.jsx)(bv,{className:"tl-slider-track",children:(0,Jk.jsx)(pk,{className:"tl-slider-range"})}),(0,Jk.jsx)(pq,{className:"tl-slider-thumb"})]})})]})}))}function Si(a,d){a&&(0,Mn.flushSync)(()=>a.dispatchEvent(d))}function mo(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(a),L=(0,Ll.useRef)(!1),ha=(0,Ll.useRef)(()=>{});(0,Ll.useEffect)(()=>{const na=Ha=>{if(Ha.target&&!L.current){let Ua=function(){tm("dismissableLayer.pointerDownOutside",m,$a,{discrete:!0})};
const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",ha.current),ha.current=Ua,d.addEventListener("click",ha.current,{once:!0})):Ua()}L.current=!1},ua=window.setTimeout(()=>{d.addEventListener("pointerdown",na)},0);return()=>{window.clearTimeout(ua);d.removeEventListener("pointerdown",na);d.removeEventListener("click",ha.current)}},[d,m]);return{onPointerDownCapture:()=>L.current=!0}}function Nl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=
ij(a),L=(0,Ll.useRef)(!1);(0,Ll.useEffect)(()=>{const ha=na=>{na.target&&!L.current&&tm("dismissableLayer.focusOutside",m,{originalEvent:na},{discrete:!1})};d.addEventListener("focusin",ha);return()=>d.removeEventListener("focusin",ha)},[d,m]);return{onFocusCapture:()=>L.current=!0,onBlurCapture:()=>L.current=!1}}function bm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function tm(a,d,m,{discrete:L}){const ha=m.originalEvent.target;m=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:m});d&&ha.addEventListener(a,d,{once:!0});L?Si(ha,m):ha.dispatchEvent(m)}function An(a,{select:d=!1}={}){const m=document.activeElement;for(const L of a)if(Ol(L,{select:d}),document.activeElement!==m)break}function Xn(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const L="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||L?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function nn(a,d){for(const m of a)if(!Cm(m,{upTo:d}))return m}function Cm(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Ol(a,{select:d=!1}={}){if(a&&a.focus){const m=document.activeElement;a.focus({preventScroll:!0});a!==m&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function ln(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function no(a){return a.filter(d=>
"A"!==d.tagName)}function oo(a){return void 0!==a}function ph(a){return null!==a}function po(a){const [d,m="center"]=a.split("-");return[d,m]}function Pl(a){const d=ij(a),m=(0,Sf.useRef)(""),L=(0,Sf.useRef)(0);a=(0,Sf.useCallback)(na=>{na=m.current+na;d(na);(function Ua(Ha){m.current=Ha;window.clearTimeout(L.current);""!==Ha&&(L.current=window.setTimeout(()=>Ua(""),1E3))})(na)},[d]);const ha=(0,Sf.useCallback)(()=>{m.current="";window.clearTimeout(L.current)},[]);(0,Sf.useEffect)(()=>()=>window.clearTimeout(L.current),
[]);return[m,a,ha]}function El(a,d,m){const L=1<d.length&&Array.from(d).every(na=>na===d[0])?d[0]:d,ha=m?a.indexOf(m):-1;a=il(a,Math.max(ha,0));1===L.length&&(a=a.filter(na=>na!==m));a=a.find(na=>na.textValue.toLowerCase().startsWith(L.toLowerCase()));return a!==m?a:void 0}function il(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Nm(a){var {options:d,tooltip:m,popoverSide:L,chevron:ha=!0,value:na,onValueChange:ua}=a;a=ag(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [Ha,Ua]=oC.useState(!1);return(0,yh.jsx)("div",Bf(qe({},a),{className:"tl-select-input",children:(0,yh.jsxs)(Sr,{open:Ha,onOpenChange:Ua,value:na,onValueChange:ua,children:[(0,yh.jsx)(ck,{content:m,side:L,children:(0,yh.jsxs)(yC,{className:"tl-select-input-trigger",children:[(0,yh.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,yh.jsx)(AC,{})}),ha&&(0,yh.jsx)(BC,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,yh.jsx)(Wh,{name:Ha?"chevron-up":"chevron-down"})})]})}),
(0,yh.jsx)(Gm,{className:"tl-select-input-portal",children:(0,yh.jsxs)(Ny,{className:"tl-select-input-content",side:L,position:"popper",sideOffset:14,align:"center",onKeyDown:$a=>$a.stopPropagation(),children:[(0,yh.jsx)(CC,{}),(0,yh.jsx)(zC,{className:"tl-select-input-viewport",children:d.map($a=>(0,yh.jsx)(bo,{className:"tl-select-input-select-item",value:$a.value,children:(0,yh.jsx)(Kd,{children:$a.label})},$a.value))}),(0,yh.jsx)(ti,{})]})})]})}))}function Uo(a){var {scaleLevel:d,compact:m,popoverSide:L}=
a;ag(a,["scaleLevel","compact","popoverSide"]);const ha=Ie();({handlers:{t:a}}=DC.default.useContext(kj));const na=[{label:m?"XS":a("whiteboard/extra-small"),value:"xs"},{label:m?"SM":a("whiteboard/small"),value:"sm"},{label:m?"MD":a("whiteboard/medium"),value:"md"},{label:m?"LG":a("whiteboard/large"),value:"lg"},{label:m?"XL":a("whiteboard/extra-large"),value:"xl"},{label:m?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,iv.jsx)(Nm,{tooltip:a("whiteboard/scale-level"),options:na,value:d,popoverSide:L,
chevron:!m,onValueChange:ua=>{ha.api.setScaleLevel(ua)}})}function Om(a,d){return function(m){return a(d(m))}}function qo(a,d){return d(a)}function Pm(a,d){return function(m){return a(d,m)}}function Fl(a,d){return function(){return a(d)}}function rj(a,d){d(a);return a}function sj(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return d}function wm(a){a()}function Pp(a){return function(){return a}}function Aq(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];
return function(){d.map(wm)}}function Mi(){}function Qh(a,d){return a(1,d)}function Op(a,d){a(0,d)}function ks(a){a(2)}function zo(a){return a(4)}function sg(a,d){return Qh(a,Pm(d,0))}function Yk(a,d){var m=a(1,function(L){m();d(L)});return m}function fh(){var a=[];return function(d,m){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(m),function(){var L=a.indexOf(m);-1<L&&a.splice(L,1)};case 0:a.slice().forEach(function(L){L(m)});break;default:throw Error("unrecognized action "+d);
}}}function rg(a){var d=a,m=fh();return function(L,ha){switch(L){case 1:ha(d);break;case 0:d=ha;break;case 4:return d}return m(L,ha)}}function mn(a){var d,m;return function(L,ha){switch(L){case 1:if(ha){if(m===ha)break;d&&d();m=ha;return d=a(1,ha)}d&&d();return Mi;case 2:d&&d();m=null;break;default:throw Error("unrecognized action "+L);}}}function Ok(a){return rj(fh(),function(d){return sg(a,d)})}function Qj(a,d){return rj(rg(d),function(m){return sg(a,m)})}function Ql(){for(var a=arguments.length,
d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return function(L){return d.reduceRight(qo,L)}}function $f(a){for(var d=arguments.length,m=Array(1<d?d-1:0),L=1;L<d;L++)m[L-1]=arguments[L];var ha=Ql.apply(void 0,m);return function(na,ua){switch(na){case 1:return Qh(a,ha(ua));case 2:a(2);break;default:throw Error("unrecognized action "+na);}}}function dm(a,d){return a===d}function pi(a){void 0===a&&(a=dm);var d;return function(m){return function(L){a(d,L)||(d=L,m(L))}}}function Ig(a){return function(d){return function(m){a(m)&&
d(m)}}}function Lg(a){return function(d){return Om(d,a)}}function Bn(a){return function(d){return function(){return d(a)}}}function hk(a,d){return function(m){return function(L){return m(d=a(d,L))}}}function Ul(a){return function(d){return function(m){0<a?a--:d(m)}}}function Ym(a){var d,m;return function(L){return function(ha){d=ha;m||=setTimeout(function(){m=void 0;L(d)},a)}}}function Nj(a){var d,m;return function(L){return function(ha){d=ha;m&&clearTimeout(m);m=setTimeout(function(){L(d)},a)}}}
function ei(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];var L=Array(d.length),ha=0,na=null,ua=Math.pow(2,d.length)-1;d.forEach(function(Ha,Ua){var $a=Math.pow(2,Ua);Qh(Ha,function(jb){var mb=ha;ha|=$a;L[Ua]=jb;mb!==ua&&ha===ua&&na&&(na(),na=null)})});return function(Ha){return function(Ua){var $a=function(){return Ha([Ua].concat(L))};ha===ua?$a():na=$a}}}function Zp(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return function(L,ha){switch(L){case 1:return Aq.apply(void 0,
d.map(function(na){return na(1,ha)}));case 2:break;default:throw Error("unrecognized action "+L);}}}function ai(a,d){void 0===d&&(d=dm);return $f(a,pi(d))}function Yj(){for(var a=fh(),d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];var ha=Array(m.length),na=0,ua=Math.pow(2,m.length)-1;m.forEach(function(Ha,Ua){var $a=Math.pow(2,Ua);Qh(Ha,function(jb){ha[Ua]=jb;na|=$a;na===ua&&a(0,ha)})});return function(Ha,Ua){switch(Ha){case 1:return na===ua&&Ua(ha),a(1,Ua);case 2:a(2);break;default:throw Error("unrecognized action "+
Ha);}}}function Di(a,d,m){void 0===d&&(d=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:m}}function wp(a){var d=new Map;return function ha(L){var na=L.id,ua=L.constructor,Ha=L.dependencies;if((L=L.singleton)&&d.has(na))return d.get(na);ua=ua(Ha.map(function(Ua){return ha(Ua)}));L&&d.set(na,ua);return ua}(a)}function Vo(a,d){if(null==a)return{};var m={},L=Object.keys(a),ha;for(ha=0;ha<L.length;ha++){var na=L[ha];0<=d.indexOf(na)||(m[na]=a[na])}return m}
function xp(a,d){if(a){if("string"===typeof a)return Qp(a,d);var m=Object.prototype.toString.call(a).slice(8,-1);"Object"===m&&a.constructor&&(m=a.constructor.name);if("Map"===m||"Set"===m)return Array.from(a);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Qp(a,d)}}function Qp(a,d){if(null==d||d>a.length)d=a.length;for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function Ao(a,d){var m="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(m)return(m=m.call(a)).next.bind(m);
if(Array.isArray(a)||(m=xp(a))||d&&a&&"number"===typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function sp(a,d){for(var m={},L={},ha=0,na=a.length;ha<na;)L[a[ha]]=1,ha+=1;for(var ua in d)L.hasOwnProperty(ua)||(m[ua]=d[ua]);return m}function Zj(a,d,m){function L(mb,Kb){mb.propsReady&&
(0,mb.propsReady)(0,!1);for(var Vb=Ao(ua),Ob;!(Ob=Vb()).done;)Ob=Ob.value,(0,mb[d.required[Ob]])(0,Kb[Ob]);for(Vb=Ao(Ha);!(Ob=Vb()).done;)if(Ob=Ob.value,Ob in Kb)(0,mb[d.optional[Ob]])(0,Kb[Ob]);mb.propsReady&&(0,mb.propsReady)(0,!0)}function ha(mb){return Ua.reduce(function(Kb,Vb){Kb[Vb]=function(Ob){(0,mb[d.methods[Vb]])(0,Ob)};return Kb},{})}function na(mb){return $a.reduce(function(Kb,Vb){Kb[Vb]=mn(mb[d.events[Vb]]);return Kb},{})}var ua=Object.keys(d.required||{}),Ha=Object.keys(d.optional||
{}),Ua=Object.keys(d.methods||{}),$a=Object.keys(d.events||{}),jb=(0,Nn.createContext)({});return{Component:(0,Nn.forwardRef)(function(mb,Kb){var Vb=mb.children,Ob=Vo(mb,HC),jc=(0,Nn.useState)(function(){return rj(wp(a),function(bc){return L(bc,Ob)})})[0],xc=(0,Nn.useState)(Fl(na,jc))[0];au(function(){for(var bc=Ao($a),pc;!(pc=bc()).done;)if(pc=pc.value,pc in Ob)(0,xc[pc])(1,Ob[pc]);return function(){Object.values(xc).map(ks)}},[Ob,xc,jc]);au(function(){L(jc,Ob)});(0,Nn.useImperativeHandle)(Kb,Pp(ha(jc)));
return(0,Nn.createElement)(jb.Provider,{value:jc},m?(0,Nn.createElement)(m,sp([].concat(ua,Ha,$a),Ob),Vb):Vb)}),usePublisher:function(mb){return(0,Nn.useCallback)(Pm(Op,(0,Nn.useContext)(jb)[mb]),[mb])},useEmitterValue:function(mb){var Kb=(0,Nn.useContext)(jb)[mb];mb=(0,Nn.useState)(Fl(zo,Kb));var Vb=mb[0],Ob=mb[1];au(function(){return Qh(Kb,function(jc){jc!==Vb&&Ob(Pp(jc))})},[Kb,Vb]);return Vb},useEmitter:function(mb,Kb){var Vb=(0,Nn.useContext)(jb)[mb];au(function(){return Vb(1,Kb)},[Kb,Vb])}}}
function Lh(){return Lh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a},Lh.apply(this,arguments)}function um(a,d){if(null==a)return{};var m,L,ha={},na=Object.keys(a);for(L=0;L<na.length;L++)0<=d.indexOf(m=na[L])||(ha[m]=a[m]);return ha}function Bo(a,d){(null==d||d>a.length)&&(d=a.length);for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function vm(a,d){var m="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(m)return(m=m.call(a)).next.bind(m);if(Array.isArray(a)||(m=function(ha,na){if(ha){if("string"==typeof ha)return Bo(ha,na);var ua=Object.prototype.toString.call(ha).slice(8,-1);return"Object"===ua&&ha.constructor&&(ua=ha.constructor.name),"Map"===ua||"Set"===ua?Array.from(ha):"Arguments"===ua||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ua)?Bo(ha,na):void 0}}(a))||d&&a&&"number"==typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:
{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Zo(a,d){void 0===d&&(d=!0);var m=(0,li.useRef)(null),L=function(na){};if("undefined"!=typeof ResizeObserver){var ha=new ResizeObserver(function(na){na=na[0].target;null!==na.offsetParent&&a(na)});L=function(na){na&&d?(ha.observe(na),m.current=na):(m.current&&ha.unobserve(m.current),m.current=null)}}return{ref:m,
callbackRef:L}}function Hj(a,d){return void 0===d&&(d=!0),Zo(a,d).callbackRef}function dj(a,d,m,L,ha,na,ua){return Zo(function(Ha){for(var Ua=function(mb,Kb,Vb,Ob){Vb=mb.length;if(0===Vb)return null;for(var jc=[],xc=0;xc<Vb;xc++){var bc=mb.item(xc);if(bc&&void 0!==bc.dataset.index){var pc=parseInt(bc.dataset.index),lc=parseFloat(bc.dataset.knownSize),Rc=Kb(bc,"offsetHeight");if(0===Rc&&Ob("Zero-sized element, this should not happen",{child:bc},Ml.ERROR),Rc!==lc)bc=jc[jc.length-1],0===jc.length||bc.size!==
Rc||bc.endIndex!==pc-1?jc.push({startIndex:pc,endIndex:pc,size:Rc}):jc[jc.length-1].endIndex++}}return jc}(Ha.children,d,0,ha),$a=Ha.parentElement;!$a.dataset.virtuosoScroller;)$a=$a.parentElement;var jb="window"===$a.firstElementChild.dataset.viewportType;L({scrollTop:Math.max(ua?ua.scrollTop:jb?window.pageYOffset||document.documentElement.scrollTop:$a.scrollTop,0),scrollHeight:ua?ua.scrollHeight:jb?document.documentElement.scrollHeight:$a.scrollHeight,viewportHeight:ua?ua.offsetHeight:jb?window.innerHeight:
$a.offsetHeight});null==na||na(function(mb,Kb,Vb){return"normal"===Kb||null!=Kb&&Kb.endsWith("px")||Vb("row-gap was not resolved to pixel value correctly",Kb,Ml.WARN),"normal"===Kb?0:parseInt(null!=Kb?Kb:"0",10)}(0,getComputedStyle(Ha).rowGap,ha));null!==Ua&&a(Ua)},m)}function Vi(a,d){return Math.round(a.getBoundingClientRect()[d])}function pr(a,d,m,L,ha){void 0===L&&(L=Mi);var na=(0,li.useRef)(null),ua=(0,li.useRef)(null),Ha=(0,li.useRef)(null),Ua=(0,li.useRef)(!1),$a=(0,li.useCallback)(function(jb){jb=
jb.target;var mb=jb===window||jb===document,Kb=mb?window.pageYOffset||document.documentElement.scrollTop:jb.scrollTop,Vb=mb?document.documentElement.scrollHeight:jb.scrollHeight,Ob=mb?window.innerHeight:jb.offsetHeight;jb=function(){a({scrollTop:Math.max(Kb,0),scrollHeight:Vb,viewportHeight:Ob})};Ua.current?(0,IC.flushSync)(jb):jb();Ua.current=!1;null!==ua.current&&(Kb===ua.current||0>=Kb||Kb===Vb-Ob)&&(ua.current=null,d(!0),Ha.current&&(clearTimeout(Ha.current),Ha.current=null))},[a,d]);return(0,li.useEffect)(function(){var jb=
ha||na.current;return L(ha||na.current),$a({target:jb}),jb.addEventListener("scroll",$a,{passive:!0}),function(){L(null);jb.removeEventListener("scroll",$a)}},[na,$a,m,L,ha]),{scrollerRef:na,scrollByCallback:function(jb){Ua.current=!0;na.current.scrollBy(jb)},scrollToCallback:function(jb){var mb=na.current;if(mb&&!("offsetHeight"in mb&&0===mb.offsetHeight)){var Kb,Vb,Ob,jc="smooth"===jb.behavior;if(mb===window?(Vb=Math.max(Vi(document.documentElement,"height"),document.documentElement.scrollHeight),
Kb=window.innerHeight,Ob=document.documentElement.scrollTop):(Vb=mb.scrollHeight,Kb=Vi(mb,"height"),Ob=mb.scrollTop),jb.top=Math.ceil(Math.max(Math.min(Vb-Kb,jb.top),0)),1.01>Math.abs(Kb-Vb)||jb.top===Ob)return a({scrollTop:Ob,scrollHeight:Vb,viewportHeight:Kb}),void(jc&&d(!0));jc?(ua.current=jb.top,Ha.current&&clearTimeout(Ha.current),Ha.current=setTimeout(function(){Ha.current=null;ua.current=null;d(!0)},1E3)):ua.current=null;mb.scrollTo(jb)}}}}function Wo(a,d,m,L,ha){return void 0===L&&(L=gj),
void 0===ha&&(ha=gj),{k:a,v:d,lvl:m,l:L,r:ha}}function z(a,d){if(a===gj)return gj;var m=a.k,L=a.l,ha=a.r;if(d===m){if(L===gj)return ha;if(ha===gj)return L;d=db(L);return Ic(tb(a,{k:d[0],v:d[1],l:qb(L)}))}return Ic(tb(a,d<m?{l:z(L,d)}:{r:z(ha,d)}))}function ea(a,d,m){return(void 0===m&&(m="k"),a===gj)?[-Infinity,void 0]:a[m]===d?[a.k,a.v]:a[m]<d?(d=ea(a.r,d,m),-Infinity===d[0]?[a.k,a.v]:d):ea(a.l,d,m)}function Aa(a,d,m){return a===gj?Wo(d,m,1):d===a.k?tb(a,{k:d,v:m}):Jd(Qd(tb(a,d<a.k?{l:Aa(a.l,d,m)}:
{r:Aa(a.r,d,m)})))}function za(a,d,m){if(a===gj)return[];var L=a.k,ha=a.v,na=a.r,ua=[];return L>d&&(ua=ua.concat(za(a.l,d,m))),L>=d&&L<=m&&ua.push({k:L,v:ha}),L<=m&&(ua=ua.concat(za(na,d,m))),ua}function Ia(a){return a===gj?[]:[].concat(Ia(a.l),[{k:a.k,v:a.v}],Ia(a.r))}function db(a){return a.r===gj?[a.k,a.v]:db(a.r)}function qb(a){return a.r===gj?a.l:Ic(tb(a,{r:qb(a.r)}))}function tb(a,d){return Wo(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function $b(a){return a===gj||a.lvl>a.r.lvl}function Ic(a){var d=a.l,m=a.r,L=a.lvl;if(m.lvl>=L-1&&d.lvl>=L-1)return a;if(L>m.lvl+1){if($b(d))return Qd(tb(a,{lvl:L-1}));if(d===gj||d.r===gj)throw Error("Unexpected empty nodes");return tb(d.r,{l:tb(d,{r:d.r.l}),r:tb(a,{l:d.r.r,lvl:L-1}),lvl:L})}if($b(a))return Jd(tb(a,{lvl:L-1}));if(m===gj||m.l===gj)throw Error("Unexpected empty nodes");d=m.l;var ha=$b(d)?m.lvl-1:m.lvl;return tb(d,{l:tb(a,{r:d.l,lvl:L-1}),r:Jd(tb(m,{l:d.r,lvl:ha})),lvl:d.lvl+
1})}function Xc(a,d,m){return a===gj?[]:Ed(za(a,ea(a,d)[0],m),function(L){return{index:L.k,value:L.v}})}function Ed(a,d){var m=a.length;if(0===m)return[];var L=d(a[0]),ha=L.index;L=L.value;for(var na=[],ua=1;ua<m;ua++){var Ha=d(a[ua]),Ua=Ha.index;Ha=Ha.value;na.push({start:ha,end:Ua-1,value:L});ha=Ua;L=Ha}return na.push({start:ha,end:Infinity,value:L}),na}function Jd(a){var d=a.r,m=a.lvl;return d===gj||d.r===gj||d.lvl!==m||d.r.lvl!==m?a:tb(d,{l:tb(a,{r:d.l}),lvl:m+1})}function Qd(a){var d=a.l;return d===
gj||d.lvl!==a.lvl?a:tb(d,{r:tb(a,{l:d.r})})}function Me(a,d,m,L){void 0===L&&(L=0);for(var ha=a.length-1;L<=ha;){var na=Math.floor((L+ha)/2),ua=m(a[na],d);if(0===ua)return na;if(-1===ua){if(2>ha-L)return na-1;ha=na-1}else{if(ha===L)return na;L=na+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function ng(a){var d=a.size,m=a.startIndex,L=a.endIndex;return function(ha){return ha.start===m&&(ha.end===L||Infinity===ha.end)&&ha.value===d}}function nh(a,d){a=
a.index;return d===a?0:d<a?-1:1}function $i(a,d){a=a.offset;return d===a?0:d<a?-1:1}function dh(a){return{index:a.index,value:a}}function hj(a,d,m,L){var ha=0,na=0,ua=0,Ha;0!==d?(ua=a[Ha=Me(a,d-1,nh)].offset,na=ea(m,d-1),ha=na[0],na=na[1],a.length&&a[Ha].size===ea(m,d)[1]&&--Ha,a=a.slice(0,Ha+1)):a=[];for(d=vm(Xc(m,d,Infinity));!(m=d()).done;)Ha=m.value,m=Ha.start,Ha=Ha.value,ha=m-ha,ua=ha*na+ua+ha*L,a.push({offset:ua,size:Ha,index:m}),ha=m,na=Ha;return{offsetTree:a,lastIndex:ha,lastOffset:ua,lastSize:na}}
function Ci(a,d){var m=d[0],L=d[1],ha=d[3];0<m.length&&(0,d[2])("received item sizes",m,Ml.DEBUG);var na=a.sizeTree;d=na;var ua=0;if(0<L.length&&na===gj&&2===m.length){var Ha=m[0].size,Ua=m[1].size;d=L.reduce(function(jb,mb){return Aa(Aa(jb,mb,Ha),mb+1,Ua)},d)}else m=function(jb,mb){var Kb,Vb=jb===gj?0:Infinity;for(mb=vm(mb);!(Kb=mb()).done;){var Ob=Kb.value;Kb=Ob.size;var jc=Ob.startIndex,xc=Ob.endIndex;if(Vb=Math.min(Vb,jc),jb===gj)jb=Aa(jb,0,Kb);else{var bc=Xc(jb,jc-1,xc+1);if(!bc.some(ng(Ob))){var pc,
lc=Ob=!1;for(bc=vm(bc);!(pc=bc()).done;){var Rc=pc.value;pc=Rc.start;var Tc=Rc.end;Rc=Rc.value;Ob?(xc>=pc||Kb===Rc)&&(jb=z(jb,pc)):(lc=Rc!==Kb,Ob=!0);Tc>xc&&xc>=pc&&Rc!==Kb&&(jb=Aa(jb,xc+1,Rc))}lc&&(jb=Aa(jb,jc,Kb))}}}return[jb,Vb]}(d,m),d=m[0],ua=m[1];if(d===na)return a;a=hj(a.offsetTree,ua,d,ha);var $a=a.offsetTree;return{sizeTree:d,offsetTree:$a,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:L.reduce(function(jb,mb){return Aa(jb,mb,zi(mb,$a,ha))},gj),groupIndices:L}}
function zi(a,d,m){if(0===d.length)return 0;d=d[Me(d,a,nh)];a-=d.index;a=d.size*a+(a-1)*m+d.offset;return 0<a?a+m:a}function Li(a,d,m){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=ci("LAST"===a.index?m:a.index,d);return Math.max(0,a,Math.min(m,a))}function ci(a,d){if(d.groupOffsetTree===gj)return a;for(var m=0;d.groupIndices[m]<=a+m;)m++;return a+m}function Fi(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&yH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function Gi(a){return!!a&&("smooth"===a?"smooth":"auto")}function Ji(a){return a.reduce(function(d,m){return d.groupIndices.push(d.totalCount),d.totalCount+=m+1,d},{totalCount:0,groupIndices:[]})}function Rj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Pk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function tl(a,d,m){return"number"==typeof a?"up"===m&&"top"===d||"down"===m&&"bottom"===d?a:0:"up"===m?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function un(a,
d,m){if(0===a.length)return[];if(d.groupOffsetTree===gj)return a.map(function(Ua){return Lh({},Ua,{index:Ua.index+m,originalIndex:Ua.index})});var L,ha=[],na=Xc(d.groupOffsetTree,a[0].index,a[a.length-1].index),ua=void 0,Ha=0;for(a=vm(a);!(L=a()).done;)L=L.value,(!ua||ua.end<L.index)&&(ua=na.shift(),Ha=d.groupIndices.indexOf(ua.start)),ha.push(Lh({},L.index===ua.start?{type:"group",index:Ha}:{index:L.index-(Ha+1)+m,groupIndex:Ha},{size:L.size,offset:L.offset,originalIndex:L.index,data:L.data}));return ha}
function Wm(a,d,m,L,ha,na){var ua=0,Ha=0;0<a.length&&(ua=a[0].offset,Ha=a[a.length-1],Ha=Ha.offset+Ha.size);var Ua=m-ha.lastIndex,$a=ua;L=ha.lastOffset+Ua*ha.lastSize+(Ua-1)*L-Ha;return{items:un(a,ha,na),topItems:un(d,ha,na),topListHeight:d.reduce(function(jb,mb){return mb.size+jb},0),offsetTop:ua,offsetBottom:L,top:$a,bottom:Ha,totalCount:m,firstItemIndex:na}}function tn(a){var d,m=!1;return function(){return m||(m=!0,d=a()),d}}function Zh(a,d){var m=(0,li.useRef)(null),L=(0,li.useCallback)(function(Ua){if(null!==
Ua&&Ua.offsetParent){var $a=Ua.getBoundingClientRect();Ua=$a.width;if(d){var jb=d.getBoundingClientRect();$a=$a.top-jb.top;jb=jb.height-Math.max(0,$a);$a+=d.scrollTop}else jb=window.innerHeight-Math.max(0,$a.top),$a=$a.top+window.pageYOffset;m.current={offsetTop:$a,visibleHeight:jb,visibleWidth:Ua};a(m.current)}},[a,d]),ha=Zo(L),na=ha.callbackRef,ua=ha.ref,Ha=(0,li.useCallback)(function(){L(ua.current)},[L,ua]);return(0,li.useEffect)(function(){if(d){d.addEventListener("scroll",Ha);var Ua=new ResizeObserver(Ha);
return Ua.observe(d),function(){d.removeEventListener("scroll",Ha);Ua.unobserve(d)}}return window.addEventListener("scroll",Ha),window.addEventListener("resize",Ha),function(){window.removeEventListener("scroll",Ha);window.removeEventListener("resize",Ha)}},[Ha,d]),na}function $p(a){return a}function Qk(a,d){var m=fh();return Qh(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),sg(m,a),m}function Vj(a,d){if("string"!=
typeof a)return{context:d}}function ro(a){var d=a.usePublisher,m=a.useEmitter,L=a.useEmitterValue;return Ph.memo(function(ha){var na=ha.style,ua=ha.children;ha=um(ha,Yy);var Ha=d("scrollContainerState"),Ua=L("ScrollerComponent"),$a=d("smoothScrollTargetReached"),jb=L("scrollerRef"),mb=L("context");Ha=pr(Ha,$a,Ua,jb);$a=Ha.scrollerRef;jb=Ha.scrollByCallback;return m("scrollTo",Ha.scrollToCallback),m("scrollBy",jb),(0,li.createElement)(Ua,Lh({ref:$a,style:Lh({},CH,na),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},ha,Vj(Ua,mb)),ua)})}function Rp(a){var d=a.usePublisher,m=a.useEmitter,L=a.useEmitterValue;return Ph.memo(function(ha){var na=ha.style,ua=ha.children;ha=um(ha,QC);var Ha=d("windowScrollContainerState"),Ua=L("ScrollerComponent"),$a=d("smoothScrollTargetReached"),jb=L("totalListHeight"),mb=L("deviation"),Kb=L("customScrollParent"),Vb=L("context");$a=pr(Ha,$a,Ua,Mi,Kb);var Ob=$a.scrollerRef;Ha=$a.scrollByCallback;$a=$a.scrollToCallback;return wH(function(){return Ob.current=
Kb||window,function(){Ob.current=null}},[Ob,Kb]),m("windowScrollTo",$a),m("scrollBy",Ha),(0,li.createElement)(Ua,Lh({style:Lh({position:"relative"},na,0!==jb?{height:jb+mb}:{}),"data-virtuoso-scroller":!0},ha,Vj(Ua,Vb)),ua)})}function Sp(a,d,m){return Array.from({length:d-a+1}).map(function(L,ha){return{index:ha+a,data:null==m?void 0:m[ha+a]}})}function Cn(a,d){return a&&a.column===d.column&&a.row===d.row}function so(a,d,m,L){var ha=m.height;return void 0===ha||0===L.length?{top:0,bottom:0}:{top:jl(a,
d,m,L[0].index),bottom:jl(a,d,m,L[L.length-1].index)+ha}}function jl(a,d,m,L){var ha=d.column;a=lj(1,qv((a.width+ha)/(m.width+ha)));L=qv(L/a);m=L*m.height+lj(0,L-1)*d.row;return 0<m?m+d.row:m}function em(a,d,m){return"normal"===d||null!=d&&d.endsWith("px")||m(a+" was not resolved to pixel value correctly",d,Ml.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function on(a,d){on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,L){m.__proto__=L;return m};return on(a,d)}function Yp(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;on(a,d)}function wo(a){wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return wo(a)}function xu(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Bq(a,d,m){Bq=xu()?Reflect.construct.bind():function(L,
ha,na){var ua=[null];ua.push.apply(ua,ha);L=new (Function.bind.apply(L,ua));na&&on(L,na.prototype);return L};return Bq.apply(null,arguments)}function Dq(a){var d="function"===typeof Map?new Map:void 0;Dq=function(m){function L(){return Bq(m,arguments,wo(this).constructor)}if(null===m||-1===Function.toString.call(m).indexOf("[native code]"))return m;if("function"!==typeof m)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(m))return d.get(m);
d.set(m,L)}L.prototype=Object.create(m.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}});return on(L,m)};return Dq(a)}function zu(a,d,m){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*m)}function aq(a,d,m,L){void 0===L&&(L=zu);if(0===d)return L(m,m,m);a=(a%360+360)%360/60;var ha=(1-Math.abs(2*m-1))*d,na=ha*(1-Math.abs(a%2-1)),ua=d=0,Ha=0;0<=a&&1>a?(d=ha,ua=na):1<=a&&2>a?(d=na,ua=ha):2<=a&&3>a?(ua=ha,Ha=na):3<=a&&4>a?(ua=na,Ha=ha):4<=a&&5>a?(d=na,Ha=ha):
5<=a&&6>a&&(d=ha,Ha=na);m-=ha/2;return L(d+m,ua+m,Ha+m)}function ls(a){if("string"!==typeof a)throw new fn(3);if("string"===typeof a){var d=a.toLowerCase();a=Qw[d]?"#"+Qw[d]:a}if(a.match(bD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(cD))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(cz))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(No))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Xs.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=pm.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var m=Rw.exec(a);if(m){d=parseInt(""+m[1],10);var L=parseInt(""+m[2],10)/100;m=parseInt(""+m[3],10)/100;d="rgb("+aq(d,L,m)+")";L=Xs.exec(d);if(!L)throw new fn(4,a,d);return{red:parseInt(""+L[1],10),green:parseInt(""+L[2],10),blue:parseInt(""+L[3],10)}}if(d=tv.exec(a.substring(0,50))){L=parseInt(""+d[1],10);m=parseInt(""+d[2],10)/100;var ha=parseInt(""+d[3],10)/100;L="rgb("+aq(L,m,ha)+")";m=Xs.exec(L);if(!m)throw new fn(4,a,L);return{red:parseInt(""+
m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new fn(5);}function to(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Tp(a,d,m){return go("#"+to(Math.round(255*a))+to(Math.round(255*d))+to(Math.round(255*m)))}function fs(a,d,m){if("number"===typeof a&&"number"===typeof d&&"number"===typeof m)return go("#"+to(a)+to(d)+to(m));if("object"===typeof a&&void 0===d&&void 0===m)return go("#"+to(a.red)+to(a.green)+
to(a.blue));throw new fn(6);}function ht(a){if("object"!==typeof a)throw new fn(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?fs(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new fn(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return fs(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?aq(a.hue,a.saturation,a.lightness,Tp):"rgba("+aq(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new fn(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=aq(a.hue,a.saturation,a.lightness,Tp);else throw new fn(1);
return a}throw new fn(8);}function jr(a,d,m){return function(){var L=m.concat(Array.prototype.slice.call(arguments));return L.length>=d?a.apply(this,L):jr(a,d,L)}}function kr(a,d){if("transparent"===d)return d;d=ls(d);var m=d.red/255,L=d.green/255,ha=d.blue/255,na=Math.max(m,L,ha),ua=Math.min(m,L,ha),Ha=(na+ua)/2;if(na===ua)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Ha,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ha};else{var Ua=na-ua;ua=.5<Ha?Ua/(2-na-ua):Ua/(na+ua);switch(na){case m:m=(L-
ha)/Ua+(L<ha?6:0);break;case L:m=(ha-m)/Ua+2;break;default:m=(m-L)/Ua+4}m*=60;d=void 0!==d.alpha?{hue:m,saturation:ua,lightness:Ha,alpha:d.alpha}:{hue:m,saturation:ua,lightness:Ha}}Ha=nf;a=d.lightness-parseFloat(a);return ht(Ha({},d,{lightness:Math.max(0,Math.min(1,a))}))}function Vm(a,d){var m;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let L=null!=(m=d.fill)?m:a.props.fill;void 0===L||uf(L)||"var(--ls-secondary-background-color)"===
L||d.noFill||!LH.includes(a.props.type)||(a=Gj(.3,L),d.stroke=a);return d}function js({strokeWidth:a,size:d,mode:m}){return"svg"===m?(0,ku.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,ku.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function pn(){const a=Ie();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Cq({left:a,middle:d,right:m,stroke:L,strokeWidth:ha}){return(0,Vw.jsxs)("g",{children:[(0,Vw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${m}`}),(0,Vw.jsx)("path",{d:`M ${a} L ${d} ${m}`,fill:"none",stroke:L,strokeWidth:ha,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Eq(a,d,m){d=K(a,d,a,m).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(m=d[0])?me.rotWith(m,
a,Math.PI/6):a;a=m?me.rotWith(m,a,-Math.PI/6):a;return{left:d,right:a}}function ms(a,d,m){const {left:L,right:ha}=Eq(a,d,m);return`M ${L} L ${a} ${ha}`}function Tl(a,d,m,L,ha){a=a.strokeWidth;var na=me.dist(d,m);a=Math.min(na/3,16*a);na=[];na.push(`M ${d} L ${m}`);L&&na.push(ms(d,m,a));ha&&na.push(ms(m,d,a));return na.join(" ")}function hs({id:a,bounds:d,labelSize:m,offset:L,scale:ha=1}){return(0,xv.jsx)("defs",{children:(0,xv.jsxs)("mask",{id:a+"_clip",children:[(0,xv.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,xv.jsx)("rect",{x:d.width/2-m[0]/2*ha+((null==L?void 0:L[0])||0),y:d.height/2-m[1]/2*ha+((null==L?void 0:L[1])||0),width:m[0]*ha,height:m[1]*ha,rx:4*ha,ry:4*ha,fill:"black"})]})})}function Up(a,d,m,L=ha=>ha){return a*L(.5-d*(.5-m))}function Vp(a){return[-a[0],-a[1]]}function ll(a,d){return[a[0]+d[0],a[1]+d[1]]}function kl(a,d){return[a[0]-d[0],a[1]-d[1]]}function ml(a,d){return[a[0]*d,a[1]*d]}function Wp(a){return[a[1],-a[0]]}function lr(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Fq(a){return a[0]*a[0]+a[1]*a[1]}function Hq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function it(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function uo(a,d,m){let L=Math.sin(m);m=Math.cos(m);let ha=a[0]-d[0];a=a[1]-d[1];return[ha*m-a*L+d[0],ha*L+a*m+d[1]]}function qn(a,d,m){return ll(a,ml(kl(d,a),m))}function Xp(a,d,m){return ll(a,ml(d,m))}function Gq(a,d={}){let {size:m=16,smoothing:L=.5,thinning:ha=.5,simulatePressure:na=!0,easing:ua=Zd=>Zd,start:Ha={},end:Ua=
{},last:$a=!1}=d,{cap:jb=!0,easing:mb=Zd=>Zd*(2-Zd)}=Ha,{cap:Kb=!0,easing:Vb=Zd=>--Zd*Zd*Zd+1}=Ua;if(0===a.length||0>=m)return[];var Ob=a[a.length-1].runningLength;let jc=!1===Ha.taper?0:!0===Ha.taper?Math.max(m,Ob):Ha.taper,xc=!1===Ua.taper?0:!0===Ua.taper?Math.max(m,Ob):Ua.taper;var bc=Math.pow(m*L,2);d=[];let pc=[];var lc=a.slice(0,10).reduce((Zd,nd)=>{var Ld=nd.pressure;na&&(nd=Gp(1,nd.distance/m),Ld=Gp(1,1-nd),Ld=Gp(1,Zd+.275*(Ld-Zd)*nd));return(Zd+Ld)/2},a[0].pressure),Rc=Up(m,ha,a[a.length-
1].pressure,ua),Tc;let Dd=a[0].vector;var Ud=a[0].point;let kf=Ud;var re=Ud;let Ue=kf;var Tf=!1;for(var gf=0;gf<a.length;gf++){var {pressure:lf}=a[gf];let {point:Zd,vector:nd,distance:Ld,runningLength:$e}=a[gf];if(gf<a.length-1&&3>Ob-$e)continue;ha?(na&&(Rc=Gp(1,Ld/m),lf=Gp(1,1-Rc),lf=Gp(1,lc+.275*(lf-lc)*Rc)),Rc=Up(m,ha,lf,ua)):Rc=m/2;void 0===Tc&&(Tc=Rc);var Yd=$e<jc?mb($e/jc):1,qd=Ob-$e<xc?Vb((Ob-$e)/xc):1;Rc=Math.max(.01,Rc*Math.min(Yd,qd));qd=(gf<a.length-1?a[gf+1]:a[gf]).vector;let Df=gf<a.length-
1?nd[0]*qd[0]+nd[1]*qd[1]:1;Yd=null!==Df&&0>Df;if(0>nd[0]*Dd[0]+nd[1]*Dd[1]&&!Tf||Yd){Ud=ml(Wp(Dd),Rc);for(let kg=1/13,Uf=0;1>=Uf;Uf+=kg)re=uo(kl(Zd,Ud),Zd,ar*Uf),d.push(re),Ue=uo(ll(Zd,Ud),Zd,ar*-Uf),pc.push(Ue);Ud=re;kf=Ue;Yd&&(Tf=!0)}else(Tf=!1,gf===a.length-1)?(lf=ml(Wp(nd),Rc),d.push(kl(Zd,lf)),pc.push(ll(Zd,lf))):(lc=ml(Wp(qn(qd,nd,Df)),Rc),re=kl(Zd,lc),(1>=gf||Fq(kl(Ud,re))>bc)&&(d.push(re),Ud=re),Ue=ll(Zd,lc),(1>=gf||Fq(kl(kf,Ue))>bc)&&(pc.push(Ue),kf=Ue),lc=lf,Dd=nd)}Ob=a[0].point.slice(0,
2);bc=1<a.length?a[a.length-1].point.slice(0,2):ll(a[0].point,[1,1]);re=[];Tf=[];if(1===a.length){if(!jc&&!xc||$a){a=Xp(Ob,Hq(Wp(kl(Ob,bc))),-(Tc||Rc));d=[];for(let Zd=1/13,nd=Zd;1>=nd;nd+=Zd)d.push(uo(a,Ob,2*ar*nd));return d}}else{if(!(jc||xc&&1===a.length))if(jb)for(let Zd=1/13,nd=Zd;1>=nd;nd+=Zd)Tc=uo(pc[0],Ob,ar*nd),re.push(Tc);else gf=kl(d[0],pc[0]),Tc=ml(gf,.5),gf=ml(gf,.51),re.push(kl(Ob,Tc),kl(Ob,gf),ll(Ob,gf),ll(Ob,Tc));Tc=Wp(Vp(a[a.length-1].vector));if(xc||jc&&1===a.length)Tf.push(bc);
else if(Kb){a=Xp(bc,Tc,Rc);for(let Zd=1/29,nd=Zd;1>nd;nd+=Zd)Tf.push(uo(a,bc,3*ar*nd))}else Tf.push(ll(bc,ml(Tc,Rc)),ll(bc,ml(Tc,.99*Rc)),kl(bc,ml(Tc,.99*Rc)),kl(bc,ml(Tc,Rc)))}return d.concat(Tf,pc.reverse(),re)}function lk(a,d={}){var m;let {streamline:L=.5,size:ha=16,last:na=!1}=d;if(0===a.length)return[];d=.15+.85*(1-L);a=Array.isArray(a[0])?a:a.map(({x:mb,y:Kb,pressure:Vb=.5})=>[mb,Kb,Vb]);if(2===a.length){var ua=a[1];a=a.slice(0,-1);for(var Ha=1;5>Ha;Ha++)a.push(qn(a[0],ua,Ha/4))}1===a.length&&
(a=[...a,[...ll(a[0],[1,1]),...a[0].slice(2)]]);ua=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ha=!1;let Ua=0,$a=ua[0],jb=a.length-1;for(let mb=1;mb<a.length;mb++){let Kb=na&&mb===jb?a[mb].slice(0,2):qn($a.point,a[mb],d);if(lr($a.point,Kb))continue;let Vb=it(Kb,$a.point);if(Ua+=Vb,mb<jb&&!Ha){if(Ua<ha)continue;Ha=!0}$a={point:Kb,pressure:0<=a[mb][2]?a[mb][2]:.5,vector:Hq(kl($a.point,Kb)),distance:Vb,runningLength:Ua};ua.push($a)}return ua[0].vector=
(null==(m=ua[1])?void 0:m.vector)||[0,0],ua}function Dn(a,d=4/3){return(new ii(a)).exportAsSVG(d)}function Yn(a,d=4/3){return(new ii(a)).generatePreviewJsx(void 0,d)}function Qm({id:a,type:d,onRemove:m,showContent:L}){const ha=Ie(),{handlers:na}=Py.default.useContext(kj),ua=na.t;return(0,Xi.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,Xi.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Xi.jsx)(Qy,{id:a,showReferenceContent:L})}),
(0,Xi.jsx)("div",{className:"flex-1"}),na.getBlockPageName(a)!==ha.currentPage.name&&(0,Xi.jsx)(Ug,{tooltip:ua("whiteboard/open-page"),type:"button",onClick:()=>null==na?void 0:na.redirectToPage(a),children:(0,Xi.jsx)(Wh,{name:"open-as-page"})}),(0,Xi.jsx)(Ug,{tooltip:ua("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==na?void 0:na.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,Xi.jsx)(Wh,{name:"move-to-sidebar-right"})}),m&&(0,Xi.jsx)(Ug,{className:"tl-shape-links-panel-item-remove-button",
tooltip:ua("whiteboard/remove-link"),type:"button",onClick:m,children:(0,Xi.jsx)(Wh,{name:"x",className:"!translate-y-0"})})]})}function la({options:a,value:d,onValueChange:m}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:m,children:a.map(L=>(0,er.jsx)(ck,{content:L.tooltip,children:(0,er.jsx)("div",{className:"inline-block",children:(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:L.value,disabled:L.value===d,children:(0,er.jsx)(Wh,{name:L.icon})})})},
L.value))})}function Da({options:a,value:d,onValueChange:m}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:m,children:a.map(L=>(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:L.value,children:(0,er.jsx)(Wh,{name:L.icon})},L.value))})}function Za(a){return Ie().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var m;return null==(m=mz[d.props.type])?void 0:m.includes(a)})}function Wb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function vc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const m=a[0].toLowerCase();[a]=null!=(d=Object.entries(gr).find(([,L])=>L.includes(m)))?d:["unknown",null];return a}function Oc(...a){return(...d)=>wi(this,null,function*(){for(const m of a){const L=yield m(...d);if(L&&0<L.length)return L}return null})}function yd(a,d){return wi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Vd(){const {handlers:a}=
wD.useContext(kj);return wD.useCallback((d,m)=>wi(this,null,function*(){if(m.shiftKey&&1===d.selectedShapesArray.length){var L=yield navigator.clipboard.read();let ha;0<L.length&&(L=(yield(yield L[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(L)&&40===L.length?(L=L.slice(2,-2),Wg(L)&&(ha=L)):/^\[\[.*\]\]$/.test(L)&&(ha=L.slice(2,-2)));if(ha){d.selectedShapesArray[0].update({refs:[ha]});d.persist();return}}xD(d,m,a)}),[])}function pe(){const a=Vd();return aI.useCallback((d,m)=>wi(this,
[d,m],function*(L,{dataTransfer:ha,point:na}){a(L,{point:na,shiftKey:!1,dataTransfer:ha,fromDrop:!0})}),[])}function Je(){const {handlers:a}=dx.useContext(kj);return dx.useCallback((d,{text:m,html:L})=>{a.copyToClipboard(m,L)},[])}function rf(){return ex.default.useCallback(a=>wi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var pg=Object.create,Ag=Object.defineProperty,fi=Object.defineProperties,Kh=Object.getOwnPropertyDescriptor,
zk=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertyNames,Rl=Object.getOwnPropertySymbols,Ii=Object.getPrototypeOf,Ak=Object.prototype.hasOwnProperty,Am=Object.prototype.propertyIsEnumerable,Xo=(a,d,m)=>d in a?Ag(a,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):a[d]=m,qe=(a,d)=>{for(var m in d||={})Ak.call(d,m)&&Xo(a,m,d[m]);if(Rl)for(m of Rl(d))Am.call(d,m)&&Xo(a,m,d[m]);return a},Bf=(a,d)=>fi(a,zk(d)),ag=(a,d)=>{var m={},L;for(L in a)Ak.call(a,L)&&0>d.indexOf(L)&&(m[L]=a[L]);if(null!=
a&&Rl)for(L of Rl(a))0>d.indexOf(L)&&Am.call(a,L)&&(m[L]=a[L]);return m},Yh=(a,d)=>function(){return d||(0,a[vo(a)[0]])((d={exports:{}}).exports,d),d.exports},xm=(a,d,m,L)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let ha of vo(d))Ak.call(a,ha)||ha===m||Ag(a,ha,{get:()=>d[ha],enumerable:!(L=Kh(d,ha))||L.enumerable});return a},Jf=(a,d,m)=>(m=null!=a?pg(Ii(a)):{},xm(!d&&a&&a.__esModule?m:Ag(m,"default",{value:a,enumerable:!0}),a)),le=(a,d,m,L)=>{for(var ha=1<L?void 0:L?Kh(d,m):d,na=a.length-
1,ua;0<=na;na--)if(ua=a[na])ha=(L?ua(d,m,ha):ua(ha))||ha;L&&ha&&Ag(d,m,ha);return ha},kb=(a,d,m)=>{Xo(a,"symbol"!==typeof d?d+"":d,m);return m},wi=(a,d,m)=>new Promise((L,ha)=>{var na=Ua=>{try{Ha(m.next(Ua))}catch($a){ha($a)}},ua=Ua=>{try{Ha(m.throw(Ua))}catch($a){ha($a)}},Ha=Ua=>Ua.done?L(Ua.value):Promise.resolve(Ua.value).then(na,ua);Ha((m=m.apply(a,d)).next())}),gm=Yh({["../../node_modules/rbush/rbush.min.js"](a,d){!function(m,L){"object"==typeof a&&"undefined"!=typeof d?d.exports=L():"function"==
typeof define&&define.amd?define(L):(m=m||self).RBush=L()}(a,function(){function m(bc,pc,lc,Rc,Tc){!function gf(Ud,kf,re,Ue,Tf){for(;Ue>re;){if(600<Ue-re){var lf=Ue-re+1,Yd=kf-re+1,qd=Math.log(lf),Zd=.5*Math.exp(2*qd/3);qd=.5*Math.sqrt(qd*Zd*(lf-Zd)/lf)*(0>Yd-lf/2?-1:1);gf(Ud,kf,Math.max(re,Math.floor(kf-Yd*Zd/lf+qd)),Math.min(Ue,Math.floor(kf+(lf-Yd)*Zd/lf+qd)),Tf)}lf=Ud[kf];Yd=re;Zd=Ue;L(Ud,re,kf);for(0<Tf(Ud[Ue],lf)&&L(Ud,re,Ue);Yd<Zd;){L(Ud,Yd,Zd);Yd++;for(Zd--;0>Tf(Ud[Yd],lf);)Yd++;for(;0<Tf(Ud[Zd],
lf);)Zd--}0===Tf(Ud[re],lf)?L(Ud,re,Zd):L(Ud,++Zd,Ue);Zd<=kf&&(re=Zd+1);kf<=Zd&&(Ue=Zd-1)}}(bc,pc,lc||0,Rc||bc.length-1,Tc||ha)}function L(bc,pc,lc){var Rc=bc[pc];bc[pc]=bc[lc];bc[lc]=Rc}function ha(bc,pc){return bc<pc?-1:bc>pc?1:0}function na(bc,pc){ua(bc,0,bc.children.length,pc,bc)}function ua(bc,pc,lc,Rc,Tc){Tc||=Ob(null);Tc.minX=1/0;Tc.minY=1/0;Tc.maxX=-1/0;for(Tc.maxY=-1/0;pc<lc;pc++){var Dd=bc.children[pc];Ha(Tc,bc.leaf?Rc(Dd):Dd)}return Tc}function Ha(bc,pc){return bc.minX=Math.min(bc.minX,
pc.minX),bc.minY=Math.min(bc.minY,pc.minY),bc.maxX=Math.max(bc.maxX,pc.maxX),bc.maxY=Math.max(bc.maxY,pc.maxY),bc}function Ua(bc,pc){return bc.minX-pc.minX}function $a(bc,pc){return bc.minY-pc.minY}function jb(bc){return(bc.maxX-bc.minX)*(bc.maxY-bc.minY)}function mb(bc){return bc.maxX-bc.minX+(bc.maxY-bc.minY)}function Kb(bc,pc){return bc.minX<=pc.minX&&bc.minY<=pc.minY&&pc.maxX<=bc.maxX&&pc.maxY<=bc.maxY}function Vb(bc,pc){return pc.minX<=bc.maxX&&pc.minY<=bc.maxY&&pc.maxX>=bc.minX&&pc.maxY>=bc.minY}
function Ob(bc){return{children:bc,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jc(bc,pc,lc,Rc,Tc){for(var Dd=[pc,lc];Dd.length;)if(!((lc=Dd.pop())-(pc=Dd.pop())<=Rc)){var Ud=pc+Math.ceil((lc-pc)/Rc/2)*Rc;m(bc,Ud,pc,lc,Tc);Dd.push(pc,Ud,Ud,lc)}}var xc=function(bc){void 0===bc&&(bc=9);this._maxEntries=Math.max(4,bc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return xc.prototype.all=function(){return this._all(this.data,[])},xc.prototype.search=function(bc){var pc=
this.data,lc=[];if(!Vb(bc,pc))return lc;for(var Rc=this.toBBox,Tc=[];pc;){for(var Dd=0;Dd<pc.children.length;Dd++){var Ud=pc.children[Dd],kf=pc.leaf?Rc(Ud):Ud;Vb(bc,kf)&&(pc.leaf?lc.push(Ud):Kb(bc,kf)?this._all(Ud,lc):Tc.push(Ud))}pc=Tc.pop()}return lc},xc.prototype.collides=function(bc){var pc=this.data;if(!Vb(bc,pc))return!1;for(var lc=[];pc;){for(var Rc=0;Rc<pc.children.length;Rc++){var Tc=pc.children[Rc],Dd=pc.leaf?this.toBBox(Tc):Tc;if(Vb(bc,Dd)){if(pc.leaf||Kb(bc,Dd))return!0;lc.push(Tc)}}pc=
lc.pop()}return!1},xc.prototype.load=function(bc){if(!bc||!bc.length)return this;if(bc.length<this._minEntries){for(var pc=0;pc<bc.length;pc++)this.insert(bc[pc]);return this}bc=this._build(bc.slice(),0,bc.length-1,0);this.data.children.length?this.data.height===bc.height?this._splitRoot(this.data,bc):(this.data.height<bc.height&&(pc=this.data,this.data=bc,bc=pc),this._insert(bc,this.data.height-bc.height-1,!0)):this.data=bc;return this},xc.prototype.insert=function(bc){return bc&&this._insert(bc,
this.data.height-1),this},xc.prototype.clear=function(){return this.data=Ob([]),this},xc.prototype.remove=function(bc,pc){if(!bc)return this;for(var lc,Rc,Tc,Dd=this.data,Ud=this.toBBox(bc),kf=[],re=[];Dd||kf.length;){if(Dd||(Dd=kf.pop(),Rc=kf[kf.length-1],lc=re.pop(),Tc=!0),Dd.leaf){a:{var Ue=bc;var Tf=Dd.children,gf=pc;if(gf){for(var lf=0;lf<Tf.length;lf++)if(gf(Ue,Tf[lf])){Ue=lf;break a}Ue=-1}else Ue=Tf.indexOf(Ue)}if(-1!==Ue)return Dd.children.splice(Ue,1),kf.push(Dd),this._condense(kf),this}Tc||
Dd.leaf||!Kb(Dd,Ud)?Rc?(lc++,Dd=Rc.children[lc],Tc=!1):Dd=null:(kf.push(Dd),re.push(lc),lc=0,Rc=Dd,Dd=Dd.children[0])}return this},xc.prototype.toBBox=function(bc){return bc},xc.prototype.compareMinX=function(bc,pc){return bc.minX-pc.minX},xc.prototype.compareMinY=function(bc,pc){return bc.minY-pc.minY},xc.prototype.toJSON=function(){return this.data},xc.prototype.fromJSON=function(bc){return this.data=bc,this},xc.prototype._all=function(bc,pc){for(var lc=[];bc;)bc.leaf?pc.push.apply(pc,bc.children):
lc.push.apply(lc,bc.children),bc=lc.pop();return pc},xc.prototype._build=function(bc,pc,lc,Rc){var Tc,Dd=lc-pc+1,Ud=this._maxEntries;if(Dd<=Ud)return na(Tc=Ob(bc.slice(pc,lc+1)),this.toBBox),Tc;Rc||(Rc=Math.ceil(Math.log(Dd)/Math.log(Ud)),Ud=Math.ceil(Dd/Math.pow(Ud,Rc-1)));(Tc=Ob([])).leaf=!1;Tc.height=Rc;Dd=Math.ceil(Dd/Ud);Ud=Dd*Math.ceil(Math.sqrt(Ud));for(jc(bc,pc,lc,Ud,this.compareMinX);pc<=lc;pc+=Ud){var kf=Math.min(pc+Ud-1,lc);jc(bc,pc,kf,Dd,this.compareMinY);for(var re=pc;re<=kf;re+=Dd)Tc.children.push(this._build(bc,
re,Math.min(re+Dd-1,kf),Rc-1))}return na(Tc,this.toBBox),Tc},xc.prototype._chooseSubtree=function(bc,pc,lc,Rc){for(;Rc.push(pc),!pc.leaf&&Rc.length-1!==lc;){for(var Tc=1/0,Dd=1/0,Ud=void 0,kf=0;kf<pc.children.length;kf++){var re=pc.children[kf],Ue=jb(re),Tf=(gf=bc,lf=re,(Math.max(lf.maxX,gf.maxX)-Math.min(lf.minX,gf.minX))*(Math.max(lf.maxY,gf.maxY)-Math.min(lf.minY,gf.minY))-Ue);Tf<Dd?(Dd=Tf,Tc=Ue<Tc?Ue:Tc,Ud=re):Tf===Dd&&Ue<Tc&&(Tc=Ue,Ud=re)}pc=Ud||pc.children[0]}var gf,lf;return pc},xc.prototype._insert=
function(bc,pc,lc){lc=lc?bc:this.toBBox(bc);var Rc=[],Tc=this._chooseSubtree(lc,this.data,pc,Rc);Tc.children.push(bc);for(Ha(Tc,lc);0<=pc&&Rc[pc].children.length>this._maxEntries;)this._split(Rc,pc),pc--;this._adjustParentBBoxes(lc,Rc,pc)},xc.prototype._split=function(bc,pc){var lc=bc[pc],Rc=lc.children.length,Tc=this._minEntries;this._chooseSplitAxis(lc,Tc,Rc);Rc=this._chooseSplitIndex(lc,Tc,Rc);Rc=Ob(lc.children.splice(Rc,lc.children.length-Rc));Rc.height=lc.height;Rc.leaf=lc.leaf;na(lc,this.toBBox);
na(Rc,this.toBBox);pc?bc[pc-1].children.push(Rc):this._splitRoot(lc,Rc)},xc.prototype._splitRoot=function(bc,pc){this.data=Ob([bc,pc]);this.data.height=bc.height+1;this.data.leaf=!1;na(this.data,this.toBBox)},xc.prototype._chooseSplitIndex=function(bc,pc,lc){for(var Rc,Tc,Dd,Ud,kf,re,Ue,Tf=1/0,gf=1/0,lf=pc;lf<=lc-pc;lf++){var Yd=ua(bc,0,lf,this.toBBox),qd=ua(bc,lf,lc,this.toBBox),Zd=(Tc=Yd,Dd=qd,Ud=void 0,kf=void 0,re=void 0,Ue=void 0,Ud=Math.max(Tc.minX,Dd.minX),kf=Math.max(Tc.minY,Dd.minY),re=Math.min(Tc.maxX,
Dd.maxX),Ue=Math.min(Tc.maxY,Dd.maxY),Math.max(0,re-Ud)*Math.max(0,Ue-kf));Yd=jb(Yd)+jb(qd);Zd<Tf?(Tf=Zd,Rc=lf,gf=Yd<gf?Yd:gf):Zd===Tf&&Yd<gf&&(gf=Yd,Rc=lf)}return Rc||lc-pc},xc.prototype._chooseSplitAxis=function(bc,pc,lc){var Rc=bc.leaf?this.compareMinX:Ua,Tc=bc.leaf?this.compareMinY:$a;this._allDistMargin(bc,pc,lc,Rc)<this._allDistMargin(bc,pc,lc,Tc)&&bc.children.sort(Rc)},xc.prototype._allDistMargin=function(bc,pc,lc,Rc){bc.children.sort(Rc);Rc=this.toBBox;for(var Tc=ua(bc,0,pc,Rc),Dd=ua(bc,lc-
pc,lc,Rc),Ud=mb(Tc)+mb(Dd),kf=pc;kf<lc-pc;kf++){var re=bc.children[kf];Ha(Tc,bc.leaf?Rc(re):re);Ud+=mb(Tc)}for(lc=lc-pc-1;lc>=pc;lc--)Tc=bc.children[lc],Ha(Dd,bc.leaf?Rc(Tc):Tc),Ud+=mb(Dd);return Ud},xc.prototype._adjustParentBBoxes=function(bc,pc,lc){for(;0<=lc;lc--)Ha(pc[lc],bc)},xc.prototype._condense=function(bc){for(var pc=bc.length-1,lc=void 0;0<=pc;pc--)0===bc[pc].children.length?0<pc?(lc=bc[pc-1].children).splice(lc.indexOf(bc[pc]),1):this.clear():na(bc[pc],this.toBBox)},xc})}}),kt=Yh({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function na(L,ha){if(L===ha)return!0;if(L&&ha&&"object"==typeof L&&"object"==typeof ha){if(L.constructor!==ha.constructor)return!1;var ua;if(Array.isArray(L)){var Ha=L.length;if(Ha!=ha.length)return!1;for(ua=Ha;0!==ua--;)if(!na(L[ua],ha[ua]))return!1;return!0}if(L.constructor===RegExp)return L.source===ha.source&&L.flags===ha.flags;if(L.valueOf!==Object.prototype.valueOf)return L.valueOf()===ha.valueOf();if(L.toString!==Object.prototype.toString)return L.toString()===ha.toString();var Ua=
Object.keys(L);Ha=Ua.length;if(Ha!==Object.keys(ha).length)return!1;for(ua=Ha;0!==ua--;)if(!Object.prototype.hasOwnProperty.call(ha,Ua[ua]))return!1;for(ua=Ha;0!==ua--;)if(Ha=Ua[ua],!na(L[Ha],ha[Ha]))return!1;return!0}return L!==L&&ha!==ha}}}),nr=Yh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function m(mb,Kb){return!1!==Kb.clone&&Kb.isMergeableObject(mb)?Ua(Array.isArray(mb)?[]:{},mb,Kb):mb}function L(mb,Kb,Vb){return mb.concat(Kb).map(function(Ob){return m(Ob,Vb)})}function ha(mb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(mb).filter(function(Kb){return Object.propertyIsEnumerable.call(mb,Kb)}):[]}function na(mb){return Object.keys(mb).concat(ha(mb))}function ua(mb,Kb){try{return Kb in mb}catch(Vb){return!1}}function Ha(mb,Kb,Vb){var Ob={};Vb.isMergeableObject(mb)&&na(mb).forEach(function(jc){Ob[jc]=m(mb[jc],Vb)});na(Kb).forEach(function(jc){if(!ua(mb,jc)||Object.hasOwnProperty.call(mb,jc)&&Object.propertyIsEnumerable.call(mb,jc))if(ua(mb,jc)&&Vb.isMergeableObject(Kb[jc])){if(Vb.customMerge){var xc=
Vb.customMerge(jc);xc="function"===typeof xc?xc:Ua}else xc=Ua;Ob[jc]=xc(mb[jc],Kb[jc],Vb)}else Ob[jc]=m(Kb[jc],Vb)});return Ob}function Ua(mb,Kb,Vb){Vb=Vb||{};Vb.arrayMerge=Vb.arrayMerge||L;Vb.isMergeableObject=Vb.isMergeableObject||$a;Vb.cloneUnlessOtherwiseSpecified=m;var Ob=Array.isArray(Kb),jc=Array.isArray(mb);return Ob!==jc?m(Kb,Vb):Ob?Vb.arrayMerge(mb,Kb,Vb):Ha(mb,Kb,Vb)}var $a=function(mb){var Kb;if(Kb=!!mb&&"object"===typeof mb)Kb=Object.prototype.toString.call(mb),Kb=!("[object RegExp]"===
Kb||"[object Date]"===Kb||mb.$$typeof===jb);return Kb},jb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ua.all=function(mb,Kb){if(!Array.isArray(mb))throw Error("first argument should be an array");return mb.reduce(function(Vb,Ob){return Ua(Vb,Ob,Kb)},{})};d.exports=Ua}}),gs=Yh({["../../node_modules/tslib/tslib.js"](a,d){var m,L,ha,na,ua,Ha,Ua,$a,jb,mb,Kb,Vb,Ob,jc,xc,bc,pc,lc,Rc,Tc,Dd,Ud,kf,re,Ue;(function(Tf){function gf(Yd,qd){Yd!==lf&&("function"===typeof Object.create?
Object.defineProperty(Yd,"__esModule",{value:!0}):Yd.__esModule=!0);return function(Zd,nd){return Yd[Zd]=qd?qd(Zd,nd):nd}}var lf="object"===typeof xa?xa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Yd){Tf(gf(lf,gf(Yd)))}):"object"===typeof d&&"object"===typeof d.exports?Tf(gf(lf,gf(d.exports))):Tf(gf(lf))})(function(Tf){var gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Yd,qd){Yd.__proto__=
qd}||function(Yd,qd){for(var Zd in qd)Object.prototype.hasOwnProperty.call(qd,Zd)&&(Yd[Zd]=qd[Zd])};m=function(Yd,qd){function Zd(){this.constructor=Yd}if("function"!==typeof qd&&null!==qd)throw new TypeError("Class extends value "+String(qd)+" is not a constructor or null");gf(Yd,qd);Yd.prototype=null===qd?Object.create(qd):(Zd.prototype=qd.prototype,new Zd)};L=Object.assign||function(Yd){for(var qd,Zd=1,nd=arguments.length;Zd<nd;Zd++){qd=arguments[Zd];for(var Ld in qd)Object.prototype.hasOwnProperty.call(qd,
Ld)&&(Yd[Ld]=qd[Ld])}return Yd};ha=function(Yd,qd){var Zd={},nd;for(nd in Yd)Object.prototype.hasOwnProperty.call(Yd,nd)&&0>qd.indexOf(nd)&&(Zd[nd]=Yd[nd]);if(null!=Yd&&"function"===typeof Object.getOwnPropertySymbols){var Ld=0;for(nd=Object.getOwnPropertySymbols(Yd);Ld<nd.length;Ld++)0>qd.indexOf(nd[Ld])&&Object.prototype.propertyIsEnumerable.call(Yd,nd[Ld])&&(Zd[nd[Ld]]=Yd[nd[Ld]])}return Zd};na=function(Yd,qd,Zd,nd){var Ld=arguments.length,$e=3>Ld?qd:null===nd?nd=Object.getOwnPropertyDescriptor(qd,
Zd):nd,Df;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)$e=Reflect.decorate(Yd,qd,Zd,nd);else for(var kg=Yd.length-1;0<=kg;kg--)if(Df=Yd[kg])$e=(3>Ld?Df($e):3<Ld?Df(qd,Zd,$e):Df(qd,Zd))||$e;return 3<Ld&&$e&&Object.defineProperty(qd,Zd,$e),$e};ua=function(Yd,qd){return function(Zd,nd){qd(Zd,nd,Yd)}};Ha=function(Yd,qd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Yd,qd)};Ua=function(Yd,qd,Zd,nd){function Ld($e){return $e instanceof Zd?
$e:new Zd(function(Df){Df($e)})}return new (Zd||=Promise)(function($e,Df){function kg(uh){try{wg(nd.next(uh))}catch(eg){Df(eg)}}function Uf(uh){try{wg(nd["throw"](uh))}catch(eg){Df(eg)}}function wg(uh){uh.done?$e(uh.value):Ld(uh.value).then(kg,Uf)}wg((nd=nd.apply(Yd,qd||[])).next())})};$a=function(Yd,qd){function Zd(wg){return function(uh){return nd([wg,uh])}}function nd(wg){if($e)throw new TypeError("Generator is already executing.");for(;Ld;)try{if($e=1,Df&&(kg=wg[0]&2?Df["return"]:wg[0]?Df["throw"]||
((kg=Df["return"])&&kg.call(Df),0):Df.next)&&!(kg=kg.call(Df,wg[1])).done)return kg;if(Df=0,kg)wg=[wg[0]&2,kg.value];switch(wg[0]){case 0:case 1:kg=wg;break;case 4:return Ld.label++,{value:wg[1],done:!1};case 5:Ld.label++;Df=wg[1];wg=[0];continue;case 7:wg=Ld.ops.pop();Ld.trys.pop();continue;default:if(!(kg=Ld.trys,kg=0<kg.length&&kg[kg.length-1])&&(6===wg[0]||2===wg[0])){Ld=0;continue}if(3===wg[0]&&(!kg||wg[1]>kg[0]&&wg[1]<kg[3]))Ld.label=wg[1];else if(6===wg[0]&&Ld.label<kg[1])Ld.label=kg[1],kg=
wg;else if(kg&&Ld.label<kg[2])Ld.label=kg[2],Ld.ops.push(wg);else{kg[2]&&Ld.ops.pop();Ld.trys.pop();continue}}wg=qd.call(Yd,Ld)}catch(uh){wg=[6,uh],Df=0}finally{$e=kg=0}if(wg[0]&5)throw wg[1];return{value:wg[0]?wg[1]:void 0,done:!0}}var Ld={label:0,sent:function(){if(kg[0]&1)throw kg[1];return kg[1]},trys:[],ops:[]},$e,Df,kg,Uf;return Uf={next:Zd(0),"throw":Zd(1),"return":Zd(2)},"function"===typeof Symbol&&(Uf[Symbol.iterator]=function(){return this}),Uf};jb=function(Yd,qd){for(var Zd in Yd)"default"===
Zd||Object.prototype.hasOwnProperty.call(qd,Zd)||Ue(qd,Yd,Zd)};Ue=Object.create?function(Yd,qd,Zd,nd){void 0===nd&&(nd=Zd);var Ld=Object.getOwnPropertyDescriptor(qd,Zd);if(!Ld||("get"in Ld?!qd.__esModule:Ld.writable||Ld.configurable))Ld={enumerable:!0,get:function(){return qd[Zd]}};Object.defineProperty(Yd,nd,Ld)}:function(Yd,qd,Zd,nd){void 0===nd&&(nd=Zd);Yd[nd]=qd[Zd]};mb=function(Yd){var qd="function"===typeof Symbol&&Symbol.iterator,Zd=qd&&Yd[qd],nd=0;if(Zd)return Zd.call(Yd);if(Yd&&"number"===
typeof Yd.length)return{next:function(){Yd&&nd>=Yd.length&&(Yd=void 0);return{value:Yd&&Yd[nd++],done:!Yd}}};throw new TypeError(qd?"Object is not iterable.":"Symbol.iterator is not defined.");};Kb=function(Yd,qd){var Zd="function"===typeof Symbol&&Yd[Symbol.iterator];if(!Zd)return Yd;Yd=Zd.call(Yd);var nd,Ld=[];try{for(;(void 0===qd||0<qd--)&&!(nd=Yd.next()).done;)Ld.push(nd.value)}catch(Df){var $e={error:Df}}finally{try{nd&&!nd.done&&(Zd=Yd["return"])&&Zd.call(Yd)}finally{if($e)throw $e.error;}}return Ld};
Vb=function(){for(var Yd=[],qd=0;qd<arguments.length;qd++)Yd=Yd.concat(Kb(arguments[qd]));return Yd};Ob=function(){for(var Yd=0,qd=0,Zd=arguments.length;qd<Zd;qd++)Yd+=arguments[qd].length;Yd=Array(Yd);var nd=0;for(qd=0;qd<Zd;qd++)for(var Ld=arguments[qd],$e=0,Df=Ld.length;$e<Df;$e++,nd++)Yd[nd]=Ld[$e];return Yd};jc=function(Yd,qd,Zd){if(Zd||2===arguments.length)for(var nd=0,Ld=qd.length,$e;nd<Ld;nd++)!$e&&nd in qd||($e||=Array.prototype.slice.call(qd,0,nd),$e[nd]=qd[nd]);return Yd.concat($e||Array.prototype.slice.call(qd))};
xc=function(Yd){return this instanceof xc?(this.v=Yd,this):new xc(Yd)};bc=function(Yd,qd,Zd){function nd(eg){Uf[eg]&&(wg[eg]=function(oh){return new Promise(function(Sh,wj){1<uh.push([eg,oh,Sh,wj])||Ld(eg,oh)})})}function Ld(eg,oh){try{var Sh=Uf[eg](oh);Sh.value instanceof xc?Promise.resolve(Sh.value.v).then($e,Df):kg(uh[0][2],Sh)}catch(wj){kg(uh[0][3],wj)}}function $e(eg){Ld("next",eg)}function Df(eg){Ld("throw",eg)}function kg(eg,oh){(eg(oh),uh.shift(),uh.length)&&Ld(uh[0][0],uh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var Uf=Zd.apply(Yd,qd||[]),wg,uh=[];return wg={},nd("next"),nd("throw"),nd("return"),wg[Symbol.asyncIterator]=function(){return this},wg};pc=function(Yd){function qd(Ld,$e){Zd[Ld]=Yd[Ld]?function(Df){return(nd=!nd)?{value:xc(Yd[Ld](Df)),done:"return"===Ld}:$e?$e(Df):Df}:$e}var Zd,nd;return Zd={},qd("next"),qd("throw",function(Ld){throw Ld;}),qd("return"),Zd[Symbol.iterator]=function(){return this},Zd};lc=function(Yd){function qd($e){Ld[$e]=Yd[$e]&&function(Df){return new Promise(function(kg,Uf){Df=
Yd[$e](Df);Zd(kg,Uf,Df.done,Df.value)})}}function Zd($e,Df,kg,Uf){Promise.resolve(Uf).then(function(wg){$e({value:wg,done:kg})},Df)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nd=Yd[Symbol.asyncIterator],Ld;return nd?nd.call(Yd):(Yd="function"===typeof mb?mb(Yd):Yd[Symbol.iterator](),Ld={},qd("next"),qd("throw"),qd("return"),Ld[Symbol.asyncIterator]=function(){return this},Ld)};Rc=function(Yd,qd){Object.defineProperty?Object.defineProperty(Yd,"raw",{value:qd}):
Yd.raw=qd;return Yd};var lf=Object.create?function(Yd,qd){Object.defineProperty(Yd,"default",{enumerable:!0,value:qd})}:function(Yd,qd){Yd["default"]=qd};Tc=function(Yd){if(Yd&&Yd.__esModule)return Yd;var qd={};if(null!=Yd)for(var Zd in Yd)"default"!==Zd&&Object.prototype.hasOwnProperty.call(Yd,Zd)&&Ue(qd,Yd,Zd);lf(qd,Yd);return qd};Dd=function(Yd){return Yd&&Yd.__esModule?Yd:{"default":Yd}};Ud=function(Yd,qd,Zd,nd){if("a"===Zd&&!nd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof qd?Yd!==qd||!nd:!qd.has(Yd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Zd?nd:"a"===Zd?nd.call(Yd):nd?nd.value:qd.get(Yd)};kf=function(Yd,qd,Zd,nd,Ld){if("m"===nd)throw new TypeError("Private method is not writable");if("a"===nd&&!Ld)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof qd?Yd!==qd||!Ld:!qd.has(Yd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===nd?Ld.call(Yd,Zd):Ld?Ld.value=Zd:qd.set(Yd,Zd),Zd};re=function(Yd,qd){if(null===qd||"object"!==typeof qd&&"function"!==typeof qd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Yd?qd===Yd:Yd.has(qd)};Tf("__extends",m);Tf("__assign",L);Tf("__rest",ha);Tf("__decorate",na);Tf("__param",ua);Tf("__metadata",Ha);Tf("__awaiter",Ua);Tf("__generator",$a);Tf("__exportStar",jb);Tf("__createBinding",Ue);Tf("__values",mb);Tf("__read",Kb);Tf("__spread",Vb);Tf("__spreadArrays",
Ob);Tf("__spreadArray",jc);Tf("__await",xc);Tf("__asyncGenerator",bc);Tf("__asyncDelegator",pc);Tf("__asyncValues",lc);Tf("__makeTemplateObject",Rc);Tf("__importStar",Tc);Tf("__importDefault",Dd);Tf("__classPrivateFieldGet",Ud);Tf("__classPrivateFieldSet",kf);Tf("__classPrivateFieldIn",re)})}}),Iq={};((a,d)=>{for(var m in d)Ag(a,m,{get:d[m],enumerable:!0})})(Iq,{App:()=>CD,PreviewManager:()=>ii,generateJSXFromModel:()=>Yn,generateSVGFromModel:()=>Dn});Sa.exports=(a=>xm(Ag({},"__esModule",{value:!0}),
a))(Iq);var is=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(is||{}),or=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(or||{}),mr,yu=new Uint8Array(16),bh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pl=[];for(let a=0;256>a;++a)pl.push((a+256).toString(16).slice(1));var jt,$n,Yo=0,Jq=0,ek=function(a,d,m){m=d&&m||0;const L=
d||Array(16);a=a||{};let ha=a.node||jt;var na=void 0!==a.clockseq?a.clockseq:$n;if(null==ha||null==na){var ua=a.random||(a.rng||u)();null==ha&&(ha=jt=[ua[0]|1,ua[1],ua[2],ua[3],ua[4],ua[5]]);null==na&&(na=$n=(ua[6]<<8|ua[7])&16383)}ua=void 0!==a.msecs?a.msecs:Date.now();let Ha=void 0!==a.nsecs?a.nsecs:Jq+1;const Ua=ua-Yo+(Ha-Jq)/1E4;0>Ua&&void 0===a.clockseq&&(na=na+1&16383);(0>Ua||ua>Yo)&&void 0===a.nsecs&&(Ha=0);if(1E4<=Ha)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Yo=ua;Jq=
Ha;$n=na;ua+=122192928E5;a=(1E4*(ua&268435455)+Ha)%4294967296;L[m++]=a>>>24&255;L[m++]=a>>>16&255;L[m++]=a>>>8&255;L[m++]=a&255;a=ua/4294967296*1E4&268435455;L[m++]=a>>>8&255;L[m++]=a&255;L[m++]=a>>>24&15|16;L[m++]=a>>>16&255;L[m++]=na>>>8|128;L[m++]=na&255;for(na=0;6>na;++na)L[m+na]=ha[na];return d||W(L)},Vh=class{static clamp(a,d,m){return Math.max(d,"undefined"!==typeof m?Math.min(a,m):a)}static clampV(a,d,m){return a.map(L=>m?Vh.clamp(L,d,m):Vh.clamp(L,d))}static cross(a,d,m){return(d[0]-a[0])*
(m[1]-a[1])-(m[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Hd=Vh;Hd.neg=a=>[-a[0],-a[1]];Hd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Hd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Hd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Hd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Hd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Hd.mul=(a,d)=>[a[0]*d,a[1]*d];Hd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Hd.div=(a,d)=>[a[0]/d,a[1]/d];Hd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Hd.per=a=>[a[1],-a[0]];Hd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];Hd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Hd.len2=a=>a[0]*a[0]+a[1]*a[1];Hd.len=a=>Math.hypot(a[0],a[1]);Hd.pry=(a,d)=>Vh.dpr(a,d)/Vh.len(d);Hd.uni=a=>Vh.div(a,Vh.len(a));Hd.normalize=a=>Vh.uni(a);Hd.tangent=(a,d)=>Vh.uni(Vh.sub(a,d));Hd.dist2=(a,d)=>Vh.len2(Vh.sub(a,d));Hd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Hd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let m=1/Math.max(d[0],d[1]);m*=1.29289-(d[0]+d[1])*m*.29289;return[a[0]*m,a[1]*m]};Hd.ang=(a,d)=>Math.atan2(Vh.cpr(a,
d),Vh.dpr(a,d));Hd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Hd.med=(a,d)=>Vh.mul(Vh.add(a,d),.5);Hd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Hd.rotWith=(a,d,m=0)=>{if(0===m)return a;const L=Math.sin(m);m=Math.cos(m);const ha=a[0]-d[0];a=a[1]-d[1];return[ha*m-a*L+d[0],ha*L+a*m+d[1]]};Hd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Hd.lrp=(a,d,m)=>Vh.add(a,Vh.mul(Vh.sub(d,a),m));Hd.int=(a,d,m,L,ha=1)=>{m=(Vh.clamp(m,L)-m)/(L-m);return Vh.add(Vh.mul(a,1-m),Vh.mul(d,
ha))};Hd.ang3=(a,d,m)=>{a=Vh.vec(d,a);d=Vh.vec(d,m);return Vh.ang(a,d)};Hd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Hd.rescale=(a,d)=>{const m=Vh.len(a);return[d*a[0]/m,d*a[1]/m]};Hd.isLeft=(a,d,m)=>(d[0]-a[0])*(m[1]-a[1])-(m[0]-a[0])*(d[1]-a[1]);Hd.clockwise=(a,d,m)=>0<Vh.isLeft(a,d,m);Hd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Hd.nearestPointOnLineThroughPoint=(a,d,m)=>Vh.add(a,Vh.mul(d,Vh.pry(Vh.sub(m,a),d)));Hd.distanceToLineThroughPoint=(a,d,m)=>Vh.dist(m,Vh.nearestPointOnLineThroughPoint(a,
d,m));Hd.nearestPointOnLineSegment=(a,d,m,L=!0)=>{const ha=Vh.uni(Vh.sub(d,a));m=Vh.add(a,Vh.mul(ha,Vh.pry(Vh.sub(m,a),ha)));if(L){if(m[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(m[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(m[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(m[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return m};Hd.distanceToLineSegment=(a,d,m,L=!0)=>Vh.dist(m,Vh.nearestPointOnLineSegment(a,d,m,L));Hd.nudge=(a,d,m)=>Vh.isEqual(a,d)?a:Vh.add(a,Vh.mul(Vh.uni(Vh.sub(d,a)),m));
Hd.nudgeAtAngle=(a,d,m)=>[Math.cos(d)*m+a[0],Math.sin(d)*m+a[1]];Hd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Hd.pointsBetween=(a,d,m=6)=>Array.from(Array(m)).map((L,ha)=>{L=ha/(m-1);ha=Math.min(1,.5+Math.abs(.5-L));return[...Vh.lrp(a,d,L),ha]});Hd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Hd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Hd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Hd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var me=Hd,Of=class{static getRectangleSides(a,d,m=0){const L=[a[0]+d[0]/2,a[1]+d[1]/2],ha=Hd.rotWith(a,L,m),na=Hd.rotWith(Hd.add(a,[d[0],0]),L,m),ua=Hd.rotWith(Hd.add(a,d),L,m);a=Hd.rotWith(Hd.add(a,[0,d[1]]),L,m);return[["top",[ha,na]],["right",[na,ua]],["bottom",[ua,a]],["left",[a,ha]]]}static getBoundsSides(a){return Of.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Of.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let m=Infinity,L=Infinity,ha=
-Infinity,na=-Infinity;if(2>a.length)L=m=0,na=ha=1;else for(const ua of a)m=Math.min(ua[0],m),L=Math.min(ua[1],L),ha=Math.max(ua[0],ha),na=Math.max(ua[1],na);return 0!==d?Of.getBoundsFromPoints(a.map(ua=>Hd.rotWith(ua,[(m+ha)/2,(L+na)/2],d))):{minX:m,minY:L,maxX:ha,maxY:na,width:Math.max(1,ha-m),height:Math.max(1,na-L)}}static centerBounds(a,d){const m=Of.getBoundsCenter(a);return Of.translateBounds(a,[d[0]-m[0],d[1]-m[1]])}static snapBoundsToGrid(a,d){const m=Math.round(a.minX/d)*d,L=Math.round(a.minY/
d)*d,ha=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:m,minY:L,maxX:ha,maxY:a,width:Math.max(1,ha-m),height:Math.max(1,a-L)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const m=Of.getBoundsCenter(a);return Of.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[m[0]*d,m[1]*d])}static divideBounds(a,d){const m=Of.getBoundsCenter(a);
return Of.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[m[0]/d,m[1]/d])}static getRotatedBounds(a,d=0){a=Of.getRotatedCorners(a,d);let m=d=Infinity,L=-Infinity,ha=-Infinity;for(const na of a)d=Math.min(na[0],d),m=Math.min(na[1],m),L=Math.max(na[0],L),ha=Math.max(na[1],ha);return{minX:d,minY:m,maxX:L,maxY:ha,width:Math.max(1,L-d),height:Math.max(1,ha-m),rotation:0}}static getRotatedEllipseBounds(a,d,m,L,ha=0){var na=Math.cos(ha);const ua=
Math.sin(ha);ha=Math.hypot(m*na,L*ua);na=Math.hypot(m*ua,L*na);return{minX:a+m-ha,minY:d+L-na,maxX:a+m+ha,maxY:d+L+na,width:2*ha,height:2*na}}static getExpandedBounds(a,d){const m=Math.min(a.minX,d.minX),L=Math.min(a.minY,d.minY),ha=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:m,minY:L,maxX:ha,maxY:a,width:Math.abs(ha-m),height:Math.abs(a-L)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let m=1;m<a.length;m++)d=Of.getExpandedBounds(d,a[m]);return d}static getRotatedCorners(a,
d=0){const m=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(L=>Hd.rotWith(L,m,d)):a}static getTransformedBoundingBox(a,d,m,L=0,ha=!1){const [na,ua]=[a.minX,a.minY],[Ha,Ua]=[a.maxX,a.maxY];let [$a,jb]=[a.minX,a.minY],[mb,Kb]=[a.maxX,a.maxY];if("center"===d)return{minX:$a+m[0],minY:jb+m[1],maxX:mb+m[0],maxY:Kb+m[1],width:mb-$a,height:Kb-jb,scaleX:1,scaleY:1};const [Vb,Ob]=Hd.rot(m,-L);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":jb+=
Ob;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Kb+=Ob}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":$a+=Vb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":mb+=Vb}var jc=Ha-na;const xc=Ua-ua;var bc=(mb-$a)/jc,pc=(Kb-jb)/xc;a=0>bc;m=0>pc;var lc=Math.abs(mb-$a),Rc=Math.abs(Kb-jb);if(ha)switch(ha=jc/xc,jc=ha<lc/Rc,pc=1/ha*(0>pc?1:-1)*lc,bc=Rc*(0>bc?1:-1)*ha,d){case "top_left_corner":jc?jb=Kb+pc:$a=mb+bc;break;case "top_right_corner":jc?
jb=Kb+pc:mb=$a-bc;break;case "bottom_right_corner":jc?Kb=jb-pc:mb=$a-bc;break;case "bottom_left_corner":jc?Kb=jb-pc:$a=mb+bc;break;case "bottom_edge":case "top_edge":lc=($a+mb)/2;Rc*=ha;$a=lc-Rc/2;mb=lc+Rc/2;break;case "left_edge":case "right_edge":Rc=(jb+Kb)/2,lc/=ha,jb=Rc-lc/2,Kb=Rc+lc/2}if(0!==L%(2*Math.PI)){lc=[0,0];Rc=Hd.med([na,ua],[Ha,Ua]);bc=Hd.med([$a,jb],[mb,Kb]);switch(d){case "top_left_corner":lc=Hd.sub(Hd.rotWith([mb,Kb],bc,L),Hd.rotWith([Ha,Ua],Rc,L));break;case "top_right_corner":lc=
Hd.sub(Hd.rotWith([$a,Kb],bc,L),Hd.rotWith([na,Ua],Rc,L));break;case "bottom_right_corner":lc=Hd.sub(Hd.rotWith([$a,jb],bc,L),Hd.rotWith([na,ua],Rc,L));break;case "bottom_left_corner":lc=Hd.sub(Hd.rotWith([mb,jb],bc,L),Hd.rotWith([Ha,ua],Rc,L));break;case "top_edge":lc=Hd.sub(Hd.rotWith(Hd.med([$a,Kb],[mb,Kb]),bc,L),Hd.rotWith(Hd.med([na,Ua],[Ha,Ua]),Rc,L));break;case "left_edge":lc=Hd.sub(Hd.rotWith(Hd.med([mb,jb],[mb,Kb]),bc,L),Hd.rotWith(Hd.med([Ha,ua],[Ha,Ua]),Rc,L));break;case "bottom_edge":lc=
Hd.sub(Hd.rotWith(Hd.med([$a,jb],[mb,jb]),bc,L),Hd.rotWith(Hd.med([na,ua],[Ha,ua]),Rc,L));break;case "right_edge":lc=Hd.sub(Hd.rotWith(Hd.med([$a,jb],[$a,Kb]),bc,L),Hd.rotWith(Hd.med([na,ua],[na,Ua]),Rc,L))}[$a,jb]=Hd.sub([$a,jb],lc);[mb,Kb]=Hd.sub([mb,Kb],lc)}mb<$a&&([mb,$a]=[$a,mb]);Kb<jb&&([Kb,jb]=[jb,Kb]);return{minX:$a,minY:jb,maxX:mb,maxY:Kb,width:mb-$a,height:Kb-jb,scaleX:(mb-$a)/(Ha-na||1)*(a?-1:1),scaleY:(Kb-jb)/(Ua-ua||1)*(m?-1:1)}}static getTransformAnchor(a,d,m){let L=a;switch(a){case "top_left_corner":L=
d&&m?"bottom_right_corner":d?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":L=d&&m?"bottom_left_corner":d?"top_left_corner":m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":L=d&&m?"top_left_corner":d?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":L=d&&m?"top_right_corner":d?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return L}static getRelativeTransformedBoundingBox(a,
d,m,L,ha){L=a.minX+(L?d.maxX-m.maxX:m.minX-d.minX)/d.width*a.width;ha=a.minY+(ha?d.maxY-m.maxY:m.minY-d.minY)/d.height*a.height;const na=m.width/d.width*a.width;a=m.height/d.height*a.height;return{minX:L,minY:ha,maxX:L+na,maxY:ha+a,width:na,height:a}}static getRotatedSize(a,d){const m=Hd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(L=>Hd.rotWith(L,m,d));a=Of.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
Of.getBoundsCenter(a);return Bf(qe({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(m=>{d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1])});return d}static getTLSnapPoints(a,d,m){const L=qe({},a);a=[0,0];const ha=[],na={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},ua=["midX","minX","maxX"],Ha=["midY","minY","maxY"];d=d.map(Kb=>
{const Vb=ua.flatMap((jc,xc)=>ua.map((bc,pc)=>{const lc=L[jc]-Kb[bc];return{f:jc,t:bc,gap:lc,distance:Math.abs(lc),isCareful:0===xc||3===xc+pc}})),Ob=Ha.flatMap((jc,xc)=>Ha.map((bc,pc)=>{const lc=L[jc]-Kb[bc];return{f:jc,t:bc,gap:lc,distance:Math.abs(lc),isCareful:0===xc||3===xc+pc}}));return[Kb,Vb,Ob]});let Ua=Infinity,$a=Infinity,jb=Infinity,mb=Infinity;d.forEach(([,Kb,Vb])=>{Kb.forEach(Ob=>{Ob.distance<m&&Ob.distance<jb&&(jb=Ob.distance,Ua=Ob.gap)});Vb.forEach(Ob=>{Ob.distance<m&&Ob.distance<mb&&
(mb=Ob.distance,$a=Ob.gap)})});d.forEach(([Kb,Vb,Ob])=>{Infinity!==Ua&&Vb.forEach(jc=>{2>Math.abs(jc.gap-Ua)&&(na[jc.f]=Bf(qe({},na[jc.f]),{isSnapped:!0,to:Kb[jc.t],B:Kb,distance:jc.distance}))});Infinity!==$a&&Ob.forEach(jc=>{2>Math.abs(jc.gap-$a)&&(na[jc.f]=Bf(qe({},na[jc.f]),{isSnapped:!0,to:Kb[jc.t],B:Kb,distance:jc.distance}))})});a[0]=Infinity===Ua?0:Ua;a[1]=Infinity===$a?0:$a;L.minX-=a[0];L.midX-=a[0];L.maxX-=a[0];L.minY-=a[1];L.midY-=a[1];L.maxY-=a[1];ua.forEach(Kb=>{Kb=na[Kb];if(Kb.isSnapped){var {id:Vb,
B:Ob}=Kb;Kb=L[Vb];ha.push("minX"===Vb?[[Kb,L.midY],[Kb,Ob.minY],[Kb,Ob.maxY]]:[[Kb,L.minY],[Kb,L.maxY],[Kb,Ob.minY],[Kb,Ob.maxY]])}});Ha.forEach(Kb=>{Kb=na[Kb];if(Kb.isSnapped){var {id:Vb,B:Ob}=Kb;Kb=L[Vb];ha.push("midY"===Vb?[[L.midX,Kb],[Ob.minX,Kb],[Ob.maxX,Kb]]:[[L.minX,Kb],[L.maxX,Kb],[Ob.minX,Kb],[Ob.maxX,Kb]])}});return{offset:a,snapLines:ha}}static ensureRatio(a,d){const {width:m,height:L}=a,ha=qe({},a);m/L<d?(ha.width=L*d,ha.maxX+=m-a.width):(ha.height=m/d,ha.maxY+=L-a.height);return ha}static getDistributions(a,
d){var m=a.map(na=>{const ua=na.getBounds();return{id:na.id,point:[ua.minX,ua.minY],bounds:ua,center:na.getCenter()}});a=m.length;var L=Of.getCommonBounds(m.map(({bounds:na})=>na));const ha=[];switch(d){case "horizontal":d=m.reduce((na,ua)=>na+ua.bounds.width,0);if(d>L.width){const na=m.sort(($a,jb)=>$a.bounds.minX-jb.bounds.minX)[0],ua=m.sort(($a,jb)=>jb.bounds.maxX-$a.bounds.maxX)[0];L=m.filter($a=>$a!==na&&$a!==ua).sort(($a,jb)=>$a.center[0]-jb.center[0]);const Ha=(ua.center[0]-na.center[0])/(a-
1),Ua=na.center[0]+Ha;L.forEach(({id:$a,point:jb,bounds:mb},Kb)=>{ha.push({id:$a,prev:jb,next:[Ua+Ha*Kb-mb.width/2,mb.minY]})})}else{m=m.sort((Ha,Ua)=>Ha.center[0]-Ua.center[0]);let na=L.minX;const ua=(L.width-d)/(a-1);m.forEach(({id:Ha,point:Ua,bounds:$a})=>{ha.push({id:Ha,prev:Ua,next:[na,$a.minY]});na+=$a.width+ua})}break;case "vertical":if(d=m.reduce((na,ua)=>na+ua.bounds.height,0),d>L.height){const na=m.sort(($a,jb)=>$a.bounds.minY-jb.bounds.minY)[0],ua=m.sort(($a,jb)=>jb.bounds.maxY-$a.bounds.maxY)[0];
L=m.filter($a=>$a!==na&&$a!==ua).sort(($a,jb)=>$a.center[1]-jb.center[1]);const Ha=(ua.center[1]-na.center[1])/(a-1),Ua=na.center[1]+Ha;L.forEach(({id:$a,point:jb,bounds:mb},Kb)=>{ha.push({id:$a,prev:jb,next:[mb.minX,Ua+Ha*Kb-mb.height/2]})})}else{m=m.sort((Ha,Ua)=>Ha.center[1]-Ua.center[1]);let na=L.minY;const ua=(L.height-d)/(a-1);m.forEach(({id:Ha,point:Ua,bounds:$a})=>{ha.push({id:Ha,prev:Ua,next:[$a.minX,na]});na+=$a.height+ua})}}return ha}static getPackedDistributions(a){const d=Of.getCommonBounds(a.map(({bounds:ha})=>
ha)),m=[d.minX,d.minY],L=Object.fromEntries(a.map(ha=>[ha.id,[ha.bounds.minX,ha.bounds.minY]]));a=a.filter(ha=>{var na,ua,Ha,Ua;return!((null==(ua=null==(na=ha.props.handles)?void 0:na.start)?0:ua.bindingId)||(null==(Ua=null==(Ha=ha.props.handles)?void 0:Ha.end)?0:Ua.bindingId))}).map(ha=>{const na=ha.getBounds();return{id:ha.id,w:na.width+16,h:na.height+16,x:na.minX,y:na.minY}});y(a);return a.map(({id:ha,x:na,y:ua})=>({id:ha,prev:L[ha],next:[na+m[0],ua+m[1]]}))}},vp=class{static pointInCircle(a,
d,m){return Hd.dist(a,d)<=m}static pointInEllipse(a,d,m,L,ha=0){ha=ha||0;var na=Math.cos(ha);ha=Math.sin(ha);d=Hd.sub(a,d);a=na*d[0]+ha*d[1];na=ha*d[0]-na*d[1];return 1>=a*a/(m*m)+na*na/(L*L)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let m=0;d.forEach((L,ha)=>{ha=d[(ha+1)%d.length];L[1]<=a[1]?ha[1]>a[1]&&0<Hd.cross(L,ha,a)&&(m+=1):ha[1]<=a[1]&&0>Hd.cross(L,ha,a)&&--m});return 0!==m}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,m=3){for(let L=1;L<d.length;L++)if(Hd.distanceToLineSegment(d[L-1],d[L],a)<m)return!0;return!1}static _getSqSegDist(a,d,m){let L=d[0];d=d[1];let ha=m[0]-L,na=m[1]-d;if(0!==ha||0!==na){const ua=((a[0]-L)*ha+(a[1]-d)*na)/(ha*ha+na*na);1<ua?(L=m[0],d=m[1]):0<ua&&(L+=ha*ua,d+=na*ua)}ha=a[0]-L;na=a[1]-d;return ha*ha+na*na}static _simplifyStep(a,d,m,L,ha){let na=L,ua=-1;for(let Ha=d+1;Ha<m;Ha++){const Ua=vp._getSqSegDist(a[Ha],a[d],a[m]);
Ua>na&&(ua=Ha,na=Ua)}-1<ua&&na>L&&(1<ua-d&&vp._simplifyStep(a,d,ua,L,ha),ha.push(a[ua]),1<m-ua&&vp._simplifyStep(a,ua,m,L,ha))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var m=a[0],L=a[1];const ha=[m];for(let na=1,ua=a.length;na<ua;na++)L=a[na],(L[0]-m[0])*(L[0]-m[0])+(L[1]-m[1])*(L[1]-m[1])>d&&(ha.push(L),m=L);m!==L&&ha.push(L);m=ha.length-1;L=[ha[0]];vp._simplifyStep(ha,0,m,d,L);L.push(ha[m],a[a.length-1]);return L}static pointNearToPolyline(a,d,m=8){const L=d.length;for(let ha=1;ha<L;ha++)if(Hd.distanceToLineSegment(d[ha-
1],d[ha],a)<m)return!0;return!1}},nk=vp;kb(nk,"simplify",(a,d=1)=>{var m=a.length;const L=a[0],ha=a[m-1],[na,ua]=L,[Ha,Ua]=ha;if(2<m){let $a=0,jb=0;const mb=Hd.len2([Ua-ua,Ha-na]);for(let Kb=1;Kb<m-1;Kb++){const [Vb,Ob]=a[Kb],jc=Math.pow(Vb*(Ua-ua)+na*(Ob-Ua)+Ha*(ua-Ob),2)/mb;$a>jc||($a=jc,jb=Kb)}if($a>d)return m=vp.simplify(a.slice(0,jb+1),d),a=vp.simplify(a.slice(jb+1),d),m.concat(a.slice(1))}return[L,ha]});var sl=Math.PI,Hn=sl/2,Bk=2*sl,Kq={},lt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},cm=class{static circleFromThreePoints(a,d,m){const [L,ha]=a,[na,ua]=d,[Ha,Ua]=m;d=L*(ua-Ua)-ha*(na-Ha)+na*Ua-Ha*ua;a=-((L*L+ha*ha)*(Ua-ua)+(na*na+
ua*ua)*(ha-Ua)+(Ha*Ha+Ua*Ua)*(ua-ha))/(2*d);d=-((L*L+ha*ha)*(na-Ha)+(na*na+ua*ua)*(Ha-L)+(Ha*Ha+Ua*Ua)*(L-na))/(2*d);return[a,d,Math.hypot(a-L,d-ha)]}static perimeterOfEllipse(a,d){const m=Math.pow(a-d,2)/Math.pow(a+d,2);return sl*(a+d)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(a,d){a=(d-a)%Bk;return 2*a%Bk-a}static longAngleDist(a,d){return Bk-cm.shortAngleDist(a,d)}static lerpAngles(a,d,m){return a+cm.shortAngleDist(a,d)*m}static angleDelta(a,d){return cm.shortAngleDist(a,d)}static getSweep(a,
d,m){return cm.angleDelta(me.angle(a,d),me.angle(a,m))}static clampRadians(a){return(Bk+a)%Bk}static snapAngleToSegments(a,d){d=Bk/d;a=Math.floor((cm.clampRadians(a)+d/2)/d)*d%Bk;a<sl&&(a+=Bk);a>sl&&(a-=Bk);return a}static isAngleBetween(a,d,m){if(m===a||m===d)return!0;d=(d-a+Hn)%Hn;return d<=sl!==(m-a+Hn)%Hn>d}static degreesToRadians(a){return a*sl/180}static radiansToDegrees(a){return 180*a/sl}static getArcLength(a,d,m,L){a=cm.getSweep(a,m,L);return a/Bk*Bk*d}static getSweepFlag(a,d,m){m=me.angle(a,
m);return 0<(me.angle(a,d)-m+3*sl)%Bk-sl?0:1}static getLargeArcFlag(a,d,m){a=me.angle(m,a);d=(me.angle(m,d)-a+3*sl)%Bk-sl;return Math.abs(d)>Hn?0:1}static getArcDashOffset(a,d,m,L,ha){const na=cm.getSweepFlag(a,m,L);d=cm.getArcLength(a,d,m,L);return-(0>na?d:Bk*a[2]-d)/2+ha}static getEllipseDashOffset(a,d){return-(Bk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Xk=class{static getPolygonCentroid(a){var d=
a.map(m=>m[0]);a=a.map(m=>m[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};kb(Xk,"getEdges",a=>{const d=a.length;return a.map((m,L)=>[m,a[(L+1)%d]])});kb(Xk,"getEdgeOutwardNormal",(a,d)=>me.per(me.uni(me.sub(d,a))));kb(Xk,"getEdgeInwardNormal",(a,d)=>me.neg(Xk.getEdgeOutwardNormal(a,d)));kb(Xk,"getOffsetEdge",(a,d,m)=>{m=me.mul(me.per(me.uni(me.sub(d,a))),m);return[me.add(a,m),me.add(d,m)]});kb(Xk,"getOffsetEdges",(a,d)=>a.map(([m,L])=>Xk.getOffsetEdge(m,
L,d)));kb(Xk,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[me.add(a,[-d,-d]),me.add(a,[d,-d]),me.add(a,[d,d]),me.add(a,[-d,d])];if(2===a.length){const [m,L]=a;return[...Xk.getOffsetEdge(m,L,d),...Xk.getOffsetEdge(L,m,d)]}return Xk.getOffsetEdges(Xk.getEdges(a),d).flatMap((m,L,ha)=>{{L=ha[(L+1)%ha.length];const na=Hd.slope(m[0],m[1]);ha=Hd.slope(L[0],L[1]);na!==ha?Number.isNaN(na)&&!Number.isNaN(ha)?m=[m[0][0],(m[0][0]-L[0][0])*
ha+L[0][1]]:Number.isNaN(ha)&&!Number.isNaN(na)?m=[L[0][0],(L[0][0]-m[0][0])*na+m[0][1]]:(m=(na*m[0][0]-ha*L[0][0]+L[0][1]-m[0][1])/(na-ha),m=[m,ha*(m-L[0][0])+L[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});kb(Xk,"getPolygonVertices",(a,d,m=0,L=1)=>{a=me.div(a,2);const [ha,na]=[Math.max(1,a[0]-m),Math.max(1,a[1]-m)];m=[];for(let $a=0,jb=Bk/d;$a<d;$a++){var ua=(-Hn+$a*jb)%Bk,Ha=(-Hn+($a+1)*jb)%Bk;ua=me.add(a,[ha*Math.cos(ua),na*Math.sin(ua)]);Ha=me.add(a,[ha*
Math.cos(Ha),na*Math.sin(Ha)]);var Ua=me.med(ua,Ha);Ua=me.nudge(Ua,a,me.dist(a,Ua)*(1-L));m.push(ua,Ua,Ha)}return m});kb(Xk,"getTriangleVertices",(a,d=0,m=1)=>{const [L,ha]=a;var na=1-m;a=[L/2,d/2];m=[L-d,ha-d];d=[d/2,ha-d];const ua=Xk.getPolygonCentroid([a,m,d]),Ha=me.med(a,m),Ua=me.med(m,d),$a=me.med(d,a),jb=me.dist(Ha,ua)*na,mb=me.dist(Ua,ua)*na;na*=me.dist($a,ua);return[a,jb?me.nudge(Ha,ua,jb):Ha,m,mb?me.nudge(Ua,ua,mb):Ua,d,na?me.nudge($a,ua,na):$a]});kb(Xk,"getStarVertices",(a,d,m,L=1)=>{const ha=
me.div(d,2),na=me.mul(ha,L/2),ua=Bk/m/2;return Array.from(Array(2*m)).map((Ha,Ua)=>{Ha=-Hn+Ua*ua;const [$a,jb]=Ua%2?na:ha;return me.add(a,[$a*Math.cos(Ha),jb*Math.sin(Ha)])})});var wu=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],m=a.length;for(let L=1;L<m;L++){const [ha,na]=a[L],[ua,Ha]=a[(L+1)%m];d.push(ha,na,(ha+ua)/2,(na+Ha)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],m=a.length;for(let L=1;L<m-1;L++){const [ha,na]=a[L],[ua,Ha]=a[L+1];d.push(ha,na,(ha+ua)/2,(na+Ha)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const m=a.length;if(4>m)return"";let L=a[0],ha=a[1];var na=a[2];na=`M${L[0].toFixed(2)},${L[1].toFixed(2)} Q${ha[0].toFixed(2)},${ha[1].toFixed(2)} ${((ha[0]+na[0])/2).toFixed(2)},${((ha[1]+na[1])/2).toFixed(2)} T`;for(let ua=2,Ha=m-1;ua<
Ha;ua++)L=a[ua],ha=a[ua+1],na+=`${((L[0]+ha[0])/2).toFixed(2)},${((L[1]+ha[1])/2).toFixed(2)} `;d&&(na+="Z");return na}static getSvgPathFromStrokePoints(a,d=!1){const m=a.length;if(4>m)return"";let L=a[0].point,ha=a[1].point;var na=a[2].point;na=`M${L[0].toFixed(2)},${L[1].toFixed(2)} Q${ha[0].toFixed(2)},${ha[1].toFixed(2)} ${((ha[0]+na[0])/2).toFixed(2)},${((ha[1]+na[1])/2).toFixed(2)} T`;for(let ua=2,Ha=m-1;ua<Ha;ua++)L=a[ua].point,ha=a[ua+1].point,na+=`${((L[0]+ha[0])/2).toFixed(2)},${((L[1]+
ha[1])/2).toFixed(2)} `;d&&(na+="Z");return na}};kb(wu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var px={},qx=Object.assign,bq=Object.getOwnPropertyDescriptor,yp=Object.defineProperty,cq=Object.prototype,fa=[];Object.freeze(fa);var qa={};Object.freeze(qa);var Ga="undefined"!==typeof Proxy,hb=Object.toString(),Db=function(){},oc="undefined"!==typeof Object.getOwnPropertySymbols,Qc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,ed=Object.getOwnPropertyDescriptors||function(a){var d={};Qc(a).forEach(function(m){d[m]=bq(a,m)});return d},Nd=Symbol("mobx-stored-annotations"),ke=Symbol("mobx administration"),Ng=function(){function a(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Fj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};d.reportObserved=function(){return Ib(this)};d.reportChanged=function(){gd();dc(this);sd()};d.toString=function(){return this.name_};return a}(),di=E("Atom",Ng),Ef={identity:function(a,d){return a===d},structural:function(a,d){return ya(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return ya(a,d,1)}},kh="override",hi=sb(),Fh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Fh);var we=ob("observable"),$d=ob("observable.ref",{enhancer:Wa}),te=ob("observable.shallow",{enhancer:function(a,d,m){if(void 0===a||null===a||fe(a)||Vc(a)||zr(a)||Hs(a))return a;if(Array.isArray(a))return df.array(a,{name:m,deep:!1});if(P(a))return df.object(a,void 0,{name:m,deep:!1});if(M(a))return df.map(a,{name:m,deep:!1});if(Q(a))return df.set(a,{name:m,deep:!1})}}),xf=ob("observable.struct",
{enhancer:function(a,d){return ya(a,d)?d:a}}),Hf=Ba(we);Object.assign(Rb,Hf);var ri={box:function(a,d){d=d||Fh;return new Fs(a,lb(d),d.name,!0,d.equals)},array:function(a,d){d=d||Fh;return(!1===hg.useProxies||!1===d.proxy?Ne:ab)(a,lb(d),d.name)},map:function(a,d){d=d||Fh;return new Gz(a,lb(d),d.name)},set:function(a,d){d=d||Fh;return new Hz(a,lb(d),d.name)},object:function(a,d,m){if(!1===hg.useProxies||!1===(null==m?void 0:m.proxy))m=ld({},m);else{var L={},ha,na;C();L=ld(L,m);m=null!=(na=(ha=L[ke]).proxy_)?
na:ha.proxy_=new Proxy(L,jE)}return yc(m,a,d)},ref:Ba($d),shallow:Ba(te),deep:Hf,struct:Ba(xf)},df=qx(Rb,ri),ji=Va("computed"),Ni=Va("computed.struct",{equals:Ef.structural}),Wf=function(a,d){if(I(d))return Ka(a,d,ji);if(P(a))return Ba(Va("computed",a));d=P(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Eu(d)};Object.assign(Wf,ji);Wf.struct=Ba(Ni);var tp,Nv,Qv=0,XD=1,YD=null!=(tp=null==(Nv=bq(function(){},"name"))?void 0:Nv.configurable)?tp:!1,Az={value:"action",configurable:!0,writable:!1,
enumerable:!1};var ZD=Symbol.toPrimitive;var Fs=function(a){function d(L,ha,na,ua,Ha){void 0===na&&(na="ObservableValue");void 0===Ha&&(Ha=Ef["default"]);ua=a.call(this,na)||this;ua.enhancer=void 0;ua.hasUnreportedChange_=!1;ua.interceptors_=void 0;ua.changeListeners_=void 0;ua.value_=void 0;ua.dehancer=void 0;ua.enhancer=ha;ua.name_=na;ua.equals=Ha;ua.value_=ha(L,void 0,na);return ua}ca(d,a);var m=d.prototype;m.dehanceValue=function(L){return void 0!==this.dehancer?this.dehancer(L):L};m.set=function(L){L=
this.prepareNewValue_(L);L!==hg.UNCHANGED&&this.setNewValue_(L)};m.prepareNewValue_=function(L){if(Fb(this)){L=Ra(this,{object:this,type:kq,newValue:L});if(!L)return hg.UNCHANGED;L=L.newValue}L=this.enhancer(L,this.value_,this.name_);return this.equals(this.value_,L)?hg.UNCHANGED:L};m.setNewValue_=function(L){var ha=this.value_;this.value_=L;this.reportChanged();Pb(this)&&Jc(this,{type:kq,object:this,newValue:L,oldValue:ha})};m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
m.intercept_=function(L){return Qb(this,L)};m.observe_=function(L,ha){ha&&L({observableKind:"value",debugObjectName:this.name_,object:this,type:kq,newValue:this.value_,oldValue:void 0});return tc(this,L)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return ka(this.get())};m[ZD]=function(){return this.valueOf()};return d}(Ng),$D=E("ObservableValue",Fs);var aE=Symbol.toPrimitive;var Eu=function(){function a(m){this.dependenciesState_=
Fj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Fj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Gs(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=zt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;m.get||f(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=zb("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?Ef.structural:Ef["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){pb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==hg.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ib(this),Ec(this)){var m=hg.trackingContext;this.keepAlive_&&!m&&(hg.trackingContext=this);this.trackAndCompute()&&Zb(this);hg.trackingContext=m}}else Ec(this)&&(this.warnAboutUntrackedRead_(),gd(),this.value_=this.computeValue_(!1),sd());m=this.value_;if(m instanceof Gs)throw m.cause;return m};d.set=function(m){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var m=this.value_,L=this.dependenciesState_===Fj.NOT_TRACKING_,ha=this.computeValue_(!0);if(m=L||m instanceof Gs||ha instanceof Gs||!this.equals_(m,ha))this.value_=ha;return m};d.computeValue_=function(m){this.isComputing_=!0;var L=fc(!1);if(m)var ha=qc(this,this.derivation,this.scope_);else if(!0===hg.disableErrorBoundaries)ha=this.derivation.call(this.scope_);
else try{ha=this.derivation.call(this.scope_)}catch(na){ha=new Gs(na)}hg.allowStateChanges=L;this.isComputing_=!1;return ha};d.suspend_=function(){this.keepAlive_||(Gb(this),this.value_=void 0)};d.observe_=function(m,L){var ha=this,na=!0,ua=void 0;return Id(function(){var Ha=ha.get();if(!na||L){var Ua=Bb();m({observableKind:"computed",debugObjectName:ha.name_,type:kq,object:ha,newValue:Ha,oldValue:ua});hg.trackingDerivation=Ua}na=!1;ua=Ha})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ka(this.get())};d[aE]=function(){return this.valueOf()};return a}(),Fu=E("ComputedValue",Eu),Fj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Fj||={});var zt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(zt||={});var Gs=function(a){this.cause=void 0;this.cause=a},Rv=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},Sv=!0,Bz=!1,hg=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Sv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Rv).version&&(Sv=!1);if(Sv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Rv}setTimeout(function(){Bz||f(35)},1);return new Rv}(),At=function(){function a(m,L,ha,na){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Fj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=zt.NONE;this.name_=m;this.onInvalidate_=L;this.errorHandler_=ha;this.requiresObservable_=na}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,hg.pendingReactions.push(this),
0<hg.inBatch||hg.isRunningReactions||Tv(wb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){gd();this.isScheduled_=!1;var m=hg.trackingContext;hg.trackingContext=this;if(Ec(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(L){this.reportExceptionInDerivation_(L)}}hg.trackingContext=m;sd()}};d.track=function(m){if(!this.isDisposed_){gd();this.isRunning_=!0;var L=hg.trackingContext;hg.trackingContext=this;m=qc(this,m,void 0);hg.trackingContext=
L;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Gb(this);m instanceof Gs&&this.reportExceptionInDerivation_(m.cause);sd()}};d.reportExceptionInDerivation_=function(m){var L=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(hg.disableErrorBoundaries)throw m;hg.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);hg.globalReactionErrorHandlers.forEach(function(ha){return ha(m,L)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(gd(),Gb(this),sd()))};d.getDisposer_=function(){var m=this.dispose.bind(this);m[ke]=this;return m};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(m){void 0===m&&(m=!1);Ve(this,m)};return a}(),bE=100,Tv=function(a){return a()},Uv=E("Reaction",At),Cz="action",Dz=Ma(Cz),cE=Ma("action.bound",{bound:!0}),Ez=Ma("autoAction",{autoAction:!0}),dE=Ma("autoAction.bound",{autoAction:!0,bound:!0}),Tg=od(!1);Object.assign(Tg,Dz);var Gu=od(!0);Object.assign(Gu,Ez);Tg.bound=Ba(cE);Gu.bound=
Ba(dE);var eE=function(a){return a()},fE="onBO",gE="onBUO",hE=0;ie.prototype=Object.create(Error.prototype);var Fz=ia("flow"),iE=ia("flow.bound",{bound:!0}),Hu=Object.assign(function(a,d){if(I(d))return Ka(a,d,Fz);var m=a.name||"\x3cunnamed flow\x3e";d=function(){var L=arguments,ha=++hE,na=Tg(m+" - runid: "+ha+" - init",a).apply(this,L),ua,Ha=void 0;L=new Promise(function(Ua,$a){function jb(Ob){Ha=void 0;try{var jc=Tg(m+" - runid: "+ha+" - yield "+Vb++,na.next).call(na,Ob)}catch(xc){return $a(xc)}Kb(jc)}
function mb(Ob){Ha=void 0;try{var jc=Tg(m+" - runid: "+ha+" - yield "+Vb++,na["throw"]).call(na,Ob)}catch(xc){return $a(xc)}Kb(jc)}function Kb(Ob){if(Z(null==Ob?void 0:Ob.then))Ob.then(Kb,$a);else{if(Ob.done)return Ua(Ob.value);Ha=Promise.resolve(Ob.value);return Ha.then(jb,mb)}}var Vb=0;ua=$a;jb(void 0)});L.cancel=Tg(m+" - runid: "+ha+" - cancel",function(){try{if(Ha){var Ua=Ha;Z(Ua.cancel)&&Ua.cancel()}var $a=na["return"](void 0),jb=Promise.resolve($a.value);jb.then(Db,Db);Z(jb.cancel)&&jb.cancel();
ua(new ie)}catch(mb){ua(mb)}});return L};d.isMobXFlow=!0;return d},Fz);Hu.bound=Ba(iE);var jE={has:function(a,d){return a[ke].has_(d)},get:function(a,d){return a[ke].get_(d)},set:function(a,d,m){var L;return I(d)?null!=(L=a[ke].set_(d,m,!0))?L:!0:!1},deleteProperty:function(a,d){var m;return I(d)?null!=(m=a[ke].delete_(d,!0))?m:!0:!1},defineProperty:function(a,d,m){var L;return null!=(L=a[ke].defineProperty_(d,m))?L:!0},ownKeys:function(a){return a[ke].ownKeys_()},preventExtensions:function(a){f(13)}},
kq="update",kE={get:function(a,d){var m=a[ke];return d===ke?m:"length"===d?m.getArrayLength_():"string"!==typeof d||isNaN(d)?S(Vv,d)?Vv[d]:a[d]:m.get_(parseInt(d))},set:function(a,d,m){var L=a[ke];"length"===d&&L.setArrayLength_(m);"symbol"===typeof d||isNaN(d)?a[d]=m:L.set_(parseInt(d),m);return!0},preventExtensions:function(){f(15)}},tx=function(){function a(m,L,ha,na){void 0===m&&(m="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ha;this.legacyMode_=na;this.atom_=new Ng(m);this.enhancer_=function(ua,Ha){return L(ua,Ha,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};d.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};d.intercept_=function(m){return Qb(this,m)};d.observe_=function(m,L){void 0===L&&(L=!1);L&&m({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return tc(this,m)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&f("Out of range: "+m);var L=this.values_.length;if(m!==L)if(m>L){for(var ha=Array(m-L),na=0;na<m-L;na++)ha[na]=void 0;this.spliceWithArray_(L,0,ha)}else this.spliceWithArray_(m,
L-m)};d.updateArrayLength_=function(m,L){m!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=L;this.legacyMode_&&0<L&&ge(m+L+1)};d.spliceWithArray_=function(m,L,ha){var na=this,ua=this.values_.length;void 0===m?m=0:m>ua?m=ua:0>m&&(m=Math.max(0,ua+m));L=1===arguments.length?ua-m:void 0===L||null===L?0:Math.max(0,Math.min(L,ua-m));void 0===ha&&(ha=fa);if(Fb(this)){var Ha=Ra(this,{object:this.proxy_,type:"splice",index:m,removedCount:L,added:ha});if(!Ha)return fa;L=Ha.removedCount;ha=Ha.added}ha=
0===ha.length?ha:ha.map(function(Ua){return na.enhancer_(Ua,void 0)});this.legacyMode_&&this.updateArrayLength_(ua,ha.length-L);ua=this.spliceItemsIntoValues_(m,L,ha);0===L&&0===ha.length||this.notifyArraySplice_(m,ha,ua);return this.dehanceValues_(ua)};d.spliceItemsIntoValues_=function(m,L,ha){if(1E4>ha.length){var na;return(na=this.values_).splice.apply(na,[m,L].concat(ha))}na=this.values_.slice(m,m+L);var ua=this.values_.slice(m+L);this.values_.length+=ha.length-L;for(L=0;L<ha.length;L++)this.values_[m+
L]=ha[L];for(L=0;L<ua.length;L++)this.values_[m+ha.length+L]=ua[L];return na};d.notifyArrayChildUpdate_=function(m,L,ha){var na=!this.owned_&&!1,ua=Pb(this);m=ua||na?{observableKind:"array",object:this.proxy_,type:kq,debugObjectName:this.atom_.name_,index:m,newValue:L,oldValue:ha}:null;this.atom_.reportChanged();ua&&Jc(this,m)};d.notifyArraySplice_=function(m,L,ha){var na=!this.owned_&&!1,ua=Pb(this);m=ua||na?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:m,removed:ha,added:L,removedCount:ha.length,addedCount:L.length}:null;this.atom_.reportChanged();ua&&Jc(this,m)};d.get_=function(m){if(this.legacyMode_&&m>=this.values_.length)console.warn("[mobx] Out of bounds read: "+m);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m])};d.set_=function(m,L){var ha=this.values_;this.legacyMode_&&m>ha.length&&f(17,m,ha.length);if(m<ha.length){var na=ha[m];if(Fb(this)){L=Ra(this,{type:kq,object:this.proxy_,index:m,newValue:L});if(!L)return;
L=L.newValue}L=this.enhancer_(L,na);L!==na&&(ha[m]=L,this.notifyArrayChildUpdate_(m,L,na))}else{m=Array(m+1-ha.length);for(na=0;na<m.length-1;na++)m[na]=void 0;m[m.length-1]=L;this.spliceWithArray_(ha.length,0,m)}};return a}(),Vv={clear:function(){return this.splice(0)},replace:function(a){var d=this[ke];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var m=arguments.length,L=Array(2<m?m-2:0),ha=2;ha<m;ha++)L[ha-2]=arguments[ha];m=this[ke];
switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(a);case 2:return m.spliceWithArray_(a,d)}return m.spliceWithArray_(a,d,L)},spliceWithArray:function(a,d,m){return this[ke].spliceWithArray_(a,d,m)},push:function(){for(var a=this[ke],d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];a.spliceWithArray_(a.values_.length,0,m);return a.values_.length},pop:function(){return this.splice(Math.max(this[ke].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[ke],d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];a.spliceWithArray_(0,0,m);return a.values_.length},reverse:function(){hg.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){hg.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[ke];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};ib("concat",
fb);ib("flat",fb);ib("includes",fb);ib("indexOf",fb);ib("join",fb);ib("lastIndexOf",fb);ib("slice",fb);ib("toString",fb);ib("toLocaleString",fb);ib("every",vb);ib("filter",vb);ib("find",vb);ib("findIndex",vb);ib("flatMap",vb);ib("forEach",vb);ib("map",vb);ib("some",vb);ib("reduce",xb);ib("reduceRight",xb);var lE=E("ObservableArrayAdministration",tx),mE={};var nE=Symbol.iterator;var oE=Symbol.toStringTag;var Gz=function(){function a(m,L,ha){var na=this;void 0===L&&(L=Ya);void 0===ha&&(ha="ObservableMap");
this.name_=this.enhancer_=void 0;this[ke]=mE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=L;this.name_=ha;Z(Map)||f(18);this.keysAtom_=Xa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;ac(!0,function(){na.merge(m)})}var d=a.prototype;d.has_=function(m){return this.data_.has(m)};d.has=function(m){var L=this;if(!hg.trackingDerivation)return this.has_(m);var ha=this.hasMap_.get(m);if(!ha){var na=ha=new Fs(this.has_(m),
Wa,"ObservableMap.key?",!1);this.hasMap_.set(m,na);he(na,function(){return L.hasMap_["delete"](m)})}return ha.get()};d.set=function(m,L){var ha=this.has_(m);if(Fb(this)){L=Ra(this,{type:ha?kq:"add",object:this,newValue:L,name:m});if(!L)return this;L=L.newValue}ha?this.updateValue_(m,L):this.addValue_(m,L);return this};d["delete"]=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var ha=Pb(this),na=ha?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;bd(function(){var ua;L.keysAtom_.reportChanged();null==(ua=L.hasMap_.get(m))?void 0:ua.setNewValue_(!1);L.data_.get(m).setNewValue_(void 0);L.data_["delete"](m)});ha&&Jc(this,na);return!0}return!1};d.updateValue_=function(m,L){var ha=this.data_.get(m);L=ha.prepareNewValue_(L);if(L!==hg.UNCHANGED){var na=Pb(this);m=na?{observableKind:"map",debugObjectName:this.name_,type:kq,object:this,oldValue:ha.value_,name:m,newValue:L}:null;
ha.setNewValue_(L);na&&Jc(this,m)}};d.addValue_=function(m,L){var ha=this;bd(function(){var Ha,Ua=new Fs(L,ha.enhancer_,"ObservableMap.key",!1);ha.data_.set(m,Ua);L=Ua.value_;null==(Ha=ha.hasMap_.get(m))?void 0:Ha.setNewValue_(!0);ha.keysAtom_.reportChanged()});var na=Pb(this),ua=na?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:L}:null;na&&Jc(this,ua)};d.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var m=this,L=this.keys();return La({next:function(){var ha=L.next(),na=ha.done;ha=ha.value;return{done:na,value:na?void 0:m.get(ha)}}})};d.entries=function(){var m=this,L=this.keys();return La({next:function(){var ha=L.next(),na=ha.done;ha=ha.value;return{done:na,value:na?void 0:[ha,m.get(ha)]}}})};d[nE]=function(){return this.entries()};
d.forEach=function(m,L){for(var ha=Ca(this),na;!(na=ha()).done;)na=na.value,m.call(L,na[1],na[0],this)};d.merge=function(m){var L=this;zr(m)&&(m=new Map(m));bd(function(){P(m)?O(m).forEach(function(ha){return L.set(ha,m[ha])}):Array.isArray(m)?m.forEach(function(ha){return L.set(ha[0],ha[1])}):M(m)?(m.constructor!==Map&&f(19,m),m.forEach(function(ha,na){return L.set(na,ha)})):null!==m&&void 0!==m&&f(20,m)});return this};d.clear=function(){var m=this;bd(function(){nc(function(){for(var L=Ca(m.keys()),
ha;!(ha=L()).done;)m["delete"](ha.value)})})};d.replace=function(m){var L=this;bd(function(){for(var ha=Wc(m),na=new Map,ua=!1,Ha=Ca(L.data_.keys()),Ua;!(Ua=Ha()).done;)if(Ua=Ua.value,!ha.has(Ua))if(L["delete"](Ua))ua=!0;else{var $a=L.data_.get(Ua);na.set(Ua,$a)}for(ha=Ca(ha.entries());!(Ha=ha()).done;)Ua=Ha.value,Ha=Ua[0],$a=Ua[1],Ua=L.data_.has(Ha),L.set(Ha,$a),L.data_.has(Ha)&&($a=L.data_.get(Ha),na.set(Ha,$a),Ua||(ua=!0));if(!ua)if(L.data_.size!==na.size)L.keysAtom_.reportChanged();else for(ua=
L.data_.keys(),ha=na.keys(),Ha=ua.next(),Ua=ha.next();!Ha.done;){if(Ha.value!==Ua.value){L.keysAtom_.reportChanged();break}Ha=ua.next();Ua=ha.next()}L.data_=na});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};X(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:oE,get:function(){return"Map"}}]);return a}(),
zr=E("ObservableMap",Gz),pE={};var qE=Symbol.iterator;var rE=Symbol.toStringTag;var Hz=function(){function a(m,L,ha){void 0===L&&(L=Ya);void 0===ha&&(ha="ObservableSet");this.name_=void 0;this[ke]=pE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ha;Z(Set)||f(22);this.atom_=Xa(this.name_);this.enhancer_=function(na,ua){return L(na,ua,ha)};m&&this.replace(m)}var d=a.prototype;d.dehanceValue_=function(m){return void 0!==this.dehancer?
this.dehancer(m):m};d.clear=function(){var m=this;bd(function(){nc(function(){for(var L=Ca(m.data_.values()),ha;!(ha=L()).done;)m["delete"](ha.value)})})};d.forEach=function(m,L){for(var ha=Ca(this),na;!(na=ha()).done;)na=na.value,m.call(L,na,na,this)};d.add=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){bd(function(){L.data_.add(L.enhancer_(m,void 0));L.atom_.reportChanged()});var ha=Pb(this),na=ha?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:m}:null;ha&&Jc(this,na)}return this};d["delete"]=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var ha=Pb(this),na=ha?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;bd(function(){L.atom_.reportChanged();L.data_["delete"](m)});ha&&Jc(this,na);return!0}return!1};d.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};d.entries=
function(){var m=0,L=Array.from(this.keys()),ha=Array.from(this.values());return La({next:function(){var na=m;m+=1;return na<ha.length?{value:[L[na],ha[na]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var m=this,L=0,ha=Array.from(this.data_.values());return La({next:function(){return L<ha.length?{value:m.dehanceValue_(ha[L++]),done:!1}:{done:!0}}})};d.replace=function(m){var L=this;Hs(m)&&(m=new Set(m));bd(function(){Array.isArray(m)?
(L.clear(),m.forEach(function(ha){return L.add(ha)})):Q(m)?(L.clear(),m.forEach(function(ha){return L.add(ha)})):null!==m&&void 0!==m&&f("Cannot initialize set from "+m)});return this};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[qE]=function(){return this.values()};X(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:rE,
get:function(){return"Set"}}]);return a}(),Hs=E("ObservableSet",Hz),Iz=Object.create(null),Jz=function(){function a(m,L,ha,na){void 0===L&&(L=new Map);void 0===na&&(na=hi);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=L;this.name_=ha;this.defaultAnnotation_=na;this.keysAtom_=new Ng("ObservableObject.keys");this.isPlainObject_=P(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(m){return this.values_.get(m).get()};d.setObservablePropValue_=function(m,L){var ha=this.values_.get(m);if(ha instanceof Eu)return ha.set(L),!0;if(Fb(this)){L=Ra(this,{type:kq,object:this.proxy_||this.target_,name:m,newValue:L});if(!L)return null;L=L.newValue}L=ha.prepareNewValue_(L);if(L!==hg.UNCHANGED){var na=Pb(this);m=na?{type:kq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ha.value_,name:m,newValue:L}:
null;ha.setNewValue_(L);na&&Jc(this,m)}return!0};d.get_=function(m){hg.trackingDerivation&&!S(this.target_,m)&&this.has_(m);return this.target_[m]};d.set_=function(m,L,ha){void 0===ha&&(ha=!1);if(S(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,L);if(ha)return Reflect.set(this.target_,m,L);this.target_[m]=L;return!0}return this.extend_(m,{value:L,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ha)};d.has_=function(m){if(!hg.trackingDerivation)return m in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var L=this.pendingKeys_.get(m);L||(L=new Fs(m in this.target_,Wa,"ObservableObject.key?",!1),this.pendingKeys_.set(m,L));return L.get()};d.make_=function(m,L){!0===L&&(L=this.defaultAnnotation_);if(!1!==L){if(!(m in this.target_)){var ha;if(null!=(ha=this.target_[Nd])&&ha[m])return;f(1,L.annotationType_,this.name_+"."+m.toString())}for(ha=this.target_;ha&&ha!==cq;){var na=bq(ha,m);if(na){na=L.make_(this,m,na,ha);if(0===na)return;if(1===na)break}ha=
Object.getPrototypeOf(ha)}var ua;null==(ua=this.target_[Nd])?!0:delete ua[m]}};d.extend_=function(m,L,ha,na){void 0===na&&(na=!1);!0===ha&&(ha=this.defaultAnnotation_);if(!1===ha)return this.defineProperty_(m,L,na);if(L=ha.extend_(this,m,L,na)){var ua;null==(ua=this.target_[Nd])?!0:delete ua[m]}return L};d.defineProperty_=function(m,L,ha){void 0===ha&&(ha=!1);try{gd();var na=this.delete_(m);if(!na)return na;if(Fb(this)){var ua=Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:L.value});
if(!ua)return null;var Ha=ua.newValue;L.value!==Ha&&(L=T({},L,{value:Ha}))}if(ha){if(!Reflect.defineProperty(this.target_,m,L))return!1}else yp(this.target_,m,L);this.notifyPropertyAddition_(m,L.value)}finally{sd()}return!0};d.defineObservableProperty_=function(m,L,ha,na){void 0===na&&(na=!1);try{gd();var ua=this.delete_(m);if(!ua)return ua;if(Fb(this)){var Ha=Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:L});if(!Ha)return null;L=Ha.newValue}var Ua=Md(m),$a={configurable:hg.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Ua.get,set:Ua.set};if(na){if(!Reflect.defineProperty(this.target_,m,$a))return!1}else yp(this.target_,m,$a);var jb=new Fs(L,ha,"ObservableObject.key",!1);this.values_.set(m,jb);this.notifyPropertyAddition_(m,jb.value_)}finally{sd()}return!0};d.defineComputedProperty_=function(m,L,ha){void 0===ha&&(ha=!1);try{gd();var na=this.delete_(m);if(!na)return na;if(Fb(this)&&!Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;L.name||
(L.name="ObservableObject.key");L.context=this.proxy_||this.target_;var ua=Md(m),Ha={configurable:hg.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:ua.get,set:ua.set};if(ha){if(!Reflect.defineProperty(this.target_,m,Ha))return!1}else yp(this.target_,m,Ha);this.values_.set(m,new Eu(L));this.notifyPropertyAddition_(m,void 0)}finally{sd()}return!0};d.delete_=function(m,L){void 0===L&&(L=!1);if(!S(this.target_,m))return!0;if(Fb(this)&&!Ra(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;
try{var ha,na;gd();var ua=Pb(this),Ha=this.values_.get(m),Ua=void 0;if(!Ha&&ua){var $a;Ua=null==($a=bq(this.target_,m))?void 0:$a.value}if(L){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];Ha&&(this.values_["delete"](m),Ha instanceof Fs&&(Ua=Ha.value_),dc(Ha));this.keysAtom_.reportChanged();null==(ha=this.pendingKeys_)?void 0:null==(na=ha.get(m))?void 0:na.set(m in this.target_);if(ua){var jb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Ua,name:m};ua&&Jc(this,jb)}}finally{sd()}return!0};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};d.notifyPropertyAddition_=function(m,L){var ha,na,ua=Pb(this);ua&&(L=ua?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:L}:null,ua&&Jc(this,L));null==(ha=this.pendingKeys_)?void 0:null==(na=ha.get(m))?void 0:na.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Qc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),sE=E("ObservableObjectAdministration",Jz),tE=ze(0),ux=0,Kz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Kz,Array.prototype);var vx=function(a,d,m){function L(na,ua,Ha,Ua){void 0===Ha&&(Ha="ObservableArray");void 0===Ua&&(Ua=
!1);var $a=a.call(this)||this;ua=new tx(Ha,ua,Ua,!0);ua.proxy_=pa($a);J(pa($a),ke,ua);na&&na.length&&(ua=fc(!0),$a.spliceWithArray(0,0,na),hg.allowStateChanges=ua);Object.defineProperty(pa($a),"0",tE);return $a}ca(L,a);var ha=L.prototype;ha.concat=function(){this[ke].atom_.reportObserved();for(var na=arguments.length,ua=Array(na),Ha=0;Ha<na;Ha++)ua[Ha]=arguments[Ha];return Array.prototype.concat.apply(this.slice(),ua.map(function(Ua){return Vc(Ua)?Ua.slice():Ua}))};ha[m]=function(){var na=this,ua=
0;return La({next:function(){return ua<na.length?{value:na[ua++],done:!1}:{done:!0,value:void 0}}})};X(L,[{key:"length",get:function(){return this[ke].getArrayLength_()},set:function(na){this[ke].setArrayLength_(na)}},{key:d,get:function(){return"Array"}}]);return L}(Kz,Symbol.toStringTag,Symbol.iterator);Object.entries(Vv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&U(vx.prototype,d,a)});ge(1E3);var Lz=cq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Nc,extras:{getDebugName:ub},$mobx:ke});var uE=ba(614),lm=class{constructor(a){kb(this,"props");kb(this,"aspectRatio");kb(this,"type");kb(this,"hideCloneHandles",!1);kb(this,"hideResizeHandles",!1);kb(this,"hideRotateHandle",!1);kb(this,"hideContextBar",!1);kb(this,"hideSelectionDetail",!1);kb(this,"hideSelection",!1);kb(this,"canChangeAspectRatio",!0);kb(this,"canUnmount",
!0);kb(this,"canResize",[!0,!0]);kb(this,"canScale",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!1);kb(this,"canBind",!1);kb(this,"nonce");kb(this,"bindingDistance",4);kb(this,"isDirty",!1);kb(this,"lastSerialized");kb(this,"getCenter",()=>Of.getBoundsCenter(this.bounds));kb(this,"getRotatedBounds",()=>{const {bounds:na,props:{rotation:ua}}=this;return ua?Of.getBoundsFromPoints(Of.getRotatedCorners(na,ua)):na});kb(this,"hitTestPoint",na=>{var ua=this.rotatedBounds;if(!this.props.rotation)return nk.pointInBounds(na,
ua);ua=Of.getRotatedCorners(ua,this.props.rotation);return nk.pointInPolygon(na,ua)});kb(this,"hitTestLineSegment",(na,ua)=>{const Ha=Of.getBoundsFromPoints([na,ua]),{rotatedBounds:Ua,props:{rotation:$a=0}}=this;return Of.boundsContain(Ua,Ha)||$a?k(na,ua,Of.getRotatedCorners(this.bounds)).didIntersect:0<r(Ua,na,ua).length});kb(this,"hitTestBounds",na=>{const {rotatedBounds:ua,props:{rotation:Ha=0}}=this,Ua=Of.getRotatedCorners(this.bounds,Ha);return Of.boundsContain(na,ua)||0<w([na.minX,na.minY],
[na.width,na.height],Ua).length});kb(this,"getExpandedBounds",()=>Of.expandBounds(this.getBounds(),this.bindingDistance));kb(this,"getBindingPoint",(na,ua,Ha,Ua)=>{var $a=this.getBounds(),jb=this.getExpandedBounds();if(nk.pointInBounds(na,jb)){var mb=A(ua,Ha,jb).filter(Kb=>Kb.didIntersect).map(Kb=>Kb.points[0]);if(mb.length)return Ha=this.getCenter(),mb=mb.sort((Kb,Vb)=>me.dist(Vb,ua)-me.dist(Kb,ua))[0],mb=me.med(na,mb),Ua?(Ua=2>me.dist(na,Ha)?Ha:na,$a=0):(Ua=2>me.distanceToLineSegment(na,mb,Ha)?
Ha:mb,$a=nk.pointInBounds(na,$a)?this.bindingDistance:Math.max(this.bindingDistance,Of.getBoundsSides($a).map(Kb=>me.distanceToLineSegment(Kb[1][0],Kb[1][1],na)).sort((Kb,Vb)=>Kb-Vb)[0])),jb=me.divV(me.sub(Ua,[jb.minX,jb.minY]),[jb.width,jb.height]),{point:me.clampV(jb,0,1),distance:$a}}});kb(this,"getSerialized",()=>uc(Bf(qe({},this.props),{type:this.type,nonce:this.nonce})));kb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||bd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});kb(this,"validateProps",na=>na);kb(this,"update",(na,ua=!1,Ha=!1)=>{ua||this.isDirty||this.setIsDirty(!0);ua||Ha||this.incNonce();Object.assign(this.props,this.validateProps(na));return this});kb(this,"clone",()=>new this.constructor(this.serialized));kb(this,"onResetBounds",na=>this);kb(this,"scale",[1,1]);kb(this,"onResizeStart",na=>{var ua;this.scale=[...(null!=(ua=this.props.scale)?
ua:[1,1])];return this});kb(this,"onResize",(na,ua)=>{const {bounds:Ha,rotation:Ua,scale:[$a,jb]}=ua;na=[...this.scale];0>$a&&(na[0]*=-1);0>jb&&(na[1]*=-1);this.update({point:[Ha.minX,Ha.minY],scale:na,rotation:Ua});return this});kb(this,"onHandleChange",(na,{id:ua,delta:Ha})=>{if(void 0!==na.handles){var Ua=Js(na.handles);Ua[ua]=Bf(qe({},Ua[ua]),{point:me.add(Ha,na.handles[ua].point)});var $a=Of.getCommonTopLeft(Object.values(Ua).map(jb=>jb.point));Object.values(Ua).forEach(jb=>{jb.point=me.sub(jb.point,
$a)});this.update({point:me.add(na.point,$a),handles:Ua})}});var d,m;const L=this.constructor.id,ha=null!=(d=this.constructor.defaultProps)?d:{};this.type=L;this.props=qe(qe({scale:[1,1]},ha),a);this.nonce=null!=(m=a.nonce)?m:Date.now();cd(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:m,strokeType:L,opacity:ha,fill:na,noFill:ua,borderRadius:Ha}=this.props;return(0,uE.jsx)("rect",{fill:ua?"none":wf(na,"background"),stroke:wf(d,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===L?"8 2":void 0,fillOpacity:null!=ha?ha:.2,width:a.width,height:a.height,rx:Ha,ry:Ha})}};kb(lm,"type");le([df],lm.prototype,"props",2);le([df],lm.prototype,"canResize",2);le([df],lm.prototype,"nonce",2);le([df],lm.prototype,"isDirty",2);le([df],lm.prototype,
"lastSerialized",2);le([Wf],lm.prototype,"id",1);le([Tg],lm.prototype,"setNonce",1);le([Tg],lm.prototype,"incNonce",1);le([Tg],lm.prototype,"setIsDirty",1);le([Tg],lm.prototype,"setLastSerialized",1);le([Wf],lm.prototype,"center",1);le([Wf],lm.prototype,"bounds",1);le([Wf],lm.prototype,"rotatedBounds",1);le([Wf],lm.prototype,"serialized",1);le([Tg],lm.prototype,"update",2);var vn=class extends lm{constructor(a={}){super(a);kb(this,"canBind",!0);kb(this,"getBounds",()=>{const [d,m]=this.props.point,
[L,ha]=this.props.size;return{minX:d,minY:m,maxX:d+L,maxY:m+ha,width:L,height:ha}});kb(this,"getRotatedBounds",()=>Of.getBoundsFromPoints(Of.getRotatedCorners(this.bounds,this.props.rotation)));kb(this,"onResize",(d,m)=>{const {bounds:L,rotation:ha,scale:[na,ua]}=m;d=[...this.scale];0>na&&(d[0]*=-1);0>ua&&(d[1]*=-1);this.update({point:[L.minX,L.minY],scale:d,rotation:ha});return this.update({rotation:ha,point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,L.height)],scale:d})});kb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});cd(this)}};kb(vn,"id","box");kb(vn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Bt=class extends lm{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {pointBounds:d,props:{point:m}}=this;return Of.translateBounds(d,m)});kb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:m},bounds:L,rotatedPoints:ha}=this;return d?Of.translateBounds(Of.getBoundsFromPoints(ha),
m):L});kb(this,"normalizedPoints",[]);kb(this,"isResizeFlippedX",!1);kb(this,"isResizeFlippedY",!1);kb(this,"onResizeStart",()=>{var d;const {bounds:m,props:{points:L}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ha=[m.width,m.height];this.normalizedPoints=L.map(na=>Hd.divV(na,ha));return this});kb(this,"onResize",(d,m)=>{const {bounds:L,scale:[ha,na]}=m,ua=[L.width,L.height];d=[...this.scale];0>ha&&(d[0]*=-1);0>na&&(d[1]*=-1);return this.update(ha||na?{point:[L.minX,L.minY],points:this.normalizedPoints.map(Ha=>
Hd.mulV(Ha,ua).concat(Ha[2])),scale:d}:{point:[L.minX,L.minY],points:this.normalizedPoints.map(Ha=>Hd.mulV(Ha,ua).concat(Ha[2]))})});kb(this,"hitTestPoint",d=>{const {props:{points:m,point:L}}=this;return nk.pointNearToPolyline(Hd.sub(d,L),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {bounds:L,props:{points:ha,point:na}}=this;if(nk.pointInBounds(d,L)||nk.pointInBounds(m,L)||0<r(L,d,m).length){const ua=Hd.sub(d,na),Ha=Hd.sub(m,na);return k(ua,Ha,ha).didIntersect||!!ha.find(Ua=>5>Hd.dist(ua,Ua)||
5>Hd.dist(Ha,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,props:{points:L,point:ha}}=this,na=Of.translateBounds(d,Hd.neg(ha));return Of.boundsContain(d,m)||L.every(ua=>nk.pointInBounds(ua,na))||Of.boundsCollide(d,m)&&0<F([na.minX,na.minY],[na.width,na.height],L).length});cd(this)}get pointBounds(){const {props:{points:a}}=this;return Of.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:m},center:L}=this;if(!m)return d;const ha=Hd.sub(L,a);return d.map(na=>
Hd.rotWith(na,ha,m))}};kb(Bt,"id","draw");kb(Bt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});le([Wf],Bt.prototype,"pointBounds",1);le([Wf],Bt.prototype,"rotatedPoints",1);var wx=class extends vn{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {props:{point:[d,m],size:[L,ha]}}=this;return Of.getRotatedEllipseBounds(d,m,L/2,ha/2,0)});kb(this,"getRotatedBounds",()=>{const {props:{point:[d,m],size:[L,ha],rotation:na}}=this;return Of.getRotatedEllipseBounds(d,
m,L/2,ha/2,na)});kb(this,"hitTestPoint",d=>{const {props:{size:m,rotation:L},center:ha}=this;return nk.pointInEllipse(d,ha,m[0],m[1],L||0)});kb(this,"hitTestLineSegment",(d,m)=>{const {props:{size:[L,ha],rotation:na=0},center:ua}=this;return g(d,m,ua,L,ha,na).didIntersect});kb(this,"hitTestBounds",d=>{const {props:{size:[m,L],rotation:ha=0},rotatedBounds:na}=this;var ua;if(!(ua=Of.boundsContain(d,na))){const {minX:Ha,minY:Ua,width:$a,height:jb}=d;ua=0<t(this.center,m/2,L/2,ha,[Ha,Ua],[$a,jb]).length}return ua});
cd(this)}};kb(wx,"id","ellipse");kb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var xx=class extends vn{constructor(a={}){super(a);kb(this,"onResetBounds",d=>{const {clipping:m,size:L,point:ha}=this.props;if(m){const [na,ua,Ha,Ua]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[ha[0]-Ua,ha[1]-na],size:[L[0]+(Ua-ua),L[1]+(na-Ha)]})}if(d.asset){const {size:[na,ua]}=d.asset;this.update({clipping:0,point:[ha[0]+L[0]/2-na/2,ha[1]+L[1]/
2-ua/2],size:[na,ua]})}return this});kb(this,"onResize",(d,m)=>{const {bounds:L,clip:ha,scale:na}=m;({clipping:m}=this.props);const {clipping:ua}=d;if(ha){const {point:[Ha,Ua],size:[$a,jb]}=d,[mb,Kb,Vb,Ob]=ua?Array.isArray(ua)?ua:[ua,ua,ua,ua]:[0,0,0,0];m=[mb+(L.minY-Ua),Kb+(L.maxX-(Ha+$a)),Vb+(L.maxY-(Ua+jb)),Ob+(L.minX-Ha)]}else void 0!==ua&&(m=Array.isArray(ua)?ua:[ua,ua,ua,ua],m=[m[0]*na[1],m[1]*na[0],m[2]*na[1],m[3]*na[0]]);if(m&&Array.isArray(m)){const Ha=m;Ha.every((Ua,$a)=>0===$a||Ua===Ha[$a-
1])&&(m=Ha[0])}return this.update({point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,L.height)],clipping:m})});cd(this)}};kb(xx,"id","ellipse");kb(xx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Mz=class extends lm{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {points:d,props:{point:m}}=this;return Of.translateBounds(Of.getBoundsFromPoints(d),m)});kb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:m}}=this;return Of.translateBounds(Of.getBoundsFromPoints(d),m)});kb(this,"normalizedHandles",[]);kb(this,"onResizeStart",()=>{var d;const {props:{handles:m},bounds:L}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ha=[L.width,L.height];this.normalizedHandles=Object.values(m).map(na=>Hd.divV(na.point,ha));return this});kb(this,"onResize",(d,m)=>{const {bounds:L,scale:[ha,na]}=m,{props:{handles:ua},normalizedHandles:Ha}=this,Ua=[L.width,L.height];d=[...this.scale];0>ha&&
(d[0]*=-1);0>na&&(d[1]*=-1);return this.update({point:[L.minX,L.minY],handles:Object.values(ua).map(($a,jb)=>Bf(qe({},$a),{point:Hd.mulV(Ha[jb],Ua)})),scale:d})});kb(this,"hitTestPoint",d=>{const {points:m}=this;return nk.pointNearToPolyline(Hd.sub(d,this.props.point),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {bounds:L,points:ha,props:{point:na}}=this;if(nk.pointInBounds(d,L)||nk.pointInBounds(m,L)||0<r(L,d,m).length){const ua=Hd.sub(d,na),Ha=Hd.sub(m,na);return k(ua,Ha,ha).didIntersect||!!ha.find(Ua=>
5>Hd.dist(ua,Ua)||5>Hd.dist(Ha,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,points:L,props:{point:ha}}=this,na=Of.translateBounds(d,Hd.neg(ha));return Of.boundsContain(d,m)||L.every(ua=>nk.pointInBounds(ua,na))||Of.boundsCollide(d,m)&&0<F([na.minX,na.minY],[na.width,na.height],L).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Mz.defaultProps.handles);return d});cd(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return Xk.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:m}}=this;return m?Object.values(d).map(L=>Hd.rotWith(L.point,a,m)):this.points}},Ct=Mz;kb(Ct,"id","polyline");kb(Ct,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});le([Wf],Ct.prototype,"points",1);le([Wf],Ct.prototype,"centroid",1);le([Wf],Ct.prototype,"rotatedPoints",1);var Nz=class extends Ct{constructor(a={}){super(a);
kb(this,"hideResizeHandles",!0);kb(this,"hideRotateHandle",!0);kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Nz.defaultProps.handles);return d});kb(this,"getHandlesChange",(d,m)=>{var L=Ei(d.handles,m);L=Ei(L,{start:{point:me.toFixed(L.start.point)},end:{point:me.toFixed(L.end.point)}});if(!me.isEqual(L.start.point,L.end.point)){m={point:d.point,handles:Js(L)};d=d.point;L=Of.translateBounds(Of.getBoundsFromPoints(Object.values(L).map(na=>
na.point)),m.point);var ha=me.sub([L.minX,L.minY],d);me.isEqual(ha,[0,0])||(Object.values(m.handles).forEach(na=>{na.point=me.toFixed(me.sub(na.point,ha))}),m.point=me.toFixed(me.add(m.point,ha)));return m}});cd(this)}},Iu=Nz;kb(Iu,"id","line");kb(Iu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Ar=class extends vn{constructor(a={}){super(a);kb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:m},offset:L}=this;return Of.translateBounds(Of.getBoundsFromPoints(d),Hd.add(m,L))});kb(this,"hitTestPoint",d=>{const {vertices:m}=this;return nk.pointInPolygon(Hd.add(d,this.props.point),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {vertices:L,props:{point:ha}}=this;return k(Hd.sub(d,ha),Hd.sub(m,ha),L).didIntersect});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,offset:L,rotatedVertices:ha,props:{point:na}}=this,ua=Of.translateBounds(d,Hd.neg(Hd.add(na,L)));return Of.boundsContain(d,
m)||ha.every(Ha=>nk.pointInBounds(Ha,ua))||0<w([ua.minX,ua.minY],[ua.width,ua.height],ha).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});cd(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(m=>Hd.add(m,a))}get centroid(){const {vertices:a}=this;return Xk.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:m}}=this;return m?a.map(L=>
Hd.rotWith(L,d,m)):a}get offset(){const {props:{size:[a,d]}}=this,m=Of.getBoundsCenter(Of.getBoundsFromPoints(this.vertices));return Hd.sub(Hd.div([a,d],2),m)}getVertices(a=0){const {ratio:d,sides:m,size:L}=this.props;return 3===m?Xk.getTriangleVertices(L,a,d):Xk.getPolygonVertices(L,m,a,d)}};kb(Ar,"id","polygon");kb(Ar,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});le([Wf],Ar.prototype,"vertices",1);le([Wf],Ar.prototype,"pageVertices",
1);le([Wf],Ar.prototype,"centroid",1);le([Wf],Ar.prototype,"rotatedVertices",1);le([Wf],Ar.prototype,"offset",1);var yx=class extends vn{constructor(a={}){super(a);kb(this,"canEdit",!0);kb(this,"canFlip",!1);cd(this)}};kb(yx,"id","text");kb(yx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Wv=class extends vn{constructor(a={}){super(a);kb(this,"canEdit",!1);kb(this,"canFlip",!1);kb(this,"getBounds",()=>0===this.shapes.length?(Ie().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Of.getCommonBounds(this.shapes.map(d=>d.getBounds())));cd(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};kb(Wv,"id","group");kb(Wv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});le([Wf],Wv.prototype,"shapes",1);var Dt=class{constructor(){kb(this,"_id");kb(this,"_initial");kb(this,"_states");kb(this,"_isActive",!1);kb(this,"cursor");
kb(this,"_disposables",[]);kb(this,"children",new Map([]));kb(this,"registerStates",m=>{m.forEach(L=>this.children.set(L.id,new L(this,this)));return this});kb(this,"deregisterStates",m=>{m.forEach(L=>{var ha;null==(ha=this.children.get(L.id))?void 0:ha.dispose();this.children.delete(L.id)});return this});kb(this,"currentState",{});kb(this,"transition",(m,L={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const ha=this.children.get(m),na=this.currentState;
if(!ha)throw Error(`Could not find a state named ${m}.`);bd(()=>{this.currentState?(na._events.onExit(Bf(qe({},L),{toId:m})),na.dispose(),this.setCurrentState(ha),this._events.onTransition(Bf(qe({},L),{fromId:na.id,toId:m})),ha._events.onEnter(Bf(qe({},L),{fromId:na.id}))):(this.currentState=ha,ha._events.onEnter(Bf(qe({},L),{fromId:""})))});return this});kb(this,"isIn",m=>{m=m.split(".").reverse();let L=this;for(;0<m.length;){const ha=m.pop();if(!ha)return!0;if(L.currentState.id===ha){if(0===m.length)return!0;
L=L.currentState}else break}return!1});kb(this,"isInAny",(...m)=>m.some(this.isIn));kb(this,"forwardEvent",(m,...L)=>{var ha,na;(null==(na=null==(ha=this.currentState)?void 0:ha._events)?0:na[m])&&bd(()=>{var ua;return null==(ua=this.currentState._events)?void 0:ua[m](...L)})});kb(this,"_events",{onTransition:m=>{var L;null==(L=this.onTransition)?void 0:L.call(this,m)},onEnter:m=>{var L;this._isActive=!0;this.initial&&this.transition(this.initial,m);null==(L=this.onEnter)?void 0:L.call(this,m)},onExit:m=>
{var L,ha,na;this._isActive=!1;null==(ha=null==(L=this.currentState)?void 0:L.onExit)?void 0:ha.call(L,{toId:"parent"});null==(na=this.onExit)?void 0:na.call(this,m)},onPointerDown:(m,L)=>{var ha;null==(ha=this.onPointerDown)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerDown",m,L)},onPointerUp:(m,L)=>{var ha;null==(ha=this.onPointerUp)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerUp",m,L)},onPointerMove:(m,L)=>{var ha;null==(ha=this.onPointerMove)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerMove",
m,L)},onPointerEnter:(m,L)=>{var ha;null==(ha=this.onPointerEnter)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerEnter",m,L)},onPointerLeave:(m,L)=>{var ha;null==(ha=this.onPointerLeave)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerLeave",m,L)},onDoubleClick:(m,L)=>{var ha;null==(ha=this.onDoubleClick)?void 0:ha.call(this,m,L);this.forwardEvent("onDoubleClick",m,L)},onKeyDown:(m,L)=>{var ha;this._events.onModifierKey(m,L);null==(ha=this.onKeyDown)?void 0:ha.call(this,m,L);this.forwardEvent("onKeyDown",
m,L)},onKeyUp:(m,L)=>{var ha;this._events.onModifierKey(m,L);null==(ha=this.onKeyUp)?void 0:ha.call(this,m,L);this.forwardEvent("onKeyUp",m,L)},onPinchStart:(m,L)=>{var ha;null==(ha=this.onPinchStart)?void 0:ha.call(this,m,L);this.forwardEvent("onPinchStart",m,L)},onPinch:(m,L)=>{var ha;null==(ha=this.onPinch)?void 0:ha.call(this,m,L);this.forwardEvent("onPinch",m,L)},onPinchEnd:(m,L)=>{var ha;null==(ha=this.onPinchEnd)?void 0:ha.call(this,m,L);this.forwardEvent("onPinchEnd",m,L)},onModifierKey:(m,
L)=>{switch(L.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,L)}}});kb(this,"onEnter");kb(this,"onExit");kb(this,"onTransition");kb(this,"onPointerDown");kb(this,"onPointerUp");kb(this,"onPointerMove");kb(this,"onPointerEnter");kb(this,"onPointerLeave");kb(this,"onDoubleClick");kb(this,"onKeyDown");kb(this,"onKeyUp");kb(this,"onPinchStart");kb(this,"onPinch");kb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};kb(Dt,"id");kb(Dt,"shortcuts");le([df],Dt.prototype,"currentState",2);le([Tg],Dt.prototype,"setCurrentState",
1);var zx=class extends Dt{constructor(a,d){var m,L;super();kb(this,"_root");kb(this,"_parent");kb(this,"children",new Map([]));kb(this,"registerStates",ha=>{ha.forEach(na=>this.children.set(na.id,new na(this,this._root)));return this});kb(this,"deregisterStates",ha=>{ha.forEach(na=>{var ua;null==(ua=this.children.get(na.id))?void 0:ua.dispose();this.children.delete(na.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(m=this.initial)?
m:this.states[0].id,m=this.children.get(a))&&(this.setCurrentState(m),null==(L=this.currentState)?void 0:L._events.onEnter({fromId:"initial"}));cd(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};kb(zx,"cursor");var Br=class extends zx{constructor(){super(...arguments);kb(this,"isLocked",!1);kb(this,"previous");kb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});kb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Wi=class extends zx{get app(){return this.root}get tool(){return this.parent}},Oz=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",
{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:m}}=this.app;var {Shape:L}=this.tool;L=new L({id:ek(),type:L.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:me.abs(me.sub(m,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};L.canChangeAspectRatio||(L.aspectRatio?(this.aspectRatio=L.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=L;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(L);this.app.setSelectedShapes([L])});kb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:m,originPoint:L,shiftKey:ha}=this.app.inputs;a=ha||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=Of.getTransformedBoundingBox(d,"bottom_right_corner",me.sub(m,L),0,a);this.app.settings.snapToGrid&&!a&&(d=Of.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});kb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};kb(Oz,"id","creating");var Pz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});
kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(Pz,"id","idle");var Qz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(Qz,"id","pointing");var Oq=class extends Br{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb(Oq,"id","box");kb(Oq,"states",[Pz,Qz,Oz]);kb(Oq,"initial","idle");var Rz=class extends Wi{constructor(){super(...arguments);kb(this,"shape",{});kb(this,"points",[[0,0,.5]]);kb(this,"persistDebounced",Cg(this.app.persist,200));kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:m}=this.tool;var {originPoint:L}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
m){this.shape=m;var {shape:ha}=this;var na=ha.props.points[ha.props.points.length-1];const Ha=Hd.sub(L,ha.props.point).concat(null!=(a=L[2])?a:.5);this.points=[...ha.props.points,na,na];const Ua=Math.ceil(Hd.dist(na,L)/16);for(let $a=0,jb=$a/(Ua-1);$a<Ua;$a++){a=this.points;L=a.push;ha=Hd.lrp(na,Ha,jb);var ua=na[2];L.call(a,ha.concat.call(ha,ua+(Ha[2]-ua)*jb))}this.addNextPoint(Ha)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(na=L[2])?na:.5]],this.shape=new d({id:ek(),type:d.id,parentId:this.app.currentPage.id,
point:L.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});kb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:m}=this.app.inputs;Hd.isEqual(m,d)||this.addNextPoint(Hd.sub(d,a.props.point).concat(d[2]))});kb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?nk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,m=Hd.min(a,
[0,0]);this.points.push(a);0>m[0]||0>m[1]?(this.points=this.points.map(L=>Hd.sub(L,m).concat(L[2])),d.update({point:Hd.add(d.props.point,m),points:this.points})):d.update({points:this.points})}};kb(Rz,"id","creating");var Sz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
kb(Sz,"id","idle");var Tz=class extends Wi{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(Tz,"id","pinching");var Ju=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"simplify",!0);kb(this,"simplifyTolerance",
1);kb(this,"previousShape");kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Ju,"id","draw");kb(Ju,"states",[Sz,Rz,Tz]);kb(Ju,"initial","idle");var Uz=class extends Wi{constructor(){super(...arguments);kb(this,"points",[[0,0,.5]]);kb(this,"hitShapes",new Set);kb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});kb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Hd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(d,a)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});kb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};kb(Uz,"id","erasing");var Vz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(Vz,"id","idle");var Wz=class extends Wi{constructor(){super(...arguments);kb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});kb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};kb(Wz,"id","pointing");var Xv=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Xv,"id","erase");kb(Xv,"states",[Vz,Wz,Uz]);kb(Xv,
"initial","idle");var Ax=class extends Wi{constructor(){super(...arguments);kb(this,"handle",{});kb(this,"handleId","end");kb(this,"currentShape",{});kb(this,"initialShape",{});kb(this,"bindableShapeIds",[]);kb(this,"startBindingShapeId");kb(this,"newStartBindingId","");kb(this,"draggedBindingId","");kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:m,currentPoint:L,modKey:ha,altKey:na},settings:{snapToGrid:ua}}=this.app;var Ha=this.app.getShapeById(this.initialShape.id),
{handles:Ua}=this.initialShape,$a=this.handleId,jb="start"===this.handleId?"end":"start";if(!me.isEqual(d,L)){var mb=me.sub(L,m);if(a){var Kb=Ua[jb].point,Vb=me.add(Ua[$a].point,mb),Ob=me.angle(Kb,Vb);Kb=me.rotWith(Vb,Kb,cm.snapAngleToSegments(Ob,24)-Ob);mb=me.add(mb,me.sub(Kb,Vb))}mb=me.add(Ua[$a].point,mb);Ua={[$a]:Bf(qe({},Ua[$a]),{point:ua?me.snap(mb,8):me.toFixed(mb),bindingId:void 0})};var jc=this.currentShape.getHandlesChange(this.initialShape,Ua);if(jc){Ua=Ei(Ha.props,jc);var xc={},bc;$a=
Ua.handles[$a];jb=Ua.handles[jb];if(this.startBindingShapeId){var pc;if(mb=this.app.getShapeById(this.startBindingShapeId)){Vb=mb.getCenter();Kb=Ua.handles.end;var lc=me.add(Ua.handles.start.point,Ua.point);me.isEqual(lc,Vb)&&lc[1]++;Ob=mb.hitTestPoint(L);lc=me.uni(me.sub(lc,Vb));const Rc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ha||mb.hitTestPoint(me.add(Ua.point,Kb.point))||(pc=kc(Ha.props,mb,"start",this.newStartBindingId,Vb,Vb,lc,Ob));pc&&!Rc?(xc[this.newStartBindingId]=
pc,Ua.handles.start.bindingId=pc.id):!pc&&Rc&&(console.log("removing start binding"),delete xc[this.newStartBindingId],Ua.handles.start.bindingId=void 0)}}if(!ha){pc=me.add(jb.point,Ua.point);jb=me.add($a.point,Ua.point);$a=me.uni(me.sub(jb,pc));const Rc=me.add(Ua.point,Ua.handles.start.point),Tc=me.add(Ua.point,Ua.handles.end.point);mb=this.bindableShapeIds.map(Dd=>this.app.getShapeById(Dd)).sort((Dd,Ud)=>Ud.nonce-Dd.nonce).filter(Dd=>![Rc,Tc].every(Ud=>Dd.hitTestPoint(Ud)));for(const Dd of mb)if(bc=
kc(Ha.props,Dd,this.handleId,this.draggedBindingId,jb,pc,$a,na))break}bc?(xc[this.draggedBindingId]=bc,Ua=Ei(Ua,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Ha=Ha.props.handles[this.handleId].bindingId,void 0!==Ha&&(delete xc[Ha],Ua=Ei(Ua,{handles:{[this.handleId]:{bindingId:void 0}}})));jc=this.currentShape.getHandlesChange(Ua,Ua.handles);bd(()=>{var Rc;if(jc){this.currentShape.update(jc);this.app.currentPage.updateBindings(xc);const Tc=Object.values(null!=(Rc=jc.handles)?Rc:
{}).map(Dd=>Dd.bindingId).map(Dd=>this.app.currentPage.bindings[Dd]).filter(Boolean).flatMap(Dd=>[Dd.toId,Dd.fromId].filter(Boolean));this.app.setBindingShapes(Tc)}})}}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});kb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};kb(Ax,"id","creating");var Xz=class extends Ax{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=ek();this.draggedBindingId=ek();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:m}=this.app.inputs;d=new d(Bf(qe({},d.defaultProps),{id:ek(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?me.snap(m,8):m,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=uc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(L=>this.app.getShapeById(L)).filter(L=>nk.pointInBounds(m,L.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};kb(Xz,"id","creating");
var Yz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};kb(Yz,"id","idle");var Zz=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
kb(Zz,"id","pointing");var Yv=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Yv,"id","line");kb(Yv,"states",[Yz,Zz,Xz]);kb(Yv,"initial","idle");var $z=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:m}=this.tool,L=new m({id:ek(),type:m.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=L;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);bd(()=>{this.app.currentPage.addShapes(L);const ha=this.app.settings.snapToGrid?me.snap([...d],8):d,{bounds:na}=L;L.update({point:me.sub(ha,[na.width/2,na.height/2])});this.app.transition("select");this.app.setSelectedShapes([L]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
kb($z,"id","creating");var aA=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(aA,"id","idle");var Zv=class extends Br{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb(Zv,"id","box");kb(Zv,"states",[aA,$z]);kb(Zv,"initial","idle");var vE=Jf(gm()),wE=class extends vE.default{constructor(){super(...arguments);kb(this,"toBBox",a=>a.rotatedBounds)}},bA=class extends Wi{constructor(){super(...arguments);kb(this,"initialSelectedIds",[]);kb(this,"initialSelectedShapes",[]);kb(this,"tree",new wE);kb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});kb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:m,currentPoint:L}}=this.app,ha=Of.getBoundsFromPoints([L,m],0);this.app.setBrush(ha);const na=[...(new Set(this.tree.search(ha).filter(ua=>d?Of.boundsContain(ha,ua.rotatedBounds):ua.hitTestBounds(ha)).filter(ua=>"group"!==ua.type).map(ua=>{var Ha;return null!=(Ha=this.app.getParentGroup(ua))?
Ha:ua})))];a?na.every(ua=>this.initialSelectedShapes.includes(ua))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(ua=>!na.includes(ua))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...na]))]):this.app.setSelectedShapes(na);this.app.viewport.panToPointWhenNearBounds(L)});kb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});kb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};kb(bA,"id","brushing");var cA=class extends Wi{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:m,inputs:{shiftKey:L}}=this.app;if("shape"===a.type&&!m.has(a.shape.id)){const ha=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;L?this.app.setSelectedShapes([...Array.from(m.values()),ha.id]):this.app.setSelectedShapes([ha])}});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};kb(cA,"id","contextMenu");var dA=class extends Wi{constructor(){super(...arguments);
kb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});kb(this,"onExit",()=>{});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});kb(this,"onPointerDown",(a,d)=>{const {selectedShapes:m,inputs:{ctrlKey:L}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(L)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(m.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:ha,inputs:na}=this.app;
ha&&nk.pointInBounds(na.currentPoint,ha)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",qe(qe({},d),a))}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});kb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});kb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};kb(dA,"id","idle");var eA=class extends Wi{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:m,inputs:{shiftKey:L}}=this.app,ha=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;L?this.app.setSelectedShapes([...Array.from(m.values()),ha.id]):this.app.setSelectedShapes([ha])});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(eA,"id","pointingShape");var fA=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(fA,"id","pointingBoundsBackground");var gA=class extends Wi{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("brushing")});kb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};kb(gA,"id","pointingCanvas");var hA=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,
"isCloning",!1);kb(this,"didClone",!1);kb(this,"initialPoints",{});kb(this,"initialShapePoints",{});kb(this,"initialClonePoints",{});kb(this,"clones",[]);kb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:L,props:{point:ha}})=>[L,ha.slice()]));document.querySelectorAll("input,textarea").forEach(L=>L.blur());null==(a=document.getSelection())?void 0:a.empty();m.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});kb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});kb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});kb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(m=>{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});kb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:m,allSelectedShapes:L}=this.app;m.removeShapes(...L);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:m}}=this.app,{initialPoints:L}=this,ha=Hd.sub(m,d);a&&(Math.abs(ha[0])<Math.abs(ha[1])?ha[0]=0:ha[1]=0);bd(()=>{this.app.allSelectedShapesArray.filter(na=>!na.props.isLocked).forEach(na=>{let ua=Hd.add(L[na.id],ha);this.app.settings.snapToGrid&&(ua=Hd.snap(ua,8));na.update({point:ua})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(Bf(qe({},a.serialized),{id:ek(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};kb(hA,"id","translating");var iA=class extends Wi{constructor(){super(...arguments);kb(this,"pointedSelectedShape");kb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});kb(this,"onExit",()=>{this.pointedSelectedShape=void 0});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:m}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof vn&&nk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(iA,"id","pointingSelectedShape");var jA=class extends Wi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a;this.updateCursor()});kb(this,"onExit",()=>{this.app.cursors.reset()});
kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("resizing",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.info.handle],this.app.selectionBounds.rotation)}};kb(jA,"id","pointingResizeHandle");var kA=class extends Wi{constructor(){super(...arguments);
kb(this,"isSingle",!1);kb(this,"handle","bottom_right_corner");kb(this,"snapshots",{});kb(this,"initialCommonBounds",{});kb(this,"selectionRotation",0);kb(this,"resizeType","corner");kb(this,"onEnter",a=>{var d,m;const {history:L,selectedShapesArray:ha,selectionBounds:na}=this.app;if(!na)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(kA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);L.pause();const ua=Of.getBoundsFromPoints(ha.map(Ha=>Of.getBoundsCenter(Ha.bounds)));this.selectionRotation=(this.isSingle=1===ha.length)?null!=(m=ha[0].props.rotation)?m:0:0;this.initialCommonBounds=qe({},na);this.snapshots=Object.fromEntries(ha.map(Ha=>{const Ua=qe({},Ha.bounds),[$a,jb]=Of.getBoundsCenter(Ua);return[Ha.id,{props:Ha.serialized,bounds:Ua,transformOrigin:[($a-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(jb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[($a-ua.minX)/ua.width,(jb-ua.minY)/ua.height],isAspectRatioLocked:Ha.props.isAspectRatioLocked||!(Ha.canChangeAspectRatio&&!Ha.props.rotation)}]}));ha.forEach(Ha=>{var Ua;null==(Ua=Ha.onResizeStart)?void 0:Ua.call(Ha,{isSingle:this.isSingle})})});kb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
kb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:m,originPoint:L,currentPoint:ha}}=this.app,{handle:na,snapshots:ua,initialCommonBounds:Ha}=this;let Ua=Hd.sub(ha,L);a&&(Ua=Hd.mul(Ua,2));const $a=this.app.selectedShapes.values().next().value;let jb=Of.getTransformedBoundingBox(Ha,na,Ua,this.selectionRotation,d||this.isSingle&&(m?!("clipping"in $a.props):!$a.canChangeAspectRatio||$a.props.isAspectRatioLocked));a&&(jb=qe(qe({},jb),Of.centerBounds(jb,Of.getBoundsCenter(Ha))));const {scaleX:mb,
scaleY:Kb}=jb;this.app.selectedShapes.forEach(Vb=>{var Ob,jc;const {isAspectRatioLocked:xc,props:bc,bounds:pc,transformOrigin:lc}=ua[Vb.id];let Rc=Of.getRelativeTransformedBoundingBox(jb,Ha,pc,0>mb,0>Kb);if(Vb.canResize.some(Ud=>Ud)||Vb.props.isSizeLocked||!this.isSingle){var Tc=[mb,Kb],Dd=null!=(Ob=bc.rotation)?Ob:0;Ob=Of.getBoundsCenter(Rc);Vb.canFlip||(Tc=Hd.abs(Tc));Vb.canScale||(Tc=null!=(jc=bc.scale)?jc:[1,1]);if(Dd&&0>mb&&0<=Kb||0>Kb&&0<=mb)Dd*=-1;this.app.settings.snapToGrid&&!xc&&(Rc=Of.snapBoundsToGrid(Rc,
8));Vb.onResize(bc,{center:Ob,rotation:Dd,scale:Tc,bounds:Rc,type:na,clip:m,transformOrigin:lc})}});this.updateCursor(mb,Kb);this.app.viewport.panToPointWhenNearBounds(ha)});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(qe({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var m,L,ha,na;const ua=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":ua||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(L=this.app.selectionBounds)?void 0:L.rotation);break;case "top_right_corner":case "bottom_left_corner":ua||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(ha=this.app.selectionBounds)?void 0:ha.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(na=this.app.selectionBounds)?void 0:na.rotation)}}},Bx=kA;kb(Bx,"id","resizing");kb(Bx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var lA=class extends Wi{constructor(){super(...arguments);
kb(this,"cursor","rotate");kb(this,"handle","");kb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],
this.app.selectionRotation)}};kb(lA,"id","pointingRotateHandle");var mA=class extends Wi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(mA,"id","pointingShapeBehindBounds");var Cx=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","rotate");kb(this,"snapshot",{});kb(this,"initialCommonCenter",[0,0]);kb(this,"initialCommonBounds",{});kb(this,"initialAngle",0);kb(this,"initialSelectionRotation",0);kb(this,"handle","");kb(this,"onEnter",a=>{const {history:d,selectedShapesArray:m,selectionBounds:L}=this.app;
if(!L)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=qe({},L);this.initialCommonCenter=Of.getBoundsCenter(L);this.initialAngle=Hd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(ha=>[ha.id,{point:[...ha.props.point],center:[...ha.center],rotation:ha.props.rotation,handles:"handles"in ha?Js(ha.handles):void 0}]));this.updateCursor()});kb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});kb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:m}}=this.app,{snapshot:L,initialCommonCenter:ha,initialAngle:na,initialSelectionRotation:ua}=this;let Ha=Hd.angle(ha,m)-na;d&&(Ha=cm.snapAngleToSegments(Ha,24));a.forEach($a=>{var jb=L[$a.id];let mb=0;if(d){var {rotation:Kb=0}=jb;mb=cm.snapAngleToSegments(Kb,24)-Kb}const Vb=Hd.sub(jb.center,jb.point);Kb=Hd.rotWith(jb.center,ha,Ha);if("handles"in $a){jb=jb.handles;
const Ob=jb.map(xc=>Hd.rotWith(xc.point,Vb,Ha)),jc=Of.getCommonTopLeft(Ob);$a.update({point:Hd.add(jc,Hd.sub(Kb,Vb)),handles:jb.map((xc,bc)=>Bf(qe({},xc),{point:Hd.sub(Ob[bc],jc)}))})}else $a.update({point:Hd.sub(Kb,Vb),rotation:cm.clampRadians((jb.rotation||0)+Ha+mb)})});const Ua=cm.clampRadians(ua+Ha);this.app.setSelectionRotation(d?cm.snapAngleToSegments(Ua,24):Ua);this.updateCursor()});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};kb(Cx,"id","rotating");var nA=class extends Wi{constructor(){super(...arguments);kb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
kb(nA,"id","pinching");var oA=class extends Ax{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=ek();this.draggedBindingId=ek();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=uc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};kb(oA,"id","translatingHandle");var pA=class extends Wi{constructor(){super(...arguments);
kb(this,"cursor","grabbing");kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(pA,"id","pointingHandle");var qA=class extends Wi{constructor(){super(...arguments);kb(this,"handle");kb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(lt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});kb(this,"onExit",()=>{this.app.cursors.reset()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});kb(this,"onPointerLeave",()=>{this.tool.transition("idle")});kb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(!m.canEdit||this.app.readOnly||m.props.isLocked)m.onResetBounds({asset:m.props.assetId?this.app.assets[m.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=m.onResetBounds)?void 0:d.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:m})}}})}};kb(qA,"id","hoveringSelectionHandle");var rA=class extends Wi{constructor(){super(...arguments);kb(this,"editingShape",{});kb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});kb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":bd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};kb(rA,"id","editingShape");var sA=class extends Wi{constructor(){super(...arguments);kb(this,"minimapZoom",1);kb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});kb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&m){const L=d.getBoundingClientRect();this.minimapRect.height=L.height;this.minimapRect.width=L.width;this.minimapRect.minX=L.left;this.minimapRect.minY=L.top;this.minimapRect.maxX=L.right;this.minimapRect.maxY=L.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Hd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=Hd.mul(Hd.sub(a,[m.left+m.width/2,m.top+m.height/
2]),this.minimapZoom);return Hd.sub(this.app.viewport.camera.point,m)}});kb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});kb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(sA,"id","pointingMinimap");var Et=class extends Br{constructor(){super(...arguments);kb(this,"returnTo",
"");kb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};kb(Et,"id","select");kb(Et,"initial","idle");kb(Et,"shortcut","whiteboard/select");kb(Et,"states",[dA,bA,cA,gA,eA,mA,iA,fA,qA,jA,lA,sA,pA,oA,hA,Bx,Cx,Cx,nA,rA]);var tA=class extends Wi{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"originalScreenPoint",[]);kb(this,"originalCameraPoint",[]);kb(this,"prevState","idle");kb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});kb(this,"onPointerMove",(a,d)=>{a=me.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:me.sub(this.originalCameraPoint,me.div(a,this.app.viewport.camera.zoom))})});kb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};kb(tA,"id","panning");var uA=class extends Wi{constructor(){super(...arguments);kb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};kb(uA,"id","idle");var vA=class extends Wi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(vA,
"id","idleHold");var wA=class extends Wi{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(wA,"id","pinching");var Ft=class extends Br{constructor(){super(...arguments);kb(this,"cursor","grab");kb(this,"prevTool",null);kb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Ft,"id","move");kb(Ft,"shortcut","whiteboard/pan");kb(Ft,"states",[uA,vA,tA,wA]);kb(Ft,"initial","idle");var mm=class{constructor(a,d={}){kb(this,"lastShapesNounces",null);kb(this,"app");kb(this,"id");kb(this,"name");kb(this,"shapes",[]);kb(this,"bindings",{});kb(this,"nonce",0);kb(this,"bringForward",
Ha=>{const Ua=this.parseShapesArg(Ha);Ua.sort(($a,jb)=>this.shapes.indexOf(jb)-this.shapes.indexOf($a)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if($a!==this.shapes.length-1&&!Ua.includes(this.shapes[$a+1])){var jb=this.shapes[$a];this.shapes[$a]=this.shapes[$a+1];this.shapes[$a+1]=jb}});this.app.persist();return this});kb(this,"sendBackward",Ha=>{const Ua=this.parseShapesArg(Ha);Ua.sort(($a,jb)=>this.shapes.indexOf($a)-this.shapes.indexOf(jb)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if(0!==
$a&&!Ua.includes(this.shapes[$a-1])){var jb=this.shapes[$a];this.shapes[$a]=this.shapes[$a-1];this.shapes[$a-1]=jb}});this.app.persist();return this});kb(this,"bringToFront",Ha=>{const Ua=this.parseShapesArg(Ha);this.shapes=this.shapes.filter($a=>!Ua.includes($a)).concat(Ua);this.app.persist();return this});kb(this,"sendToBack",Ha=>{const Ua=this.parseShapesArg(Ha);this.shapes=Ua.concat(this.shapes.filter($a=>!Ua.includes($a)));this.app.persist();return this});kb(this,"flip",(Ha,Ua)=>{Ha=this.parseShapesArg(Ha);
const $a=Of.getCommonBounds(Ha.map(jb=>jb.bounds));Ha.forEach(jb=>{var mb;const Kb=Of.getRelativeTransformedBoundingBox($a,$a,jb.bounds,"horizontal"===Ua,"vertical"===Ua);if(jb.serialized)jb.onResize(jb.serialized,{bounds:Kb,center:Of.getBoundsCenter(Kb),rotation:null!=(mb=jb.props.rotation)?mb:-0,type:"top_left_corner",scale:jb.canFlip&&jb.props.scale?"horizontal"===Ua?[-jb.props.scale[0],1]:[1,-jb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});kb(this,
"getShapeById",Ha=>this.shapes.find(Ua=>Ua.id===Ha));kb(this,"cleanup",Ha=>{Ha=Hb(this.bindings,Ha);const Ua=new Set;let $a=!1,jb=!1;const mb=Js(this.bindings);Ha.forEach(Kb=>{var Vb;if(this.bindings[Kb.id]){var Ob=this.getShapeById(Kb.toId),jc=this.getShapeById(Kb.fromId);Ob&&jc?Ua.has(jc.id)||(Kb=this.updateArrowBindings(jc),Ua.add(jc.id),Kb&&(Ob=qe(qe({},jc.props),Kb),$a=!0,null==(Vb=this.getShapeById(Ob.id))?void 0:Vb.update(Ob,!1,(0,NE.default)(null==Kb?void 0:Kb.handles,null==jc?void 0:jc.props.handles)))):
(delete mb[Kb.id],jb=!0)}});Object.keys(mb).forEach(Kb=>{const Vb=this.bindings[Kb];0===this.shapes.filter(Ob=>Ob.id===Vb.fromId||Ob.id===Vb.toId).length&&(delete mb[Kb],jb=!0)});jb&&this.update({bindings:mb});($a||jb)&&this.app.persist(!0)});kb(this,"updateArrowBindings",Ha=>{var Ua,$a,jb,mb={start:Js(Ha.props.handles.start),end:Js(Ha.props.handles.end)},Kb={isBound:!1,handle:Ha.props.handles.start,point:me.add(Ha.props.handles.start.point,Ha.props.point)},Vb={isBound:!1,handle:Ha.props.handles.end,
point:me.add(Ha.props.handles.end.point,Ha.props.point)};if(Ha.props.handles.start.bindingId){var Ob=void 0!==(null==(Ua=Ha.props.decorations)?void 0:Ua.start);Ua=Ha.props.handles.start;var jc=this.bindings[Ha.props.handles.start.bindingId],xc=this.getShapeById(null==jc?void 0:jc.toId);if(xc){Kb=xc.getBounds();var bc=xc.getExpandedBounds(),pc=Of.expandBounds(Kb,Ob?jc.distance:1);const {minX:lc,minY:Rc,width:Tc,height:Dd}=bc,Ud=me.add([lc,Rc],me.mulV([Tc,Dd],me.rotWith(jc.point,[.5,.5],xc.props.rotation||
0)));Kb={isBound:!0,hasDecoration:Ob,binding:jc,handle:Ua,point:Ud,target:xc,bounds:Kb,expandedBounds:bc,intersectBounds:pc,center:xc.getCenter()}}}if(Ha.props.handles.end.bindingId&&(Ob=void 0!==(null==($a=Ha.props.decorations)?void 0:$a.end),$a=Ha.props.handles.end,Ua=this.bindings[Ha.props.handles.end.bindingId],jc=this.getShapeById(null==Ua?void 0:Ua.toId))){Vb=jc.getBounds();xc=jc.getExpandedBounds();bc=Ob?Of.expandBounds(Vb,Ua.distance):Vb;const {minX:lc,minY:Rc,width:Tc,height:Dd}=xc;pc=me.add([lc,
Rc],me.mulV([Tc,Dd],me.rotWith(Ua.point,[.5,.5],jc.props.rotation||0)));Vb={isBound:!0,hasDecoration:Ob,binding:Ua,handle:$a,point:pc,target:jc,bounds:Vb,expandedBounds:xc,intersectBounds:bc,center:jc.getCenter()}}for(const lc of["end","start"]){$a="start"===lc?Kb:Vb;const Rc="start"===lc?Vb:Kb;if($a.isBound)if($a.binding.distance){if(Ob=me.uni(me.sub($a.point,Rc.point)),Ua=A(Rc.point,Ob,$a.intersectBounds,$a.target.props.rotation).filter(Tc=>Tc.didIntersect).map(Tc=>Tc.points[0]).sort((Tc,Dd)=>me.dist(Tc,
Rc.point)-me.dist(Dd,Rc.point)),Ua[0])if(jc=void 0,Rc.isBound&&(jc=A(Rc.point,Ob,Rc.intersectBounds,Rc.target.props.rotation).filter(Tc=>Tc.didIntersect).map(Tc=>Tc.points[0]).sort((Tc,Dd)=>me.dist(Tc,Rc.point)-me.dist(Dd,Rc.point))[0]),Rc.isBound&&(2>Ua.length||jc&&Ua[0]&&10>Math.ceil(me.dist(Ua[0],jc))||Of.boundsContain($a.expandedBounds,Rc.expandedBounds)||Of.boundsCollide($a.expandedBounds,Rc.expandedBounds)))Ob=me.uni(me.sub(Rc.point,$a.point)),Ua=A($a.point,Ob,$a.bounds,$a.target.props.rotation).filter(Tc=>
Tc.didIntersect).map(Tc=>Tc.points[0]),Ua[0]&&(mb[lc].point=me.toFixed(me.sub(Ua[0],Ha.props.point)),mb["start"===lc?"end":"start"].point=me.toFixed(me.add(me.sub(Ua[0],Ha.props.point),me.mul(Ob,Math.min(me.dist(Ua[0],Rc.point),10*(Of.boundsContain(Rc.bounds,$a.intersectBounds)?-1:1))))));else{if(!Rc.isBound&&(Ua[0]&&10>me.dist(Ua[0],Rc.point)||nk.pointInBounds(Rc.point,$a.intersectBounds)))return mb=me.uni(me.sub($a.center,Rc.point)),null==(jb=Ha.getHandlesChange)?void 0:jb.call(Ha,Ha.props,{[lc]:Bf(qe({},
Ha.props.handles[lc]),{point:me.toFixed(me.add(me.sub(Rc.point,Ha.props.point),me.mul(mb,10)))})});Ua[0]&&(mb[lc].point=me.toFixed(me.sub(Ua[0],Ha.props.point)))}}else mb[lc].point=me.sub($a.point,Ha.props.point)}return Ha.getHandlesChange(Ha.props,mb)});const {id:m,name:L,shapes:ha=[],bindings:na={},nonce:ua}=d;this.id=m;this.name=L;this.bindings=Object.assign({},na);this.app=a;this.nonce=ua||0;this.addShapes(...ha);cd(this);Id(()=>{const Ha=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ua=>
[Ua.id,Ua.nonce])):null;if(this.lastShapesNounces&&Ha){const Ua=this.lastShapesNounces,$a=[...(new Set([...Object.keys(Ha),...Object.keys(Ua)]))].filter(jb=>Ua[jb]!==Ha[jb]);requestAnimationFrame(()=>{this.cleanup($a)})}Ha&&(this.lastShapesNounces=Ha)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>uc(a)),bindings:Js(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,m)=>a.indexOf(d.id)-a.indexOf(m.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(m=>!d.includes(m));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};le([df],mm.prototype,"id",2);le([df],mm.prototype,"name",2);le([df],mm.prototype,"shapes",2);le([df],mm.prototype,"bindings",2);le([Wf],mm.prototype,"serialized",1);le([Wf],mm.prototype,"shapesById",1);le([df],mm.prototype,"nonce",2);le([Tg],mm.prototype,"update",1);le([Tg],mm.prototype,"updateBindings",1);le([Tg],mm.prototype,"updateShapesIndex",1);le([Tg],mm.prototype,"addShapes",1);le([Tg],mm.prototype,"removeShapes",1);le([Tg],mm.prototype,
"bringForward",2);le([Tg],mm.prototype,"sendBackward",2);le([Tg],mm.prototype,"bringToFront",2);le([Tg],mm.prototype,"sendToBack",2);le([Tg],mm.prototype,"cleanup",2);var Ek=class{constructor(){kb(this,"shiftKey",!1);kb(this,"ctrlKey",!1);kb(this,"modKey",!1);kb(this,"altKey",!1);kb(this,"spaceKey",!1);kb(this,"isPinching",!1);kb(this,"currentScreenPoint",[0,0]);kb(this,"currentPoint",[0,0]);kb(this,"previousScreenPoint",[0,0]);kb(this,"previousPoint",[0,0]);kb(this,"originScreenPoint",[0,0]);kb(this,
"originPoint",[0,0]);kb(this,"pointerIds",new Set);kb(this,"state","idle");kb(this,"containerOffset",[0,0]);kb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});kb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});kb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});kb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});kb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});kb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});kb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});kb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
cd(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=me.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=yb()?a.metaKey:a.ctrlKey))}};le([df],Ek.prototype,"shiftKey",2);le([df],Ek.prototype,"ctrlKey",2);le([df],Ek.prototype,"modKey",2);le([df],Ek.prototype,"altKey",
2);le([df],Ek.prototype,"spaceKey",2);le([df],Ek.prototype,"isPinching",2);le([df],Ek.prototype,"currentScreenPoint",2);le([df],Ek.prototype,"currentPoint",2);le([df],Ek.prototype,"previousScreenPoint",2);le([df],Ek.prototype,"previousPoint",2);le([df],Ek.prototype,"originScreenPoint",2);le([df],Ek.prototype,"originPoint",2);le([df],Ek.prototype,"state",2);le([df],Ek.prototype,"containerOffset",2);le([Tg],Ek.prototype,"updateContainerOffset",1);le([Tg],Ek.prototype,"updateModifiers",1);le([Tg],Ek.prototype,
"onPointerDown",2);le([Tg],Ek.prototype,"onPointerMove",2);le([Tg],Ek.prototype,"onPointerUp",2);le([Tg],Ek.prototype,"onKeyDown",2);le([Tg],Ek.prototype,"onKeyUp",2);le([Tg],Ek.prototype,"onPinchStart",2);le([Tg],Ek.prototype,"onPinch",2);le([Tg],Ek.prototype,"onPinchEnd",2);var xE=(a,d=100)=>-(Math.cos(Math.PI*Hd.clamp(a/d,0,1))-1)/2,Is=class{constructor(){kb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});kb(this,"camera",{point:[0,0],zoom:1});kb(this,"updateBounds",a=>
{this.bounds=a;return this});kb(this,"panCamera",a=>this.update({point:Hd.sub(this.camera.point,Hd.div(a,this.camera.zoom))}));kb(this,"panToPointWhenNearBounds",a=>{const d=Hd.div([Is.panThreshold,Is.panThreshold],this.camera.zoom),m=Hd.sub([this.currentView.maxX,this.currentView.maxY],Hd.add(a,d));a=Hd.sub([this.currentView.minX,this.currentView.minY],Hd.sub(a,d));this.panCamera(Hd.mul([0>m[0]?m[0]:0<a[0]?a[0]:0,0>m[1]?m[1]:0<a[1]?a[1]:0],-Is.panMultiplier*this.camera.zoom))});kb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});kb(this,"getPagePoint",a=>{const {camera:d,bounds:m}=this;return Hd.sub(Hd.div(Hd.sub(a,[m.minX,m.minY]),d.zoom),d.point)});kb(this,"getScreenPoint",a=>{const {camera:d}=this;return Hd.mul(Hd.add(a,d.point),d.zoom)});kb(this,"onZoom",(a,d,m=!1)=>this.pinchZoom(a,[0,0],d,m));kb(this,"pinchZoom",(a,d,m,L=!1)=>{var {camera:ha}=this;d=Hd.sub(ha.point,
Hd.div(d,ha.zoom));m=Hd.clamp(m,Is.minZoom,Is.maxZoom);ha=Hd.div(a,ha.zoom);a=Hd.div(a,m);a=Hd.toFixed(Hd.add(d,Hd.sub(a,ha)));L?this.animateCamera({point:a,zoom:m}):this.update({point:a,zoom:m});return this});kb(this,"setZoom",(a,d=!1)=>{const {bounds:m}=this;this.onZoom([m.width/2,m.height/2],a,d)});kb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});kb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});kb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
kb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));kb(this,"animateToViewport",a=>{const d=performance.now(),m=qe({},this.currentView),L=()=>{var ha=performance.now()-d;ha=xE(ha);var na=m.minX+(a.minX-m.minX)*ha;this.update({point:[-na,-(m.minY+(a.minY-m.minY)*ha)],zoom:this.bounds.width/(m.maxX+(a.maxX-m.maxX)*ha-na)});1>ha&&requestAnimationFrame(L)};
L()});kb(this,"zoomToBounds",({width:a,height:d,minX:m,minY:L})=>{const {bounds:ha,camera:na}=this;let ua=Math.min((ha.width-100)/a,(ha.height-100)/d);ua=Math.min(1,Math.max(Is.minZoom,na.zoom===ua||1>na.zoom?Math.min(1,ua):ua));a=Hd.add([-m,-L],[(ha.width-a*ua)/2/ua,(ha.height-d*ua)/2/ua]);this.animateCamera({point:a,zoom:ua})});cd(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:m}}=this,L=a.width/m,ha=a.height/m;return{minX:-d[0],minY:-d[1],maxX:L-d[0],maxY:ha-d[1],width:L,height:ha}}},
ep=Is;kb(ep,"minZoom",.1);kb(ep,"maxZoom",4);kb(ep,"panMultiplier",.05);kb(ep,"panThreshold",100);le([df],ep.prototype,"bounds",2);le([df],ep.prototype,"camera",2);le([Tg],ep.prototype,"updateBounds",2);le([Tg],ep.prototype,"update",2);le([Wf],ep.prototype,"currentView",1);var yE=class{constructor(a){kb(this,"app");kb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});kb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});kb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});kb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});kb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});kb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});kb(this,"deselectShapes",(...d)=>{const m="string"===typeof d[0]?d:d.map(L=>L.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(L=>!m.includes(L.id)));
return this});kb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});kb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});kb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});kb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});kb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});kb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
kb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});kb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Of.getCommonBounds(d.map(m=>m.bounds));this.app.viewport.zoomToBounds(d);return this});kb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Of.getCommonBounds(d.map(m=>m.bounds));this.app.viewport.update({point:me.add(me.neg(Of.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});kb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});kb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:me.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});kb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});kb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});kb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});kb(this,"setColor",d=>{const {settings:m}=this.app;m.update({color:d});this.app.selectedShapesArray.forEach(L=>{L.props.isLocked||L.update({fill:d,stroke:d})});this.app.persist();return this});kb(this,"setScaleLevel",d=>{const {settings:m}=this.app;m.update({scaleLevel:d});this.app.selectedShapes.forEach(L=>{L.props.isLocked||L.setScaleLevel(d)});this.app.persist();return this});kb(this,
"undo",()=>{this.app.undo();return this});kb(this,"redo",()=>{this.app.redo();return this});kb(this,"persist",()=>{this.app.persist();return this});kb(this,"createNewLineBinding",(d,m)=>this.app.createNewLineBinding(d,m));kb(this,"cloneShapes",({shapes:d,assets:m,bindings:L,point:ha=[0,0]})=>{const na=Of.getCommonBounds(d.filter(Ua=>"group"!==Ua.type).map(Ua=>{var $a,jb,mb,Kb,Vb,Ob,jc,xc,bc,pc,lc,Rc,Tc,Dd,Ud,kf;return{minX:null!=(jb=null==($a=Ua.point)?void 0:$a[0])?jb:ha[0],minY:null!=(Kb=null==
(mb=Ua.point)?void 0:mb[1])?Kb:ha[1],width:null!=(Ob=null==(Vb=Ua.size)?void 0:Vb[0])?Ob:4,height:null!=(xc=null==(jc=Ua.size)?void 0:jc[1])?xc:4,maxX:(null!=(pc=null==(bc=Ua.point)?void 0:bc[0])?pc:ha[0])+(null!=(Rc=null==(lc=Ua.size)?void 0:lc[0])?Rc:4),maxY:(null!=(Dd=null==(Tc=Ua.point)?void 0:Tc[1])?Dd:ha[1])+(null!=(kf=null==(Ud=Ua.size)?void 0:Ud[1])?kf:4)}})),ua=d.map(Ua=>Bf(qe({},Ua),{id:ek(),point:[ha[0]+Ua.point[0]-na.minX,ha[1]+Ua.point[1]-na.minY]}));ua.forEach(Ua=>{var $a;Ua.children&&
0<(null==($a=Ua.children)?void 0:$a.length)&&(Ua.children=Ua.children.map(jb=>{var mb;return null==(mb=ua[d.findIndex(Kb=>Kb.id===jb)])?void 0:mb.id}).filter(ic))});const Ha=[];ua.flatMap(Ua=>{var $a;return Object.values(null!=($a=Ua.handles)?$a:{})}).forEach(Ua=>{if(Ua.bindingId){var $a=L[Ua.bindingId];if($a){var jb=d.findIndex(Kb=>Kb.id===$a.fromId);const mb=d.findIndex(Kb=>Kb.id===$a.toId);$a&&-1!==jb&&-1!==mb?(jb=Bf(qe({},$a),{id:ek(),fromId:ua[jb].id,toId:ua[mb].id}),Ha.push(jb),Ua.bindingId=
jb.id):Ua.bindingId=void 0}else console.warn("binding not found",Ua.bindingId)}});m=m.filter(Ua=>ua.some($a=>$a.assetId===Ua.id));return{shapes:ua,assets:m,bindings:Ha}});kb(this,"getClonedShapesFromTldrString",(d,m)=>{try{{var L;const $a=null==(L=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:L[1];if($a){try{var ha=JSON.parse($a)}catch(jb){ha=null}var na=ha}else na=void 0}d=na;if(!d)return null;const {shapes:ua,bindings:Ha,assets:Ua}=d;return this.cloneShapes({shapes:ua,bindings:Ha,
assets:Ua,point:m})}catch(ua){console.log(ua)}return null});kb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});kb(this,"addClonedShapes",d=>{const {shapes:m,assets:L,bindings:ha}=d;0<L.length&&this.app.createAssets(L);0<m.length&&this.app.createShapes(m);this.app.currentPage.updateBindings(Object.fromEntries(ha.map(na=>[na.id,na])));this.app.selectedTool.transition("idle");return this});kb(this,"addClonedShapesFromTldrString",(d,m)=>{(d=this.getClonedShapesFromTldrString(d,
m))&&this.addClonedShapes(d);return this});kb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var m=[...d.filter(L=>"group"===L.type),...d.map(L=>this.app.getParentGroup(L))].filter(ic);this.app.currentPage.removeShapes(...m);d=d.filter(L=>"group"!==L.type);1<d.length&&(m=this.app.getShapeClass("group"),m=new m({id:ek(),type:m.id,parentId:this.app.currentPage.id,children:d.map(L=>L.id)}),this.app.currentPage.addShapes(m),this.app.setSelectedShapes([m]),this.app.bringForward(d));
this.app.persist()}});kb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(L=>"group"===L.type),...d.map(L=>this.app.getParentGroup(L))].filter(ic);var m=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),this.app.persist(),this.app.setSelectedShapes(m))}});kb(this,"convertShapes",(d,m=this.app.allSelectedShapesArray)=>{const L=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...m);m=m.map(ha=>new L(Bf(qe({},ha.serialized),
{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...m);this.app.persist();this.app.setSelectedShapes(m)});kb(this,"setCollapsed",(d,m=this.app.allSelectedShapesArray)=>{m.forEach(L=>{"logseq-portal"===L.props.type&&L.setCollapsed(d)});this.app.persist()});this.app=a}},Gt=class{constructor(){kb(this,"cursor","default");kb(this,"rotation",0);kb(this,"reset",()=>{this.cursor="default"});kb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});kb(this,
"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});cd(this)}};le([df],Gt.prototype,"cursor",2);le([df],Gt.prototype,"rotation",2);le([Tg],Gt.prototype,"reset",2);le([Tg],Gt.prototype,"setCursor",2);le([Tg],Gt.prototype,"setRotation",2);var Ht=class{constructor(a){kb(this,"app");kb(this,"stack",[]);kb(this,"isPaused",!0);kb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});kb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});kb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",
{replace:d})});kb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});kb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});kb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));kb(this,"deserialize",d=>{bd(()=>{var m,{pages:L}=d;const ha=this.isPaused;this.pause();const na=[...this.app.selectedIds];try{const ua=new Map(this.app.pages),Ha=[];for(const Ua of L){const $a=
ua.get(Ua.id);if(void 0!==$a){const jb=new Map($a.shapes.map(mb=>[mb.props.id,mb]));L=[];for(const mb of Ua.shapes){const Kb=jb.get(mb.id);void 0!==Kb?(Kb.nonce!==mb.nonce&&(Kb.update(mb,!0),Kb.nonce=mb.nonce,Kb.setLastSerialized(mb)),jb.delete(mb.id)):L.push(this.instantiateShape(mb))}0<jb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&$a.removeShapes(...jb.values());0<L.length&&$a.addShapes(...L);ua.delete(Ua.id);$a.updateBindings(Ua.bindings);$a.nonce=null!=(m=Ua.nonce)?m:0}else{const {id:jb,
name:mb,shapes:Kb,bindings:Vb,nonce:Ob}=Ua;Ha.push(new mm(this.app,{id:jb,name:mb,nonce:Ob,bindings:Vb,shapes:Kb.map(jc=>this.instantiateShape(jc))}))}}0<Ha.length&&this.app.addPages(Ha);0<ua.size&&this.app.removePages(Array.from(ua.values()));this.app.setSelectedShapes(na).setErasingShapes([])}catch(ua){console.warn(ua)}ha||this.resume()})});this.app=a;cd(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};le([df],Ht.prototype,"stack",2);le([Tg],Ht.prototype,"persist",
2);le([Tg],Ht.prototype,"undo",2);le([Tg],Ht.prototype,"redo",2);le([Tg],Ht.prototype,"deserialize",2);var Cr=class{constructor(){kb(this,"mode","light");kb(this,"showGrid",!0);kb(this,"snapToGrid",!0);kb(this,"penMode",!1);kb(this,"scaleLevel","md");kb(this,"color","");cd(this)}update(a){Object.assign(this,a)}};le([df],Cr.prototype,"mode",2);le([df],Cr.prototype,"showGrid",2);le([df],Cr.prototype,"snapToGrid",2);le([df],Cr.prototype,"penMode",2);le([df],Cr.prototype,"scaleLevel",2);le([df],Cr.prototype,
"color",2);le([Tg],Cr.prototype,"update",1);var Nh=class extends Dt{constructor(a,d,m,L){var ha,na;super();kb(this,"uuid",ek());kb(this,"readOnly");kb(this,"api");kb(this,"inputs",new Ek);kb(this,"cursors",new Gt);kb(this,"viewport",new ep);kb(this,"settings",new Cr);kb(this,"Tools",[]);kb(this,"history",new Ht(this));kb(this,"persist",this.history.persist);kb(this,"undo",this.history.undo);kb(this,"redo",this.history.redo);kb(this,"saving",!1);kb(this,"saveState",()=>{this.history.isPaused||(this.saving=
!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});kb(this,"load",()=>{this.notify("load",null);return this});kb(this,"save",()=>{this.notify("save",null);return this});kb(this,"pages",new Map([["page",new mm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));kb(this,"getPageById",ua=>{const Ha=this.pages.get(ua);if(!Ha)throw Error(`Could not find a page named ${ua}.`);return Ha});kb(this,"getShapeById",(ua,Ha=this.currentPage.id)=>{var Ua;return null==(Ua=this.getPageById(Ha))?
void 0:Ua.shapesById[ua]});kb(this,"createShapes",ua=>{if(this.readOnly)return this;(ua=this.currentPage.addShapes(...ua))&&this.notify("create-shapes",ua);this.persist();return this});kb(this,"updateShapes",ua=>{if(this.readOnly)return this;ua.forEach(Ha=>{const Ua=this.getShapeById(Ha.id);null==Ua?void 0:Ua.update(Ha);Ha.type!==(null==Ua?void 0:Ua.type)&&this.api.convertShapes(Ha.type,[Ua])});this.persist();return this});kb(this,"deleteShapes",ua=>{if(0===ua.length||this.readOnly)return this;ua=
ua.map(jb=>"string"===typeof jb?this.getShapeById(jb):jb).filter(ic).filter(jb=>!jb.props.isLocked);const Ha=this.shapesInGroups(ua);ua.forEach(jb=>{this.getParentGroup(jb)&&Ha.push(jb)});let Ua=new Set([...ua,...Ha].map(jb=>jb.id));Ha.forEach(jb=>{var mb;const Kb=this.getParentGroup(jb);if(Kb){const Vb=null==(mb=Kb.props.children)?void 0:mb.filter(Ob=>Ob!==jb.id);!Vb||1>=(null==Vb?void 0:Vb.length)?Ua.add(Kb.id):Kb.update({children:Vb})}});const $a=(jb,mb)=>{var Kb;[...Ua].includes(jb)&&"line"===
(null==(Kb=this.getShapeById(mb))?void 0:Kb.type)&&Ua.add(mb)};this.currentPage.shapes.filter(jb=>!jb.props.isLocked).flatMap(jb=>{var mb;return Object.values(null!=(mb=jb.props.handles)?mb:{})}).flatMap(jb=>jb.bindingId).filter(ic).map(jb=>{var mb,Kb;const Vb=null==(mb=this.currentPage.bindings[jb])?void 0:mb.toId;jb=null==(Kb=this.currentPage.bindings[jb])?void 0:Kb.fromId;Vb&&jb&&($a(Vb,jb),$a(jb,Vb))});ua=[...Ua].map(jb=>this.getShapeById(jb));this.setSelectedShapes(this.selectedShapesArray.filter(jb=>
!Ua.has(jb.id)));(ua=this.currentPage.removeShapes(...ua))&&this.notify("delete-shapes",ua);this.persist();return this});kb(this,"bringForward",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.bringForward(ua);return this});kb(this,"sendBackward",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.sendBackward(ua);return this});kb(this,"sendToBack",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.sendToBack(ua);return this});
kb(this,"bringToFront",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.bringToFront(ua);return this});kb(this,"flipHorizontal",(ua=this.selectedShapesArray)=>{this.currentPage.flip(ua,"horizontal");return this});kb(this,"flipVertical",(ua=this.selectedShapesArray)=>{this.currentPage.flip(ua,"vertical");return this});kb(this,"align",(ua,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ua=Ha.map(Vb=>{const Ob=Vb.getBounds();return{id:Vb.id,
point:[Ob.minX,Ob.minY],bounds:Ob}}),$a=Of.getCommonBounds(Ua.map(({bounds:Vb})=>Vb)),jb=$a.minX+$a.width/2,mb=$a.minY+$a.height/2,Kb=Object.fromEntries(Ua.map(({id:Vb,point:Ob,bounds:jc})=>[Vb,{prev:Ob,next:{top:[Ob[0],$a.minY],centerVertical:[Ob[0],mb-jc.height/2],bottom:[Ob[0],$a.maxY-jc.height],left:[$a.minX,Ob[1]],centerHorizontal:[jb-jc.width/2,Ob[1]],right:[$a.maxX-jc.width,Ob[1]]}[ua]}]));Ha.forEach(Vb=>{Kb[Vb.id]&&Vb.update({point:Kb[Vb.id].next})});this.persist();return this});kb(this,"distribute",
(ua,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ua=Object.fromEntries(Of.getDistributions(Ha,ua).map($a=>[$a.id,$a]));Ha.forEach($a=>{Ua[$a.id]&&$a.update({point:Ua[$a.id].next})});this.persist();return this});kb(this,"packIntoRectangle",(ua=this.selectedShapesArray)=>{if(2>ua.length||this.readOnly)return this;const Ha=Object.fromEntries(Of.getPackedDistributions(ua).map(Ua=>[Ua.id,Ua]));ua.forEach(Ua=>{Ha[Ua.id]&&Ua.update({point:Ha[Ua.id].next})});this.persist();
return this});kb(this,"setLocked",ua=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ha=>{Ha.update({isLocked:ua})});this.persist();return this});kb(this,"assets",{});kb(this,"removeUnusedAssets",()=>{const ua=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ha=>{ua.some(Ua=>Ua.id===Ha)||delete this.assets[Ha]});this.persist();return this});kb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ha=this.allSelectedShapesArray;
var ua=JSON.stringify({shapes:Ha.map($a=>$a.serialized),assets:this.getCleanUpAssets().filter($a=>Ha.some(jb=>jb.props.assetId===$a.id)),bindings:uc(this.currentPage.bindings)});ua=encodeURIComponent(`<whiteboard-tldr>${ua}</whiteboard-tldr>`);const Ua=this.selectedShapesArray.map($a=>`((${$a.props.id}))`).join(" ");this.notify("copy",{text:Ua,html:ua})}});kb(this,"paste",(ua,Ha)=>{var Ua;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ha,dataTransfer:null!=
(Ua=null==ua?void 0:ua.clipboardData)?Ua:void 0})});kb(this,"cut",()=>{this.copy();this.api.deleteShapes()});kb(this,"drop",(ua,Ha)=>{this.notify("drop",{dataTransfer:ua,point:Ha?this.viewport.getPagePoint(Ha):Of.getBoundsCenter(this.viewport.currentView)})});kb(this,"selectTool",(ua,Ha={})=>{this.readOnly&&!["select","move"].includes(ua)||this.transition(ua,Ha)});kb(this,"editingId");kb(this,"setEditingShape",ua=>{this.editingId="string"===typeof ua?ua:null==ua?void 0:ua.id;return this});kb(this,
"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});kb(this,"hoveredId");kb(this,"setHoveredShape",ua=>{this.hoveredId="string"===typeof ua?ua:null==ua?void 0:ua.id;return this});kb(this,"selectedIds",new Set);kb(this,"selectedShapes",new Set);kb(this,"selectionRotation",0);kb(this,"setSelectedShapes",ua=>{var Ha;const {selectedIds:Ua,selectedShapes:$a}=this;Ua.clear();$a.clear();ua[0]&&"string"===typeof ua[0]?ua.forEach(mb=>Ua.add(mb)):ua.forEach(mb=>Ua.add(mb.id));
const jb=this.currentPage.shapes.filter(mb=>Ua.has(mb.id));jb.forEach(mb=>$a.add(mb));this.selectionRotation=1===jb.length?null!=(Ha=jb[0].props.rotation)?Ha:0:0;0===ua.length&&this.setEditingShape();return this});kb(this,"erasingIds",new Set);kb(this,"erasingShapes",new Set);kb(this,"setErasingShapes",ua=>{const {erasingIds:Ha,erasingShapes:Ua}=this;Ha.clear();Ua.clear();ua[0]&&"string"===typeof ua[0]?ua.forEach($a=>Ha.add($a)):ua.forEach($a=>Ha.add($a.id));this.currentPage.shapes.filter($a=>Ha.has($a.id)).forEach($a=>
Ua.add($a));return this});kb(this,"bindingIds");kb(this,"setBindingShapes",ua=>{this.bindingIds=ua;return this});kb(this,"clearBindingShape",()=>this.setBindingShapes());kb(this,"createNewLineBinding",(ua,Ha)=>{ua="string"===typeof ua?this.getShapeById(ua):ua;Ha="string"===typeof Ha?this.getShapeById(Ha):Ha;if((null==ua?0:ua.canBind)&&(null==Ha?0:Ha.canBind)&&(Ha=Kc(ua,Ha))){const [Ua,$a]=Ha;this.createShapes([Ua]);this.currentPage.updateBindings(Object.fromEntries($a.map(jb=>[jb.id,jb])));this.persist();
return!0}return!1});kb(this,"brush");kb(this,"setBrush",ua=>{this.brush=ua;return this});kb(this,"setCamera",(ua,Ha)=>{this.viewport.update({point:ua,zoom:Ha});return this});kb(this,"getPagePoint",ua=>{const {camera:Ha}=this.viewport;return Hd.sub(Hd.div(ua,Ha.zoom),Ha.point)});kb(this,"getScreenPoint",ua=>{const {camera:Ha}=this.viewport;return Hd.mul(Hd.add(ua,Ha.point),Ha.zoom)});kb(this,"Shapes",new Map);kb(this,"registerShapes",ua=>{ua.forEach(Ha=>{if("group"===Ha.id){const Ua=this;Ha.prototype.getShapes=
function(){var $a,jb;return null!=(jb=null==($a=this.props.children)?void 0:$a.map(mb=>Ua.getShapeById(mb)).filter(Boolean))?jb:[]}}return this.Shapes.set(Ha.id,Ha)})});kb(this,"deregisterShapes",ua=>{ua.forEach(Ha=>this.Shapes.delete(Ha.id))});kb(this,"getShapeClass",ua=>{if(!ua)throw Error("No shape type provided.");const Ha=this.Shapes.get(ua);if(!Ha)throw Error(`Could not find shape class for ${ua}`);return Ha});kb(this,"wrapUpdate",ua=>{bd(()=>{const Ha=!this.history.isPaused;Ha&&this.history.pause();
ua();Ha&&(this.history.resume(),this.persist())})});kb(this,"subscriptions",new Set([]));kb(this,"subscribe",(ua,Ha)=>{if(void 0===Ha)throw Error("Callback is required.");const Ua={event:ua,callback:Ha};this.subscriptions.add(Ua);return()=>this.unsubscribe(Ua)});kb(this,"unsubscribe",ua=>{this.subscriptions.delete(ua);return this});kb(this,"notify",(ua,Ha)=>{this.subscriptions.forEach(Ua=>{Ua.event===ua&&Ua.callback(this,Ha)});return this});kb(this,"onTransition",()=>{});kb(this,"onPointerDown",(ua,
Ha)=>{if(!this.editingShape&&1===Ha.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ha);else if(2===Ha.button&&!this.editingShape)Ha.preventDefault(),this.transition("select");else if("clientX"in Ha)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onPointerUp",(ua,Ha)=>{if(!this.editingShape&&1===Ha.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else if("clientX"in
Ha)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onPointerMove",(ua,Ha)=>{if("clientX"in Ha)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onKeyDown",(ua,Ha)=>{if(this.editingShape||" "!==Ha.key||this.isIn("move"))this.inputs.onKeyDown(Ha);else this.temporaryTransitionToMove(Ha)});kb(this,"onKeyUp",(ua,Ha)=>{if(!this.editingShape&&" "===Ha.key&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else this.inputs.onKeyUp(Ha)});kb(this,"onPinchStart",(ua,Ha)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ua.point),.5],Ha)});kb(this,"onPinch",(ua,Ha)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ua.point),.5],Ha)});kb(this,"onPinchEnd",(ua,Ha)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ua.point),.5],Ha)});this._states=[Et,Ft];this.readOnly=L;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),
L=null!=(ha=this.initial)?ha:this.states[0].id,ha=this.children.get(L))&&(this.currentState=ha,null==(na=this.currentState)?void 0:na._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);m&&this.registerTools(m);this.history.resume();a&&this.history.deserialize(a);this.api=new yE(this);cd(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>
this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>d.props.children).filter(ic).map(d=>this.getShapeById(d)).filter(ic)}getParentGroup(a){return this.shapes.find(d=>{var m;return null==(m=d.props.children)?void 0:m.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>
delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&a.add(this.assets[m.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;
return a?d.shapes.find(m=>m.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(m=>m.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=this;return a?this.shapes.find(d=>{var m;return"group"===d.type&&(null==(m=d.props.children)?void 0:m.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=
this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(L=>{var ha;return Object.values(null!=(ha=L.props.handles)?ha:{})}).flatMap(L=>L.bindingId).filter(ic).flatMap(L=>{var ha,na;return[null==(ha=this.currentPage.bindings[L])?void 0:ha.fromId,null==(na=this.currentPage.bindings[L])?
void 0:na.toId]}).filter(ic):[],m=[...(null!=(a=this.bindingIds)?a:[]),...d];return m?this.currentPage.shapes.filter(L=>null==m?void 0:m.includes(L.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:m}}=this;return d.shapes.filter(L=>!L.canUnmount||a.has(L)||Of.boundsContain(m,L.rotatedBounds)||Of.boundsCollide(m,
L.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Of.boundsContain(d,a)&&!Of.boundsCollide(d,a)){var m=Of.getBoundsCenter(a);return Hd.clampV([(m[0]-d.minX-d.width/2)/d.width,(m[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?Bf(qe({},a[0].bounds),{rotation:a[0].props.rotation}):Of.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;
const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};kb(Nh,"id","app");kb(Nh,"initial","select");le([Wf],Nh.prototype,"serialized",1);le([df],Nh.prototype,"pages",2);le([Wf],Nh.prototype,
"currentPageId",1);le([Wf],Nh.prototype,"currentPage",1);le([Tg],Nh.prototype,"addPages",1);le([Tg],Nh.prototype,"removePages",1);le([Tg],Nh.prototype,"createShapes",2);le([Tg],Nh.prototype,"updateShapes",2);le([Tg],Nh.prototype,"deleteShapes",2);le([df],Nh.prototype,"assets",2);le([Tg],Nh.prototype,"addAssets",1);le([Tg],Nh.prototype,"removeAssets",1);le([Tg],Nh.prototype,"removeUnusedAssets",2);le([Wf],Nh.prototype,"selectedTool",1);le([df],Nh.prototype,"editingId",2);le([Wf],Nh.prototype,"editingShape",
1);le([Tg],Nh.prototype,"setEditingShape",2);le([df],Nh.prototype,"hoveredId",2);le([Wf],Nh.prototype,"hoveredShape",1);le([Wf],Nh.prototype,"hoveredGroup",1);le([Tg],Nh.prototype,"setHoveredShape",2);le([df],Nh.prototype,"selectedIds",2);le([df],Nh.prototype,"selectedShapes",2);le([df],Nh.prototype,"selectionRotation",2);le([Wf],Nh.prototype,"selectedShapesArray",1);le([Wf],Nh.prototype,"allSelectedShapes",1);le([Wf],Nh.prototype,"allSelectedShapesArray",1);le([Tg],Nh.prototype,"setSelectedShapes",
2);le([Tg],Nh.prototype,"setSelectionRotation",1);le([df],Nh.prototype,"erasingIds",2);le([df],Nh.prototype,"erasingShapes",2);le([Wf],Nh.prototype,"erasingShapesArray",1);le([Tg],Nh.prototype,"setErasingShapes",2);le([df],Nh.prototype,"bindingIds",2);le([Wf],Nh.prototype,"bindingShapes",1);le([Tg],Nh.prototype,"setBindingShapes",2);le([Tg],Nh.prototype,"createNewLineBinding",2);le([df],Nh.prototype,"brush",2);le([Tg],Nh.prototype,"setBrush",2);le([Tg],Nh.prototype,"setCamera",2);le([Wf],Nh.prototype,
"currentGrid",1);le([Wf],Nh.prototype,"shapes",1);le([Wf],Nh.prototype,"shapesInViewport",1);le([Wf],Nh.prototype,"selectionDirectionHint",1);le([Wf],Nh.prototype,"selectionBounds",1);le([Wf],Nh.prototype,"showSelection",1);le([Wf],Nh.prototype,"showSelectionDetail",1);le([Wf],Nh.prototype,"showSelectionRotation",1);le([Wf],Nh.prototype,"showContextBar",1);le([Wf],Nh.prototype,"showRotateHandles",1);le([Wf],Nh.prototype,"showResizeHandles",1);var zE=Function.prototype.toString,Dx=Object.create,AE=
Object.prototype.toString,BE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,m){this._keys.push(d);this._values.push(m)};return a}(),CE="undefined"!==typeof WeakMap?Sd:Yc,DE="g"===/test/g.flags?Se:Oe,EE="undefined"!==typeof Symbol?He:hf,FE=Object.defineProperty,GE=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,
yA=Object.prototype,zA=yA.hasOwnProperty,HE=yA.propertyIsEnumerable,AA="function"===typeof Ex,IE=AA?Af:xA,JE=Array.isArray,Fx=Object.assign,KE=Object.getPrototypeOf,BA={array:function(a,d){var m=new d.Constructor;d.cache.set(a,m);for(var L=0,ha=a.length;L<ha;++L)m[L]=d.copier(a[L],d);return m},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},
error:Og,map:ig,object:AA?tg:Xf,regExp:function(a,d){d=new d.Constructor(a.source,DE(a));d.lastIndex=a.lastIndex;return d},set:Gh},LE=Fx({},BA,{array:function(a,d){var m=new d.Constructor;d.cache.set(a,m);return Rf(a,m,d)},map:function(a,d){return Rf(a,ig(a,d),d)},object:function(a,d){var m=Fd(d.prototype);d.cache.set(a,m);return Rf(a,m,d)},set:function(a,d){return Rf(a,Gh(a,d),d)}});Hh(Fx({},LE,{}));var ME=Hh({}),NE=Jf(kt()),OE=Jf(nr()),Js=ME,Do=class{static insertTextFirefox(a,d){a.setRangeText(d,
a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const m=a.ownerDocument,L=m.activeElement;L!==a&&a.focus();m.execCommand("insertText",!1,d)||Do.insertTextFirefox(a,d);L===m.body?a.blur():L instanceof HTMLElement&&L!==a&&L.focus()}static set(a,d){a.select();Do.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:m}=a;return a.value.slice(d?d:void 0,m?m:void 0)}static wrapSelection(a,
d,m){const {selectionStart:L,selectionEnd:ha}=a,na=Do.getSelection(a);Do.insert(a,d+na+(null!=m?m:d));a.selectionStart=(L||0)+d.length;a.selectionEnd=(ha||0)+d.length}static replace(a,d,m){let L=0;a.value.replace(d,(...ha)=>{const na=L+ha[ha.length-2],ua=ha[0].length;a.selectionStart=na;a.selectionEnd=na+ua;ha="string"===typeof m?m:m(...ha);Do.insert(a,ha);a.selectionStart=na;L+=ha.length-ua;return ha})}static findLineEnd(a,d){const m=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(m)?d:m+1}static indent(a){var d;
const {selectionStart:m,selectionEnd:L,value:ha}=a;var na=ha.slice(m,L);if((na=null==(d=/\n/g.exec(na))?void 0:d.length)&&0<na){d=ha.lastIndexOf("\n",m-1)+1;var ua=a.value.slice(d,L-1);na=ua.replace(/^|\n/g,`$&${Do.INDENT}`);ua=na.length-ua.length;a.setSelectionRange(d,L-1);Do.insert(a,na);a.setSelectionRange(m+1,L+ua)}else Do.insert(a,Do.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:m,value:L}=a;var ha=L.lastIndexOf("\n",d-1)+1;const na=Do.findLineEnd(L,m);var ua=a.value.slice(ha,
na);const Ha=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ha.length;a.setSelectionRange(ha,na);Do.insert(a,Ha);ha=(ha=/\t| {1,2}/.exec(L.slice(ha,d)))?ha[0].length:0;a.setSelectionRange(d-ha,Math.max(d-ha,m-ua))}static normalizeText(a){return a.replace(Do.fixNewLines,"\n")}},It=Do;kb(It,"fixNewLines",/\r?\n|\r/g);kb(It,"INDENT","  ");var Dr;"undefined"!==typeof window&&(Dr=lg());var Gx=new Map,CA=yb()?"":"ctrl",PE=class extends Nh{},DA=Jf(ba(22)),QE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var EA=Jf(ba(22)),Hx={},Ku=Jf(ba(22)),RE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Ix=Jf(ba(22)),Jx=new Map,SE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},TE=((a,...d)=>a.reduce((m,L,ha)=>m+L+(ha<d.length?d[ha]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,FA=Jf(ba(22)),GA=Jf(ba(22)),Kx={},Fk={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},HA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},UE=["enter","leave"],VE=["gotpointercapture","lostpointercapture"],
IA=class{constructor(a,d,m){this.ctrl=a;this.args=d;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:m,args:L}=this;d[m]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=L;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,m=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=m.from?Jg(m.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:m,shared:L}=this;d.args=this.args;var ha=0;if(a){d.event=a;m.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;L.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;L.locked=!!document.pointerLockElement;ha=Object;var na=ha.assign,ua={};"buttons"in a&&(ua.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Rc,altKey:Tc,metaKey:Dd,ctrlKey:Ud}=a;Object.assign(ua,{shiftKey:Rc,altKey:Tc,metaKey:Dd,ctrlKey:Ud})}na.call(ha,L,ua);L.down=L.pressed=1===L.buttons%2||0<L.touches;ha=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(na=d._delta.map(Math.abs),Fk.addTo(d._distance,na));this.axisIntent&&
this.axisIntent(a);const [Ha,Ua]=d._movement,[$a,jb]=m.threshold,{_step:mb,values:Kb}=d;m.hasCustomTransform?(!1===mb[0]&&(mb[0]=Math.abs(Ha)>=$a&&Kb[0]),!1===mb[1]&&(mb[1]=Math.abs(Ua)>=jb&&Kb[1])):(!1===mb[0]&&(mb[0]=Math.abs(Ha)>=$a&&Math.sign(Ha)*$a),!1===mb[1]&&(mb[1]=Math.abs(Ua)>=jb&&Math.sign(Ua)*jb));d.intentional=!1!==mb[0]||!1!==mb[1];if(d.intentional){na=[0,0];if(m.hasCustomTransform){const [Rc,Tc]=Kb;na[0]=!1!==mb[0]?Rc-mb[0]:0;na[1]=!1!==mb[1]?Tc-mb[1]:0}else na[0]=!1!==mb[0]?Ha-mb[0]:
0,na[1]=!1!==mb[1]?Ua-mb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(na);ua=d.offset;var Vb=d._active&&!d._blocked||d.active;Vb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=L[this.ingKey]=d._active,a&&(d.first&&("bounds"in m&&(d._bounds=Jg(m.bounds,d)),this.setup&&this.setup()),d.movement=na,this.computeOffset()));var [Ob,jc]=d.offset,[[xc,bc],[pc,lc]]=d._bounds;d.overflow=[Ob<xc?-1:Ob>bc?1:0,jc<pc?-1:jc>lc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=qf(d._bounds,d.offset,d._active?m.rubberband||[0,0]:[0,0]);d.delta=Fk.sub(d.offset,ua);this.computeMovement();Vb&&(!d.last||32<ha)&&(d.delta=Fk.sub(d.offset,ua),a=d.delta.map(Math.abs),Fk.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<ha&&(d.velocity=[a[0]/ha,a[1]/ha]))}}emit(){const a=this.state;var d=
this.shared;const m=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||m.triggerAllEvents)d=this.handler(yf(yf(yf({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Lu=class extends IA{constructor(...a){super(...a);Yf(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Fk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Fk.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,m=this.config;!d.axis&&a&&(a="object"===typeof m.axisThreshold?m.axisThreshold[$g(a)]:m.axisThreshold,d.axis=uj(d._movement,a));d._blocked=(m.lockDirection||!!m.axis)&&!d.axis||!!m.axis&&m.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},WE=a=>a,JA={enabled(a=!0){return a},
eventOptions(a,d,m){return yf(yf({},m.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Fk.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Fk.toVector(a)},transform(a,d,m){a=a||m.shared.transform;this.hasCustomTransform=!!a;return a||WE},threshold(a){return Fk.toVector(a,0)}},Ks=yf(yf({},JA),{},{axis(a,d,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return na=>Ks.bounds(a(na));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:m=Infinity,top:L=-Infinity,bottom:ha=Infinity}=a;return[[d,m],[L,ha]]}}),KA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},XE=class extends Lu{constructor(...a){super(...a);Yf(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),m=a.currentTarget.getBoundingClientRect();a._bounds=Ks.bounds({left:d.left-m.left+a.offset[0],right:d.right-m.right+a.offset[0],top:d.top-m.top+a.offset[1],bottom:d.bottom-m.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,m=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var L=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);L&&1<L.size&&m._pointerActive||(this.start(a),this.setupPointer(a),m._pointerId=mh(a),m._pointerActive=!0,this.computeValues(fg(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==$g(a)?(m._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,m=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var L=mh(a);if(void 0===d._pointerId||L===d._pointerId)L=fg(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Fk.sub(L,d._values),this.computeValues(L)),Fk.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):m.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===m.preventScrollAxis||"xy"===m.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(ua){}const d=this.state,m=this.config;if(d._active&&d._pointerActive){var L=mh(a);if(void 0===d._pointerId||L===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [ha,na]=d._distance;d.tap=ha<=m.tapsThreshold&&na<=m.tapsThreshold;if(d.tap&&m.filterTaps)d._force=!0;else{const [ua,Ha]=d.direction,[Ua,$a]=d.velocity,[jb,mb]=d.movement,[Kb,Vb]=m.swipe.velocity,[Ob,jc]=m.swipe.distance;d.elapsedTime<m.swipe.duration&&(Math.abs(Ua)>Kb&&Math.abs(jb)>Ob&&(d.swipe[0]=ua),Math.abs($a)>Vb&&Math.abs(mb)>jc&&(d.swipe[1]=Ha))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
m=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=KA[a.key];if(d){const m=this.state,L=a.shiftKey?10:a.altKey?.1:1;this.start(a);m._delta=d(L);m._keyboardActive=!0;Fk.addTo(m._movement,m._delta);this.compute(a);this.emit()}}keyUp(a){a.key in KA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ls="undefined"!==typeof window&&window.document&&window.document.createElement;try{var LA="constructor"in GestureEvent}catch(a){LA=!1}var YE=
LA,Mu=Ls&&"ontouchstart"in window||Ls&&1<window.navigator.maxTouchPoints,MA=Ls&&"ontouchstart"in window||Ls&&1<window.navigator.maxTouchPoints,NA=Ls&&"onpointerdown"in window,ZE=Ls&&"exitPointerLock"in window.document,OA={mouse:0,touch:0,pen:8},$E=yf(yf({},Ks),{},{device(a,d,{pointer:{touch:m=!1,lock:L=!1,mouse:ha=!1}={}}){this.pointerLock=L&&ZE;return Mu&&m?"touch":this.pointerLock?"mouse":NA&&!ha?"pointer":Mu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:m}){this.preventScrollDelay="number"===
typeof m?m:m||void 0===m&&a?250:void 0;if(MA&&!1!==m)return a?a:void 0!==m?"y":void 0},pointerCapture(a,d,{pointer:{capture:m=!0,buttons:L=1,keys:ha=!0}={}}){this.pointerButtons=L;this.keys=ha;return!this.pointerLock&&"pointer"===this.device&&m},threshold(a,d,{filterTaps:m=!1,tapsThreshold:L=3,axis:ha}){a=Fk.toVector(a,m?L:ha?1:0);this.filterTaps=m;this.tapsThreshold=L;return a},swipe({velocity:a=.5,distance:d=50,duration:m=250}={}){return{velocity:this.transform(Fk.toVector(a)),distance:this.transform(Fk.toVector(d)),
duration:m}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?yf(yf({},OA),a):OA}}),aF=class extends IA{constructor(...a){super(...a);Yf(this,"ingKey","pinching");Yf(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:m}=
this.state;this.state.offset="wheel"===a?Fk.add(d,m):[(1+d[0])*m[0],d[1]+m[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,m]=a._movement;if(!a.axis){const L=30*Math.abs(d)-Math.abs(m);0>L?a.axis="angle":0<L&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const m=this.ctrl.touchIds;d._active&&d._touchIds.every(L=>m.has(L))||2>m.size||(this.start(a),d._touchIds=Array.from(m).slice(0,2),d=vf(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,m=d._pointerEvents,L=this.ctrl.pointerIds;d._active&&Array.from(m.keys()).every(ha=>L.has(ha))||
(2>m.size&&m.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=mf(...Array.from(m.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=vf(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=mf(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const m=this.state,L=d.angle-m._values[1];let ha=0;270<Math.abs(L)&&(ha+=Math.sign(L));this.computeValues([d.distance,d.angle-360*ha]);m.origin=d.origin;m.turns=ha;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(m){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var m=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Fk.sub(d._movement,m);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-ni(a)[1]/100*d.offset[0],0];Fk.addTo(d._movement,d._delta);Gl(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},bF=yf(yf({},JA),{},{device(a,d,{shared:m,pointer:{touch:L=!1}={}}){if(m.target&&!Mu&&YE)return"gesture";if(Mu&&L)return"touch";if(MA){if(NA)return"pointer";if(Mu)return"touch"}},bounds(a,d,{scaleBounds:m={},angleBounds:L={}}){const ha=ua=>{ua=Jg(m,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]},na=ua=>{ua=Jg(L,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]};return"function"!==typeof m&&"function"!==typeof L?[ha(),
na()]:ua=>[ha(ua),na(ua)]},threshold(a,d,m){this.lockDirection="lock"===m.axis;return Fk.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),cF=class extends Lu{constructor(...a){super(...a);Yf(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(fg(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=fg(a),m=this.state;m._delta=Fk.sub(d,m._values);Fk.addTo(m._movement,m._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},dF=yf(yf({},Ks),{},{mouseOnly:(a=!0)=>a}),eF=class extends Lu{constructor(...a){super(...a);Yf(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var m,L;const {scrollX:ha,scrollY:na,scrollLeft:ua,scrollTop:Ha}=a.currentTarget;var Ua=[null!==(m=null!==ha&&void 0!==ha?ha:ua)&&void 0!==m?m:0,null!==(L=null!==na&&void 0!==na?na:Ha)&&void 0!==L?L:0];d._delta=Fk.sub(Ua,d._values);Fk.addTo(d._movement,d._delta);this.computeValues(Ua);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},fF=Ks,gF=class extends Lu{constructor(...a){super(...a);Yf(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=ni(a);Fk.addTo(d._movement,d._delta);Gl(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},hF=Ks,iF=class extends Lu{constructor(...a){super(...a);Yf(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(fg(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var m=fg(a);d._movement=d._delta=Fk.sub(m,d._values);this.computeValues(m);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},jF=yf(yf({},Ks),{},{mouseOnly:(a=!0)=>a}),Lx=new Map,Mx=new Map,kF={key:"drag",engine:XE,resolver:$E},lF={key:"hover",engine:iF,resolver:jF},mF={key:"move",engine:cF,resolver:dF},nF={key:"pinch",engine:aF,resolver:bF},oF={key:"scroll",engine:eF,resolver:fF},pF={key:"wheel",engine:gF,resolver:hF},Nx=Jf(ba(22)),qF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ls?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},rF=["target","eventOptions","window","enabled","transform"],PA=class{constructor(a,d){Yf(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,m,L,ha){const na=this._listeners,ua=ki(d,m),Ha=yf(yf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ha);a.addEventListener(ua,L,Ha);const Ua=()=>{a.removeEventListener(ua,
L,Ha);na.delete(Ua)};na.add(Ua);return Ua}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},sF=class{constructor(){Yf(this,"_timeouts",new Map)}add(a,d,m=140,...L){this.remove(a);this._timeouts.set(a,window.setTimeout(d,m,...L))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},tF=class{constructor(a){Yf(this,"gestures",new Set);Yf(this,"_targetEventStore",new PA(this));Yf(this,"gestureEventStores",
{});Yf(this,"gestureTimeoutStores",{});Yf(this,"handlers",{});Yf(this,"config",{});Yf(this,"pointerIds",new Set);Yf(this,"touchIds",new Set);Yf(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&tj(this,"drag");a.wheel&&tj(this,"wheel");a.scroll&&tj(this,"scroll");a.move&&tj(this,"move");a.pinch&&tj(this,"pinch");a.hover&&tj(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(ef(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=xj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const m={};let L;if(d.target&&
(L=d.target(),!L))return;if(d.enabled){for(const ha of this.gestures){const na=this.config[ha],ua=QA(m,na.eventOptions,!!L);na.enabled&&(new (Lx.get(ha))(this,a,ha)).bind(ua)}d=QA(m,d.eventOptions,!!L);for(const ha in this.nativeHandlers)d(ha,"",na=>this.nativeHandlers[ha](yf(yf({},this.state.shared),{},{event:na,args:a})),void 0,!0)}for(const ha in m)m[ha]=Th(...m[ha]);if(!L)return m;for(const ha in m){const {device:na,capture:ua,passive:Ha}=Lf(ha);this._targetEventStore.add(L,na,"",m[ha],{capture:ua,
passive:Ha})}}},QA=(a,d,m)=>(L,ha,na,ua={},Ha=!1)=>{var Ua,$a;const jb=null!==(Ua=ua.capture)&&void 0!==Ua?Ua:d.capture;ua=null!==($a=ua.passive)&&void 0!==$a?$a:d.passive;L=Ha?L:Rg(L,ha,jb);m&&ua&&(L+="Passive");a[L]=a[L]||[];a[L].push(na)},uF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,$v=Jf(ba(22)),Ox=Jf(ba(22)),RA=Jf(ba(22)),SA=Jf(ba(22)),vF=Jf(ba(22)),wF=Jf(ba(22)),xF=Jf(ba(22)),yF=Jf(ba(22)),zF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>mk('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>mk("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>mk("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>mk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>mk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>mk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>mk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>mk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>mk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>mk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>mk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>mk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>mk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>mk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},AF=Jf(ba(22));Jf(ba(22));var TA=ba(22),UA=Jf(ba(22));if(!ba(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!cd)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var BF=ba(31),Nu=Jf(ba(22)),VA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,CF=1E4,DF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,m=d&&a[d],L=0;if(m)return m.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
L>=a.length&&(a=void 0);return{value:a&&a[L++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},WA=VA?Dh(VA):ym(),EF=WA.addReactionToTrack,FF=WA.recordReactionAsCommitted,XA=function(a,d){var m="function"===typeof Symbol&&a[Symbol.iterator];if(!m)return a;a=m.call(a);var L,ha=[];try{for(;(void 0===d||0<d--)&&!(L=a.next()).done;)ha.push(L.value)}catch(ua){var na={error:ua}}finally{try{L&&!L.done&&(m=a["return"])&&m.call(a)}finally{if(na)throw na.error;
}}return ha},GF=function(){return function(){}}(),Jt=ba(22),YA="function"===typeof Symbol&&Symbol.for,ZA=YA?Symbol.for("react.forward_ref"):"function"===typeof Jt.forwardRef&&(0,Jt.forwardRef)(function(a){return null}).$$typeof,$A=YA?Symbol.for("react.memo"):"function"===typeof Jt.memo&&(0,Jt.memo)(function(a){return null}).$$typeof,HF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Xj.displayName="Observer";ba(22);ba(22);ba(22);(function(a){a||=Sm;nb({reactionScheduler:a})})(BF.unstable_batchedUpdates);
var IF=Jf(ba(22)),Px=ba(614),Eo=IF.forwardRef(function(a,d){var {children:m,opacity:L,centered:ha,className:na=""}=a,ua=ag(a,["children","opacity","centered","className"]);return(0,Px.jsx)(Xj,{children:()=>(0,Px.jsx)("div",{ref:d,className:`tl-positioned-div ${na}`,style:L?{opacity:L}:void 0,draggable:!1,children:(0,Px.jsx)("div",Bf(qe({className:`tl-positioned-inner ${ha?"tl-centered":""}`},ua),{children:m}))})})}),JF=Jf(ba(22)),Qx=ba(614),fp=JF.forwardRef(function(a,d){var {id:m,className:L="",
style:ha,children:na}=a,ua=ag(a,["id","className","style","children"]);return(0,Qx.jsx)(Xj,{children:()=>(0,Qx.jsx)("svg",{ref:d,style:ha,className:`tl-positioned-svg ${L}`,children:(0,Qx.jsx)("g",Bf(qe({id:m,className:"tl-centered-g"},ua),{children:na}))})})}),Ou=Jf(ba(22)),aB=Jf(ba(22)),aw=Jf(ba(22)),KF=ba(614),Er=If(function(a){var {id:d,bounds:m,zIndex:L,rotation:ha=0,className:na="",children:ua}=a;a=ag(a,"id bounds zIndex rotation className children".split(" "));const Ha=aw.useRef(null);aw.useLayoutEffect(()=>
{Ha.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${ha+(m.rotation||0)}rad)`},[m.minX,m.minY,ha,m.rotation]);aw.useLayoutEffect(()=>{const Ua=Ha.current;Ua.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Ua.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);aw.useLayoutEffect(()=>{const Ua=Ha.current;void 0!==L&&(Ua.style.zIndex=L.toString())},[L]);return(0,KF.jsx)("div",Bf(qe({id:d,ref:Ha,className:`tl-positioned ${na}`,"aria-label":"container"},a),{children:ua}))}),
LF=Jf(ba(22)),bB=ba(614),MF=If(function({shapes:a,hidden:d,bounds:m,rotation:L=0}){const {components:{ContextBar:ha},viewport:{bounds:na,camera:{point:[ua,Ha],zoom:Ua}}}=Gc(),$a=LF.useRef(null);var jb=Of.getRotatedBounds(m,L);jb=Of.multiplyBounds(jb,Ua);Wj($a,m,L,10005);if(!ha)throw Error("Expected a ContextBar component.");const mb=Of.translateBounds(jb,[ua*Ua,Ha*Ua]);return(0,bB.jsx)("div",{ref:$a,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,bB.jsx)(ha,{hidden:d,shapes:a,bounds:m,offsets:{left:mb.minX,right:na.width-mb.maxX,top:mb.minY,bottom:na.height-mb.maxY,width:mb.width,height:mb.height},scaledBounds:jb,rotation:L})})}),cB=Jf(ba(22)),NF=ba(614),dB=If(function({children:a}){const d=cB.useRef(null),{viewport:m}=Gc(),L=d.current,{zoom:ha,point:na}=m.camera;cB.useEffect(()=>{L&&(L.style.transform=`scale(${ha}) translate3d(${na[0]}px, ${na[1]}px, 0)`)},[ha,na,L]);return(0,NF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),bw=ba(614),eB=If(function({shape:a,isHovered:d=!1,isSelected:m=!1,isBinding:L=!1,isEditing:ha=!1,isLocked:na=!1,meta:ua}){const {bounds:Ha,props:{scale:Ua,rotation:$a=0},ReactIndicator:jb}=a;return(0,bw.jsx)(Er,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ha,rotation:$a,scale:Ua,zIndex:ha?1E3:1E4,children:(0,bw.jsx)(fp,{children:(0,bw.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"} ${na?"tl-locked":""}`,children:(0,bw.jsx)(jb,{isEditing:ha,
isBinding:L,isHovered:d,isLocked:na,isSelected:m,isErasing:!1,meta:ua})})})})}),fB=Jf(ba(22)),cw=ba(614),OF=If(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:m}},components:{QuickLinks:L}}=Gc();var ha=Ie();const na=Il(d);if(!L)throw Error("Expected a QuickLinks component.");ha=50>a.height*m||!ha.selectedShapesArray.includes(d);return(0,cw.jsx)(Er,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,cw.jsx)(Eo,{children:(0,cw.jsx)("span",Bf(qe({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},na),{onPointerDown:ua=>ua.stopPropagation(),children:(0,cw.jsx)(L,{className:"tl-backlinks-count "+(ha?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),dw=ba(614),PF=If(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:m}},components:{BacklinksCount:L}}=Gc();var ha=Ie();if(!L)throw Error("Expected a BacklinksCount component.");const na=ua=>ua.stopPropagation();
ha=50>a.height*m||!ha.selectedShapesArray.includes(d)||d.hideSelection;return(0,dw.jsx)(Er,{bounds:a,className:"tl-backlinks-count-container",children:(0,dw.jsx)(Eo,{children:(0,dw.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:na,onWheelCapture:na,onKeyDown:na,title:"Shape Backlinks",children:(0,dw.jsx)(L,{className:"tl-backlinks-count "+(ha?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),QF=Jf(ba(22)),gB=ba(614),RF=If(function({bounds:a,hidden:d,shapes:m,rotation:L=0,detail:ha="size"}){const {components:{SelectionDetail:na},viewport:{camera:{zoom:ua}}}=Gc(),Ha=QF.useRef(null),Ua=Of.multiplyBounds(a,ua);Wj(Ha,a,L,10003);if(!na)throw Error("Expected a SelectionDetail component.");return(0,gB.jsx)("div",{ref:Ha,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,gB.jsx)(na,
{shapes:m,bounds:a,scaledBounds:Ua,zoom:ua,rotation:L,detail:ha})})}),hB=ba(614),SF=If(function({shape:a,isHovered:d=!1,isSelected:m=!1,isBinding:L=!1,isErasing:ha=!1,isEditing:na=!1,onEditingEnd:ua,asset:Ha,meta:Ua,zIndex:$a}){const {bounds:jb,props:{rotation:mb,scale:Kb},ReactComponent:Vb}=a,Ob=Ie(),jc=Il(a);var xc=Ob.getParentGroup(a);xc=Ob.selectedIds.has(null==xc?void 0:xc.id);return(0,hB.jsx)(Er,{"data-shape-id":a.id,"data-html2canvas-ignore":!m&&!xc&&0!==Ob.selectedShapes.size||null,zIndex:$a,
"data-type":"Shape",bounds:jb,rotation:mb,scale:Kb,children:(0,hB.jsx)(Vb,{meta:Ua,isEditing:na,isBinding:L,isHovered:d,isSelected:m,isErasing:ha,events:jc,asset:Ha,onEditingEnd:ua})})}),Kt=ba(614),iB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],TF=If(function({size:a}){const {viewport:{camera:{point:d,zoom:m}}}=Gc();return(0,Kt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Kt.jsx)("defs",{children:iB.map(([L,ha,
na],ua)=>{na=na*a*m;var Ha=d[0]*m,Ua=d[1]*m;Ha=0<Ha?Ha%na:na+Ha%na;Ua=0<Ua?Ua%na:na+Ua%na;L=Oi(m,[L,ha],[0,1]);return(0,Kt.jsx)("pattern",{id:`grid-${ua}`,width:na,height:na,patternUnits:"userSpaceOnUse",children:!(2<L||.1>L)&&(0,Kt.jsx)("circle",{className:"tl-grid-dot",cx:Ha,cy:Ua,r:1.5,opacity:Math.max(0,Math.min(L,1))})},`grid-pattern-${ua}`)})}),iB.map((L,ha)=>(0,Kt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ha})`},`grid-rect-${ha}`))]})}),jB=If(function({size:a}){return(0,Kt.jsx)(TF,
{size:a})}),kB=ba(614),lB=If(function({bounds:a}){const d=Cd("background");return(0,kB.jsx)(fp,Bf(qe({"data-html2canvas-ignore":"true"},d),{children:(0,kB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ba(22);var mB=ba(614),nB=If(function({scaledBounds:a,shapes:d,detail:m="size",rotation:L=0}){var ha;const na=1===d.length?L:null!=(ha=a.rotation)?ha:0;return(0,mB.jsx)(Eo,{centered:!0,children:(0,mB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:na<Hn||na>3*Hn?`rotate(${na}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+na}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${me.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===m?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${cm.radiansToDegrees(cm.clampRadians(L)).toFixed()}\xB0`})})}),Rx=ba(614),UF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},ew=If(function({cx:a,cy:d,size:m,targetSize:L,corner:ha,isHidden:na}){const ua=Cd(ha);return(0,Rx.jsxs)("g",Bf(qe({opacity:na?0:1},ua),{children:[(0,Rx.jsx)("rect",{className:"tl-transparent "+(na?"":UF[ha]),"aria-label":`${ha} target`,x:a-1.25*L,y:d-1.25*L,width:2.5*L,height:2.5*L,pointerEvents:na?"none":"all"}),(0,Rx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ha} handle`,x:a-m/2,y:d-m/2,width:m,height:m,pointerEvents:"none"})]}))}),
VF=ba(614),WF={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},fw=If(function({x:a,y:d,width:m,height:L,targetSize:ha,edge:na,disabled:ua,isHidden:Ha}){const Ua=Cd(na);return(0,VF.jsx)("rect",qe({pointerEvents:Ha||ua?"none":"all",className:"tl-transparent tl-edge-handle "+(Ha?"":WF[na]),"aria-label":`${na} target`,opacity:Ha?0:1,x:a-ha,y:d-ha,width:Math.max(1,m+2*ha),height:Math.max(1,L+2*ha)},Ua))}),Sx=ba(614);If(function({cx:a,cy:d,size:m,targetSize:L,
isHidden:ha}){const na=Cd("rotate");return(0,Sx.jsxs)("g",Bf(qe({opacity:ha?0:1},na),{children:[(0,Sx.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:L,pointerEvents:ha?"none":"all"}),(0,Sx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:m/2,pointerEvents:"none"})]}))});ba(22);var oB=ba(614),gw=If(function({cx:a,cy:d,targetSize:m,corner:L,isHidden:ha}){const na=Cd(L);return(0,oB.jsx)("g",Bf(qe({opacity:ha?0:1},na),{children:(0,oB.jsx)("rect",
{className:"tl-transparent","aria-label":`${L} target`,x:a-2.5*m,y:d-2.5*m,width:3*m,height:3*m,pointerEvents:ha?"none":"all"})}))}),Em=ba(614),pB=If(function({bounds:a,showResizeHandles:d,showRotateHandles:m,shapes:L}){var ha,na;const ua=Ie();let {width:Ha,height:Ua}=a;var $a=ua.viewport.camera.zoom;a=8/$a;$a=6/$a;const jb=1===L.length?L[0].canResize:[!0,!0],mb=null!=(na=null==(ha=ua.editingShape)?void 0:ha.props.borderRadius)?na:0;return(0,Em.jsx)(Em.Fragment,{children:0<L.length&&(0,Em.jsxs)(fp,
{children:[!ua.editingShape&&(0,Em.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ha,1),height:Math.max(Ua,1),rx:mb,ry:mb,pointerEvents:"none"}),(0,Em.jsx)(fw,{x:2*$a,y:0,width:Ha-4*$a,height:0,targetSize:$a,edge:"top_edge",disabled:!jb[1],isHidden:!d}),(0,Em.jsx)(fw,{x:Ha,y:2*$a,width:0,height:Ua-4*$a,targetSize:$a,edge:"right_edge",disabled:!jb[0],isHidden:!d}),(0,Em.jsx)(fw,{x:2*$a,y:Ua,width:Ha-4*$a,height:0,targetSize:$a,edge:"bottom_edge",disabled:!jb[1],isHidden:!d}),(0,Em.jsx)(fw,{x:0,
y:2*$a,width:0,height:Ua-4*$a,targetSize:$a,edge:"left_edge",disabled:!jb[0],isHidden:!d}),(0,Em.jsx)(gw,{cx:0,cy:0,targetSize:$a,corner:"top_left_resize_corner",isHidden:!m}),(0,Em.jsx)(gw,{cx:Ha+2*$a,cy:0,targetSize:$a,corner:"top_right_resize_corner",isHidden:!m}),(0,Em.jsx)(gw,{cx:Ha+2*$a,cy:Ua+2*$a,targetSize:$a,corner:"bottom_right_resize_corner",isHidden:!m}),(0,Em.jsx)(gw,{cx:0,cy:Ua+2*$a,targetSize:$a,corner:"bottom_left_resize_corner",isHidden:!m}),(null==jb?void 0:jb.every(Kb=>Kb))&&(0,Em.jsxs)(Em.Fragment,
{children:[(0,Em.jsx)(ew,{cx:0,cy:0,size:a,targetSize:$a,corner:"top_left_corner",isHidden:!d}),(0,Em.jsx)(ew,{cx:Ha,cy:0,size:a,targetSize:$a,corner:"top_right_corner",isHidden:!d}),(0,Em.jsx)(ew,{cx:Ha,cy:Ua,size:a,targetSize:$a,corner:"bottom_right_corner",isHidden:!d}),(0,Em.jsx)(ew,{cx:0,cy:Ua,size:a,targetSize:$a,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Tx=ba(614),qB=If(function({bounds:a}){return(0,Tx.jsx)(Er,{bounds:a,zIndex:10001,children:(0,Tx.jsx)(fp,{children:(0,Tx.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),rB=ba(614);If(function(){return(0,rB.jsx)(rB.Fragment,{})});var Ux=ba(614),sB=If(function({shape:a,handle:d,id:m}){a=up(a,m);const [L,ha]=d.point;return(0,Ux.jsxs)("g",Bf(qe({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${L}, ${ha})`,children:[(0,Ux.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Ux.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),tB=
Jf(ba(22)),Vx=ba(614),Wx=If(function({direction:a}){const {viewport:{bounds:d}}=Gc(),m=tB.useRef(null);tB.useLayoutEffect(()=>{const L=m.current;if(L){var ha=[d.width/2,d.height/2],na=Of.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[ua,Ha]]of na)na=v(ha,a,ua,Ha),na.didIntersect&&(na=na.points[0],L.style.transform=`translate(${na[0]-6}px,${na[1]-6}px) rotate(${me.toAngle(a)}rad)`)}},[a,d]);return(0,Vx.jsx)("div",{ref:m,className:"tl-direction-indicator","data-html2canvas-ignore":"true",
children:(0,Vx.jsx)("svg",{height:12,width:12,children:(0,Vx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),Gk=ba(614),XF=If(function({id:a,className:d,brush:m,shapes:L,assets:ha,bindingShapes:na,editingShape:ua,hoveredShape:Ha,hoveredGroup:Ua,selectionBounds:$a,selectedShapes:jb,erasingShapes:mb,selectionDirectionHint:Kb,cursor:Vb="default",cursorRotation:Ob=0,selectionRotation:jc=0,showSelection:xc=!0,showHandles:bc=!0,showSelectionRotation:pc=!1,showResizeHandles:lc=!0,showRotateHandles:Rc=!0,
showSelectionDetail:Tc=!0,showContextBar:Dd=!0,showGrid:Ud=!0,gridSize:kf=8,onEditingEnd:re=QE,theme:Ue=Kq,children:Tf}){var gf;const lf=Ou.useRef(null),{viewport:Yd,components:qd,meta:Zd}=Gc(),nd=Ie(),Ld=Ou.useCallback(Uf=>{nd.inputs.updateContainerOffset([Uf.minX,Uf.minY])},[]);ye(Ue,a);Rm(lf);ae(lf,Yd,Ld);Lj(lf);fm();Hl(lf,Vb,Ob);Tk(lf);Gn(lf);a=Ye();const $e=(Vb=1===(null==jb?void 0:jb.length)&&jb[0])&&"handles"in Vb.props?null==jb?void 0:jb[0]:void 0,Df=Ou.useMemo(()=>new Set(jb||[]),[jb]),kg=
Ou.useMemo(()=>new Set(mb||[]),[mb]);Vb=1===(null==jb?void 0:jb.length)?jb[0]:void 0;Ua=[...(new Set([Ua,Ha]))].filter(ic);return(0,Gk.jsxs)("div",{ref:lf,className:`tl-container ${null!=d?d:""}`,children:[(0,Gk.jsxs)("div",Bf(qe({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Ud&&qd.Grid&&(0,Gk.jsx)(qd.Grid,{size:kf}),(0,Gk.jsxs)(dB,{children:[qd.SelectionBackground&&jb&&$a&&xc&&(0,Gk.jsx)(Er,{"data-type":"SelectionBackground",bounds:$a,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Gk.jsx)(qd.SelectionBackground,
{shapes:jb,bounds:$a,showResizeHandles:lc,showRotateHandles:Rc})}),L&&L.map((Uf,wg)=>(0,Gk.jsx)(SF,{shape:Uf,asset:ha&&Uf.props.assetId?ha[Uf.props.assetId]:void 0,isEditing:Uf===ua,isHovered:Uf===Ha,isBinding:null==na?void 0:na.includes(Uf),isSelected:Df.has(Uf),isErasing:kg.has(Uf),meta:Zd,zIndex:1E3+wg,onEditingEnd:re},"shape_"+Uf.id)),!nd.isIn("select.pinching")&&(null==jb?void 0:jb.map(Uf=>(0,Gk.jsx)(eB,{shape:Uf,isEditing:Uf===ua,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Uf.props.isLocked},
"selected_indicator_"+Uf.id))),Ua.map(Uf=>Uf!==ua&&(0,Gk.jsx)(eB,{shape:Uf},"hovered_indicator_"+Uf.id)),Vb&&qd.BacklinksCount&&(0,Gk.jsx)(PF,{hidden:!1,bounds:Vb.bounds,shape:Vb}),Ha&&Ha!==Vb&&qd.QuickLinks&&(0,Gk.jsx)(OF,{hidden:!1,bounds:Ha.bounds,shape:Ha}),m&&qd.Brush&&(0,Gk.jsx)(qd.Brush,{bounds:m}),jb&&$a&&(0,Gk.jsxs)(Gk.Fragment,{children:[xc&&qd.SelectionForeground&&(0,Gk.jsx)(Er,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:$a,zIndex:ua&&jb.includes(ua)?1002:
10002,children:(0,Gk.jsx)(qd.SelectionForeground,{shapes:jb.filter(Uf=>!Uf.props.isLocked),bounds:$a,showResizeHandles:lc,showRotateHandles:Rc})}),bc&&$e&&qd.Handle&&(0,Gk.jsx)(Er,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:$a,zIndex:10003,children:(0,Gk.jsx)(fp,{children:Object.entries(null!=(gf=$e.props.handles)?gf:{}).map(([Uf,wg])=>Ou.createElement(qd.Handle,{key:`${wg.id}_handle_${wg.id}`,shape:$e,handle:wg,id:Uf}))})}),jb&&qd.SelectionDetail&&(0,Gk.jsx)(RF,
{"data-html2canvas-ignore":"true",shapes:jb,bounds:$a,detail:pc?"rotation":"size",hidden:!Tc,rotation:jc},"detail"+jb.map(Uf=>Uf.id).join(""))]})]}),Kb&&$a&&jb&&(0,Gk.jsx)(Wx,{direction:Kb,bounds:$a,shapes:jb}),(0,Gk.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Gk.jsx)(dB,{children:jb&&$a&&(0,Gk.jsx)(Gk.Fragment,{children:jb&&qd.ContextBar&&(0,Gk.jsx)(MF,{shapes:jb.filter(Uf=>!Uf.props.isLocked),hidden:!Dd,bounds:Vb?Vb.bounds:$a,rotation:Vb?Vb.props.rotation:
0},"context"+jb.map(Uf=>Uf.id).join(""))})}),Tf]})}),uB=Jf(ba(22)),vB=Jf(ba(22)),wB=ba(614);If(function({children:a}){const d=vB.useRef(null),{viewport:m}=Gc();vB.useEffect(()=>Id(()=>{const L=d.current;if(L){var {zoom:ha,point:na}=m.camera;L.style.transform=`scale(${ha}) translateX(${na[0]}px) translateY(${na[1]}px)`}}),[]);return(0,wB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,wB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var YF=ba(614),ZF=If(function(a){const d=
Zn(a),m=De(a.id);Zk(d,a);En(d,a);return(0,YF.jsx)(m.Provider,{value:d,children:a.children})}),$F=ba(614),aG=If(function({id:a="noid",viewport:d,inputs:m,callbacks:L=Kq,meta:ha=Kq,components:na=Kq,children:ua}){const [Ha,Ua]=uB.useState(()=>{const {Brush:jb,ContextBar:mb,DirectionIndicator:Kb,Grid:Vb,Handle:Ob,SelectionBackground:jc,SelectionDetail:xc,SelectionForeground:bc}=na,pc=ag(na,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:a,viewport:d,inputs:m,callbacks:L,meta:ha,components:Bf(qe({},pc),{Brush:null===jb?void 0:qB,ContextBar:mb,DirectionIndicator:null===Kb?void 0:Wx,Grid:null===Vb?void 0:jB,Handle:null===Ob?void 0:sB,SelectionBackground:null===jc?void 0:lB,SelectionDetail:null===xc?void 0:nB,SelectionForeground:null===bc?void 0:pB})}});uB.useLayoutEffect(()=>{const {Brush:jb,ContextBar:mb,DirectionIndicator:Kb,Grid:Vb,Handle:Ob,SelectionBackground:jc,SelectionDetail:xc,SelectionForeground:bc}=na,pc=ag(na,
"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Id(()=>{Ua({id:a,viewport:d,inputs:m,callbacks:L,meta:ha,components:Bf(qe({},pc),{Brush:null===jb?void 0:qB,ContextBar:mb,DirectionIndicator:null===Kb?void 0:Wx,Grid:null===Vb?void 0:jB,Handle:null===Ob?void 0:sB,SelectionBackground:null===jc?void 0:lB,SelectionDetail:null===xc?void 0:nB,SelectionForeground:null===bc?void 0:pB})})})},[]);const $a=Hc(a);return(0,$F.jsx)($a.Provider,
{value:Ha,children:ua})}),xB=ba(614),bG=ba(614),cG=If(function(a){const d=Ie();return(0,bG.jsx)(sn,qe({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,
penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});ba(614);var Lt=Jf(ba(22)),Fr=Jf(ba(22)),dG=ba(614),eG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Wh=a=>{var {name:d,className:m}=a;a=ag(a,["name","className"]);const L=eG.includes(d)?"tie tie-":"ti ti-";return(0,dG.jsx)("i",qe({className:[L+d,m].join(" ")},a))},Oh=ba(22),fG=ba(22),Ms=ba(22),ao=ba(22),Xx=ba(22),gG=ba(31),bn=ba(22),lq=(0,bn.forwardRef)((a,d)=>{var {children:m}=a;a=ag(a,["children"]);const L=bn.Children.toArray(m),ha=L.find(Yg);if(ha){const na=ha.props.children;m=L.map(ua=>ua===ha?1<bn.Children.count(na)?bn.Children.only(null):(0,bn.isValidElement)(na)?na.props.children:null:ua);
return(0,bn.createElement)(Yx,nf({},a,{ref:d}),(0,bn.isValidElement)(na)?(0,bn.cloneElement)(na,void 0,m):null)}return(0,bn.createElement)(Yx,nf({},a,{ref:d}),m)});lq.displayName="Slot";var Yx=(0,bn.forwardRef)((a,d)=>{const {children:m}=a;a=ag(a,["children"]);return(0,bn.isValidElement)(m)?(0,bn.cloneElement)(m,Bf(qe({},rl(a,m.props)),{ref:hh(d,m.ref)})):1<bn.Children.count(m)?bn.Children.only(null):null});Yx.displayName="SlotClone";var yB=({children:a})=>(0,bn.createElement)(bn.Fragment,null,a),
Vk="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const m=(0,Xx.forwardRef)((L,ha)=>{var {asChild:na}=L;L=ag(L,["asChild"]);na=na?lq:d;(0,Xx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Xx.createElement)(na,nf({},L,{ref:ha}))});m.displayName=`Primitive.${d}`;return Bf(qe({},a),{[d]:m})},{}),Zx=ba(22),hG=ba(22),zB,iG=(0,ao.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$x=(0,ao.forwardRef)((a,d)=>
{var m;const {disableOutsidePointerEvents:L=!1,onEscapeKeyDown:ha,onPointerDownOutside:na,onFocusOutside:ua,onInteractOutside:Ha,onDismiss:Ua}=a,$a=ag(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),jb=(0,ao.useContext)(iG),[mb,Kb]=(0,ao.useState)(null),Vb=null!==(m=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,ao.useState)({});d=Uh(d,
lc=>Kb(lc));m=Array.from(jb.layers);var [jc]=[...jb.layersWithOutsidePointerEventsDisabled].slice(-1);jc=m.indexOf(jc);const xc=mb?m.indexOf(mb):-1;m=0<jb.layersWithOutsidePointerEventsDisabled.size;const bc=xc>=jc;jc=Kj(lc=>{const Rc=lc.target,Tc=[...jb.branches].some(Dd=>Dd.contains(Rc));bc&&!Tc&&(null===na||void 0===na||na(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);const pc=Jj(lc=>{const Rc=lc.target;[...jb.branches].some(Tc=>Tc.contains(Rc))||(null===
ua||void 0===ua||ua(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);Uk(lc=>{xc===jb.layers.size-1&&(null===ha||void 0===ha||ha(lc),!lc.defaultPrevented&&Ua&&(lc.preventDefault(),Ua()))},Vb);(0,ao.useEffect)(()=>{if(mb)return L&&(0===jb.layersWithOutsidePointerEventsDisabled.size&&(zB=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),jb.layersWithOutsidePointerEventsDisabled.add(mb)),jb.layers.add(mb),nl(),()=>{L&&1===jb.layersWithOutsidePointerEventsDisabled.size&&
(Vb.body.style.pointerEvents=zB)}},[mb,Vb,L,jb]);(0,ao.useEffect)(()=>()=>{mb&&(jb.layers.delete(mb),jb.layersWithOutsidePointerEventsDisabled.delete(mb),nl())},[mb,jb]);(0,ao.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,ao.createElement)(Vk.div,nf({},$a,{ref:d,style:qe({pointerEvents:m?bc?"auto":"none":void 0},a.style),onFocusCapture:vg(a.onFocusCapture,pc.onFocusCapture),
onBlurCapture:vg(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:vg(a.onPointerDownCapture,jc.onPointerDownCapture)}))}),AB=Jf(ba(22)),jG=ba(22),Fm=(null===globalThis||void 0===globalThis?0:globalThis.document)?jG.useLayoutEffect:()=>{},kG=AB["useId".toString()]||(()=>{}),lG=0,Xl=ba(22),mG=(a,d,m)=>wi(void 0,null,function*(){const {placement:L="bottom",strategy:ha="absolute",middleware:na=[],platform:ua}=m,Ha=yield null==ua.isRTL?void 0:ua.isRTL(d);let Ua=yield ua.getElementRects({reference:a,
floating:d,strategy:ha}),{x:$a,y:jb}=zj(Ua,L,Ha),mb=L,Kb={},Vb=0;for(let Ob=0;Ob<na.length;Ob++){const {name:jc,fn:xc}=na[Ob],{x:bc,y:pc,data:lc,reset:Rc}=yield xc({x:$a,y:jb,initialPlacement:L,placement:mb,strategy:ha,middlewareData:Kb,rects:Ua,platform:ua,elements:{reference:a,floating:d}});$a=null!=bc?bc:$a;jb=null!=pc?pc:jb;Kb=Bf(qe({},Kb),{[jc]:qe(qe({},Kb[jc]),lc)});Rc&&50>=Vb&&(Vb++,"object"==typeof Rc&&(Rc.placement&&(mb=Rc.placement),Rc.rects&&(Ua=!0===Rc.rects?yield ua.getElementRects({reference:a,
floating:d,strategy:ha}):Rc.rects),{x:$a,y:jb}=zj(Ua,mb,Ha)),Ob=-1)}return{x:$a,y:jb,placement:mb,strategy:ha,middlewareData:Kb}}),ay=Math.min,Pq=Math.max,BB=a=>({name:"arrow",options:a,fn(d){return wi(this,null,function*(){const {element:m,padding:L=0}=null!=a?a:{},{x:ha,y:na,placement:ua,rects:Ha,platform:Ua}=d;if(null==m)return{};const $a=im(L),jb={x:ha,y:na},mb=ol(ua),Kb=ua.split("-")[1],Vb=bl(mb);var Ob=yield Ua.getDimensions(m);const jc="y"===mb?"top":"left",xc="y"===mb?"bottom":"right";var bc=
Ha.reference[Vb]+Ha.reference[mb]-jb[mb]-Ha.floating[Vb];const pc=jb[mb]-Ha.reference[mb];var lc=yield null==Ua.getOffsetParent?void 0:Ua.getOffsetParent(m);let Rc=lc?"y"===mb?lc.clientHeight||0:lc.clientWidth||0:0;0===Rc&&(Rc=Ha.floating[Vb]);lc=$a[jc];const Tc=Rc-Ob[Vb]-$a[xc];Ob=Rc/2-Ob[Vb]/2+(bc/2-pc/2);bc=Pq(lc,ay(Ob,Tc));return{[mb]:jb[mb]-(0<("start"===Kb?$a[jc]:$a[xc])&&Ob!==bc&&Ha.reference[Vb]<=Ha.floating[Vb]?Ob<lc?lc-Ob:Tc-Ob:0),data:{[mb]:bc,centerOffset:Ob-bc}}})}}),nG={left:"right",
right:"left",bottom:"top",top:"bottom"},oG={start:"end",end:"start"},CB=["top","right","bottom","left"];CB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var DB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return wi(this,null,function*(){var m;const {placement:L,middlewareData:ha,rects:na,initialPlacement:ua,platform:Ha,elements:Ua}=d;var $a=a;const {mainAxis:jb=!0,crossAxis:mb=!0,fallbackPlacements:Kb,fallbackStrategy:Vb="bestFit",flipAlignment:Ob=!0}=$a;$a=ag($a,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const jc=aj(L);var xc=Kb||(jc!==ua&&Ob?function(Dd){const Ud=Um(Dd);return[hm(Dd),Ud,hm(Ud)]}(ua):[Um(ua)]);xc=[ua,...xc];const bc=yield Sk(d,$a),pc=[];$a=(null==(m=ha.flip)?void 0:m.overflows)||[];if(jb&&pc.push(bc[jc]),mb){const {main:Dd,cross:Ud}=In(L,na,yield null==Ha.isRTL?void 0:Ha.isRTL(Ua.floating));pc.push(bc[Dd],bc[Ud])}if($a=[...$a,{placement:L,overflows:pc}],!pc.every(Dd=>0>=Dd)){var lc,Rc;m=(null!=(lc=null==(Rc=ha.flip)?
void 0:Rc.index)?lc:0)+1;if(lc=xc[m])return{data:{index:m,overflows:$a},reset:{placement:lc}};lc="bottom";switch(Vb){case "bestFit":var Tc;(Rc=null==(Tc=$a.map(Dd=>[Dd,Dd.overflows.filter(Ud=>0<Ud).reduce((Ud,kf)=>Ud+kf,0)]).sort((Dd,Ud)=>Dd[1]-Ud[1])[0])?void 0:Tc[0].placement)&&(lc=Rc);break;case "initialPlacement":lc=ua}if(L!==lc)return{reset:{placement:lc}}}return{}})}}},EB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,m=ag(a,["strategy"]);return{name:"hide",fn(L){return wi(this,
null,function*(){var {rects:ha}=L;switch(d){case "referenceHidden":return ha=Xb(yield Sk(L,Bf(qe({},m),{elementContext:"reference"})),ha.reference),{data:{referenceHiddenOffsets:ha,referenceHidden:Ta(ha)}};case "escaped":return ha=Xb(yield Sk(L,Bf(qe({},m),{altBoundary:!0})),ha.floating),{data:{escapedOffsets:ha,escaped:Ta(ha)}};default:return{}}})}}},FB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return wi(this,null,function*(){const {x:m,y:L}=d,ha=yield function(na,ua){return wi(this,
null,function*(){const {placement:Ha,platform:Ua,elements:$a}=na;var jb=yield null==Ua.isRTL?void 0:Ua.isRTL($a.floating),mb=aj(Ha);const Kb=Ha.split("-")[1],Vb="x"===ol(Ha);mb=["left","top"].includes(mb)?-1:1;jb=jb&&Vb?-1:1;const Ob="function"==typeof ua?ua(na):ua;let {mainAxis:jc,crossAxis:xc,alignmentAxis:bc}="number"==typeof Ob?{mainAxis:Ob,crossAxis:0,alignmentAxis:null}:qe({mainAxis:0,crossAxis:0,alignmentAxis:null},Ob);return Kb&&"number"==typeof bc&&(xc="end"===Kb?-1*bc:bc),Vb?{x:xc*jb,y:jc*
mb}:{x:jc*mb,y:xc*jb}})}(d,a);return{x:m+ha.x,y:L+ha.y,data:ha}})}}},GB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return wi(this,null,function*(){const {x:m,y:L,placement:ha}=d;var na=a;const {mainAxis:ua=!0,crossAxis:Ha=!1,limiter:Ua={fn:Vb=>{let {x:Ob,y:jc}=Vb;return{x:Ob,y:jc}}}}=na;var $a=ag(na,["mainAxis","crossAxis","limiter"]);na={x:m,y:L};$a=yield Sk(d,$a);const jb=ol(aj(ha)),mb="x"===jb?"y":"x";let Kb=na[jb];na=na[mb];ua&&(Kb=Pq(Kb+$a["y"===jb?"top":"left"],ay(Kb,
Kb-$a["y"===jb?"bottom":"right"])));Ha&&(na=Pq(na+$a["y"===mb?"top":"left"],ay(na,na-$a["y"===mb?"bottom":"right"])));na=Ua.fn(Bf(qe({},d),{[jb]:Kb,[mb]:na}));return Bf(qe({},na),{data:{x:na.x-m,y:na.y-L}})})}}},HB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:m,y:L,placement:ha,rects:na,middlewareData:ua}=d,{offset:Ha=0,mainAxis:Ua=!0,crossAxis:$a=!0}=a;var jb={x:m,y:L};d=ol(ha);const mb="x"===d?"y":"x";let Kb=jb[d];jb=jb[mb];var Vb="function"==typeof Ha?Ha(Bf(qe({},na),{placement:ha})):
Ha;Vb="number"==typeof Vb?{mainAxis:Vb,crossAxis:0}:qe({mainAxis:0,crossAxis:0},Vb);if(Ua){var Ob="y"===d?"height":"width",jc=na.reference[d]-na.floating[Ob]+Vb.mainAxis;Ob=na.reference[d]+na.reference[Ob]-Vb.mainAxis;Kb<jc?Kb=jc:Kb>Ob&&(Kb=Ob)}if($a){var xc,bc,pc,lc;const Rc="y"===d?"width":"height";jc=["top","left"].includes(aj(ha));Ob=na.reference[mb]-na.floating[Rc]+(jc&&null!=(xc=null==(bc=ua.offset)?void 0:bc[mb])?xc:0)+(jc?0:Vb.crossAxis);xc=na.reference[mb]+na.reference[Rc]+(jc?0:null!=(pc=
null==(lc=ua.offset)?void 0:lc[mb])?pc:0)-(jc?Vb.crossAxis:0);jb<Ob?jb=Ob:jb>xc&&(jb=xc)}return{[d]:Kb,[mb]:jb}}}},pG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return wi(this,null,function*(){const {placement:m,rects:L,platform:ha,elements:na}=d;var ua=a,{apply:Ha}=ua;ua=ag(ua,["apply"]);ua=yield Sk(d,ua);var Ua=aj(m),$a=m.split("-")[1],jb,mb;"top"===Ua||"bottom"===Ua?(jb=Ua,mb=$a===((yield null==ha.isRTL?void 0:ha.isRTL(na.floating))?"start":"end")?"left":"right"):(mb=Ua,
jb="end"===$a?"top":"bottom");Ua=Pq(ua.left,0);$a=Pq(ua.right,0);const Kb=Pq(ua.top,0),Vb=Pq(ua.bottom,0);mb={availableHeight:L.floating.height-(["left","right"].includes(m)?2*(0!==Kb||0!==Vb?Kb+Vb:Pq(ua.top,ua.bottom)):ua[jb]),availableWidth:L.floating.width-(["top","bottom"].includes(m)?2*(0!==Ua||0!==$a?Ua+$a:Pq(ua.left,ua.right)):ua[mb])};jb=yield ha.getDimensions(na.floating);null==Ha||Ha(qe(qe({},d),mb));Ha=yield ha.getDimensions(na.floating);return jb.width!==Ha.width||jb.height!==Ha.height?
{reset:{rects:!0}}:{}})}}},IB=Math.min,Pu=Math.max,hw=Math.round,qG={getClippingRect:function(a){let {element:d,boundary:m,rootBoundary:L,strategy:ha}=a;a=[...("clippingAncestors"===m?yg(d):[].concat(m)),L];a=a.reduce((na,ua)=>{ua=Ch(d,ua,ha);return na.top=Pu(ua.top,na.top),na.right=IB(ua.right,na.right),na.bottom=IB(ua.bottom,na.bottom),na.left=Pu(ua.left,na.left),na},Ch(d,a[0],ha));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,
offsetParent:m,strategy:L}=a;var ha=rc(m);const na=xd(m);if(m===na)return d;a={scrollLeft:0,scrollTop:0};var ua=0,Ha=0;(ha||!ha&&"fixed"!==L)&&(("body"!==Yb(m)||mc(na))&&(a=je(m)),rc(m))&&(ha=fd(m,!0),ua=ha.x+m.clientLeft,Ha=ha.y+m.clientTop);return Bf(qe({},d),{x:d.x-a.scrollLeft+ua,y:d.y-a.scrollTop+Ha})},isElement:Tb,getDimensions:Vf,getOffsetParent:Kf,getDocumentElement:xd,getElementRects:a=>{let {reference:d,floating:m,strategy:L}=a;a=Kf(m);var ha=rc(a);const na=xd(a);var ua;if(ua=ha)ua=fd(a),
ua=hw(ua.width)!==a.offsetWidth||hw(ua.height)!==a.offsetHeight;ua=fd(d,ua,"fixed"===L);let Ha={scrollLeft:0,scrollTop:0};var Ua=0,$a=0;if(ha||!ha&&"fixed"!==L)(("body"!==Yb(a)||mc(na))&&(Ha=je(a)),rc(a))?(ha=fd(a,!0),Ua=ha.x+a.clientLeft,$a=ha.y+a.clientTop):na&&(Ua=Qe(na));return{reference:{x:ua.left+Ha.scrollLeft-Ua,y:ua.top+Ha.scrollTop-$a,width:ua.width,height:ua.height},floating:Bf(qe({},Vf(m)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Ac(a).direction},rG=
(a,d,m)=>mG(a,d,qe({platform:qG},m)),Fo=Jf(ba(22),1),JB=ba(22),sG=Jf(ba(31),1),by="undefined"!==typeof document?JB.useLayoutEffect:JB.useEffect,KB=a=>{const {element:d,padding:m}=a;return{name:"arrow",options:a,fn(L){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return BB({element:d.current,padding:m}).fn(L)}else if(d)return BB({element:d,padding:m}).fn(L);return{}}}},cy=ba(22),tG=(0,cy.forwardRef)((a,d)=>{const {children:m,width:L=10,height:ha=5}=a,na=ag(a,["children",
"width","height"]);return(0,cy.createElement)(Vk.svg,nf({},na,{ref:d,width:L,height:ha,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?m:(0,cy.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),uG=ba(22),[dy,Mt]=oj("Popper"),[vG,LB]=dy("Popper"),ey=(0,Xl.forwardRef)((a,d)=>{const {__scopePopper:m,virtualRef:L}=a;a=ag(a,["__scopePopper","virtualRef"]);const ha=LB("PopperAnchor",m),na=(0,Xl.useRef)(null);d=Uh(d,na);(0,Xl.useEffect)(()=>{ha.onAnchorChange((null===L||void 0===L?void 0:
L.current)||na.current)});return L?null:(0,Xl.createElement)(Vk.div,nf({},a,{ref:d}))}),[wG,xG]=dy("PopperContent"),[yG,zG]=dy("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),fy=(0,Xl.forwardRef)((a,d)=>{var m,L,ha,na,ua,Ha,Ua,$a;const {__scopePopper:jb,side:mb="bottom",sideOffset:Kb=0,align:Vb="center",alignOffset:Ob=0,arrowPadding:jc=0,collisionBoundary:xc=[],collisionPadding:bc=0,sticky:pc="partial",hideWhenDetached:lc=!1,avoidCollisions:Rc=!0}=a;a=ag(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Tc=LB("PopperContent",jb),[Dd,Ud]=(0,Xl.useState)(null);d=Uh(d,Mk=>Ud(Mk));const [kf,re]=(0,Xl.useState)(null);var Ue=xi(kf),Tf=null!==(m=null===Ue||void 0===Ue?void 0:Ue.width)&&void 0!==m?m:0;m=null!==(L=null===Ue||void 0===Ue?void 0:Ue.height)&&void 0!==L?L:0;L=mb+("center"!==Vb?"-"+Vb:"");Ue="number"===typeof bc?bc:qe({top:0,right:0,bottom:0,left:0},bc);const gf=Array.isArray(xc)?xc:[xc],lf=0<gf.length;Ue={padding:Ue,boundary:gf.filter(Kg),altBoundary:lf};const {reference:Yd,floating:qd,
strategy:Zd,x:nd,y:Ld,placement:$e,middlewareData:Df,update:kg}=Dg({strategy:"fixed",placement:L,whileElementsMounted:zg,middleware:[FB({mainAxis:Kb+m,alignmentAxis:Ob}),Rc?GB(qe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?HB():void 0},Ue)):void 0,kf?KB({element:kf,padding:jc}):void 0,Rc?DB(qe({},Ue)):void 0,BG({arrowWidth:Tf,arrowHeight:m}),lc?EB({strategy:"referenceHidden"}):void 0].filter(fk)});Fm(()=>{Yd(Tc.anchor)},[Yd,Tc.anchor]);const Uf=null!==nd&&null!==Ld,[wg,uh]=bj($e);Tf=null===(ha=
Df.arrow)||void 0===ha?void 0:ha.x;ha=null===(na=Df.arrow)||void 0===na?void 0:na.y;na=0!==(null===(ua=Df.arrow)||void 0===ua?void 0:ua.centerOffset);const [eg,oh]=(0,Xl.useState)();Fm(()=>{Dd&&oh(window.getComputedStyle(Dd).zIndex)},[Dd]);const {hasParent:Sh,positionUpdateFns:wj}=zG("PopperContent",jb),vk=!Sh;(0,Xl.useLayoutEffect)(()=>{if(!vk)return wj.add(kg),()=>{wj.delete(kg)}},[vk,wj,kg]);(0,Xl.useLayoutEffect)(()=>{vk&&Uf&&Array.from(wj).reverse().forEach(Mk=>requestAnimationFrame(Mk))},[vk,
Uf,wj]);ua=Bf(qe({"data-side":wg,"data-align":uh},a),{ref:d,style:Bf(qe({},a.style),{animation:Uf?void 0:"none",opacity:null!==(Ha=Df.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Xl.createElement)("div",{ref:qd,"data-radix-popper-content-wrapper":"",style:{position:Zd,left:0,top:0,transform:Uf?`translate3d(${Math.round(nd)}px, ${Math.round(Ld)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:eg,["--radix-popper-transform-origin"]:[null===(Ua=Df.transformOrigin)||void 0===
Ua?void 0:Ua.x,null===($a=Df.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")}},(0,Xl.createElement)(wG,{scope:jb,placedSide:wg,onArrowChange:re,arrowX:Tf,arrowY:ha,shouldHideArrow:na},vk?(0,Xl.createElement)(yG,{scope:jb,hasParent:!0,positionUpdateFns:wj},(0,Xl.createElement)(Vk.div,ua)):(0,Xl.createElement)(Vk.div,ua)))}),AG={top:"bottom",right:"left",bottom:"top",left:"right"},MB=(0,Xl.forwardRef)(function(a,d){var {__scopePopper:m}=a;a=ag(a,["__scopePopper"]);m=xG("PopperArrow",m);return(0,Xl.createElement)("span",
{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[AG[m.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,Xl.createElement)(tG,nf({},a,{ref:d,style:Bf(qe({},a.style),{display:"block"})})))}),BG=a=>
({name:"transformOrigin",options:a,fn(d){var m,L,ha,na,ua;const {placement:Ha,rects:Ua,middlewareData:$a}=d,jb=(d=0!==(null===(m=$a.arrow)||void 0===m?void 0:m.centerOffset))?0:a.arrowWidth;m=d?0:a.arrowHeight;const [mb,Kb]=bj(Ha),Vb={start:"0%",center:"50%",end:"100%"}[Kb],Ob=(null!==(L=null===(ha=$a.arrow)||void 0===ha?void 0:ha.x)&&void 0!==L?L:0)+jb/2;L=(null!==(na=null===(ua=$a.arrow)||void 0===ua?void 0:ua.y)&&void 0!==na?na:0)+m/2;ua=na="";"bottom"===mb?(na=d?Vb:`${Ob}px`,ua=`${-m}px`):"top"===
mb?(na=d?Vb:`${Ob}px`,ua=`${Ua.floating.height+m}px`):"right"===mb?(na=`${-m}px`,ua=d?Vb:`${L}px`):"left"===mb&&(na=`${Ua.floating.width+m}px`,ua=d?Vb:`${L}px`);return{data:{x:na,y:ua}}}}),gy=a=>{const {__scopePopper:d,children:m}=a,[L,ha]=(0,Xl.useState)(null);return(0,Xl.createElement)(vG,{scope:d,anchor:L,onAnchorChange:ha},m)},NB=ba(22),CG=Jf(ba(31)),DG=(0,NB.forwardRef)((a,d)=>{var m;const {container:L=null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:
m.body}=a;a=ag(a,["container"]);return L?CG.default.createPortal((0,NB.createElement)(Vk.div,nf({},a,{ref:d})),L):null}),Qq=ba(22),EG=ba(31),Qu=a=>{const {present:d,children:m}=a;a=ih(d);const L="function"===typeof m?m({present:a.isPresent}):Qq.Children.only(m),ha=Uh(a.ref,L.ref);return"function"===typeof m||a.isPresent?(0,Qq.cloneElement)(L,{ref:ha}):null};Qu.displayName="Presence";var iw=ba(22),OB=ba(22),FG=(0,OB.forwardRef)((a,d)=>(0,OB.createElement)(Vk.span,nf({},a,{ref:d,style:qe({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[jw]=oj("Tooltip",[Mt]),kw=Mt(),[GG,hy]=jw("TooltipProvider"),[HG,Ru]=jw("Tooltip"),IG=(0,Oh.forwardRef)((a,d)=>{var {__scopeTooltip:m}=a;const L=ag(a,["__scopeTooltip"]),ha=Ru("TooltipTrigger",m),na=hy("TooltipTrigger",m);m=kw(m);const ua=(0,Oh.useRef)(null);d=Uh(d,ua,ha.onTriggerChange);const Ha=(0,Oh.useRef)(!1),Ua=(0,Oh.useRef)(!1),$a=(0,Oh.useCallback)(()=>
Ha.current=!1,[]);(0,Oh.useEffect)(()=>()=>document.removeEventListener("pointerup",$a),[$a]);return(0,Oh.createElement)(ey,nf({asChild:!0},m),(0,Oh.createElement)(Vk.button,nf({"aria-describedby":ha.open?ha.contentId:void 0,"data-state":ha.stateAttribute},L,{ref:d,onPointerMove:vg(a.onPointerMove,jb=>{"touch"===jb.pointerType||Ua.current||na.isPointerInTransitRef.current||(ha.onTriggerEnter(),Ua.current=!0)}),onPointerLeave:vg(a.onPointerLeave,()=>{ha.onTriggerLeave();Ua.current=!1}),onPointerDown:vg(a.onPointerDown,
()=>{Ha.current=!0;document.addEventListener("pointerup",$a,{once:!0})}),onFocus:vg(a.onFocus,()=>{if(!Ha.current)ha.onOpen()}),onBlur:vg(a.onBlur,ha.onClose),onClick:vg(a.onClick,ha.onClose)})))}),[JG,KG]=jw("TooltipPortal",{forceMount:void 0}),LG=(0,Oh.forwardRef)((a,d)=>{var m=KG("TooltipContent",a.__scopeTooltip);const {forceMount:L=m.forceMount,side:ha="top"}=a;m=ag(a,["forceMount","side"]);a=Ru("TooltipContent",a.__scopeTooltip);return(0,Oh.createElement)(Qu,{present:L||a.open},a.disableHoverableContent?
(0,Oh.createElement)(PB,nf({side:ha},m,{ref:d})):(0,Oh.createElement)(MG,nf({side:ha},m,{ref:d})))}),MG=(0,Oh.forwardRef)((a,d)=>{const m=Ru("TooltipContent",a.__scopeTooltip),L=hy("TooltipContent",a.__scopeTooltip),ha=(0,Oh.useRef)(null);d=Uh(d,ha);const [na,ua]=(0,Oh.useState)(null),{trigger:Ha,onClose:Ua}=m,$a=ha.current,{onPointerInTransitChange:jb}=L,mb=(0,Oh.useCallback)(()=>{ua(null);jb(!1)},[jb]),Kb=(0,Oh.useCallback)((Vb,Ob)=>{const jc=sm({x:Vb.clientX,y:Vb.clientY},Vb.currentTarget.getBoundingClientRect()),
xc="right"===jc||"bottom"===jc?-5:5;Vb="right"===jc||"left"===jc?{x:Vb.clientX+xc,y:Vb.clientY}:{x:Vb.clientX,y:Vb.clientY+xc};Ob=Ob.getBoundingClientRect();const {top:bc,right:pc,bottom:lc,left:Rc}=Ob;Ob=Xh([Vb,{x:Rc,y:bc},{x:pc,y:bc},{x:pc,y:lc},{x:Rc,y:lc}]);ua(Ob);jb(!0)},[jb]);(0,Oh.useEffect)(()=>()=>mb(),[mb]);(0,Oh.useEffect)(()=>{if(Ha&&$a){const Vb=jc=>Kb(jc,$a),Ob=jc=>Kb(jc,Ha);Ha.addEventListener("pointerleave",Vb);$a.addEventListener("pointerleave",Ob);return()=>{Ha.removeEventListener("pointerleave",
Vb);$a.removeEventListener("pointerleave",Ob)}}},[Ha,$a,Kb,mb]);(0,Oh.useEffect)(()=>{if(na){const Vb=Ob=>{var jc=Ob.target;Ob={x:Ob.clientX,y:Ob.clientY};jc=(null===Ha||void 0===Ha?void 0:Ha.contains(jc))||(null===$a||void 0===$a?void 0:$a.contains(jc));const {x:xc,y:bc}=Ob;Ob=!1;for(let pc=0,lc=na.length-1;pc<na.length;lc=pc++){const Rc=na[pc].x,Tc=na[pc].y,Dd=na[lc].x,Ud=na[lc].y;Tc>bc!==Ud>bc&&xc<(Dd-Rc)*(bc-Tc)/(Ud-Tc)+Rc&&(Ob=!Ob)}Ob=!Ob;jc?mb():Ob&&(mb(),Ua())};document.addEventListener("pointermove",
Vb);return()=>document.removeEventListener("pointermove",Vb)}},[Ha,$a,na,Ua,mb]);return(0,Oh.createElement)(PB,nf({},a,{ref:d}))}),[NG,OG]=jw("Tooltip",{isInside:!1}),PB=(0,Oh.forwardRef)((a,d)=>{const {__scopeTooltip:m,children:L,"aria-label":ha,onEscapeKeyDown:na,onPointerDownOutside:ua}=a;a=ag(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ha=Ru("TooltipContent",m),Ua=kw(m),{onClose:$a}=Ha;(0,Oh.useEffect)(()=>{document.addEventListener("tooltip.open",
$a);return()=>document.removeEventListener("tooltip.open",$a)},[$a]);(0,Oh.useEffect)(()=>{if(Ha.trigger){const jb=mb=>{mb=mb.target;null!==mb&&void 0!==mb&&mb.contains(Ha.trigger)&&$a()};window.addEventListener("scroll",jb,{capture:!0});return()=>window.removeEventListener("scroll",jb,{capture:!0})}},[Ha.trigger,$a]);return(0,Oh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:na,onPointerDownOutside:ua,onFocusOutside:jb=>jb.preventDefault(),onDismiss:$a},(0,Oh.createElement)(fy,
nf({"data-state":Ha.stateAttribute},Ua,a,{ref:d,style:Bf(qe({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Oh.createElement)(yB,null,L),(0,Oh.createElement)(NG,{scope:m,isInside:!0},(0,Oh.createElement)(FG,{id:Ha.contentId,role:"tooltip"},ha||L))))}),PG=(0,Oh.forwardRef)((a,d)=>{const {__scopeTooltip:m}=a;a=ag(a,["__scopeTooltip"]);const L=kw(m);return OG("TooltipArrow",m).isInside?null:(0,Oh.createElement)(MB,nf({},L,a,{ref:d}))}),QG=a=>{const {__scopeTooltip:d,
delayDuration:m=700,skipDelayDuration:L=300,disableHoverableContent:ha=!1,children:na}=a,[ua,Ha]=(0,Oh.useState)(!0),Ua=(0,Oh.useRef)(!1),$a=(0,Oh.useRef)(0);(0,Oh.useEffect)(()=>{const jb=$a.current;return()=>window.clearTimeout(jb)},[]);return(0,Oh.createElement)(GG,{scope:d,isOpenDelayed:ua,delayDuration:m,onOpen:(0,Oh.useCallback)(()=>{window.clearTimeout($a.current);Ha(!1)},[]),onClose:(0,Oh.useCallback)(()=>{window.clearTimeout($a.current);$a.current=window.setTimeout(()=>Ha(!0),L)},[L]),isPointerInTransitRef:Ua,
onPointerInTransitChange:(0,Oh.useCallback)(jb=>{Ua.current=jb},[]),disableHoverableContent:ha},na)},RG=a=>{const {__scopeTooltip:d,children:m,open:L,defaultOpen:ha=!1,onOpenChange:na,disableHoverableContent:ua,delayDuration:Ha}=a,Ua=hy("Tooltip",a.__scopeTooltip);a=kw(d);const [$a,jb]=(0,Oh.useState)(null),mb=Ai(),Kb=(0,Oh.useRef)(0),Vb=null!==ua&&void 0!==ua?ua:Ua.disableHoverableContent,Ob=null!==Ha&&void 0!==Ha?Ha:Ua.delayDuration,jc=(0,Oh.useRef)(!1),[xc=!1,bc]=oi({prop:L,defaultProp:ha,onChange:Dd=>
{if(Dd)Ua.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ua.onClose();null===na||void 0===na||na(Dd)}}),pc=(0,Oh.useMemo)(()=>xc?jc.current?"delayed-open":"instant-open":"closed",[xc]),lc=(0,Oh.useCallback)(()=>{window.clearTimeout(Kb.current);jc.current=!1;bc(!0)},[bc]),Rc=(0,Oh.useCallback)(()=>{window.clearTimeout(Kb.current);bc(!1)},[bc]),Tc=(0,Oh.useCallback)(()=>{window.clearTimeout(Kb.current);Kb.current=window.setTimeout(()=>{jc.current=!0;bc(!0)},Ob)},[Ob,bc]);(0,Oh.useEffect)(()=>
()=>window.clearTimeout(Kb.current),[]);return(0,Oh.createElement)(gy,a,(0,Oh.createElement)(HG,{scope:d,contentId:mb,open:xc,stateAttribute:pc,trigger:$a,onTriggerChange:jb,onTriggerEnter:(0,Oh.useCallback)(()=>{Ua.isOpenDelayed?Tc():lc()},[Ua.isOpenDelayed,Tc,lc]),onTriggerLeave:(0,Oh.useCallback)(()=>{Vb?Rc():window.clearTimeout(Kb.current)},[Rc,Vb]),onOpen:lc,onClose:Rc,disableHoverableContent:Vb},m))},SG=IG,TG=a=>{const {__scopeTooltip:d,forceMount:m,children:L,container:ha}=a;a=Ru("TooltipPortal",
d);return(0,Oh.createElement)(JG,{scope:d,forceMount:m},(0,Oh.createElement)(Qu,{present:m||a.open},(0,Oh.createElement)(DG,{asChild:!0,container:ha},L)))},UG=LG,VG=PG,Gr=ba(614),QB=ba(614),iy=ba(614),WG=({style:a,icon:d,onClick:m})=>(0,iy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:m,children:(0,iy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,iy.jsx)(Wh,{name:d})})}),RB=ba(22),SB=(0,RB.forwardRef)((a,d)=>{const {pressed:m,
defaultPressed:L=!1,onPressedChange:ha}=a,na=ag(a,["pressed","defaultPressed","onPressedChange"]),[ua=!1,Ha]=oi({prop:m,onChange:ha,defaultProp:L});return(0,RB.createElement)(Vk.button,nf({type:"button","aria-pressed":ua,"data-state":ua?"on":"off","data-disabled":a.disabled?"":void 0},na,{ref:d,onClick:vg(a.onClick,()=>{a.disabled||Ha(!ua)})}))}),XG=SB,jy=ba(614),gp=ba(22),xh=ba(22),mq=Jf(ba(22)),TB=ba(22),YG=(0,TB.createContext)(void 0),ZG=ba(22),ky=0,Hr=ba(22),UB={bubbles:!1,cancelable:!0},VB=(0,Hr.forwardRef)((a,
d)=>{const {loop:m=!1,trapped:L=!1,onMountAutoFocus:ha,onUnmountAutoFocus:na}=a;a=ag(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ua,Ha]=(0,Hr.useState)(null),Ua=ij(ha),$a=ij(na),jb=(0,Hr.useRef)(null);d=Uh(d,Vb=>Ha(Vb));const mb=(0,Hr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Hr.useEffect)(()=>{if(L){let Vb=function(jc){!mb.paused&&ua&&(jc=jc.target,ua.contains(jc)?jb.current=jc:xk(jb.current,{select:!0}))},Ob=function(jc){!mb.paused&&
ua&&(ua.contains(jc.relatedTarget)||xk(jb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Ob)}}},[L,ua,mb.paused]);(0,Hr.useEffect)(()=>{if(ua){WB.add(mb);const Vb=document.activeElement;if(!ua.contains(Vb)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",UB);ua.addEventListener("focusScope.autoFocusOnMount",Ua);ua.dispatchEvent(Ob);Ob.defaultPrevented||
(wk(rp(Mj(ua)),{select:!0}),document.activeElement===Vb&&xk(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",UB);ua.addEventListener("focusScope.autoFocusOnUnmount",$a);ua.dispatchEvent(Ob);Ob.defaultPrevented||xk(null!==Vb&&void 0!==Vb?Vb:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",$a);WB.remove(mb)},0)}}},[ua,Ua,$a,mb]);const Kb=(0,Hr.useCallback)(Vb=>{if((m||L)&&
!mb.paused){var Ob=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Ob){const xc=Vb.currentTarget;var jc=xc;const bc=Mj(jc),pc=gk(bc,jc);jc=gk(bc.reverse(),jc);const [lc,Rc]=[pc,jc];lc&&Rc?Vb.shiftKey||Ob!==Rc?Vb.shiftKey&&Ob===lc&&(Vb.preventDefault(),m&&xk(Rc,{select:!0})):(Vb.preventDefault(),m&&xk(lc,{select:!0})):Ob===xc&&Vb.preventDefault()}}},[m,L,mb.paused]);return(0,Hr.createElement)(Vk.div,nf({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),WB=function(){let a=[];
return{add(d){const m=a[0];d===m||null!==m&&void 0!==m&&m.pause();a=Nk(a,d);a.unshift(d)},remove(d){var m;a=Nk(a,d);null===(m=a[0])||void 0===m||m.resume()}}}(),Yl=ba(22),$G={bubbles:!1,cancelable:!0},[ly,XB,aH]=gl("RovingFocusGroup"),[bH,lw]=oj("RovingFocusGroup",[aH]),[cH,dH]=bH("RovingFocusGroup"),YB=(0,Yl.forwardRef)((a,d)=>(0,Yl.createElement)(ly.Provider,{scope:a.__scopeRovingFocusGroup},(0,Yl.createElement)(ly.Slot,{scope:a.__scopeRovingFocusGroup},(0,Yl.createElement)(eH,nf({},a,{ref:d}))))),
eH=(0,Yl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:m,orientation:L,loop:ha=!1,dir:na,currentTabStopId:ua,defaultCurrentTabStopId:Ha,onCurrentTabStopIdChange:Ua,onEntryFocus:$a}=a,jb=ag(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),mb=(0,Yl.useRef)(null);d=Uh(d,mb);const Kb=Wn(na),[Vb=null,Ob]=oi({prop:ua,defaultProp:Ha,onChange:Ua}),[jc,xc]=(0,Yl.useState)(!1),bc=ij($a),pc=XB(m),lc=(0,Yl.useRef)(!1),
[Rc,Tc]=(0,Yl.useState)(0);(0,Yl.useEffect)(()=>{const Dd=mb.current;if(Dd)return Dd.addEventListener("rovingFocusGroup.onEntryFocus",bc),()=>Dd.removeEventListener("rovingFocusGroup.onEntryFocus",bc)},[bc]);return(0,Yl.createElement)(cH,{scope:m,orientation:L,dir:Kb,loop:ha,currentTabStopId:Vb,onItemFocus:(0,Yl.useCallback)(Dd=>Ob(Dd),[Ob]),onItemShiftTab:(0,Yl.useCallback)(()=>xc(!0),[]),onFocusableItemAdd:(0,Yl.useCallback)(()=>Tc(Dd=>Dd+1),[]),onFocusableItemRemove:(0,Yl.useCallback)(()=>Tc(Dd=>
Dd-1),[])},(0,Yl.createElement)(Vk.div,nf({tabIndex:jc||0===Rc?-1:0,"data-orientation":L},jb,{ref:d,style:qe({outline:"none"},a.style),onMouseDown:vg(a.onMouseDown,()=>{lc.current=!0}),onFocus:vg(a.onFocus,Dd=>{var Ud=!lc.current;if(Dd.target===Dd.currentTarget&&Ud&&!jc&&(Ud=new CustomEvent("rovingFocusGroup.onEntryFocus",$G),Dd.currentTarget.dispatchEvent(Ud),!Ud.defaultPrevented)){Dd=pc().filter(re=>re.focusable);Ud=Dd.find(re=>re.active);const kf=Dd.find(re=>re.id===Vb);Dd=[Ud,kf,...Dd].filter(Boolean).map(re=>
re.ref.current);zn(Dd)}lc.current=!1}),onBlur:vg(a.onBlur,()=>xc(!1))})))}),ZB=(0,Yl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:m,focusable:L=!0,active:ha=!1}=a,na=ag(a,["__scopeRovingFocusGroup","focusable","active"]),ua=Ai(),Ha=dH("RovingFocusGroupItem",m),Ua=Ha.currentTabStopId===ua,$a=XB(m),{onFocusableItemAdd:jb,onFocusableItemRemove:mb}=Ha;(0,Yl.useEffect)(()=>{if(L)return jb(),()=>mb()},[L,jb,mb]);return(0,Yl.createElement)(ly.ItemSlot,{scope:m,id:ua,focusable:L,active:ha},(0,Yl.createElement)(Vk.span,
nf({tabIndex:Ua?0:-1,"data-orientation":Ha.orientation},na,{ref:d,onMouseDown:vg(a.onMouseDown,Kb=>{if(L)Ha.onItemFocus(ua);else Kb.preventDefault()}),onFocus:vg(a.onFocus,()=>Ha.onItemFocus(ua)),onKeyDown:vg(a.onKeyDown,Kb=>{if("Tab"===Kb.key&&Kb.shiftKey)Ha.onItemShiftTab();else if(Kb.target===Kb.currentTarget){var Vb=lo(Kb,Ha.orientation,Ha.dir);if(void 0!==Vb){Kb.preventDefault();let Ob=$a().filter(jc=>jc.focusable).map(jc=>jc.ref.current);if("last"===Vb)Ob.reverse();else if("prev"===Vb||"next"===
Vb)"prev"===Vb&&Ob.reverse(),Kb=Ob.indexOf(Kb.currentTarget),Ob=Ha.loop?Eh(Ob,Kb+1):Ob.slice(Kb+1);setTimeout(()=>zn(Ob))}}})})))}),fH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},gH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Nt=new WeakMap,mw=new WeakMap,nw={},my=0,ny=function(a,d,m){void 0===d&&(d=gH(a));void 0===m&&(m="data-aria-hidden");var L=Array.isArray(a)?
a:[a];nw[m]||(nw[m]=new WeakMap);var ha=nw[m],na=[],ua=new Set,Ha=function($a){$a&&!ua.has($a)&&(ua.add($a),Ha($a.parentNode))};L.forEach(Ha);var Ua=function($a){!$a||0<=L.indexOf($a)||Array.prototype.forEach.call($a.children,function(jb){if(ua.has(jb))Ua(jb);else{var mb=jb.getAttribute("aria-hidden");mb=null!==mb&&"false"!==mb;var Kb=(Nt.get(jb)||0)+1,Vb=(ha.get(jb)||0)+1;Nt.set(jb,Kb);ha.set(jb,Vb);na.push(jb);1===Kb&&mb&&mw.set(jb,!0);1===Vb&&jb.setAttribute(m,"true");mb||jb.setAttribute("aria-hidden",
"true")}})};Ua(d);ua.clear();my++;return function(){na.forEach(function($a){var jb=Nt.get($a)-1,mb=ha.get($a)-1;Nt.set($a,jb);ha.set($a,mb);jb||(mw.has($a)||$a.removeAttribute("aria-hidden"),mw.delete($a));mb||$a.removeAttribute(m)});my--;my||(Nt=new WeakMap,Nt=new WeakMap,mw=new WeakMap,nw={})}},hH=Jf(gs(),1),{__assign:Ir,__rest:$B,__spreadArray:iH}=hH.default,hp=Jf(ba(22)),Rq=Jf(ba(22)),jH=ba(22),kH=Jf(ba(22)),oy=function(a){var d=a.sideCar;a=$B(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return kH.createElement(d,Ir({},a))};oy.isSideCarExport=!0;var Zm=function(a){void 0===a&&(a={});var d=rm(null);d.options=Ir({async:!0,ssr:!1},a);return d}(),Kn=function(){},mt=Rq.forwardRef(function(a,d){var m=Rq.useRef(null),L=Rq.useState({onScrollCapture:Kn,onWheelCapture:Kn,onTouchMoveCapture:Kn}),ha=L[0];L=L[1];var na=a.forwardProps,ua=a.children,Ha=a.className,Ua=a.removeScrollBar,$a=a.enabled,jb=a.shards,mb=a.sideCar,Kb=a.noIsolation,
Vb=a.inert,Ob=a.allowPinchZoom,jc=a.as;jc=void 0===jc?"div":jc;a=$B(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=Uj([m,d]);ha=Ir(Ir({},a),ha);return Rq.createElement(Rq.Fragment,null,$a&&Rq.createElement(mb,{sideCar:Zm,removeScrollBar:Ua,shards:jb,noIsolation:Kb,inert:Vb,setCallbacks:L,allowPinchZoom:!!Ob,lockRef:m}),na?Rq.cloneElement(Rq.Children.only(ua),Ir(Ir({},ha),{ref:d})):Rq.createElement(jc,Ir({},ha,{className:Ha,
ref:d}),ua))});mt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var km=Jf(ba(22)),yz=Jf(ba(22)),zz=Jf(ba(22)),WD=function(){var a=0,d=null;return{add:function(m){if(0==a){if(document){var L=document.createElement("style");L.type="text/css";var ha="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ha&&L.setAttribute("nonce",ha)}else L=null;if(d=L)L=d,L.styleSheet?L.styleSheet.cssText=m:L.appendChild(document.createTextNode(m)),
m=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},nt=function(){var a=WD();return function(d,m){zz.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&m])}},Ov=function(){var a=nt();return function(d){a(d.styles,d.dynamic);return null}},lH={left:0,top:0,right:0,gap:0},aC=Ov(),bC=function(a,d,m,L){var ha=a.left,na=a.top,ua=a.right;a=a.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(L,";\n   padding-right: ").concat(a,"px ").concat(L,";\n  }\n  body {\n    overflow: hidden ").concat(L,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(L,";"),"margin"===m&&"\n    padding-left: ".concat(ha,"px;\n    padding-top: ").concat(na,"px;\n    padding-right: ").concat(ua,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(L,";\n    "),"padding"===m&&"padding-right: ".concat(a,"px ").concat(L,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(L,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(L,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(L,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(L,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},cC=function(a){var d=a.noRelative,m=a.noImportant;a=a.gapMode;var L=void 0===a?"margin":a;a=yz.useMemo(function(){var ha=L;void 0===ha&&(ha="margin");if("undefined"===typeof window)ha=lH;else{var na=window.getComputedStyle(document.body),ua=na["padding"===ha?"paddingTop":"marginTop"],Ha=na["padding"===ha?"paddingRight":"marginRight"];ha=[parseInt(na["padding"===ha?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(ua||"",10)||0,parseInt(Ha||"",10)||0];ha={left:ha[0],top:ha[1],
right:ha[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+ha[2]-ha[0])}}return ha},[L]);return yz.createElement(aC,{styles:bC(a,!d,L,m?"":"!important")})},ow=!1;if("undefined"!==typeof window)try{var Pv=Object.defineProperty({},"passive",{get:function(){return ow=!0}});window.addEventListener("test",Pv,Pv);window.removeEventListener("test",Pv,Pv)}catch(a){ow=!1}var Nq=ow?{passive:!1}:!1,sx=function(a,d){var m=window.getComputedStyle(a);return"hidden"!==m[d]&&!(m.overflowY===
m.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===m[d])},rx=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(dC(a,d)){var m=eC(a,d);if(m[1]>m[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},dC=function(a,d){return"v"===a?sx(d,"overflowY"):sx(d,"overflowX")},eC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},pw=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,
a.changedTouches[0].clientY]:[0,0]},py=function(a){return a&&"current"in a?a.current:a},qy=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Hk=0,wn=[];Zm.useMedium(function(a){var d=km.useRef([]),m=km.useRef([0,0]),L=km.useRef(),ha=km.useState(Hk++)[0],na=km.useState(function(){return Ov()})[0],ua=km.useRef(a);km.useEffect(function(){ua.current=a},[a]);km.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(ha));
var Ob=iH([a.lockRef.current],(a.shards||[]).map(py),!0).filter(Boolean);Ob.forEach(function(jc){return jc.classList.add("allow-interactivity-".concat(ha))});return function(){document.body.classList.remove("block-interactivity-".concat(ha));Ob.forEach(function(jc){return jc.classList.remove("allow-interactivity-".concat(ha))})}}},[a.inert,a.lockRef.current,a.shards]);var Ha=km.useCallback(function(Ob,jc){if("touches"in Ob&&2===Ob.touches.length)return!ua.current.allowPinchZoom;var xc=pw(Ob),bc=m.current,
pc="deltaX"in Ob?Ob.deltaX:bc[0]-xc[0];bc="deltaY"in Ob?Ob.deltaY:bc[1]-xc[1];var lc=Ob.target,Rc=Math.abs(pc)>Math.abs(bc)?"h":"v";if("touches"in Ob&&"h"===Rc&&"range"===lc.type)return!1;var Tc=rx(Rc,lc);if(!Tc)return!0;Tc?xc=Rc:(xc="v"===Rc?"h":"v",Tc=rx(Rc,lc));if(!Tc)return!1;!L.current&&"changedTouches"in Ob&&(pc||bc)&&(L.current=xc);if(!xc)return!0;xc=L.current||xc;bc="h"===xc?pc:bc;pc=window.getComputedStyle(jc).direction;pc="h"===xc&&"rtl"===pc?-1:1;Rc=pc*bc;Ob=Ob.target;bc=jc.contains(Ob);
lc=!1;Rc=0<Rc;var Dd=Tc=0;do{var Ud=eC(xc,Ob),kf=Ud[0];Ud=Ud[1]-Ud[2]-pc*kf;(kf||Ud)&&dC(xc,Ob)&&(Tc+=Ud,Dd+=kf);Ob=Ob.parentNode}while(!bc&&Ob!==document.body||bc&&(jc.contains(Ob)||jc===Ob));Rc&&0===Tc?lc=!0:Rc||0!==Dd||(lc=!0);return lc},[]),Ua=km.useCallback(function(Ob){if(wn.length&&wn[wn.length-1]===na){var jc="deltaY"in Ob?[Ob.deltaX,Ob.deltaY]:pw(Ob),xc=d.current.filter(function(bc){var pc;if(pc=bc.name===Ob.type&&bc.target===Ob.target)bc=bc.delta,pc=bc[0]===jc[0]&&bc[1]===jc[1];return pc})[0];
xc&&xc.should?Ob.cancelable&&Ob.preventDefault():xc||(xc=(ua.current.shards||[]).map(py).filter(Boolean).filter(function(bc){return bc.contains(Ob.target)}),(0<xc.length?Ha(Ob,xc[0]):!ua.current.noIsolation)&&Ob.cancelable&&Ob.preventDefault())}},[]),$a=km.useCallback(function(Ob,jc,xc,bc){var pc={name:Ob,delta:jc,target:xc,should:bc};d.current.push(pc);setTimeout(function(){d.current=d.current.filter(function(lc){return lc!==pc})},1)},[]),jb=km.useCallback(function(Ob){m.current=pw(Ob);L.current=
void 0},[]),mb=km.useCallback(function(Ob){$a(Ob.type,[Ob.deltaX,Ob.deltaY],Ob.target,Ha(Ob,a.lockRef.current))},[]),Kb=km.useCallback(function(Ob){$a(Ob.type,pw(Ob),Ob.target,Ha(Ob,a.lockRef.current))},[]);km.useEffect(function(){wn.push(na);a.setCallbacks({onScrollCapture:mb,onWheelCapture:mb,onTouchMoveCapture:Kb});document.addEventListener("wheel",Ua,Nq);document.addEventListener("touchmove",Ua,Nq);document.addEventListener("touchstart",jb,Nq);return function(){wn=wn.filter(function(Ob){return Ob!==
na});document.removeEventListener("wheel",Ua,Nq);document.removeEventListener("touchmove",Ua,Nq);document.removeEventListener("touchstart",jb,Nq)}},[]);var Vb=a.removeScrollBar;return km.createElement(km.Fragment,null,a.inert?km.createElement(na,{styles:qy(ha)}):null,Vb?km.createElement(cC,{gapMode:"margin"}):null)});var Ik=hp.forwardRef(function(a,d){return hp.createElement(mt,Ir({},a,{ref:d,sideCar:oy}))});Ik.classNames=mt.classNames;var Sq=["Enter"," "],nm=["ArrowUp","PageDown","End"],Go=["ArrowDown",
"PageUp","Home",...nm];[...Sq];[...Sq];var [jj,fC,qw]=gl("Menu"),[nq,Ot]=oj("Menu",[qw,Mt,lw]),rw=Mt(),sw=lw(),[vj,Pt]=nq("Menu"),[ry,Su]=nq("Menu"),Ns=(0,xh.forwardRef)((a,d)=>{var {__scopeMenu:m}=a;a=ag(a,["__scopeMenu"]);m=rw(m);return(0,xh.createElement)(ey,nf({},m,a,{ref:d}))}),[,gC]=nq("MenuPortal",{forceMount:void 0}),[Os,hC]=nq("MenuContent"),Tu=(0,xh.forwardRef)((a,d)=>{var m=gC("MenuContent",a.__scopeMenu);({forceMount:m=m.forceMount}=a);const L=ag(a,["forceMount"]),ha=Pt("MenuContent",
a.__scopeMenu),na=Su("MenuContent",a.__scopeMenu);return(0,xh.createElement)(jj.Provider,{scope:a.__scopeMenu},(0,xh.createElement)(Qu,{present:m||ha.open},(0,xh.createElement)(jj.Slot,{scope:a.__scopeMenu},na.modal?(0,xh.createElement)(tw,nf({},L,{ref:d})):(0,xh.createElement)(sy,nf({},L,{ref:d})))))}),tw=(0,xh.forwardRef)((a,d)=>{const m=Pt("MenuContent",a.__scopeMenu),L=(0,xh.useRef)(null);d=Uh(d,L);(0,xh.useEffect)(()=>{const ha=L.current;if(ha)return ny(ha)},[]);return(0,xh.createElement)(Qt,
nf({},a,{ref:d,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:vg(a.onFocusOutside,ha=>ha.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),sy=(0,xh.forwardRef)((a,d)=>{const m=Pt("MenuContent",a.__scopeMenu);return(0,xh.createElement)(Qt,nf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),Qt=(0,xh.forwardRef)((a,d)=>{const {__scopeMenu:m,loop:L=!1,trapFocus:ha,
onOpenAutoFocus:na,onCloseAutoFocus:ua,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ua,onPointerDownOutside:$a,onFocusOutside:jb,onInteractOutside:mb,onDismiss:Kb,disableOutsideScroll:Vb}=a,Ob=ag(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),jc=Pt("MenuContent",m),xc=Su("MenuContent",m),bc=rw(m),pc=sw(m),lc=fC(m),[Rc,Tc]=(0,xh.useState)(null),
Dd=(0,xh.useRef)(null);d=Uh(d,Dd,jc.onContentChange);const Ud=(0,xh.useRef)(0),kf=(0,xh.useRef)(""),re=(0,xh.useRef)(0),Ue=(0,xh.useRef)(null),Tf=(0,xh.useRef)("right"),gf=(0,xh.useRef)(0),lf=Vb?Ik:xh.Fragment,Yd=Vb?{as:lq,allowPinchZoom:!0}:void 0,qd=nd=>{var Ld,$e;nd=kf.current+nd;const Df=lc().filter(eg=>!eg.disabled),kg=document.activeElement,Uf=null===(Ld=Df.find(eg=>eg.ref.current===kg))||void 0===Ld?void 0:Ld.textValue;Ld=Df.map(eg=>eg.textValue);const wg=Ij(Ld,nd,Uf),uh=null===($e=Df.find(eg=>
eg.textValue===wg))||void 0===$e?void 0:$e.ref.current;(function Sh(oh){kf.current=oh;window.clearTimeout(Ud.current);""!==oh&&(Ud.current=window.setTimeout(()=>Sh(""),1E3))})(nd);uh&&setTimeout(()=>uh.focus())};(0,xh.useEffect)(()=>()=>window.clearTimeout(Ud.current),[]);Ri();const Zd=(0,xh.useCallback)(nd=>{var Ld,$e,Df;if(Df=Tf.current===(null===(Ld=Ue.current)||void 0===Ld?void 0:Ld.side)){if(Ld=null===($e=Ue.current)||void 0===$e?void 0:$e.area){const {x:kg,y:Uf}={x:nd.clientX,y:nd.clientY};
nd=!1;for(let wg=0,uh=Ld.length-1;wg<Ld.length;uh=wg++){$e=Ld[wg].x;Df=Ld[wg].y;const eg=Ld[uh].x,oh=Ld[uh].y;Df>Uf!==oh>Uf&&kg<(eg-$e)*(Uf-Df)/(oh-Df)+$e&&(nd=!nd)}Ld=nd}else Ld=!1;Df=Ld}return Df},[]);return(0,xh.createElement)(Os,{scope:m,searchRef:kf,onItemEnter:(0,xh.useCallback)(nd=>{Zd(nd)&&nd.preventDefault()},[Zd]),onItemLeave:(0,xh.useCallback)(nd=>{var Ld;Zd(nd)||(null===(Ld=Dd.current)||void 0===Ld||Ld.focus(),Tc(null))},[Zd]),onTriggerLeave:(0,xh.useCallback)(nd=>{Zd(nd)&&nd.preventDefault()},
[Zd]),pointerGraceTimerRef:re,onPointerGraceIntentChange:(0,xh.useCallback)(nd=>{Ue.current=nd},[])},(0,xh.createElement)(lf,Yd,(0,xh.createElement)(VB,{asChild:!0,trapped:ha,onMountAutoFocus:vg(na,nd=>{var Ld;nd.preventDefault();null===(Ld=Dd.current)||void 0===Ld||Ld.focus()}),onUnmountAutoFocus:ua},(0,xh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ua,onPointerDownOutside:$a,onFocusOutside:jb,onInteractOutside:mb,onDismiss:Kb},(0,xh.createElement)(YB,nf({asChild:!0},
pc,{dir:xc.dir,orientation:"vertical",loop:L,currentTabStopId:Rc,onCurrentTabStopIdChange:Tc,onEntryFocus:nd=>{xc.isUsingKeyboardRef.current||nd.preventDefault()}}),(0,xh.createElement)(fy,nf({role:"menu","aria-orientation":"vertical","data-state":jc.open?"open":"closed","data-radix-menu-content":"",dir:xc.dir},bc,Ob,{ref:d,style:qe({outline:"none"},Ob.style),onKeyDown:vg(Ob.onKeyDown,nd=>{var Ld=nd.target.closest("[data-radix-menu-content]")===nd.currentTarget;const $e=nd.ctrlKey||nd.altKey||nd.metaKey,
Df=1===nd.key.length;Ld&&("Tab"===nd.key&&nd.preventDefault(),!$e&&Df&&qd(nd.key));nd.target===Dd.current&&Go.includes(nd.key)&&(nd.preventDefault(),Ld=lc().filter(kg=>!kg.disabled).map(kg=>kg.ref.current),nm.includes(nd.key)&&Ld.reverse(),To(Ld))}),onBlur:vg(a.onBlur,nd=>{nd.currentTarget.contains(nd.target)||(window.clearTimeout(Ud.current),kf.current="")}),onPointerMove:vg(a.onPointerMove,xo(nd=>{const Ld=gf.current!==nd.clientX;nd.currentTarget.contains(nd.target)&&Ld&&(Tf.current=nd.clientX>
gf.current?"right":"left",gf.current=nd.clientX)}))})))))))}),uw=(0,xh.forwardRef)((a,d)=>{const {disabled:m=!1,onSelect:L}=a,ha=ag(a,["disabled","onSelect"]),na=(0,xh.useRef)(null),ua=Su("MenuItem",a.__scopeMenu),Ha=hC("MenuItem",a.__scopeMenu);d=Uh(d,na);const Ua=(0,xh.useRef)(!1);return(0,xh.createElement)(Uu,nf({},ha,{ref:d,disabled:m,onClick:vg(a.onClick,()=>{const $a=na.current;if(!m&&$a){const jb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});$a.addEventListener("menu.itemSelect",
mb=>null===L||void 0===L?void 0:L(mb),{once:!0});$k($a,jb);if(jb.defaultPrevented)Ua.current=!1;else ua.onClose()}}),onPointerDown:$a=>{var jb;null===(jb=a.onPointerDown)||void 0===jb||jb.call(a,$a);Ua.current=!0},onPointerUp:vg(a.onPointerUp,$a=>{var jb;Ua.current||null===(jb=$a.currentTarget)||void 0===jb||jb.click()}),onKeyDown:vg(a.onKeyDown,$a=>{const jb=""!==Ha.searchRef.current;m||jb&&" "===$a.key||!Sq.includes($a.key)||($a.currentTarget.click(),$a.preventDefault())})}))}),Uu=(0,xh.forwardRef)((a,
d)=>{const {__scopeMenu:m,disabled:L=!1,textValue:ha}=a,na=ag(a,["__scopeMenu","disabled","textValue"]),ua=hC("MenuItem",m),Ha=sw(m),Ua=(0,xh.useRef)(null);d=Uh(d,Ua);const [$a,jb]=(0,xh.useState)(!1),[mb,Kb]=(0,xh.useState)("");(0,xh.useEffect)(()=>{const Vb=Ua.current;if(Vb){var Ob;Kb((null!==(Ob=Vb.textContent)&&void 0!==Ob?Ob:"").trim())}},[na.children]);return(0,xh.createElement)(jj.ItemSlot,{scope:m,disabled:L,textValue:null!==ha&&void 0!==ha?ha:mb},(0,xh.createElement)(ZB,nf({asChild:!0},Ha,
{focusable:!L}),(0,xh.createElement)(Vk.div,nf({role:"menuitem","data-highlighted":$a?"":void 0,"aria-disabled":L||void 0,"data-disabled":L?"":void 0},na,{ref:d,onPointerMove:vg(a.onPointerMove,xo(Vb=>{if(L)ua.onItemLeave(Vb);else ua.onItemEnter(Vb),Vb.defaultPrevented||Vb.currentTarget.focus()})),onPointerLeave:vg(a.onPointerLeave,xo(Vb=>ua.onItemLeave(Vb))),onFocus:vg(a.onFocus,()=>jb(!0)),onBlur:vg(a.onBlur,()=>jb(!1))}))))});nq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});nq("MenuItemIndicator",
{checked:!1});var iC=(0,xh.forwardRef)((a,d)=>{a=ag(a,["__scopeMenu"]);return(0,xh.createElement)(Vk.div,nf({role:"separator","aria-orientation":"horizontal"},a,{ref:d}))});nq("MenuSub");var ty=a=>{const {__scopeMenu:d,open:m=!1,children:L,dir:ha,onOpenChange:na,modal:ua=!0}=a;a=rw(d);const [Ha,Ua]=(0,xh.useState)(null),$a=(0,xh.useRef)(!1),jb=ij(na),mb=Wn(ha);(0,xh.useEffect)(()=>{const Kb=()=>{$a.current=!0;document.addEventListener("pointerdown",Vb,{capture:!0,once:!0});document.addEventListener("pointermove",
Vb,{capture:!0,once:!0})},Vb=()=>$a.current=!1;document.addEventListener("keydown",Kb,{capture:!0});return()=>{document.removeEventListener("keydown",Kb,{capture:!0});document.removeEventListener("pointerdown",Vb,{capture:!0});document.removeEventListener("pointermove",Vb,{capture:!0})}},[]);return(0,xh.createElement)(gy,a,(0,xh.createElement)(vj,{scope:d,open:m,onOpenChange:jb,content:Ha,onContentChange:Ua},(0,xh.createElement)(ry,{scope:d,onClose:(0,xh.useCallback)(()=>jb(!1),[jb]),isUsingKeyboardRef:$a,
dir:mb,modal:ua},L)))},[mH]=oj("DropdownMenu",[Ot]),Tq=Ot(),[Vu,Wu]=mH("DropdownMenu"),vw=(0,gp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:m,disabled:L=!1}=a,ha=ag(a,["__scopeDropdownMenu","disabled"]),na=Wu("DropdownMenuTrigger",m),ua=Tq(m);return(0,gp.createElement)(Ns,nf({asChild:!0},ua),(0,gp.createElement)(Vk.button,nf({type:"button",id:na.triggerId,"aria-haspopup":"menu","aria-expanded":na.open,"aria-controls":na.open?na.contentId:void 0,"data-state":na.open?"open":"closed","data-disabled":L?
"":void 0,disabled:L},ha,{ref:hh(d,na.triggerRef),onPointerDown:vg(a.onPointerDown,Ha=>{L||0!==Ha.button||!1!==Ha.ctrlKey||(na.onOpenToggle(),na.open||Ha.preventDefault())}),onKeyDown:vg(a.onKeyDown,Ha=>{if(!L){if(["Enter"," "].includes(Ha.key))na.onOpenToggle();if("ArrowDown"===Ha.key)na.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ha.key)&&Ha.preventDefault()}})})))}),jC=(0,gp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:m}=a;const L=ag(a,["__scopeDropdownMenu"]),ha=Wu("DropdownMenuContent",
m);m=Tq(m);const na=(0,gp.useRef)(!1);return(0,gp.createElement)(Tu,nf({id:ha.contentId,"aria-labelledby":ha.triggerId},m,L,{ref:d,onCloseAutoFocus:vg(a.onCloseAutoFocus,ua=>{var Ha;na.current||null===(Ha=ha.triggerRef.current)||void 0===Ha||Ha.focus();na.current=!1;ua.preventDefault()}),onInteractOutside:vg(a.onInteractOutside,ua=>{ua=ua.detail.originalEvent;const Ha=0===ua.button&&!0===ua.ctrlKey;ua=2===ua.button||Ha;if(!ha.modal||ua)na.current=!0}),style:Bf(qe({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Jr=(0,gp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:m}=a;a=ag(a,["__scopeDropdownMenu"]);m=Tq(m);return(0,gp.createElement)(uw,nf({},m,a,{ref:d}))}),nH=a=>{const {__scopeDropdownMenu:d,children:m,dir:L,open:ha,defaultOpen:na,onOpenChange:ua,modal:Ha=!0}=a;a=Tq(d);const Ua=(0,gp.useRef)(null),[$a=!1,jb]=oi({prop:ha,defaultProp:na,onChange:ua});return(0,gp.createElement)(Vu,{scope:d,triggerId:Ai(),triggerRef:Ua,contentId:Ai(),open:$a,onOpenChange:jb,onOpenToggle:(0,gp.useCallback)(()=>jb(mb=>!mb),
[jb]),modal:Ha},(0,gp.createElement)(ty,nf({},a,{open:$a,onOpenChange:jb,dir:L,modal:Ha}),m))},kj=Jf(ba(22)).default.createContext({}),oH=Jf(ba(22)),uy=ba(614),cn=a=>{var {action:d}=a;a=ag(a,["action"]);var {renderers:m}=oH.useContext(kj);m=null==m?void 0:m.KeyboardShortcut;return(0,uy.jsx)("div",Bf(qe({className:"tl-menu-right-slot"},a),{children:(0,uy.jsx)(m,{action:d})}))};ba(22);var dn=ba(614),Ps=If(function(){const a=Ie(),d=m=>{m.preventDefault()};return(0,dn.jsxs)(nH,{children:[(0,dn.jsx)(vw,
{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,dn.jsxs)(jC,{onCloseAutoFocus:m=>m.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,dn.jsxs)(Jr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,dn.jsx)(cn,{action:"whiteboard/zoom-to-fit"})]}),(0,dn.jsxs)(Jr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,
children:["Zoom to fit selection",(0,dn.jsx)(cn,{action:"whiteboard/zoom-to-selection"})]}),(0,dn.jsxs)(Jr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,dn.jsx)(cn,{action:"whiteboard/zoom-in"})]}),(0,dn.jsxs)(Jr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,dn.jsx)(cn,{action:"whiteboard/zoom-out"})]}),(0,dn.jsxs)(Jr,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,dn.jsx)(cn,{action:"whiteboard/reset-zoom"})]})]})]})}),
vy=ba(22),ww=["horizontal","vertical"],Kr=(0,vy.forwardRef)((a,d)=>{const {decorative:m,orientation:L="horizontal"}=a;a=ag(a,["decorative","orientation"]);const ha=ww.includes(L)?L:"horizontal";return(0,vy.createElement)(Vk.div,nf({"data-orientation":ha},m?{role:"none"}:{"aria-orientation":"vertical"===ha?ha:void 0,role:"separator"},a,{ref:d}))});Kr.propTypes={orientation(a,d,m){a=a[d];d=String(a);return a&&!ww.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Wk=ba(614),kC=If(function(){const a=Ie(),{handlers:{t:d}}=Fr.useContext(kj),m=Fr.useCallback(()=>{a.api.undo()},[a]),L=Fr.useCallback(()=>{a.api.redo()},[a]),ha=Fr.useCallback(()=>{a.api.zoomIn()},[a]),na=Fr.useCallback(()=>{a.api.zoomOut()},[a]),ua=Fr.useCallback(()=>{a.api.toggleGrid()},[a]),Ha=Fr.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),Ua=Fr.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,Wk.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,Wk.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Wk.jsx)(Ug,{tooltip:d("whiteboard/undo"),onClick:m,children:(0,Wk.jsx)(Wh,{name:"arrow-back-up"})}),(0,Wk.jsx)(Ug,{tooltip:d("whiteboard/redo"),onClick:L,children:(0,Wk.jsx)(Wh,{name:"arrow-forward-up"})})]}),(0,Wk.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Wk.jsx)(Ug,{tooltip:d("whiteboard/zoom-in"),onClick:ha,id:"tl-zoom-in",children:(0,Wk.jsx)(Wh,{name:"plus"})}),(0,Wk.jsx)(Ug,
{tooltip:d("whiteboard/zoom-out"),onClick:na,id:"tl-zoom-out",children:(0,Wk.jsx)(Wh,{name:"minus"})}),(0,Wk.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Wk.jsx)(Ps,{})]}),(0,Wk.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Wk.jsx)(cj,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:ua,children:(0,Wk.jsx)(Wh,{name:"grid-dots"})}),!a.readOnly&&(0,Wk.jsx)(cj,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ha,children:(0,Wk.jsx)(Wh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,Wk.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Wk.jsx)(cj,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:Ua,children:(0,Wk.jsx)(Wh,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),xw=Jf(ba(22)),Xu=
Jf(ba(31)),Yu=ba(614),Zu=a=>`[${a.map(d=>{var m;return null!=(m=null==d?void 0:d.toFixed(2))?m:"-"}).join(", ")}]`,Ho=If(()=>{var a;const {viewport:{bounds:d,camera:{point:m,zoom:L}},inputs:ha}=Gc(),na=xw.default.useRef();xw.default.useEffect(()=>{const Ha=document.getElementById("tl-statusbar-anchor");na.current=Ha},[]);const ua=[["Z",null!=(a=null==L?void 0:L.toFixed(2))?a:"null"],["MP",Zu(ha.currentPoint)],["MS",Zu(ha.currentScreenPoint)],["VP",Zu(m)],["VBR",Zu([d.maxX,d.maxY])]].map(Ha=>Ha.join("")).join("|");
a=na.current?Xu.default.createPortal((0,Yu.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:ua}),na.current):null;return(0,Yu.jsx)(Yu.Fragment,{children:a})}),om=Jf(ba(22)),Io=ba(614),Bp=If(a=>{var {id:d,icon:m,tooltip:L,tooltipSide:ha="left",handleClick:na}=a;a=ag(a,["id","icon","tooltip","tooltipSide","handleClick"]);var ua;const Ha=Ie(),Ua=null==(ua=[...Ha.Tools,Et,Ft])?void 0:ua.find($a=>$a.id===d);ua=(ua=null==Ua?void 0:Ua.shortcut)&&L?(0,Io.jsxs)("div",{className:"flex",
children:[L,(0,Io.jsx)(cn,{action:ua})]}):L;return(0,Io.jsx)(Ug,Bf(qe({},a),{tooltipSide:ha,tooltip:ua,"data-tool":d,"data-selected":d===Ha.selectedTool.id,onClick:na,children:"string"===typeof m?(0,Io.jsx)(Wh,{name:m}):m}))}),Oj=ba(22),[wy]=oj("Popover",[Mt]),$u=Mt(),[xy,Qs]=wy("Popover"),yw=(0,Oj.forwardRef)((a,d)=>{var {__scopePopover:m}=a;const L=ag(a,["__scopePopover"]),ha=Qs("PopoverTrigger",m);m=$u(m);d=Uh(d,ha.triggerRef);a=(0,Oj.createElement)(Vk.button,nf({type:"button","aria-haspopup":"dialog",
"aria-expanded":ha.open,"aria-controls":ha.contentId,"data-state":ha.open?"open":"closed"},L,{ref:d,onClick:vg(a.onClick,ha.onOpenToggle)}));return ha.hasCustomAnchor?a:(0,Oj.createElement)(ey,nf({asChild:!0},m),a)}),[,lC]=wy("PopoverPortal",{forceMount:void 0}),zw=(0,Oj.forwardRef)((a,d)=>{var m=lC("PopoverContent",a.__scopePopover);({forceMount:m=m.forceMount}=a);const L=ag(a,["forceMount"]);a=Qs("PopoverContent",a.__scopePopover);return(0,Oj.createElement)(Qu,{present:m||a.open},a.modal?(0,Oj.createElement)(mC,
nf({},L,{ref:d})):(0,Oj.createElement)(Rt,nf({},L,{ref:d})))}),mC=(0,Oj.forwardRef)((a,d)=>{const m=Qs("PopoverContent",a.__scopePopover),L=(0,Oj.useRef)(null);d=Uh(d,L);const ha=(0,Oj.useRef)(!1);(0,Oj.useEffect)(()=>{const na=L.current;if(na)return ny(na)},[]);return(0,Oj.createElement)(Ik,{as:lq,allowPinchZoom:!0},(0,Oj.createElement)(yy,nf({},a,{ref:d,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vg(a.onCloseAutoFocus,na=>{var ua;na.preventDefault();ha.current||null===(ua=m.triggerRef.current)||
void 0===ua||ua.focus()}),onPointerDownOutside:vg(a.onPointerDownOutside,na=>{na=na.detail.originalEvent;const ua=0===na.button&&!0===na.ctrlKey;ha.current=2===na.button||ua},{checkForDefaultPrevented:!1}),onFocusOutside:vg(a.onFocusOutside,na=>na.preventDefault(),{checkForDefaultPrevented:!1})})))}),Rt=(0,Oj.forwardRef)((a,d)=>{const m=Qs("PopoverContent",a.__scopePopover),L=(0,Oj.useRef)(!1);return(0,Oj.createElement)(yy,nf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ha=>
{var na;null===(na=a.onCloseAutoFocus)||void 0===na||na.call(a,ha);if(!ha.defaultPrevented){var ua;L.current||null===(ua=m.triggerRef.current)||void 0===ua||ua.focus();ha.preventDefault()}L.current=!1},onInteractOutside:ha=>{var na,ua;null===(na=a.onInteractOutside)||void 0===na||na.call(a,ha);ha.defaultPrevented||(L.current=!0);na=ha.target;(null===(ua=m.triggerRef.current)||void 0===ua?0:ua.contains(na))&&ha.preventDefault()}}))}),yy=(0,Oj.forwardRef)((a,d)=>{const {__scopePopover:m,trapFocus:L,
onOpenAutoFocus:ha,onCloseAutoFocus:na,disableOutsidePointerEvents:ua,onEscapeKeyDown:Ha,onPointerDownOutside:Ua,onFocusOutside:$a,onInteractOutside:jb}=a;a=ag(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const mb=Qs("PopoverContent",m),Kb=$u(m);Ri();return(0,Oj.createElement)(VB,{asChild:!0,loop:!0,trapped:L,onMountAutoFocus:ha,onUnmountAutoFocus:na},(0,Oj.createElement)($x,
{asChild:!0,disableOutsidePointerEvents:ua,onInteractOutside:jb,onEscapeKeyDown:Ha,onPointerDownOutside:Ua,onFocusOutside:$a,onDismiss:()=>mb.onOpenChange(!1)},(0,Oj.createElement)(fy,nf({"data-state":mb.open?"open":"closed",role:"dialog",id:mb.contentId},Kb,a,{ref:d,style:Bf(qe({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),nC=(0,Oj.forwardRef)((a,d)=>{var {__scopePopover:m}=a;a=ag(a,["__scopePopover"]);m=$u(m);return(0,Oj.createElement)(MB,
nf({},m,a,{ref:d}))}),Rs=a=>{const {__scopePopover:d,children:m,open:L,defaultOpen:ha,onOpenChange:na,modal:ua=!1}=a;a=$u(d);const Ha=(0,Oj.useRef)(null),[Ua,$a]=(0,Oj.useState)(!1),[jb=!1,mb]=oi({prop:L,defaultProp:ha,onChange:na});return(0,Oj.createElement)(gy,a,(0,Oj.createElement)(xy,{scope:d,contentId:Ai(),triggerRef:Ha,open:jb,onOpenChange:mb,onOpenToggle:(0,Oj.useCallback)(()=>mb(Kb=>!Kb),[mb]),hasCustomAnchor:Ua,onCustomAnchorAdd:(0,Oj.useCallback)(()=>$a(!0),[]),onCustomAnchorRemove:(0,Oj.useCallback)(()=>
$a(!1),[]),modal:ua},m))},zy=Jf(ba(22)),oq=ba(614),Ay=If(function(a){var {popoverSide:d="left",setGeometry:m,activeGeometry:L,chevron:ha=!0}=a;a=ag(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:na}}=zy.default.useContext(kj);const ua=[{id:"box",icon:"square",tooltip:na("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:na("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:na("whiteboard/triangle")}];na={id:"shapes",icon:"triangle-square-circle",tooltip:na("whiteboard/shape")};
na=L?ua.find(Ha=>Ha.id===L):na;return(0,oq.jsxs)(Rs,{children:[(0,oq.jsx)(yw,{asChild:!0,children:(0,oq.jsxs)("div",Bf(qe({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,oq.jsx)(Bp,Bf(qe({},na),{tooltipSide:d})),ha&&(0,oq.jsx)(Wh,{"data-selected":L,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,oq.jsxs)(zw,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,oq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:ua.map(Ha=>(0,oq.jsx)(Bp,{id:Ha.id,icon:Ha.icon,tooltip:L?Ha.tooltip:"",handleClick:m,tooltipSide:d},Ha.id))}),(0,oq.jsx)(nC,{className:"tl-popover-arrow"})]})]})}),Ki=ba(22),By=ba(22),Cy=["PageUp","PageDown"],Dy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],av={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[Aw,pH,qH]=gl("Slider"),[Ey]=oj("Slider",[qH]),[Uq,ip]=Ey("Slider"),St=(0,Ki.forwardRef)((a,d)=>{function m(gf){const lf=zq(re,gf);na(gf,lf)}function L(gf){na(gf,Dd.current)}function ha(){re[Dd.current]!==Tf.current[Dd.current]&&xc(re)}function na(gf,lf,{commit:Yd}={commit:!1}){const qd=(String($a).split(".")[1]||"").length;gf=kn(Math.round((gf-Ha)/$a)*$a+Ha,qd);const Zd=yo(gf,[Ha,Ua]);Ue((nd=[])=>{const Ld=Aj(nd,Zd,lf);var $e=Kb*$a;if(0<$e){const Df=Bm(Ld);$e=Math.min(...Df)>=$e}else $e=!0;return $e?
(Dd.current=Ld.indexOf(Zd),($e=String(Ld)!==String(nd))&&Yd&&xc(Ld),$e?Ld:nd):nd})}const {name:ua,min:Ha=0,max:Ua=100,step:$a=1,orientation:jb="horizontal",disabled:mb=!1,minStepsBetweenThumbs:Kb=0,defaultValue:Vb=[Ha],value:Ob,onValueChange:jc=()=>{},onValueCommit:xc=()=>{},inverted:bc=!1}=a,pc=ag(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[lc,Rc]=(0,Ki.useState)(null);d=Uh(d,gf=>Rc(gf));const Tc=(0,Ki.useRef)(new Set),
Dd=(0,Ki.useRef)(0);var Ud="horizontal"===jb;const kf=lc?!!lc.closest("form"):!0;Ud=Ud?rH:sH;const [re=[],Ue]=oi({prop:Ob,defaultProp:Vb,onChange:gf=>{var lf;null===(lf=[...Tc.current][Dd.current])||void 0===lf||lf.focus();jc(gf)}}),Tf=(0,Ki.useRef)(re);return(0,Ki.createElement)(Uq,{scope:a.__scopeSlider,disabled:mb,min:Ha,max:Ua,valueIndexToChangeRef:Dd,thumbs:Tc.current,values:re,orientation:jb},(0,Ki.createElement)(Aw.Provider,{scope:a.__scopeSlider},(0,Ki.createElement)(Aw.Slot,{scope:a.__scopeSlider},
(0,Ki.createElement)(Ud,nf({"aria-disabled":mb,"data-disabled":mb?"":void 0},pc,{ref:d,onPointerDown:vg(pc.onPointerDown,()=>{mb||(Tf.current=re)}),min:Ha,max:Ua,inverted:bc,onSlideStart:mb?void 0:m,onSlideMove:mb?void 0:L,onSlideEnd:mb?void 0:ha,onHomeKeyDown:()=>!mb&&na(Ha,0,{commit:!0}),onEndKeyDown:()=>!mb&&na(Ua,re.length-1,{commit:!0}),onStepKeyDown:({event:gf,direction:lf})=>{if(!mb){gf=Cy.includes(gf.key)||gf.shiftKey&&Dy.includes(gf.key);const Yd=Dd.current;na(re[Yd]+$a*(gf?10:1)*lf,Yd,{commit:!0})}}})))),
kf&&re.map((gf,lf)=>(0,Ki.createElement)(Jo,{key:lf,name:ua?ua+(1<re.length?"[]":""):void 0,value:gf})))}),[Lr,Fy]=Ey("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),rH=(0,Ki.forwardRef)((a,d)=>{function m(pc){const lc=Ob.current||Kb.getBoundingClientRect(),Rc=rn([0,lc.width],bc?[L,ha]:[ha,L]);Ob.current=lc;return Rc(pc-lc.left)}const {min:L,max:ha,dir:na,inverted:ua,onSlideStart:Ha,onSlideMove:Ua,onSlideEnd:$a,onStepKeyDown:jb}=a,mb=ag(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Kb,Vb]=(0,Ki.useState)(null);d=Uh(d,pc=>Vb(pc));const Ob=(0,Ki.useRef)(),jc=Wn(na),xc="ltr"===jc,bc=xc&&!ua||!xc&&ua;return(0,Ki.createElement)(Lr,{scope:a.__scopeSlider,startEdge:bc?"left":"right",endEdge:bc?"right":"left",direction:bc?1:-1,size:"width"},(0,Ki.createElement)(Gy,nf({dir:jc,"data-orientation":"horizontal"},mb,{ref:d,style:Bf(qe({},mb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:pc=>{pc=m(pc.clientX);null===Ha||void 0===Ha||Ha(pc)},onSlideMove:pc=>{pc=
m(pc.clientX);null===Ua||void 0===Ua||Ua(pc)},onSlideEnd:()=>{Ob.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:pc=>{const lc=av[bc?"from-left":"from-right"].includes(pc.key);null===jb||void 0===jb||jb({event:pc,direction:lc?-1:1})}})))}),sH=(0,Ki.forwardRef)((a,d)=>{function m(Ob){const jc=Kb.current||mb.current.getBoundingClientRect(),xc=rn([0,jc.height],Vb?[ha,L]:[L,ha]);Kb.current=jc;return xc(Ob-jc.top)}const {min:L,max:ha,inverted:na,onSlideStart:ua,onSlideMove:Ha,onSlideEnd:Ua,
onStepKeyDown:$a}=a,jb=ag(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),mb=(0,Ki.useRef)(null);d=Uh(d,mb);const Kb=(0,Ki.useRef)(),Vb=!na;return(0,Ki.createElement)(Lr,{scope:a.__scopeSlider,startEdge:Vb?"bottom":"top",endEdge:Vb?"top":"bottom",size:"height",direction:Vb?1:-1},(0,Ki.createElement)(Gy,nf({"data-orientation":"vertical"},jb,{ref:d,style:Bf(qe({},jb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Ob=>{Ob=m(Ob.clientY);null===
ua||void 0===ua||ua(Ob)},onSlideMove:Ob=>{Ob=m(Ob.clientY);null===Ha||void 0===Ha||Ha(Ob)},onSlideEnd:()=>{Kb.current=void 0;null===Ua||void 0===Ua||Ua()},onStepKeyDown:Ob=>{const jc=av[Vb?"from-bottom":"from-top"].includes(Ob.key);null===$a||void 0===$a||$a({event:Ob,direction:jc?-1:1})}})))}),Gy=(0,Ki.forwardRef)((a,d)=>{const {__scopeSlider:m,onSlideStart:L,onSlideMove:ha,onSlideEnd:na,onHomeKeyDown:ua,onEndKeyDown:Ha,onStepKeyDown:Ua}=a,$a=ag(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
jb=ip("Slider",m);return(0,Ki.createElement)(Vk.span,nf({},$a,{ref:d,onKeyDown:vg(a.onKeyDown,mb=>{"Home"===mb.key?(ua(mb),mb.preventDefault()):"End"===mb.key?(Ha(mb),mb.preventDefault()):Cy.concat(Dy).includes(mb.key)&&(Ua(mb),mb.preventDefault())}),onPointerDown:vg(a.onPointerDown,mb=>{const Kb=mb.target;Kb.setPointerCapture(mb.pointerId);mb.preventDefault();jb.thumbs.has(Kb)?Kb.focus():L(mb)}),onPointerMove:vg(a.onPointerMove,mb=>{mb.target.hasPointerCapture(mb.pointerId)&&ha(mb)}),onPointerUp:vg(a.onPointerUp,
mb=>{const Kb=mb.target;Kb.hasPointerCapture(mb.pointerId)&&(Kb.releasePointerCapture(mb.pointerId),na(mb))})}))}),tf=(0,Ki.forwardRef)((a,d)=>{var {__scopeSlider:m}=a;a=ag(a,["__scopeSlider"]);m=ip("SliderTrack",m);return(0,Ki.createElement)(Vk.span,nf({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},a,{ref:d}))}),Hg=(0,Ki.forwardRef)((a,d)=>{var {__scopeSlider:m}=a;const L=ag(a,["__scopeSlider"]),ha=ip("SliderRange",m);m=Fy("SliderRange",m);var na=(0,Ki.useRef)(null);d=Uh(d,
na);var ua=ha.values.length;na=ha.values.map(Ha=>Yi(Ha,ha.min,ha.max));ua=1<ua?Math.min(...na):0;na=100-Math.max(...na);return(0,Ki.createElement)(Vk.span,nf({"data-orientation":ha.orientation,"data-disabled":ha.disabled?"":void 0},L,{ref:d,style:Bf(qe({},a.style),{[m.startEdge]:ua+"%",[m.endEdge]:na+"%"})}))}),zf=(0,Ki.forwardRef)((a,d)=>{const m=pH(a.__scopeSlider),[L,ha]=(0,Ki.useState)(null);d=Uh(d,ua=>ha(ua));const na=(0,Ki.useMemo)(()=>L?m().findIndex(ua=>ua.ref.current===L):-1,[m,L]);return(0,Ki.createElement)(mg,
nf({},a,{ref:d,index:na}))}),mg=(0,Ki.forwardRef)((a,d)=>{const {__scopeSlider:m,index:L}=a,ha=ag(a,["__scopeSlider","index"]),na=ip("SliderThumb",m),ua=Fy("SliderThumb",m),[Ha,Ua]=(0,Ki.useState)(null);d=Uh(d,Vb=>Ua(Vb));var $a=xi(Ha);const jb=na.values[L],mb=void 0===jb?0:Yi(jb,na.min,na.max),Kb=hl(L,na.values.length);$a=($a=null===$a||void 0===$a?void 0:$a[ua.size])?Sl($a,mb,ua.direction):0;(0,Ki.useEffect)(()=>{if(Ha)return na.thumbs.add(Ha),()=>{na.thumbs.delete(Ha)}},[Ha,na.thumbs]);return(0,Ki.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ua.startEdge]:`calc(${mb}% + ${$a}px)`}},(0,Ki.createElement)(Aw.ItemSlot,{scope:a.__scopeSlider},(0,Ki.createElement)(Vk.span,nf({role:"slider","aria-label":a["aria-label"]||Kb,"aria-valuemin":na.min,"aria-valuenow":jb,"aria-valuemax":na.max,"aria-orientation":na.orientation,"data-orientation":na.orientation,"data-disabled":na.disabled?"":void 0,tabIndex:na.disabled?void 0:0},ha,{ref:d,style:void 0===jb?{display:"none"}:
a.style,onFocus:vg(a.onFocus,()=>{na.valueIndexToChangeRef.current=L})}))))}),Jo=a=>{const {value:d}=a;a=ag(a,["value"]);const m=(0,Ki.useRef)(null),L=Jn(d);(0,Ki.useEffect)(()=>{const ha=m.current,na=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(L!==d&&na){const ua=new Event("input",{bubbles:!0});na.call(ha,d);ha.dispatchEvent(ua)}},[L,d]);return(0,Ki.createElement)("input",nf({style:{display:"none"}},a,{ref:m,defaultValue:d}))},wl=St,bv=tf,pk=Hg,pq=zf,bf=Jf(ba(22)),
qg=ba(614),Ln=If(a=>{var {side:d,align:m,alignOffset:L,label:ha,arrow:na,children:ua,border:Ha}=a;a=ag(a,"side align alignOffset label arrow children border".split(" "));const Ua=bf.useRef(null),[$a,jb]=bf.useState(!1),{viewport:{bounds:mb,camera:{point:Kb,zoom:Vb}}}=Ie(),[Ob,jc]=bf.useState(0);bf.useEffect(()=>{if(Ua.current&&$a){var xc=Ua.current.getBoundingClientRect();Of.boundsContain(mb,{minX:xc.x,minY:xc.y,maxX:xc.right,maxY:xc.bottom,width:xc.width,height:xc.height})||jc(bc=>bc+1)}},[Kb[0],
Kb[1],Vb,$a]);return(0,qg.jsxs)(Rs,{onOpenChange:xc=>jb(xc),children:[(0,qg.jsx)(yw,Bf(qe({},a),{"data-border":Ha,className:"tl-button tl-popover-trigger-button",children:ha})),(0,qg.jsxs)(zw,{ref:Ua,className:"tl-popover-content",align:m,alignOffset:L,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[ua,na&&(0,qg.jsx)(nC,{className:"tl-popover-arrow"})]},"popover-content-"+Ob)]})}),Ze=Jf(ba(22)),Jk=ba(614),oC=Jf(ba(22)),Sf=ba(22),Tt=ba(31),fl=Jf(ba(22)),Ll=
ba(22),cv=ba(22),Mn=ba(31),xl="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const m=(0,cv.forwardRef)((L,ha)=>{var {asChild:na}=L;L=ag(L,["asChild"]);na=na?lq:d;(0,cv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,cv.createElement)(na,nf({},L,{ref:ha}))});m.displayName=`Primitive.${d}`;return Bf(qe({},a),{[d]:m})},{}),Vq,Cp=(0,Ll.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gh=(0,Ll.forwardRef)((a,
d)=>{var m;const {disableOutsidePointerEvents:L=!1,onEscapeKeyDown:ha,onPointerDownOutside:na,onFocusOutside:ua,onInteractOutside:Ha,onDismiss:Ua}=a,$a=ag(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),jb=(0,Ll.useContext)(Cp),[mb,Kb]=(0,Ll.useState)(null),Vb=null!==(m=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,Ll.useState)({});
d=Uh(d,lc=>Kb(lc));m=Array.from(jb.layers);var [jc]=[...jb.layersWithOutsidePointerEventsDisabled].slice(-1);jc=m.indexOf(jc);const xc=mb?m.indexOf(mb):-1;m=0<jb.layersWithOutsidePointerEventsDisabled.size;const bc=xc>=jc;jc=mo(lc=>{const Rc=lc.target,Tc=[...jb.branches].some(Dd=>Dd.contains(Rc));bc&&!Tc&&(null===na||void 0===na||na(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);const pc=Nl(lc=>{const Rc=lc.target;[...jb.branches].some(Tc=>Tc.contains(Rc))||
(null===ua||void 0===ua||ua(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);Uk(lc=>{xc===jb.layers.size-1&&(null===ha||void 0===ha||ha(lc),!lc.defaultPrevented&&Ua&&(lc.preventDefault(),Ua()))},Vb);(0,Ll.useEffect)(()=>{if(mb)return L&&(0===jb.layersWithOutsidePointerEventsDisabled.size&&(Vq=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),jb.layersWithOutsidePointerEventsDisabled.add(mb)),jb.layers.add(mb),bm(),()=>{L&&1===jb.layersWithOutsidePointerEventsDisabled.size&&
(Vb.body.style.pointerEvents=Vq)}},[mb,Vb,L,jb]);(0,Ll.useEffect)(()=>()=>{mb&&(jb.layers.delete(mb),jb.layersWithOutsidePointerEventsDisabled.delete(mb),bm())},[mb,jb]);(0,Ll.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,Ll.createElement)(xl.div,nf({},$a,{ref:d,style:qe({pointerEvents:m?bc?"auto":"none":void 0},a.style),onFocusCapture:vg(a.onFocusCapture,pc.onFocusCapture),
onBlurCapture:vg(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:vg(a.onPointerDownCapture,jc.onPointerDownCapture)}))}),yl=ba(22),qq={bubbles:!1,cancelable:!0},pC=(0,yl.forwardRef)((a,d)=>{const {loop:m=!1,trapped:L=!1,onMountAutoFocus:ha,onUnmountAutoFocus:na}=a;a=ag(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ua,Ha]=(0,yl.useState)(null),Ua=ij(ha),$a=ij(na),jb=(0,yl.useRef)(null);d=Uh(d,Vb=>Ha(Vb));const mb=(0,yl.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,yl.useEffect)(()=>{if(L){let Vb=function(jc){!mb.paused&&ua&&(jc=jc.target,ua.contains(jc)?jb.current=jc:Ol(jb.current,{select:!0}))},Ob=function(jc){!mb.paused&&ua&&(ua.contains(jc.relatedTarget)||Ol(jb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Ob)}}},[L,ua,mb.paused]);(0,yl.useEffect)(()=>{if(ua){Mr.add(mb);const Vb=document.activeElement;
if(!ua.contains(Vb)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",qq);ua.addEventListener("focusScope.autoFocusOnMount",Ua);ua.dispatchEvent(Ob);Ob.defaultPrevented||(An(no(Xn(ua)),{select:!0}),document.activeElement===Vb&&Ol(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",qq);ua.addEventListener("focusScope.autoFocusOnUnmount",$a);ua.dispatchEvent(Ob);Ob.defaultPrevented||Ol(null!==Vb&&void 0!==
Vb?Vb:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",$a);Mr.remove(mb)},0)}}},[ua,Ua,$a,mb]);const Kb=(0,yl.useCallback)(Vb=>{if((m||L)&&!mb.paused){var Ob=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Ob){const xc=Vb.currentTarget;var jc=xc;const bc=Xn(jc),pc=nn(bc,jc);jc=nn(bc.reverse(),jc);const [lc,Rc]=[pc,jc];lc&&Rc?Vb.shiftKey||Ob!==Rc?Vb.shiftKey&&Ob===lc&&(Vb.preventDefault(),m&&Ol(Rc,{select:!0})):(Vb.preventDefault(),m&&
Ol(lc,{select:!0})):Ob===xc&&Vb.preventDefault()}}},[m,L,mb.paused]);return(0,yl.createElement)(xl.div,nf({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),Mr=function(){let a=[];return{add(d){const m=a[0];d===m||null!==m&&void 0!==m&&m.pause();a=ln(a,d);a.unshift(d)},remove(d){var m;a=ln(a,d);null===(m=a[0])||void 0===m||m.resume()}}}(),Fg=ba(22),[Bw,rq]=oj("Popper"),[th,Ut]=Bw("Popper"),jk=(0,Fg.forwardRef)((a,d)=>{const {__scopePopper:m,virtualRef:L}=a;a=ag(a,["__scopePopper","virtualRef"]);const ha=Ut("PopperAnchor",
m),na=(0,Fg.useRef)(null);d=Uh(d,na);(0,Fg.useEffect)(()=>{ha.onAnchorChange((null===L||void 0===L?void 0:L.current)||na.current)});return L?null:(0,Fg.createElement)(xl.div,nf({},a,{ref:d}))}),[zl]=Bw("PopperContent"),[Vt,dv]=Bw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Hy=(0,Fg.forwardRef)((a,d)=>{var m,L,ha,na,ua,Ha,Ua,$a;const {__scopePopper:jb,side:mb="bottom",sideOffset:Kb=0,align:Vb="center",alignOffset:Ob=0,arrowPadding:jc=0,collisionBoundary:xc=[],collisionPadding:bc=0,sticky:pc=
"partial",hideWhenDetached:lc=!1,avoidCollisions:Rc=!0,onPlaced:Tc}=a,Dd=ag(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Ud=Ut("PopperContent",jb),[kf,re]=(0,Fg.useState)(null);d=Uh(d,xq=>re(xq));const [Ue,Tf]=(0,Fg.useState)(null);var gf=xi(Ue),lf=null!==(m=null===gf||void 0===gf?void 0:gf.width)&&void 0!==m?m:0;m=null!==(L=null===gf||void 0===gf?void 0:gf.height)&&void 0!==L?L:0;L=
mb+("center"!==Vb?"-"+Vb:"");gf="number"===typeof bc?bc:qe({top:0,right:0,bottom:0,left:0},bc);const Yd=Array.isArray(xc)?xc:[xc],qd=0<Yd.length;gf={padding:gf,boundary:Yd.filter(ph),altBoundary:qd};const {reference:Zd,floating:nd,strategy:Ld,x:$e,y:Df,placement:kg,middlewareData:Uf,update:wg}=Dg({strategy:"fixed",placement:L,whileElementsMounted:zg,middleware:[Wt(),FB({mainAxis:Kb+m,alignmentAxis:Ob}),Rc?GB(qe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?HB():void 0},gf)):void 0,Ue?KB({element:Ue,
padding:jc}):void 0,Rc?DB(qe({},gf)):void 0,pG(Bf(qe({},gf),{apply:({elements:xq,availableWidth:tu,availableHeight:DD})=>{xq.floating.style.setProperty("--radix-popper-available-width",`${tu}px`);xq.floating.style.setProperty("--radix-popper-available-height",`${DD}px`)}})),Zl({arrowWidth:lf,arrowHeight:m}),lc?EB({strategy:"referenceHidden"}):void 0].filter(oo)});Fm(()=>{Zd(Ud.anchor)},[Zd,Ud.anchor]);const uh=null!==$e&&null!==Df,[eg,oh]=po(kg),Sh=ij(Tc);Fm(()=>{uh&&(null===Sh||void 0===Sh||Sh())},
[uh,Sh]);lf=null===(ha=Uf.arrow)||void 0===ha?void 0:ha.x;ha=null===(na=Uf.arrow)||void 0===na?void 0:na.y;na=0!==(null===(ua=Uf.arrow)||void 0===ua?void 0:ua.centerOffset);const [wj,vk]=(0,Fg.useState)();Fm(()=>{kf&&vk(window.getComputedStyle(kf).zIndex)},[kf]);const {hasParent:Mk,positionUpdateFns:Np}=dv("PopperContent",jb),hr=!Mk;(0,Fg.useLayoutEffect)(()=>{if(!hr)return Np.add(wg),()=>{Np.delete(wg)}},[hr,Np,wg]);Fm(()=>{hr&&uh&&Array.from(Np).reverse().forEach(xq=>requestAnimationFrame(xq))},
[hr,uh,Np]);ua=Bf(qe({"data-side":eg,"data-align":oh},Dd),{ref:d,style:Bf(qe({},Dd.style),{animation:uh?void 0:"none",opacity:null!==(Ha=Uf.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Fg.createElement)("div",{ref:nd,"data-radix-popper-content-wrapper":"",style:{position:Ld,left:0,top:0,transform:uh?`translate3d(${Math.round($e)}px, ${Math.round(Df)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:wj,["--radix-popper-transform-origin"]:[null===(Ua=Uf.transformOrigin)||
void 0===Ua?void 0:Ua.x,null===($a=Uf.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")},dir:a.dir},(0,Fg.createElement)(zl,{scope:jb,placedSide:eg,onArrowChange:Tf,arrowX:lf,arrowY:ha,shouldHideArrow:na},hr?(0,Fg.createElement)(Vt,{scope:jb,hasParent:!0,positionUpdateFns:Np},(0,Fg.createElement)(xl.div,ua)):(0,Fg.createElement)(xl.div,ua)))}),Wt=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:m}=a,{width:L,height:ha}=d.reference;m.floating.style.setProperty("--radix-popper-anchor-width",
`${L}px`);m.floating.style.setProperty("--radix-popper-anchor-height",`${ha}px`);return{}}}),Zl=a=>({name:"transformOrigin",options:a,fn(d){var m,L,ha,na,ua;const {placement:Ha,rects:Ua,middlewareData:$a}=d,jb=(d=0!==(null===(m=$a.arrow)||void 0===m?void 0:m.centerOffset))?0:a.arrowWidth;m=d?0:a.arrowHeight;const [mb,Kb]=po(Ha),Vb={start:"0%",center:"50%",end:"100%"}[Kb],Ob=(null!==(L=null===(ha=$a.arrow)||void 0===ha?void 0:ha.x)&&void 0!==L?L:0)+jb/2;L=(null!==(na=null===(ua=$a.arrow)||void 0===
ua?void 0:ua.y)&&void 0!==na?na:0)+m/2;ua=na="";"bottom"===mb?(na=d?Vb:`${Ob}px`,ua=`${-m}px`):"top"===mb?(na=d?Vb:`${Ob}px`,ua=`${Ua.floating.height+m}px`):"right"===mb?(na=`${-m}px`,ua=d?Vb:`${L}px`):"left"===mb&&(na=`${Ua.floating.width+m}px`,ua=d?Vb:`${L}px`);return{data:{x:na,y:ua}}}}),qC=a=>{const {__scopePopper:d,children:m}=a,[L,ha]=(0,Fg.useState)(null);return(0,Fg.createElement)(th,{scope:d,anchor:L,onAnchorChange:ha},m)},rC=ba(22),tH=Jf(ba(31)),uH=(0,rC.forwardRef)((a,d)=>{var m;const {container:L=
null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=a;a=ag(a,["container"]);return L?tH.default.createPortal((0,rC.createElement)(xl.div,nf({},a,{ref:d})),L):null}),Wq=ba(22),Nr=(0,Wq.forwardRef)((a,d)=>(0,Wq.createElement)(xl.span,nf({},a,{ref:d,style:qe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),bk=[" ","Enter","ArrowUp","ArrowDown"],
sC=[" ","Enter"],[Xt,Cw,Or]=function(a){var d=a+"CollectionProvider";const [m,L]=oj(d),[ha,na]=m(d,{collectionRef:{current:null},itemMap:new Map}),ua=jb=>{const {scope:mb,children:Kb}=jb;jb=fl.default.useRef(null);const Vb=fl.default.useRef(new Map).current;return fl.default.createElement(ha,{scope:mb,itemMap:Vb,collectionRef:jb},Kb)};Object.assign(ua,{displayName:d});const Ha=a+"CollectionSlot";d=fl.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb;jb=na(Ha,Kb);mb=Uh(mb,jb.collectionRef);
return fl.default.createElement(lq,{ref:mb},Vb)});Object.assign(d,{displayName:Ha});const Ua=a+"CollectionItemSlot",$a=fl.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb,Ob=ag(jb,["scope","children"]),jc=fl.default.useRef(null);jb=Uh(mb,jc);const xc=na(Ua,Kb);fl.default.useEffect(()=>{xc.itemMap.set(jc,qe({ref:jc},Ob));return()=>void xc.itemMap.delete(jc)});return fl.default.createElement(lq,{["data-radix-collection-item"]:"",ref:jb},Vb)});Object.assign($a,{displayName:Ua});return[{Provider:ua,
Slot:d,ItemSlot:$a},function(jb){const mb=na(a+"CollectionConsumer",jb);return fl.default.useCallback(()=>{const Kb=mb.collectionRef.current;if(!Kb)return[];const Vb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Ob,jc)=>Vb.indexOf(Ob.ref.current)-Vb.indexOf(jc.ref.current))},[mb.collectionRef,mb.itemMap])},L]}("Select"),[Yt]=oj("Select",[Or,rq]),Zt=rq(),[vH,sq]=Yt("Select"),[Iy,Jy]=Yt("Select"),Ky=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,
disabled:L=!1}=a;a=ag(a,["__scopeSelect","disabled"]);const ha=Zt(m),na=sq("SelectTrigger",m),ua=na.disabled||L;d=Uh(d,na.onTriggerChange);const Ha=Cw(m),[Ua,$a,jb]=Pl(mb=>{const Kb=Ha().filter(Ob=>!Ob.disabled),Vb=Kb.find(Ob=>Ob.value===na.value);mb=El(Kb,mb,Vb);if(void 0!==mb)na.onValueChange(mb.value)});return(0,Sf.createElement)(jk,nf({asChild:!0},ha),(0,Sf.createElement)(xl.button,nf({type:"button",role:"combobox","aria-controls":na.contentId,"aria-expanded":na.open,"aria-required":na.required,
"aria-autocomplete":"none",dir:na.dir,"data-state":na.open?"open":"closed",disabled:ua,"data-disabled":ua?"":void 0,"data-placeholder":void 0===na.value?"":void 0},a,{ref:d,onClick:vg(a.onClick,mb=>{mb.currentTarget.focus()}),onPointerDown:vg(a.onPointerDown,mb=>{const Kb=mb.target;Kb.hasPointerCapture(mb.pointerId)&&Kb.releasePointerCapture(mb.pointerId);0===mb.button&&!1===mb.ctrlKey&&(ua||(na.onOpenChange(!0),jb()),na.triggerPointerDownPosRef.current={x:Math.round(mb.pageX),y:Math.round(mb.pageY)},
mb.preventDefault())}),onKeyDown:vg(a.onKeyDown,mb=>{const Kb=""!==Ua.current;mb.ctrlKey||mb.altKey||mb.metaKey||1!==mb.key.length||$a(mb.key);Kb&&" "===mb.key||!bk.includes(mb.key)||(ua||(na.onOpenChange(!0),jb()),mb.preventDefault())})})))}),tC=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,children:L,placeholder:ha}=a;a=ag(a,["__scopeSelect","className","style","children","placeholder"]);const na=sq("SelectValue",m),{onValueNodeHasChildrenChange:ua}=na,Ha=void 0!==L;d=Uh(d,na.onValueNodeChange);
Fm(()=>{ua(Ha)},[ua,Ha]);return(0,Sf.createElement)(xl.span,nf({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===na.value&&void 0!==ha?ha:L)}),uC=(0,Sf.forwardRef)((a,d)=>{const {children:m}=a;a=ag(a,["__scopeSelect","children"]);return(0,Sf.createElement)(xl.span,nf({"aria-hidden":!0},a,{ref:d}),m||"")}),vC=(0,Sf.forwardRef)((a,d)=>{const m=sq("SelectContent",a.__scopeSelect),[L,ha]=(0,Sf.useState)();Fm(()=>{ha(new DocumentFragment)},[]);return m.open?(0,Sf.createElement)(Ly,nf({},a,{ref:d})):
L?(0,Tt.createPortal)((0,Sf.createElement)(Pr,{scope:a.__scopeSelect},(0,Sf.createElement)(Xt.Slot,{scope:a.__scopeSelect},(0,Sf.createElement)("div",null,a.children))),L):null}),[Pr,Ko]=Yt("SelectContent"),Ly=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,position:L="item-aligned",onCloseAutoFocus:ha,onEscapeKeyDown:na,onPointerDownOutside:ua,side:Ha,sideOffset:Ua,align:$a,alignOffset:jb,arrowPadding:mb,collisionBoundary:Kb,collisionPadding:Vb,sticky:Ob,hideWhenDetached:jc,avoidCollisions:xc}=
a;a=ag(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const bc=sq("SelectContent",m),[pc,lc]=(0,Sf.useState)(null),[Rc,Tc]=(0,Sf.useState)(null);d=Uh(d,eg=>lc(eg));const [Dd,Ud]=(0,Sf.useState)(null),[kf,re]=(0,Sf.useState)(null),Ue=Cw(m),[Tf,gf]=(0,Sf.useState)(!1),lf=(0,Sf.useRef)(!1);(0,Sf.useEffect)(()=>{if(pc)return ny(pc)},[pc]);
Ri();const Yd=(0,Sf.useCallback)(eg=>{const [oh,...Sh]=Ue().map(Mk=>Mk.ref.current),[wj]=Sh.slice(-1),vk=document.activeElement;for(const Mk of eg){if(Mk===vk)break;null===Mk||void 0===Mk||Mk.scrollIntoView({block:"nearest"});Mk===oh&&Rc&&(Rc.scrollTop=0);Mk===wj&&Rc&&(Rc.scrollTop=Rc.scrollHeight);null===Mk||void 0===Mk||Mk.focus();if(document.activeElement!==vk)break}},[Ue,Rc]),qd=(0,Sf.useCallback)(()=>Yd([Dd,pc]),[Yd,Dd,pc]);(0,Sf.useEffect)(()=>{Tf&&qd()},[Tf,qd]);const {onOpenChange:Zd,triggerPointerDownPosRef:nd}=
bc;(0,Sf.useEffect)(()=>{if(pc){var eg=0,oh=0;const Sh=vk=>{var Mk,Np,hr,xq;eg=Math.abs(Math.round(vk.pageX)-(null!==(Mk=null===(Np=nd.current)||void 0===Np?void 0:Np.x)&&void 0!==Mk?Mk:0));oh=Math.abs(Math.round(vk.pageY)-(null!==(hr=null===(xq=nd.current)||void 0===xq?void 0:xq.y)&&void 0!==hr?hr:0))},wj=vk=>{10>=eg&&10>=oh?vk.preventDefault():pc.contains(vk.target)||Zd(!1);document.removeEventListener("pointermove",Sh);nd.current=null};null!==nd.current&&(document.addEventListener("pointermove",
Sh),document.addEventListener("pointerup",wj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Sh);document.removeEventListener("pointerup",wj,{capture:!0})}}},[pc,Zd,nd]);(0,Sf.useEffect)(()=>{const eg=()=>Zd(!1);window.addEventListener("blur",eg);window.addEventListener("resize",eg);return()=>{window.removeEventListener("blur",eg);window.removeEventListener("resize",eg)}},[Zd]);const [Ld,$e]=Pl(eg=>{const oh=Ue().filter(vk=>!vk.disabled),Sh=oh.find(vk=>vk.ref.current===
document.activeElement),wj=El(oh,eg,Sh);wj&&setTimeout(()=>wj.ref.current.focus())}),Df=(0,Sf.useCallback)((eg,oh,Sh)=>{Sh=!lf.current&&!Sh;if(void 0!==bc.value&&bc.value===oh||Sh)Ud(eg),Sh&&(lf.current=!0)},[bc.value]),kg=(0,Sf.useCallback)(()=>null===pc||void 0===pc?void 0:pc.focus(),[pc]),Uf=(0,Sf.useCallback)((eg,oh,Sh)=>{Sh=!lf.current&&!Sh;(void 0!==bc.value&&bc.value===oh||Sh)&&re(eg)},[bc.value]),wg="popper"===L?My:wC,uh=wg===My?{side:Ha,sideOffset:Ua,align:$a,alignOffset:jb,arrowPadding:mb,
collisionBoundary:Kb,collisionPadding:Vb,sticky:Ob,hideWhenDetached:jc,avoidCollisions:xc}:{};return(0,Sf.createElement)(Pr,{scope:m,content:pc,viewport:Rc,onViewportChange:Tc,itemRefCallback:Df,selectedItem:Dd,onItemLeave:kg,itemTextRefCallback:Uf,focusSelectedItem:qd,selectedItemText:kf,position:L,isPositioned:Tf,searchRef:Ld},(0,Sf.createElement)(Ik,{as:lq,allowPinchZoom:!0},(0,Sf.createElement)(pC,{asChild:!0,trapped:bc.open,onMountAutoFocus:eg=>{eg.preventDefault()},onUnmountAutoFocus:vg(ha,
eg=>{var oh;null===(oh=bc.trigger)||void 0===oh||oh.focus({preventScroll:!0});eg.preventDefault()})},(0,Sf.createElement)(gh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:na,onPointerDownOutside:ua,onFocusOutside:eg=>eg.preventDefault(),onDismiss:()=>bc.onOpenChange(!1)},(0,Sf.createElement)(wg,nf({role:"listbox",id:bc.contentId,"data-state":bc.open?"open":"closed",dir:bc.dir,onContextMenu:eg=>eg.preventDefault()},a,uh,{onPlaced:()=>gf(!0),ref:d,style:qe({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:vg(a.onKeyDown,eg=>{var oh=eg.ctrlKey||eg.altKey||eg.metaKey;"Tab"===eg.key&&eg.preventDefault();oh||1!==eg.key.length||$e(eg.key);if(["ArrowUp","ArrowDown","Home","End"].includes(eg.key)){let Sh=Ue().filter(wj=>!wj.disabled).map(wj=>wj.ref.current);["ArrowUp","End"].includes(eg.key)&&(Sh=Sh.slice().reverse());["ArrowUp","ArrowDown"].includes(eg.key)&&(oh=Sh.indexOf(eg.target),Sh=Sh.slice(oh+1));setTimeout(()=>Yd(Sh));eg.preventDefault()}})}))))))}),wC=(0,Sf.forwardRef)((a,
d)=>{const {__scopeSelect:m,onPlaced:L}=a;a=ag(a,["__scopeSelect","onPlaced"]);const ha=sq("SelectContent",m);var na=Ko("SelectContent",m);const [ua,Ha]=(0,Sf.useState)(null),[Ua,$a]=(0,Sf.useState)(null);d=Uh(d,Rc=>$a(Rc));const jb=Cw(m),mb=(0,Sf.useRef)(!1),Kb=(0,Sf.useRef)(!0),{viewport:Vb,selectedItem:Ob,selectedItemText:jc,focusSelectedItem:xc}=na,bc=(0,Sf.useCallback)(()=>{if(ha.trigger&&ha.valueNode&&ua&&Ua&&Vb&&Ob&&jc){var Rc=ha.trigger.getBoundingClientRect(),Tc=Ua.getBoundingClientRect(),
Dd=ha.valueNode.getBoundingClientRect(),Ud=jc.getBoundingClientRect();"rtl"!==ha.dir?(Ud=Dd.left-(Ud.left-Tc.left),Dd=Rc.width+(Rc.left-Ud),Tc=yo(Ud,[10,window.innerWidth-10-Math.max(Dd,Tc.width)]),ua.style.minWidth=Dd+"px",ua.style.left=Tc+"px"):(Ud=window.innerWidth-Dd.right-(Tc.right-Ud.right),Dd=Rc.width+(window.innerWidth-Rc.right-Ud),Tc=yo(Ud,[10,window.innerWidth-10-Math.max(Dd,Tc.width)]),ua.style.minWidth=Dd+"px",ua.style.right=Tc+"px");const lf=jb();Tc=window.innerHeight-20;var kf=Vb.scrollHeight,
re=window.getComputedStyle(Ua);Dd=parseInt(re.borderTopWidth,10);var Ue=parseInt(re.paddingTop,10);Ud=parseInt(re.borderBottomWidth,10);re=parseInt(re.paddingBottom,10);var Tf=Dd+Ue+kf+re+Ud;kf=Math.min(5*Ob.offsetHeight,Tf);var gf=window.getComputedStyle(Vb);re=parseInt(gf.paddingTop,10);gf=parseInt(gf.paddingBottom,10);const Yd=Rc.top+Rc.height/2-10,qd=Tc-Yd;Rc=Ob.offsetHeight/2;Ue=Dd+Ue+(Ob.offsetTop+Rc);Tf-=Ue;Ue<=Yd?(Dd=Ob===lf[lf.length-1].ref.current,ua.style.bottom="0px",ua.style.height=Ue+
Math.max(qd,Rc+(Dd?gf:0)+(Ua.clientHeight-Vb.offsetTop-Vb.offsetHeight)+Ud)+"px"):(Ud=Ob===lf[0].ref.current,ua.style.top="0px",ua.style.height=Math.max(Yd,Dd+Vb.offsetTop+(Ud?re:0)+Rc)+Tf+"px",Vb.scrollTop=Ue-Yd+Vb.offsetTop);ua.style.margin="10px 0";ua.style.minHeight=kf+"px";ua.style.maxHeight=Tc+"px";null===L||void 0===L||L();requestAnimationFrame(()=>mb.current=!0)}},[jb,ha.trigger,ha.valueNode,ua,Ua,Vb,Ob,jc,ha.dir,L]);Fm(()=>bc(),[bc]);const [pc,lc]=(0,Sf.useState)();Fm(()=>{Ua&&lc(window.getComputedStyle(Ua).zIndex)},
[Ua]);na=(0,Sf.useCallback)(Rc=>{Rc&&!0===Kb.current&&(bc(),null===xc||void 0===xc||xc(),Kb.current=!1)},[bc,xc]);return(0,Sf.createElement)($t,{scope:m,contentWrapper:ua,shouldExpandOnScrollRef:mb,onScrollButtonChange:na},(0,Sf.createElement)("div",{ref:Ha,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:pc}},(0,Sf.createElement)(xl.div,nf({},a,{ref:d,style:qe({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),My=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,align:L=
"start",collisionPadding:ha=10}=a;a=ag(a,["__scopeSelect","align","collisionPadding"]);const na=Zt(m);return(0,Sf.createElement)(Hy,nf({},na,a,{ref:d,align:L,collisionPadding:ha,style:Bf(qe({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[$t,Qr]=Yt("SelectContent",{}),ev=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m}=a;a=ag(a,["__scopeSelect"]);const L=Ko("SelectViewport",m),ha=Qr("SelectViewport",m);d=Uh(d,L.onViewportChange);const na=(0,Sf.useRef)(0);return(0,Sf.createElement)(Sf.Fragment,null,(0,Sf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Sf.createElement)(Xt.Slot,{scope:m},(0,Sf.createElement)(xl.div,nf({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:qe({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:vg(a.onScroll,ua=>{ua=ua.currentTarget;const {contentWrapper:Ha,shouldExpandOnScrollRef:Ua}=ha;if(null!==Ua&&void 0!==Ua&&Ua.current&&Ha){var $a=Math.abs(na.current-ua.scrollTop);if(0<$a){var jb=window.innerHeight-20,mb=parseFloat(Ha.style.minHeight);const Kb=parseFloat(Ha.style.height);mb=Math.max(mb,
Kb);mb<jb&&($a=mb+$a,jb=Math.min(jb,$a),$a-=jb,Ha.style.height=jb+"px","0px"===Ha.style.bottom&&(ua.scrollTop=0<$a?$a:0,Ha.style.justifyContent="flex-end"))}}na.current=ua.scrollTop})}))))});Yt("SelectGroup");var [fv,gv]=Yt("SelectItem"),Rr=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,value:L,disabled:ha=!1,textValue:na}=a;a=ag(a,["__scopeSelect","value","disabled","textValue"]);const ua=sq("SelectItem",m),Ha=Ko("SelectItem",m),Ua=ua.value===L,[$a,jb]=(0,Sf.useState)(null!==na&&void 0!==na?na:
""),[mb,Kb]=(0,Sf.useState)(!1);d=Uh(d,jc=>{var xc;return null===(xc=Ha.itemRefCallback)||void 0===xc?void 0:xc.call(Ha,jc,L,ha)});const Vb=Ai(),Ob=()=>{ha||(ua.onValueChange(L),ua.onOpenChange(!1))};return(0,Sf.createElement)(fv,{scope:m,value:L,disabled:ha,textId:Vb,isSelected:Ua,onItemTextChange:(0,Sf.useCallback)(jc=>{jb(xc=>{var bc;return xc||(null!==(bc=null===jc||void 0===jc?void 0:jc.textContent)&&void 0!==bc?bc:"").trim()})},[])},(0,Sf.createElement)(Xt.ItemSlot,{scope:m,value:L,disabled:ha,
textValue:$a},(0,Sf.createElement)(xl.div,nf({role:"option","aria-labelledby":Vb,"data-highlighted":mb?"":void 0,"aria-selected":Ua&&mb,"data-state":Ua?"checked":"unchecked","aria-disabled":ha||void 0,"data-disabled":ha?"":void 0,tabIndex:ha?void 0:-1},a,{ref:d,onFocus:vg(a.onFocus,()=>Kb(!0)),onBlur:vg(a.onBlur,()=>Kb(!1)),onPointerUp:vg(a.onPointerUp,Ob),onPointerMove:vg(a.onPointerMove,jc=>{if(ha){var xc;null===(xc=Ha.onItemLeave)||void 0===xc||xc.call(Ha)}else jc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:vg(a.onPointerLeave,jc=>{if(jc.currentTarget===document.activeElement){var xc;null===(xc=Ha.onItemLeave)||void 0===xc||xc.call(Ha)}}),onKeyDown:vg(a.onKeyDown,jc=>{var xc;if(""===(null===(xc=Ha.searchRef)||void 0===xc?void 0:xc.current)||" "!==jc.key)sC.includes(jc.key)&&Ob()," "===jc.key&&jc.preventDefault()})}))))}),jp=(0,Sf.forwardRef)((a,d)=>{var {__scopeSelect:m}=a;a=ag(a,["__scopeSelect","className","style"]);const L=sq("SelectItemText",m),ha=Ko("SelectItemText",m),na=gv("SelectItemText",
m);m=Jy("SelectItemText",m);const [ua,Ha]=(0,Sf.useState)(null);d=Uh(d,Kb=>Ha(Kb),na.onItemTextChange,Kb=>{var Vb;return null===(Vb=ha.itemTextRefCallback)||void 0===Vb?void 0:Vb.call(ha,Kb,na.value,na.disabled)});const Ua=null===ua||void 0===ua?void 0:ua.textContent,$a=(0,Sf.useMemo)(()=>(0,Sf.createElement)("option",{key:na.value,value:na.value,disabled:na.disabled},Ua),[na.disabled,na.value,Ua]),{onNativeOptionAdd:jb,onNativeOptionRemove:mb}=m;Fm(()=>{jb($a);return()=>mb($a)},[jb,mb,$a]);return(0,Sf.createElement)(Sf.Fragment,
null,(0,Sf.createElement)(xl.span,nf({id:na.textId},a,{ref:d})),na.isSelected&&L.valueNode&&!L.valueNodeHasChildren?(0,Tt.createPortal)(a.children,L.valueNode):null)}),xC=(0,Sf.forwardRef)((a,d)=>{const m=Ko("SelectScrollUpButton",a.__scopeSelect),L=Qr("SelectScrollUpButton",a.__scopeSelect),[ha,na]=(0,Sf.useState)(!1);d=Uh(d,L.onScrollButtonChange);Fm(()=>{if(m.viewport&&m.isPositioned){let ua=function(){na(0<Ha.scrollTop)};const Ha=m.viewport;ua();Ha.addEventListener("scroll",ua);return()=>Ha.removeEventListener("scroll",
ua)}},[m.viewport,m.isPositioned]);return ha?(0,Sf.createElement)(Ss,nf({},a,{ref:d,onAutoScroll:()=>{const {viewport:ua,selectedItem:Ha}=m;ua&&Ha&&(ua.scrollTop-=Ha.offsetHeight)}})):null}),Lo=(0,Sf.forwardRef)((a,d)=>{const m=Ko("SelectScrollDownButton",a.__scopeSelect),L=Qr("SelectScrollDownButton",a.__scopeSelect),[ha,na]=(0,Sf.useState)(!1);d=Uh(d,L.onScrollButtonChange);Fm(()=>{if(m.viewport&&m.isPositioned){let ua=function(){na(Math.ceil(Ha.scrollTop)<Ha.scrollHeight-Ha.clientHeight)};const Ha=
m.viewport;ua();Ha.addEventListener("scroll",ua);return()=>Ha.removeEventListener("scroll",ua)}},[m.viewport,m.isPositioned]);return ha?(0,Sf.createElement)(Ss,nf({},a,{ref:d,onAutoScroll:()=>{const {viewport:ua,selectedItem:Ha}=m;ua&&Ha&&(ua.scrollTop+=Ha.offsetHeight)}})):null}),Ss=(0,Sf.forwardRef)((a,d)=>{const {__scopeSelect:m,onAutoScroll:L}=a;a=ag(a,["__scopeSelect","onAutoScroll"]);const ha=Ko("SelectScrollButton",m),na=(0,Sf.useRef)(null),ua=Cw(m),Ha=(0,Sf.useCallback)(()=>{null!==na.current&&
(window.clearInterval(na.current),na.current=null)},[]);(0,Sf.useEffect)(()=>()=>Ha(),[Ha]);Fm(()=>{var Ua;const $a=ua().find(jb=>jb.ref.current===document.activeElement);null===$a||void 0===$a||null===(Ua=$a.ref.current)||void 0===Ua||Ua.scrollIntoView({block:"nearest"})},[ua]);return(0,Sf.createElement)(xl.div,nf({"aria-hidden":!0},a,{ref:d,style:qe({flexShrink:0},a.style),onPointerMove:vg(a.onPointerMove,()=>{var Ua;null===(Ua=ha.onItemLeave)||void 0===Ua||Ua.call(ha);null===na.current&&(na.current=
window.setInterval(L,50))}),onPointerLeave:vg(a.onPointerLeave,()=>{Ha()})}))}),hv=(0,Sf.forwardRef)((a,d)=>{const {value:m}=a;a=ag(a,["value"]);const L=(0,Sf.useRef)(null);d=Uh(d,L);const ha=Jn(m);(0,Sf.useEffect)(()=>{const na=L.current,ua=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ha!==m&&ua){const Ha=new Event("change",{bubbles:!0});ua.call(na,m);na.dispatchEvent(Ha)}},[ha,m]);return(0,Sf.createElement)(Nr,{asChild:!0},(0,Sf.createElement)("select",nf({},
a,{ref:d,defaultValue:m})))});hv.displayName="BubbleSelect";var Sr=a=>{const {__scopeSelect:d,children:m,open:L,defaultOpen:ha,onOpenChange:na,value:ua,defaultValue:Ha,onValueChange:Ua,dir:$a,name:jb,autoComplete:mb,disabled:Kb,required:Vb}=a,Ob=Zt(d),[jc,xc]=(0,Sf.useState)(null),[bc,pc]=(0,Sf.useState)(null),[lc,Rc]=(0,Sf.useState)(!1),Tc=Wn($a),[Dd=!1,Ud]=oi({prop:L,defaultProp:ha,onChange:na}),[kf,re]=oi({prop:ua,defaultProp:Ha,onChange:Ua}),Ue=(0,Sf.useRef)(null),Tf=jc?!!jc.closest("form"):!0,
[gf,lf]=(0,Sf.useState)(new Set),Yd=Array.from(gf).map(qd=>qd.props.value).join(";");return(0,Sf.createElement)(qC,Ob,(0,Sf.createElement)(vH,{required:Vb,scope:d,trigger:jc,onTriggerChange:xc,valueNode:bc,onValueNodeChange:pc,valueNodeHasChildren:lc,onValueNodeHasChildrenChange:Rc,contentId:Ai(),value:kf,onValueChange:re,open:Dd,onOpenChange:Ud,dir:Tc,triggerPointerDownPosRef:Ue,disabled:Kb},(0,Sf.createElement)(Xt.Provider,{scope:d},(0,Sf.createElement)(Iy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Sf.useCallback)(qd=>
{lf(Zd=>(new Set(Zd)).add(qd))},[]),onNativeOptionRemove:(0,Sf.useCallback)(qd=>{lf(Zd=>{Zd=new Set(Zd);Zd.delete(qd);return Zd})},[])},m)),Tf?(0,Sf.createElement)(hv,{key:Yd,"aria-hidden":!0,required:Vb,tabIndex:-1,name:jb,autoComplete:mb,value:kf,onChange:qd=>re(qd.target.value),disabled:Kb},void 0===kf?(0,Sf.createElement)("option",{value:""}):null,Array.from(gf)):null))},yC=Ky,AC=tC,BC=uC,Gm=a=>(0,Sf.createElement)(uH,nf({asChild:!0},a)),Ny=vC,zC=ev,bo=Rr,Kd=jp,CC=xC,ti=Lo,yh=ba(614),DC=Jf(ba(22)),
iv=ba(614),Hm=ba(614),EC=If(function(){const a=Ie(),{handlers:{t:d}}=om.useContext(kj),m=om.useCallback(ua=>{a.api.setColor(ua)},[]),L=om.useCallback(ua=>{(ua=ua.currentTarget.dataset.tool)&&a.selectTool(ua)},[]),[ha,na]=om.useState(()=>{var ua;return null!=(ua=Object.values(or).find(Ha=>Ha===a.selectedTool.id))?ua:Object.values(or)[0]});om.useEffect(()=>{na(ua=>{var Ha;return null!=(Ha=Object.values(or).find(Ua=>Ua===a.selectedTool.id))?Ha:ua})},[a.selectedTool.id]);return(0,Hm.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,Hm.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Hm.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,Hm.jsx)(Bp,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Hm.jsx)(Ay,{activeGeometry:ha,setGeometry:L}),(0,Hm.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Hm.jsx)(Xm,{popoverSide:"left",color:a.settings.color,setColor:m}),(0,Hm.jsx)(Uo,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Oy=ba(614),Dw=If(function(){const a=Ie();return(0,Oy.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Oy.jsx)("div",{style:{flex:1}}),(0,Oy.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Ts=ba(614),FC=If(function(){const a=Ie();return(0,Ts.jsxs)(Ts.Fragment,{children:[Mb()&&(0,Ts.jsx)(Dw,{}),Mb()&&(0,Ts.jsx)(Ho,{}),!a.readOnly&&(0,Ts.jsx)(EC,{}),(0,Ts.jsx)(kC,{})]})}),Mo=Jf(ba(22)),$l=Jf(ba(22)),Py=Jf(ba(22)),GC=Jf(ba(22)),Xq=ba(614),Qy=({id:a,showReferenceContent:d=
!1})=>{var m;const {handlers:{isWhiteboardPage:L,redirectToPage:ha,sidebarAddBlock:na,queryBlockByUUID:ua},renderers:{Breadcrumb:Ha,PageName:Ua}}=GC.default.useContext(kj);var $a="";let jb=Wg(a)?"B":"P",mb="";if(Wg(a)){$a=ua(a);if(!$a)return(0,Xq.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});mb=$a.content;$a="whiteboard-shape"===(null==(m=$a.properties)?void 0:m["ls-type"])?"link-to-whiteboard":"link-to-block"}else $a=L(a)?"link-to-whiteboard":"link-to-page";m=mb&&
23<mb.length?mb.slice(0,20)+"...":mb;return(0,Xq.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Kb=>{Kb.stopPropagation();Kb.shiftKey?na(a,"B"===jb?"block":"page"):ha(a)},children:[(0,Xq.jsx)(Wh,{name:$a}),(0,Xq.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===jb?(0,Xq.jsx)(Ua,{pageName:a}):(0,Xq.jsxs)(Xq.Fragment,{children:[(0,Xq.jsx)(Ha,{levelLimit:1,blockId:a,endSeparator:d}),d&&m]})})]})},Kk=Jf(ba(22)),Nn=ba(22),HC=["children"],
au="undefined"!==typeof document?Nn.useLayoutEffect:Nn.useEffect,Ph=Jf(ba(22)),li=ba(22),IC=ba(31),jv,Ml,wH="undefined"!=typeof document?li.useLayoutEffect:li.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Ml||={});var JC=((jv={})[Ml.DEBUG]="debug",jv[Ml.INFO]="log",jv[Ml.WARN]="warn",jv[Ml.ERROR]="error",jv),Yq=Di(function(){var a=rg(Ml.ERROR);return{log:rg(function(d,m,L){var ha;void 0===L&&(L=Ml.INFO);L>=(null!=(ha=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?ha:a(4))&&console[JC[L]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,m)}),logLevel:a}},[],{singleton:!0}),On=Di(function(){var a=fh(),d=fh(),m=rg(0),L=fh(),ha=rg(0),na=fh(),ua=fh(),Ha=rg(0),Ua=rg(0),$a=rg(0),jb=rg(0),mb=fh(),Kb=fh(),Vb=rg(!1),Ob=rg(!1);return sg($f(a,Lg(function(jc){return jc.scrollTop})),d),sg($f(a,Lg(function(jc){return jc.scrollHeight})),ua),sg(d,ha),{scrollContainerState:a,scrollTop:d,viewportHeight:na,
headerHeight:Ha,fixedHeaderHeight:Ua,fixedFooterHeight:$a,footerHeight:jb,scrollHeight:ua,smoothScrollTargetReached:L,react18ConcurrentRendering:Ob,scrollTo:mb,scrollBy:Kb,statefulScrollTop:ha,deviation:m,scrollingInProgress:Vb}},[],{singleton:!0}),gj={lvl:0},Ry=Di(function(){return{recalcInProgress:rg(!1)}},[],{singleton:!0}),xH={offsetHeight:"height",offsetWidth:"width"},Zq=Di(function(a){var d=a[0].log,m=a[1].recalcInProgress;a=fh();var L=fh(),ha=Qj(L,0),na=fh(),ua=fh(),Ha=rg(0),Ua=rg([]),$a=rg(void 0),
jb=rg(void 0),mb=rg(function(pc,lc){return Vi(pc,xH[lc])}),Kb=rg(void 0),Vb=rg(0),Ob={offsetTree:[],sizeTree:gj,groupOffsetTree:gj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},jc=Qj($f(a,ei(Ua,d,Vb),hk(Ci,Ob),pi()),Ob);sg($f(Ua,Ig(function(pc){return 0<pc.length}),ei(jc,Vb),Lg(function(pc){var lc=pc[0],Rc=pc[1],Tc=pc[2];pc=lc.reduce(function(Dd,Ud,kf){return Aa(Dd,Ud,zi(Ud,Rc.offsetTree,Tc)||kf)},gj);return Lh({},Rc,{groupIndices:lc,groupOffsetTree:pc})})),jc);sg($f(L,ei(jc),Ig(function(pc){return pc[0]<
pc[1].lastIndex}),Lg(function(pc){var lc=pc[1];return[{startIndex:pc[0],endIndex:lc.lastIndex,size:lc.lastSize}]})),a);sg($a,jb);var xc=Qj($f($a,Lg(function(pc){return void 0===pc})),!0);sg($f(jb,Ig(function(pc){return void 0!==pc&&jc(4).sizeTree===gj}),Lg(function(pc){return[{startIndex:0,endIndex:0,size:pc}]})),a);Ob=Ok($f(a,ei(jc),hk(function(pc,lc){lc=lc[1];return{changed:lc!==pc.sizes,sizes:lc}},{changed:!1,sizes:Ob}),Lg(function(pc){return pc.changed})));Qh($f(Ha,hk(function(pc,lc){return{diff:pc.prev-
lc,prev:lc}},{diff:0,prev:0}),Lg(function(pc){return pc.diff})),function(pc){0<pc?(m(0,!0),na(0,pc)):0>pc&&ua(0,pc)});Qh($f(Ha,ei(d)),function(pc){0>pc[0]&&(0,pc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ha},Ml.ERROR)});d=Ok(na);sg($f(na,ei(jc),Lg(function(pc){var lc=pc[0];pc=pc[1];if(0<pc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ia(pc.sizeTree).reduce(function(Rc,
Tc){var Dd=Tc.k;Tc=Tc.v;return{ranges:[].concat(Rc.ranges,[{startIndex:Rc.prevIndex,endIndex:Dd+lc-1,size:Rc.prevSize}]),prevIndex:Dd+lc,prevSize:Tc}},{ranges:[],prevIndex:0,prevSize:pc.lastSize}).ranges})),a);var bc=Ok($f(ua,ei(jc,Vb),Lg(function(pc){return zi(-pc[0],pc[1].offsetTree,pc[2])})));return sg($f(ua,ei(jc,Vb),Lg(function(pc){var lc=pc[0],Rc=pc[1];pc=pc[2];if(0<Rc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Tc=Ia(Rc.sizeTree).reduce(function(Dd,
Ud){return Aa(Dd,Math.max(0,Ud.k+lc),Ud.v)},gj);return Lh({},Rc,{sizeTree:Tc},hj(Rc.offsetTree,0,Tc,pc))})),jc),{data:Kb,totalCount:L,sizeRanges:a,groupIndices:Ua,defaultItemSize:jb,fixedItemSize:$a,unshiftWith:na,shiftWith:ua,shiftWithOffset:bc,beforeUnshiftWith:d,firstItemIndex:Ha,gap:Vb,sizes:jc,listRefresh:Ob,statefulTotalCount:ha,trackItemSizes:xc,itemSize:mb}},sj(Yq,Ry),{singleton:!0}),yH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,kv=Di(function(a){function d(){xc&&
(xc(),xc=null);pc&&(pc(),pc=null);bc&&(clearTimeout(bc),bc=null);Ha(0,!1)}var m=a[0],L=m.sizes,ha=m.totalCount,na=m.listRefresh;m=m.gap;var ua=a[1],Ha=ua.scrollingInProgress,Ua=ua.viewportHeight,$a=ua.scrollTo,jb=ua.smoothScrollTargetReached,mb=ua.headerHeight,Kb=ua.footerHeight,Vb=ua.fixedHeaderHeight;ua=ua.fixedFooterHeight;a=a[2].log;var Ob=fh(),jc=rg(0),xc=null,bc=null,pc=null;return sg($f(Ob,ei(L,Ua,ha,jc,mb,Kb,a),ei(m,Vb,ua),Lg(function(lc){var Rc=lc[0],Tc=Rc[0],Dd=Rc[1],Ud=Rc[2],kf=Rc[3],re=
Rc[4],Ue=Rc[5],Tf=Rc[6],gf=Rc[7],lf=lc[1];Rc=lc[2];lc=lc[3];var Yd=Fi(Tc),qd=Yd.align,Zd=Yd.behavior,nd=Yd.offset;--kf;Yd=Li(Yd,Dd,kf);Ue=zi(Yd,Dd.offsetTree,lf)+Ue;"end"===qd?(Ue+=Rc+ea(Dd.sizeTree,Yd)[1]-Ud+lc,Yd===kf&&(Ue+=Tf)):"center"===qd?Ue+=(Rc+ea(Dd.sizeTree,Yd)[1]-Ud+lc)/2:Ue-=re;nd&&(Ue+=nd);var Ld=function(Df){d();Df?(gf("retrying to scroll to",{location:Tc},Ml.DEBUG),Ob(0,Tc)):gf("list did not change, scroll successful",{},Ml.DEBUG)};if(d(),"smooth"===Zd){var $e=!1;pc=Qh(na,function(Df){$e=
$e||Df});xc=Yk(jb,function(){Ld($e)})}else xc=Yk($f(na,function(Df){var kg=setTimeout(function(){Df(!1)},150);return function(Uf){Uf&&(Df(!0),clearTimeout(kg))}}),Ld);bc=setTimeout(function(){d()},1200);Ha(0,!0);return gf("scrolling from index to",{index:Yd,top:Ue,behavior:Zd},Ml.DEBUG),{top:Ue,behavior:Zd}})),$a),{scrollToIndex:Ob,topListHeight:jc}},sj(Zq,On,Yq),{singleton:!0}),zH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
lv=Di(function(a){var d=a[0],m=d.scrollContainerState;a=d.scrollTop;var L=d.viewportHeight,ha=d.headerHeight,na=d.footerHeight,ua=d.scrollBy;d=rg(!1);var Ha=rg(!0),Ua=fh(),$a=fh(),jb=rg(4),mb=rg(0),Kb=Qj($f(Zp($f(ai(a),Ul(1),Bn(!0)),$f(ai(a),Ul(1),Bn(!1),Nj(100))),pi()),!1),Vb=Qj($f(Zp($f(ua,Bn(!0)),$f(ua,Bn(!1),Nj(200))),pi()),!1);sg($f(Yj(ai(a),ai(mb)),Lg(function(Ob){return Ob[0]<=Ob[1]}),pi()),Ha);sg($f(Ha,Ym(50)),$a);L=Ok($f(Yj(m,ai(L),ai(ha),ai(na),ai(jb)),hk(function(Ob,jc){var xc,bc,pc=jc[0],
lc=pc.scrollTop;pc=pc.scrollHeight;var Rc=jc[1],Tc={viewportHeight:Rc,scrollTop:lc,scrollHeight:pc};return lc+Rc-pc>-jc[4]?(lc>Ob.state.scrollTop?(xc="SCROLLED_DOWN",bc=Ob.state.scrollTop-lc):(xc="SIZE_DECREASED",bc=Ob.state.scrollTop-lc||Ob.scrollTopDelta),{atBottom:!0,state:Tc,atBottomBecause:xc,scrollTopDelta:bc}):{atBottom:!1,notAtBottomBecause:Tc.scrollHeight>Ob.state.scrollHeight?"SIZE_INCREASED":Rc<Ob.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":lc<Ob.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Tc}},zH),pi(function(Ob,jc){return Ob&&Ob.atBottom===jc.atBottom})));ha=Qj($f(m,hk(function(Ob,jc){var xc=jc.scrollTop,bc=jc.scrollHeight;jc=jc.viewportHeight;return 1.01>Math.abs(Ob.scrollHeight-bc)?{scrollTop:xc,scrollHeight:bc,jump:0,changed:!1}:Ob.scrollTop!==xc&&1>bc-(xc+jc)?{scrollHeight:bc,scrollTop:xc,jump:Ob.scrollTop-xc,changed:!0}:{scrollHeight:bc,scrollTop:xc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ig(function(Ob){return Ob.changed}),
Lg(function(Ob){return Ob.jump})),0);sg($f(L,Lg(function(Ob){return Ob.atBottom})),d);sg($f(d,Ym(50)),Ua);na=rg("down");sg($f(m,Lg(function(Ob){return Ob.scrollTop}),pi(),hk(function(Ob,jc){return Vb(4)?{direction:Ob.direction,prevScrollTop:jc}:{direction:jc<Ob.prevScrollTop?"up":"down",prevScrollTop:jc}},{direction:"down",prevScrollTop:0}),Lg(function(Ob){return Ob.direction})),na);sg($f(m,Ym(50),Bn("none")),na);m=rg(0);return sg($f(Kb,Ig(function(Ob){return!Ob}),Bn(0)),m),sg($f(a,Ym(100),ei(Kb),
Ig(function(Ob){return!!Ob[1]}),hk(function(Ob,jc){return[Ob[1],jc[0]]},[0,0]),Lg(function(Ob){return Ob[1]-Ob[0]})),m),{isScrolling:Kb,isAtTop:Ha,isAtBottom:d,atBottomState:L,atTopStateChange:$a,atBottomStateChange:Ua,scrollDirection:na,atBottomThreshold:jb,atTopThreshold:mb,scrollVelocity:m,lastJumpDueToItemResize:ha}},sj(On)),Us=Di(function(a){var d=a[0].log;a=rg(!1);var m=Ok($f(a,Ig(function(L){return L}),pi()));return Qh(a,function(L){L&&d(4)("props updated",{},Ml.DEBUG)}),{propsReady:a,didMount:m}},
sj(Yq),{singleton:!0}),Ew=Di(function(a){var d=a[0],m=d.sizes,L=d.listRefresh;d=d.defaultItemSize;var ha=a[1].scrollTop,na=a[2].scrollToIndex;a=a[3].didMount;var ua=rg(!0),Ha=rg(0);return sg($f(a,ei(Ha),Ig(function(Ua){return!!Ua[1]}),Bn(!1)),ua),Qh($f(Yj(L,a),ei(ua,m,d),Ig(function(Ua){var $a=Ua[1],jb=Ua[3];return Ua[0][1]&&(Ua[2].sizeTree!==gj||void 0!==jb)&&!$a}),ei(Ha)),function(Ua){var $a=Ua[1];setTimeout(function(){Yk(ha,function(){ua(0,!0)});na(0,$a)})}),{scrolledToInitialItem:ua,initialTopMostItemIndex:Ha}},
sj(Zq,On,kv,Us),{singleton:!0}),KC=Di(function(a){function d(jc){Ua(0,{index:"LAST",align:"end",behavior:jc})}function m(jc){var xc=Yk(Ha,function(bc){!jc||bc.atBottom||"SIZE_INCREASED"!==bc.notAtBottomBecause||Ob||(mb(4)("scrolling to bottom due to increased size",{},Ml.DEBUG),d("auto"))});setTimeout(xc,100)}var L=a[0],ha=L.totalCount,na=L.listRefresh,ua=a[1];L=ua.isAtBottom;var Ha=ua.atBottomState,Ua=a[2].scrollToIndex;ua=a[3].scrolledToInitialItem;var $a=a[4],jb=$a.propsReady;$a=$a.didMount;var mb=
a[5].log;a=a[6].scrollingInProgress;var Kb=rg(!1),Vb=fh(),Ob=null;return Qh($f(Yj($f(ai(ha),Ul(1)),$a),ei(ai(Kb),L,ua,a),Lg(function(jc){var xc=jc[0],bc=xc[0];xc=xc[1]&&jc[3];var pc="auto";xc&&(pc=jc[1],jc=jc[2]||jc[4],pc="function"==typeof pc?Gi(pc(jc)):jc&&Gi(pc),xc=xc&&!!pc);return{totalCount:bc,shouldFollow:xc,followOutputBehavior:pc}}),Ig(function(jc){return jc.shouldFollow})),function(jc){var xc=jc.totalCount,bc=jc.followOutputBehavior;Ob&&(Ob(),Ob=null);Ob=Yk(na,function(){mb(4)("following output to ",
{totalCount:xc},Ml.DEBUG);d(bc);Ob=null})}),Qh($f(Yj(ai(Kb),ha,jb),Ig(function(jc){return jc[0]&&jc[2]}),hk(function(jc,xc){xc=xc[1];return{refreshed:jc.value===xc,value:xc}},{refreshed:!1,value:0}),Ig(function(jc){return jc.refreshed}),ei(Kb,ha)),function(jc){m(!1!==jc[1])}),Qh(Vb,function(){m(!1!==Kb(4))}),Qh(Yj(ai(Kb),Ha),function(jc){var xc=jc[1];jc[0]&&!xc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===xc.notAtBottomBecause&&d("auto")}),{followOutput:Kb,autoscrollToBottom:Vb}},sj(Zq,lv,kv,Ew,Us,Yq,
On)),Sy=Di(function(a){var d=a[0],m=d.totalCount,L=d.groupIndices;d=d.sizes;var ha=a[1];a=ha.scrollTop;ha=ha.headerHeight;var na=fh(),ua=fh(),Ha=Ok($f(na,Lg(Ji)));return sg($f(Ha,Lg(function(Ua){return Ua.totalCount})),m),sg($f(Ha,Lg(function(Ua){return Ua.groupIndices})),L),sg($f(Yj(a,d,ha),Ig(function(Ua){return Ua[1].groupOffsetTree!==gj}),Lg(function(Ua){return ea(Ua[1].groupOffsetTree,Math.max(Ua[0]-Ua[2],0),"v")[0]}),pi(),Lg(function(Ua){return[Ua]})),ua),{groupCounts:na,topItemsIndexes:ua}},
sj(Zq,On)),Ty=Di(function(a){var d=a[0];a=d.scrollTop;var m=d.viewportHeight,L=d.deviation,ha=d.headerHeight,na=d.fixedHeaderHeight;d=fh();var ua=rg(0),Ha=rg(0),Ua=rg(0);a=Qj($f(Yj(ai(a),ai(m),ai(ha),ai(d,Rj),ai(Ua),ai(ua),ai(na),ai(L),ai(Ha)),Lg(function($a){var jb=$a[0],mb=$a[1],Kb=$a[2],Vb=$a[3],Ob=Vb[0];Vb=Vb[1];var jc=$a[4],xc=$a[6],bc=$a[7],pc=$a[8],lc=jb-bc;$a=$a[5]+xc;var Rc=Math.max(Kb-lc,0),Tc="none",Dd="number"==typeof pc?pc:pc.top||0;pc="number"==typeof pc?pc:pc.bottom||0;return Ob-=bc,
Vb+=Kb+xc,Ob+(Kb+xc)>jb+$a-Dd&&(Tc="up"),Vb-bc<jb-Rc+mb+pc&&(Tc="down"),"none"!==Tc?[Math.max(lc-Kb-tl(jc,"top",Tc)-Dd,0),lc-Rc-xc+mb+tl(jc,"bottom",Tc)+pc]:null}),Ig(function($a){return null!=$a}),pi(Rj)),[0,0]);return{listBoundary:d,overscan:Ua,topListHeight:ua,increaseViewportBy:Ha,visibleRange:a}},sj(On),{singleton:!0}),LC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},bu=Di(function(a){var d=a[0],m=d.sizes,L=d.totalCount,ha=d.data,
na=d.firstItemIndex,ua=d.gap,Ha=a[1],Ua=a[2],$a=Ua.visibleRange;d=Ua.listBoundary;Ua=Ua.topListHeight;var jb=a[3],mb=jb.scrolledToInitialItem,Kb=jb.initialTopMostItemIndex;jb=a[4].topListHeight;var Vb=a[5],Ob=a[6].didMount,jc=a[7].recalcInProgress;a=rg([]);var xc=fh();sg(Ha.topItemsIndexes,a);m=Qj($f(Yj(Ob,jc,ai($a,Rj),ai(L),ai(m),ai(Kb),mb,ai(a),ai(na),ai(ua),ha),Ig(function(bc){return bc[0]&&!bc[1]}),Lg(function(bc){var pc=bc[2],lc=pc[0],Rc=pc[1];pc=bc[3];var Tc=bc[5],Dd=bc[6],Ud=bc[7],kf=bc[8],
re=bc[9],Ue=bc[10];bc=bc[4];var Tf=bc.sizeTree,gf=bc.offsetTree;if(0===pc||0===lc&&0===Rc)return Lh({},LC,{totalCount:pc});if(Tf===gj)return Wm(function(Uf,wg,uh){return wg.groupOffsetTree!==gj?(Uf=ci(Uf,wg),[{index:ea(wg.groupOffsetTree,Uf)[0],size:0,offset:0},{index:Uf,size:0,offset:0,data:uh&&uh[0]}]):[{index:Uf,size:0,offset:0,data:uh&&uh[0]}]}("number"==typeof Tc?Tc:"LAST"===Tc.index?pc-1:Tc.index,bc,Ue),[],pc,re,bc,kf);Tc=[];if(0<Ud.length){var lf,Yd=Ud[0],qd=Ud[Ud.length-1],Zd=0;for(Tf=vm(Xc(Tf,
Yd,qd));!(lf=Tf()).done;){var nd=lf.value;lf=nd.value;var Ld=Math.min(nd.end,qd);for(nd=Math.max(nd.start,Yd);nd<=Ld;nd++)Tc.push({index:nd,size:lf,offset:Zd,data:Ue&&Ue[nd]}),Zd+=lf}}if(!Dd)return Wm([],Tc,pc,re,bc,kf);var $e=0<Ud.length?Ud[Ud.length-1]+1:0,Df=function(Uf,wg,uh,eg){return void 0===eg&&(eg=0),0<eg&&(wg=Math.max(wg,Uf[Me(Uf,eg,nh)].offset)),Ed((Sh=uh,vk=Me(oh=Uf,wg,wj=$i),Mk=Me(oh,Sh,wj,vk),oh.slice(vk,Mk+1)),dh);var oh,Sh,wj,vk,Mk}(gf,lc,Rc,$e);if(0===Df.length)return null;var kg=
pc-1;return Wm(rj([],function(Uf){for(var wg,uh=vm(Df);!(wg=uh()).done;){var eg=wg.value,oh=eg.value;wg=oh.offset;var Sh=eg.start,wj=oh.size;oh.offset<lc&&(oh=(Sh+=Math.floor((lc-oh.offset+re)/(wj+re)))-eg.start,wg+=oh*wj+oh*re);Sh<$e&&(wg+=($e-Sh)*wj,Sh=$e);for(eg=Math.min(eg.end,kg);Sh<=eg&&!(wg>=Rc);Sh++)Uf.push({index:Sh,size:wj,offset:wg,data:Ue&&Ue[Sh]}),wg+=wj+re}}),Tc,pc,re,bc,kf)}),Ig(function(bc){return null!==bc}),pi()),LC);return sg($f(ha,Ig(function(bc){return void 0!==bc}),Lg(function(bc){return bc.length})),
L),sg($f(m,Lg(function(bc){return bc.topListHeight})),jb),sg(jb,Ua),sg($f(m,Lg(function(bc){return[bc.top,bc.bottom]})),d),sg($f(m,Lg(function(bc){return bc.items})),xc),Lh({listState:m,topItemsIndexes:a,endReached:Ok($f(m,Ig(function(bc){return 0<bc.items.length}),ei(L,ha),Ig(function(bc){var pc=bc[0].items;return pc[pc.length-1].originalIndex===bc[1]-1}),Lg(function(bc){return[bc[1]-1,bc[2]]}),pi(Rj),Lg(function(bc){return bc[0]}))),startReached:Ok($f(m,Ym(200),Ig(function(bc){var pc=bc.items;return 0<
pc.length&&pc[0].originalIndex===bc.topItems.length}),Lg(function(bc){return bc.items[0].index}),pi())),rangeChanged:Ok($f(m,Ig(function(bc){return 0<bc.items.length}),Lg(function(bc){bc=bc.items;for(var pc=0,lc=bc.length-1;"group"===bc[pc].type&&pc<lc;)pc++;for(;"group"===bc[lc].type&&lc>pc;)lc--;return{startIndex:bc[pc].index,endIndex:bc[lc].index}}),pi(Pk))),itemsRendered:xc},Vb)},sj(Zq,Sy,Ty,Ew,kv,lv,Us,Ry),{singleton:!0}),AH=Di(function(a){var d=a[0],m=d.sizes,L=d.firstItemIndex,ha=d.data;d=
d.gap;var na=a[1].listState;a=a[2].didMount;var ua=rg(0);return sg($f(a,ei(ua),Ig(function(Ha){return 0!==Ha[1]}),ei(m,L,d,ha),Lg(function(Ha){var Ua=Ha[0][1],$a=Ha[1],jb=Ha[2],mb=Ha[3];Ha=Ha[4];var Kb=void 0===Ha?[]:Ha;Ha=0;if(0<$a.groupIndices.length)for(var Vb,Ob=vm($a.groupIndices);!((Vb=Ob()).done||Vb.value-Ha>=Ua);)Ha++;Ua+=Ha;return Wm(Array.from({length:Ua}).map(function(jc,xc){return{index:xc,size:0,offset:0,data:Kb[xc]}}),[],Ua,mb,$a,jb)})),na),{initialItemCount:ua}},sj(Zq,bu,Us),{singleton:!0}),
tq=Di(function(a){a=a[0].scrollVelocity;var d=rg(!1),m=fh(),L=rg(!1);return sg($f(a,ei(L,d,m),Ig(function(ha){return!!ha[1]}),Lg(function(ha){var na=ha[0],ua=ha[1],Ha=ha[2];ha=ha[3];var Ua=ua.enter;if(Ha){if((0,ua.exit)(na,ha))return!1}else if(Ua(na,ha))return!0;return Ha}),pi()),d),Qh($f(Yj(d,a,m),ei(L)),function(ha){var na=ha[0];ha=ha[1];return na[0]&&ha&&ha.change&&ha.change(na[1],na[2])}),{isSeeking:d,scrollSeekConfiguration:L,scrollVelocity:a,scrollSeekRangeChanged:m}},sj(lv),{singleton:!0}),
Uy=Di(function(a){a=a[0].topItemsIndexes;var d=rg(0);return sg($f(d,Ig(function(m){return 0<m}),Lg(function(m){return Array.from({length:m}).map(function(L,ha){return ha})})),a),{topItemCount:d}},sj(bu)),cu=Di(function(a){var d=a[0],m=d.footerHeight,L=d.headerHeight,ha=d.fixedHeaderHeight;d=d.fixedFooterHeight;var na=a[1].listState;a=fh();m=Qj($f(Yj(m,d,L,ha,na),Lg(function(ua){var Ha=ua[4];return ua[0]+ua[1]+ua[2]+ua[3]+Ha.offsetBottom+Ha.bottom})),0);return sg(ai(m),a),{totalListHeight:m,totalListHeightChanged:a}},
sj(On,bu),{singleton:!0}),Fw=tn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Vy=Di(function(a){function d(xc){0<xc?(L(0,{top:-xc,behavior:"auto"}),na(0,0)):(na(0,0),L(0,{top:-xc,behavior:"auto"}))}var m=a[0],L=m.scrollBy,ha=m.scrollTop,na=m.deviation,ua=m.scrollingInProgress,Ha=a[1];m=Ha.isScrolling;var Ua=Ha.isAtBottom,$a=Ha.scrollDirection,jb=a[3],mb=jb.beforeUnshiftWith,Kb=jb.shiftWithOffset,Vb=jb.sizes;jb=jb.gap;var Ob=a[4].log,jc=a[5].recalcInProgress;
a=Ok($f(a[2].listState,ei(Ha.lastJumpDueToItemResize),hk(function(xc,bc){var pc=xc[1],lc=bc[0],Rc=lc.items,Tc=lc.totalCount;lc=lc.bottom+lc.offsetBottom;var Dd=0;return xc[2]===Tc&&0<pc.length&&0<Rc.length&&(0===Rc[0].originalIndex&&0===pc[0].originalIndex||0!=(Dd=lc-xc[3])&&(Dd+=bc[1])),[Dd,Rc,Tc,lc]},[0,[],0,0]),Ig(function(xc){return 0!==xc[0]}),ei(ha,$a,ua,Ua,Ob),Ig(function(xc){return!xc[3]&&0!==xc[1]&&"up"===xc[2]}),Lg(function(xc){var bc=xc[0][0];return(0,xc[5])("Upward scrolling compensation",
{amount:bc},Ml.DEBUG),bc})));return Qh($f(a,ei(na,m)),function(xc){var bc=xc[0],pc=xc[1];xc[2]&&Fw()?na(0,pc-bc):d(-bc)}),Qh($f(Yj(Qj(m,!1),na,jc),Ig(function(xc){return!xc[0]&&!xc[2]&&0!==xc[1]}),Lg(function(xc){return xc[1]}),Ym(1)),d),sg($f(Kb,Lg(function(xc){return{top:-xc}})),L),Qh($f(mb,ei(Vb,jb),Lg(function(xc){var bc=xc[0];return bc*xc[1].lastSize+bc*xc[2]})),function(xc){na(0,xc);requestAnimationFrame(function(){Op(L,{top:xc});requestAnimationFrame(function(){na(0,0);jc(0,!1)})})}),{deviation:na}},
sj(On,lv,bu,Zq,Yq,Ry)),MC=Di(function(a){var d=a[0].totalListHeight,m=a[1].didMount,L=a[2].scrollTo;a=rg(0);return Qh($f(m,ei(a),Ig(function(ha){return 0!==ha[1]}),Lg(function(ha){return{top:ha[1]}})),function(ha){Yk($f(d,Ig(function(na){return 0!==na})),function(){setTimeout(function(){L(0,ha)})})}),{initialScrollTop:a}},sj(cu,Us,On),{singleton:!0}),Wy=Di(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var m=rg(!1);return{alignToBottom:m,paddingTopAddition:Qj($f(Yj(m,d,a),Ig(function(L){return L[0]}),
Lg(function(L){return Math.max(0,L[1]-L[2])}),pi()),0)}},sj(On,cu),{singleton:!0}),Gw=Di(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var m=fh(),L=fh(),ha=fh(),na=rg(!1),ua=rg(void 0);return sg($f(Yj(m,L),Lg(function(Ha){var Ua=Ha[0];return{scrollTop:Math.max(0,Ua.scrollTop-Ha[1].offsetTop),scrollHeight:Ua.scrollHeight,viewportHeight:Ua.viewportHeight}})),d),sg($f(a,ei(L),Lg(function(Ha){var Ua=Ha[0];return Lh({},Ua,{top:Ua.top+Ha[1].offsetTop})})),ha),{useWindowScroll:na,customScrollParent:ua,
windowScrollContainerState:m,windowViewportRect:L,windowScrollTo:ha}},sj(On)),Vs=["done","behavior","align"],Tr=Di(function(a){var d=a[0],m=d.sizes,L=d.totalCount;d=d.gap;var ha=a[1],na=ha.scrollTop,ua=ha.viewportHeight,Ha=ha.headerHeight,Ua=ha.fixedHeaderHeight,$a=ha.fixedFooterHeight,jb=ha.scrollingInProgress;a=a[2].scrollToIndex;ha=fh();return sg($f(ha,ei(m,ua,L,Ha,Ua,$a,na),ei(d),Lg(function(mb){var Kb=mb[0],Vb=Kb[0],Ob=Kb[1],jc=Kb[2],xc=Kb[3],bc=Kb[4],pc=Kb[5],lc=Kb[6];Kb=Kb[7];var Rc=mb[1];
mb=Vb.done;var Tc=Vb.behavior,Dd=Vb.align,Ud=um(Vb,Vs),kf=null;Vb=Li(Vb,Ob,xc-1);bc=zi(Vb,Ob.offsetTree,Rc)+bc+pc;return bc<Kb+pc?kf=Lh({},Ud,{behavior:Tc,align:null!=Dd?Dd:"start"}):bc+ea(Ob.sizeTree,Vb)[1]>Kb+jc-lc&&(kf=Lh({},Ud,{behavior:Tc,align:null!=Dd?Dd:"end"})),kf?mb&&Yk($f(jb,Ul(1),Ig(function(re){return!1===re})),mb):mb&&mb(),kf}),Ig(function(mb){return null!==mb})),a),{scrollIntoView:ha}},sj(Zq,On,kv,bu,Yq),{singleton:!0}),Xy=["listState","topItemsIndexes"],NC=Di(function(a){return Lh({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},sj(Ty,AH,Us,tq,cu,MC,Wy,Gw,Tr)),du=Di(function(a){var d=a[0],m=d.totalCount,L=d.sizeRanges,ha=d.fixedItemSize,na=d.defaultItemSize,ua=d.trackItemSizes,Ha=d.itemSize,Ua=d.data,$a=d.firstItemIndex,jb=d.groupIndices,mb=d.statefulTotalCount;d=d.gap;var Kb=a[1],Vb=Kb.initialTopMostItemIndex;Kb=Kb.scrolledToInitialItem;var Ob=a[2],jc=a[3],xc=a[4],bc=xc.listState,pc=xc.topItemsIndexes;xc=um(xc,Xy);var lc=a[5].scrollToIndex,Rc=a[7].topItemCount,Tc=a[8].groupCounts,
Dd=a[9];a=a[10];return sg(xc.rangeChanged,Dd.scrollSeekRangeChanged),sg($f(Dd.windowViewportRect,Lg(function(Ud){return Ud.visibleHeight})),Ob.viewportHeight),Lh({totalCount:m,data:Ua,firstItemIndex:$a,sizeRanges:L,initialTopMostItemIndex:Vb,scrolledToInitialItem:Kb,topItemsIndexes:pc,topItemCount:Rc,groupCounts:Tc,fixedItemHeight:ha,defaultItemHeight:na,gap:d},jc,{statefulTotalCount:mb,listState:bc,scrollToIndex:lc,trackItemSizes:ua,itemSize:Ha,groupIndices:jb},xc,Dd,Ob,a)},sj(Zq,Ew,On,KC,bu,kv,
Vy,Uy,Sy,NC,Yq)),OC=tn(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),mv=Ph.createContext(void 0),Dp=Ph.createContext(void 0),PC=["placeholder"],Yy=["style","children"],QC=["style","children"],RC=Di(function(){var a=rg(function(Ua){return"Item "+Ua}),d=rg(null),m=rg(function(Ua){return"Group "+Ua}),L=rg({}),ha=rg($p),na=rg("div"),ua=rg(Mi),Ha=function(Ua,
$a){return void 0===$a&&($a=null),Qj($f(L,Lg(function(jb){return jb[Ua]}),pi()),$a)};return{context:d,itemContent:a,groupContent:m,components:L,computeItemKey:ha,headerFooterTag:na,scrollerRef:ua,FooterComponent:Ha("Footer"),HeaderComponent:Ha("Header"),TopItemListComponent:Ha("TopItemList"),ListComponent:Ha("List","div"),ItemComponent:Ha("Item","div"),GroupComponent:Ha("Group","div"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder")}}),
Hw=Di(function(a){function d(ha,na,ua){sg($f(ha,ei(L.components),Lg(function(Ha){var Ua,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+na+" instead."),Lh({},Ha,((Ua={})[na]=$a,Ua))})),L.components)}var m=a[0],L=a[1];a={item:Qk(L.itemContent,"Rename the %citem%c prop to %citemContent."),group:Qk(L.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Qk(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Qk(m.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Qk(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:fh(),maxHeightCacheSize:fh(),footer:fh(),header:fh(),HeaderContainer:fh(),FooterContainer:fh(),ItemContainer:fh(),ScrollContainer:fh(),GroupContainer:fh(),ListContainer:fh(),emptyComponent:fh(),scrollSeek:fh()};return Qh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),Qh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Qh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Qh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Qh(a.scrollSeek,function(ha){var na=ha.placeholder;ha=um(ha,PC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");na=Lh({},(0,L.components)(4),{ScrollSeekPlaceholder:na});(0,L.components)(0,na);(0,m.scrollSeekConfiguration)(0,ha)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Lh({},m,L,a)},sj(du,RC)),SC=function(a){return Ph.createElement("div",{style:{height:a.height}})},Pn={position:OC(),zIndex:1,overflowAnchor:"none"},BH={overflowAnchor:"none"},eu=Ph.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Hi("listState"),m=co("sizeRanges"),L=Hi("useWindowScroll"),ha=Hi("customScrollParent"),na=co("windowScrollContainerState"),ua=co("scrollContainerState");
L=ha||L?na:ua;var Ha=Hi("itemContent"),Ua=Hi("context"),$a=Hi("groupContent");na=Hi("trackItemSizes");ua=Hi("itemSize");var jb=Hi("log"),mb=co("gap");m=dj(m,ua,na,a?Mi:L,jb,mb,ha).callbackRef;ha=Ph.useState(0);var Kb=ha[0],Vb=ha[1];qj("deviation",function(Rc){Kb!==Rc&&Vb(Rc)});ha=Hi("EmptyPlaceholder");var Ob=Hi("ScrollSeekPlaceholder")||SC;L=Hi("ListComponent");var jc=Hi("ItemComponent"),xc=Hi("GroupComponent"),bc=Hi("computeItemKey"),pc=Hi("isSeeking"),lc=0<Hi("groupIndices").length;na=Hi("paddingTopAddition");
na=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+na,paddingBottom:d.offsetBottom,marginTop:Kb};return!a&&0===d.totalCount&&ha?(0,li.createElement)(ha,Vj(ha,Ua)):(0,li.createElement)(L,Lh({},Vj(L,Ua),{ref:m,style:na,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Rc){var Tc=Rc.originalIndex,Dd=bc(Tc+d.firstItemIndex,Rc.data,Ua);return pc?(0,li.createElement)(Ob,Lh({},Vj(Ob,Ua),{key:Dd,index:Rc.index,height:Rc.size,type:Rc.type||"item"},"group"===
Rc.type?{}:{groupIndex:Rc.groupIndex})):"group"===Rc.type?(0,li.createElement)(xc,Lh({},Vj(xc,Ua),{key:Dd,"data-index":Tc,"data-known-size":Rc.size,"data-item-index":Rc.index,style:Pn}),$a(Rc.index)):(0,li.createElement)(jc,Lh({},Vj(jc,Ua),{key:Dd,"data-index":Tc,"data-known-size":Rc.size,"data-item-index":Rc.index,"data-item-group-index":Rc.groupIndex,style:BH}),lc?Ha(Rc.index,Rc.groupIndex,Rc.data,Ua):Ha(Rc.index,Rc.data,Ua))}))}),CH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},fu={width:"100%",height:"100%",position:"absolute",top:0},TC={width:"100%",position:OC(),top:0},Iw=Ph.memo(function(){var a=Hi("HeaderComponent"),d=co("headerHeight"),m=Hi("headerFooterTag"),L=Hj(function(na){return d(Vi(na,"height"))}),ha=Hi("context");return a?(0,li.createElement)(m,{ref:L},(0,li.createElement)(a,Vj(a,ha))):null}),Jw=Ph.memo(function(){var a=Hi("FooterComponent"),d=co("footerHeight"),m=Hi("headerFooterTag"),L=Hj(function(na){return d(Vi(na,"height"))}),
ha=Hi("context");return a?(0,li.createElement)(m,{ref:L},(0,li.createElement)(a,Vj(a,ha))):null}),DH=function(a){a=a.children;var d=(0,li.useContext)(mv),m=co("viewportHeight"),L=co("fixedItemHeight"),ha=Hj(Om(m,function(na){return Vi(na,"height")}));return Ph.useEffect(function(){d&&(m(d.viewportHeight),L(d.itemHeight))},[d,m,L]),Ph.createElement("div",{style:fu,ref:ha,"data-viewport-type":"element"},a)},UC=function(a){a=a.children;var d=(0,li.useContext)(mv),m=co("windowViewportRect"),L=co("fixedItemHeight"),
ha=Hi("customScrollParent");ha=Zh(m,ha);return Ph.useEffect(function(){d&&(L(d.itemHeight),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,m,L]),Ph.createElement("div",{ref:ha,style:fu,"data-viewport-type":"window"},a)},VC=function(a){a=a.children;var d=Hi("TopItemListComponent"),m=Hi("headerHeight");m=Lh({},TC,{marginTop:m+"px"});var L=Hi("context");return(0,li.createElement)(d||"div",{style:m,context:L},a)},nv=Zj(Hw,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Ph.memo(function(a){var d=Hi("useWindowScroll"),m=0<Hi("topItemsIndexes").length,L=Hi("customScrollParent"),ha=L||d?UC:DH;return Ph.createElement(L||d?ov:Ur,Lh({},a),Ph.createElement(ha,null,Ph.createElement(Iw,null),Ph.createElement(eu,null),Ph.createElement(Jw,
null)),m&&Ph.createElement(VC,null,Ph.createElement(eu,{showTopList:!0})))})),Zy=nv.Component,co=nv.usePublisher,Hi=nv.useEmitterValue,qj=nv.useEmitter,Ur=ro({usePublisher:co,useEmitterValue:Hi,useEmitter:qj}),ov=Rp({usePublisher:co,useEmitterValue:Hi,useEmitter:qj}),pv={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},eo={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},$y=Math.round,Kw=Math.ceil,qv=Math.floor,az=Math.min,lj=Math.max,
gu=Di(function(a){var d=a[0],m=d.overscan,L=d.visibleRange,ha=d.listBoundary,na=a[1];d=na.scrollTop;var ua=na.viewportHeight,Ha=na.scrollBy,Ua=na.scrollTo,$a=na.smoothScrollTargetReached,jb=na.scrollContainerState,mb=na.footerHeight;na=na.headerHeight;var Kb=a[2],Vb=a[3],Ob=a[4],jc=Ob.propsReady,xc=Ob.didMount,bc=a[5];Ob=bc.windowViewportRect;var pc=bc.windowScrollTo,lc=bc.useWindowScroll,Rc=bc.customScrollParent;bc=bc.windowScrollContainerState;a=a[6];var Tc=rg(0),Dd=rg(0),Ud=rg(pv),kf=rg({height:0,
width:0}),re=rg({height:0,width:0}),Ue=fh(),Tf=fh(),gf=rg(0),lf=rg(void 0),Yd=rg({row:0,column:0});sg($f(Yj(xc,Dd,lf),Ig(function(qd){return 0!==qd[1]}),Lg(function(qd){return{items:Sp(0,qd[1]-1,qd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Ud);sg($f(Yj(ai(Tc),L,ai(Yd,Cn),ai(re,function(qd,Zd){return qd&&qd.width===Zd.width&&qd.height===Zd.height}),lf),ei(kf),Lg(function(qd){var Zd=qd[0],nd=Zd[0],Ld=Zd[1],$e=Ld[0],Df=Ld[1],kg=Zd[2],Uf=Zd[3],wg=Zd[4],uh=qd[1];qd=kg.row;
var eg=kg.column;Zd=Uf.height;Ld=Uf.width;var oh=uh.width;if(0===nd||0===oh)return pv;if(0===Ld)return Lh({},eo,{items:Sp(0,0,wg)});eg=lj(1,qv((oh+eg)/(Ld+eg)));$e=eg*qv(($e+qd)/(Zd+qd));Df=eg*Kw((Df+qd)/(Zd+qd))-1;Df=az(nd-1,lj(Df,eg-1));$e=Sp(az(Df,lj(0,$e)),Df,wg);Uf=so(uh,kg,Uf,$e);kg=Uf.top;Uf=Uf.bottom;nd=Kw(nd/eg);return{items:$e,offsetTop:kg,offsetBottom:nd*Zd+(nd-1)*qd-Uf,top:kg,bottom:Uf,itemHeight:Zd,itemWidth:Ld}})),Ud);sg($f(lf,Ig(function(qd){return void 0!==qd}),Lg(function(qd){return qd.length})),
Tc);sg($f(kf,Lg(function(qd){return qd.height})),ua);sg($f(Yj(kf,re,Ud,Yd),Lg(function(qd){qd=so(qd[0],qd[3],qd[1],qd[2].items);return[qd.top,qd.bottom]}),pi(Rj)),ha);L=Ok($f(ai(Ud),Ig(function(qd){return 0<qd.items.length}),ei(Tc),Ig(function(qd){var Zd=qd[0].items;return Zd[Zd.length-1].index===qd[1]-1}),Lg(function(qd){return qd[1]-1}),pi()));ha=Ok($f(ai(Ud),Ig(function(qd){qd=qd.items;return 0<qd.length&&0===qd[0].index}),Bn(0),pi()));ua=Ok($f(ai(Ud),Ig(function(qd){return 0<qd.items.length}),
Lg(function(qd){qd=qd.items;return{startIndex:qd[0].index,endIndex:qd[qd.length-1].index}}),pi(Pk)));sg(ua,Vb.scrollSeekRangeChanged);sg($f(Ue,ei(kf,re,Tc,Yd),Lg(function(qd){var Zd=qd[1],nd=qd[2],Ld=qd[3],$e=qd[4],Df=Fi(qd[0]);qd=Df.align;var kg=Df.behavior,Uf=Df.offset;Df=Df.index;"LAST"===Df&&(Df=Ld-1);Ld=jl(Zd,$e,nd,lj(0,Df,az(Ld-1,Df)));return"end"===qd?Ld=$y(Ld-Zd.height+nd.height):"center"===qd&&(Ld=$y(Ld-Zd.height/2+nd.height/2)),Uf&&(Ld+=Uf),{top:Ld,behavior:kg}})),Ua);xc=Qj($f(Ud,Lg(function(qd){return qd.offsetBottom+
qd.bottom})),0);return sg($f(Ob,Lg(function(qd){return{width:qd.visibleWidth,height:qd.visibleHeight}})),kf),Lh({data:lf,totalCount:Tc,viewportDimensions:kf,itemDimensions:re,scrollTop:d,scrollHeight:Tf,overscan:m,scrollBy:Ha,scrollTo:Ua,scrollToIndex:Ue,smoothScrollTargetReached:$a,windowViewportRect:Ob,windowScrollTo:pc,useWindowScroll:lc,customScrollParent:Rc,windowScrollContainerState:bc,deviation:gf,scrollContainerState:jb,footerHeight:mb,headerHeight:na,initialItemCount:Dd,gap:Yd},Vb,{gridState:Ud,
totalListHeight:xc},Kb,{startReached:ha,endReached:L,rangeChanged:ua,propsReady:jc},a)},sj(Ty,On,lv,tq,Us,Gw,Yq)),rv=["placeholder"],EH=Di(function(){var a=rg(function($a){return"Item "+$a}),d=rg({}),m=rg(null),L=rg("virtuoso-grid-item"),ha=rg("virtuoso-grid-list"),na=rg($p),ua=rg("div"),Ha=rg(Mi),Ua=function($a,jb){return void 0===jb&&(jb=null),Qj($f(d,Lg(function(mb){return mb[$a]}),pi()),jb)};return{context:m,itemContent:a,components:d,computeItemKey:na,itemClassName:L,listClassName:ha,headerFooterTag:ua,
scrollerRef:Ha,FooterComponent:Ua("Footer"),HeaderComponent:Ua("Header"),ListComponent:Ua("List","div"),ItemComponent:Ua("Item","div"),ScrollerComponent:Ua("Scroller","div"),ScrollSeekPlaceholder:Ua("ScrollSeekPlaceholder","div")}}),qk=Di(function(a){function d(ha,na,ua){sg($f(ha,ei(L.components),Lg(function(Ha){var Ua,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+na+" instead."),Lh({},Ha,((Ua={})[na]=$a,Ua))})),L.components)}var m=a[0],L=
a[1];a={item:Qk(L.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:fh(),ScrollContainer:fh(),ListContainer:fh(),emptyComponent:fh(),scrollSeek:fh()};return Qh(a.scrollSeek,function(ha){var na=ha.placeholder;ha=um(ha,rv);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");na=Lh({},(0,L.components)(4),{ScrollSeekPlaceholder:na});(0,L.components)(0,na);(0,m.scrollSeekConfiguration)(0,
ha)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Lh({},m,L,a)},sj(gu,EH)),Ws=Ph.memo(function(){var a=rk("gridState"),d=rk("listClassName"),m=rk("itemClassName"),L=rk("itemContent"),ha=rk("computeItemKey"),na=rk("isSeeking"),ua=en("scrollHeight"),Ha=rk("ItemComponent"),Ua=rk("ListComponent"),$a=rk("ScrollSeekPlaceholder"),jb=rk("context"),mb=en("itemDimensions"),Kb=en("gap"),Vb=rk("log"),Ob=Hj(function(jc){ua(jc.parentElement.parentElement.scrollHeight);
var xc=jc.firstChild;xc&&mb(xc.getBoundingClientRect());Kb({row:em("row-gap",getComputedStyle(jc).rowGap,Vb),column:em("column-gap",getComputedStyle(jc).columnGap,Vb)})});return(0,li.createElement)(Ua,Lh({ref:Ob,className:d},Vj(Ua,jb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(jc){var xc=ha(jc.index,jc.data,jb);return na?(0,li.createElement)($a,Lh({key:xc},Vj($a,jb),{index:jc.index,height:a.itemHeight,width:a.itemWidth})):(0,li.createElement)(Ha,Lh({},Vj(Ha,
jb),{className:m,"data-index":jc.index,key:xc}),L(jc.index,jc.data,jb))}))}),WC=Ph.memo(function(){var a=rk("HeaderComponent"),d=en("headerHeight"),m=rk("headerFooterTag"),L=Hj(function(na){return d(Vi(na,"height"))}),ha=rk("context");return a?(0,li.createElement)(m,{ref:L},(0,li.createElement)(a,Vj(a,ha))):null}),XC=Ph.memo(function(){var a=rk("FooterComponent"),d=en("footerHeight"),m=rk("headerFooterTag"),L=Hj(function(na){return d(Vi(na,"height"))}),ha=rk("context");return a?(0,li.createElement)(m,
{ref:L},(0,li.createElement)(a,Vj(a,ha))):null}),zh=function(a){a=a.children;var d=(0,li.useContext)(Dp),m=en("itemDimensions"),L=en("viewportDimensions"),ha=Hj(function(na){L(na.getBoundingClientRect())});return Ph.useEffect(function(){d&&(L({height:d.viewportHeight,width:d.viewportWidth}),m({height:d.itemHeight,width:d.itemWidth}))},[d,L,m]),Ph.createElement("div",{style:fu,ref:ha},a)},Lw=function(a){a=a.children;var d=(0,li.useContext)(Dp),m=en("windowViewportRect"),L=en("itemDimensions"),ha=rk("customScrollParent");
ha=Zh(m,ha);return Ph.useEffect(function(){d&&(L({height:d.itemHeight,width:d.itemWidth}),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,m,L]),Ph.createElement("div",{ref:ha,style:fu},a)},fo=Zj(qk,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Ph.memo(function(a){a=Lh({},a);var d=rk("useWindowScroll"),m=rk("customScrollParent"),L=m||d?Lw:zh;return Ph.createElement(m||d?hu:YC,Lh({},a),Ph.createElement(L,null,Ph.createElement(WC,null),Ph.createElement(Ws,null),Ph.createElement(XC,null)))})),en=fo.usePublisher,rk=fo.useEmitterValue,Mw=fo.useEmitter,YC=ro({usePublisher:en,useEmitterValue:rk,useEmitter:Mw}),hu=Rp({usePublisher:en,useEmitterValue:rk,useEmitter:Mw}),Nw=Di(function(){var a=rg(function(Ua){return Ph.createElement("td",
null,"Item $",Ua)}),d=rg(null),m=rg(null),L=rg(null),ha=rg({}),na=rg($p),ua=rg(Mi),Ha=function(Ua,$a){return void 0===$a&&($a=null),Qj($f(ha,Lg(function(jb){return jb[Ua]}),pi()),$a)};return{context:d,itemContent:a,fixedHeaderContent:m,fixedFooterContent:L,components:ha,computeItemKey:na,scrollerRef:ua,TableComponent:Ha("Table","table"),TableHeadComponent:Ha("TableHead","thead"),TableFooterComponent:Ha("TableFoot","tfoot"),TableBodyComponent:Ha("TableBody","tbody"),TableRowComponent:Ha("TableRow",
"tr"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder"),FillerRow:Ha("FillerRow")}}),iu=Di(function(a){return Lh({},a[0],a[1])},sj(du,Nw)),ZC=function(a){return Ph.createElement("tr",null,Ph.createElement("td",{style:{height:a.height}}))},$C=function(a){return Ph.createElement("tr",null,Ph.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Qn=Ph.memo(function(){var a=Pj("listState"),d=kp("sizeRanges"),m=
Pj("useWindowScroll"),L=Pj("customScrollParent"),ha=kp("windowScrollContainerState"),na=kp("scrollContainerState");m=L||m?ha:na;var ua=Pj("itemContent");ha=Pj("trackItemSizes");L=dj(d,Pj("itemSize"),ha,m,Pj("log"),void 0,L);d=L.callbackRef;var Ha=L.ref;L=Ph.useState(0);var Ua=L[0],$a=L[1];Pw("deviation",function(bc){Ua!==bc&&(Ha.current.style.marginTop=bc+"px",$a(bc))});ha=Pj("EmptyPlaceholder");var jb=Pj("ScrollSeekPlaceholder")||ZC;m=Pj("FillerRow")||$C;L=Pj("TableBodyComponent");var mb=Pj("TableRowComponent"),
Kb=Pj("computeItemKey"),Vb=Pj("isSeeking");na=Pj("paddingTopAddition");var Ob=Pj("firstItemIndex"),jc=Pj("statefulTotalCount"),xc=Pj("context");if(0===jc&&ha)return(0,li.createElement)(ha,Vj(ha,xc));ha=a.offsetTop+na+Ua;na=a.offsetBottom;ha=0<ha?Ph.createElement(m,{height:ha,key:"padding-top"}):null;m=0<na?Ph.createElement(m,{height:na,key:"padding-bottom"}):null;a=a.items.map(function(bc){var pc=bc.originalIndex,lc=Kb(pc+Ob,bc.data,xc);return Vb?(0,li.createElement)(jb,Lh({},Vj(jb,xc),{key:lc,index:bc.index,
height:bc.size,type:bc.type||"item"})):(0,li.createElement)(mb,Lh({},Vj(mb,xc),{key:lc,"data-index":pc,"data-known-size":bc.size,"data-item-index":bc.index,style:{overflowAnchor:"none"}}),ua(bc.index,bc.data,xc))});return(0,li.createElement)(L,Lh({ref:d,"data-test-id":"virtuoso-item-list"},Vj(L,xc)),[ha].concat(a,[m]))}),Ow=function(a){a=a.children;var d=(0,li.useContext)(mv),m=kp("viewportHeight"),L=kp("fixedItemHeight"),ha=Hj(Om(m,function(na){return Vi(na,"height")}));return Ph.useEffect(function(){d&&
(m(d.viewportHeight),L(d.itemHeight))},[d,m,L]),Ph.createElement("div",{style:fu,ref:ha,"data-viewport-type":"element"},a)},bz=function(a){a=a.children;var d=(0,li.useContext)(mv),m=kp("windowViewportRect"),L=kp("fixedItemHeight"),ha=Pj("customScrollParent");ha=Zh(m,ha);return Ph.useEffect(function(){d&&(L(d.itemHeight),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,m,L]),Ph.createElement("div",{ref:ha,style:fu,"data-viewport-type":"window"},a)},sv=Zj(iu,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Ph.memo(function(a){var d=Pj("useWindowScroll"),m=Pj("customScrollParent"),L=kp("fixedHeaderHeight"),ha=kp("fixedFooterHeight"),na=Pj("fixedHeaderContent"),ua=Pj("fixedFooterContent"),Ha=Pj("context");
L=Hj(Om(L,function(mb){return Vi(mb,"height")}));var Ua=Hj(Om(ha,function(mb){return Vi(mb,"height")}));ha=m||d?aD:FH;d=m||d?bz:Ow;m=Pj("TableComponent");var $a=Pj("TableHeadComponent"),jb=Pj("TableFooterComponent");na=na?Ph.createElement($a,Lh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:L},Vj($a,Ha)),na()):null;ua=ua?Ph.createElement(jb,Lh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ua},Vj(jb,Ha)),ua()):null;return Ph.createElement(ha,Lh({},a),Ph.createElement(d,
null,Ph.createElement(m,Lh({style:{borderSpacing:0}},Vj(m,Ha)),[na,Ph.createElement(Qn,{key:"TableBody"}),ua])))})),kp=sv.usePublisher,Pj=sv.useEmitterValue,Pw=sv.useEmitter,FH=ro({usePublisher:kp,useEmitterValue:Pj,useEmitter:Pw}),aD=Rp({usePublisher:kp,useEmitterValue:Pj,useEmitter:Pw}),ju=Jf(ba(22)),fn=function(a){function d(m){m=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+m+" for more information.")||this;if(void 0===
m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}Yp(d,a);return d}(Dq(Error)),Qw={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bD=/^#[a-fA-F0-9]{6}$/,cD=/^#[a-fA-F0-9]{8}$/,cz=/^#[a-fA-F0-9]{3}$/,No=/^#[a-fA-F0-9]{4}$/,Xs=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
pm=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Rw=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,tv=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,go=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Gj=jr(kr,kr.length,[]),ku=
ba(614),Im=Jf(ba(22)),ho=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const m=a.ownerDocument,L=m.activeElement;L!==a&&a.focus();m.execCommand("insertText",!1,d)||ho.insertTextFirefox(a,d);L===m.body?a.blur():L instanceof HTMLElement&&L!==a&&L.focus()}static set(a,d){a.select();ho.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:m}=a;return a.value.slice(d?d:void 0,m?m:void 0)}static wrapSelection(a,d,m){const {selectionStart:L,selectionEnd:ha}=a,na=ho.getSelection(a);ho.insert(a,d+na+(null!=m?m:d));a.selectionStart=(L||0)+d.length;a.selectionEnd=(ha||0)+d.length}static replace(a,d,m){let L=0;a.value.replace(d,(...ha)=>{const na=L+ha[ha.length-2],ua=ha[0].length;a.selectionStart=na;a.selectionEnd=na+ua;ha="string"===typeof m?m:m(...ha);ho.insert(a,ha);a.selectionStart=na;L+=ha.length-ua;return ha})}static findLineEnd(a,
d){const m=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(m)?d:m+1}static indent(a){var d;const {selectionStart:m,selectionEnd:L,value:ha}=a;var na=ha.slice(m,L);if((na=null==(d=/\n/g.exec(na))?void 0:d.length)&&0<na){d=ha.lastIndexOf("\n",m-1)+1;var ua=a.value.slice(d,L-1);na=ua.replace(/^|\n/g,"$\x26  ");ua=na.length-ua.length;a.setSelectionRange(d,L-1);ho.insert(a,na);a.setSelectionRange(m+1,L+ua)}else ho.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:m,value:L}=a;var ha=
L.lastIndexOf("\n",d-1)+1;const na=ho.findLineEnd(L,m);var ua=a.value.slice(ha,na);const Ha=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ha.length;a.setSelectionRange(ha,na);ho.insert(a,Ha);ha=(ha=/\t| {1,2}/.exec(L.slice(ha,d)))?ha[0].length:0;a.setSelectionRange(d-ha,Math.max(d-ha,m-ua))}},Sw=ba(614),lu=a=>a.stopPropagation(),mu=Im.memo(function({font:a,text:d,color:m,fontStyle:L,fontSize:ha,fontWeight:na,offsetX:ua=0,offsetY:Ha=0,scale:Ua=1,isEditing:$a=!1,pointerEvents:jb=!1,onBlur:mb,onChange:Kb}){const Vb=
Im.useRef(null),Ob=Im.useRef(!1),jc=Im.useCallback(Tc=>{Kb(It.normalizeText(Tc.currentTarget.value))},[Kb]),xc=Im.useCallback(Tc=>{if("Escape"!==Tc.key)if("Tab"===Tc.key&&0===d.length)Tc.preventDefault();else{if("Meta"!==Tc.key&&!Tc.metaKey)Tc.stopPropagation();else if("z"===Tc.key&&Tc.metaKey){document.execCommand(Tc.shiftKey?"redo":"undo",!1);Tc.stopPropagation();Tc.preventDefault();return}"Tab"===Tc.key&&(Tc.preventDefault(),Tc.shiftKey?ho.unindent(Tc.currentTarget):ho.indent(Tc.currentTarget),
null==Kb?void 0:Kb(It.normalizeText(Tc.currentTarget.value)))}},[Kb]),bc=Im.useCallback(Tc=>{$a&&(Tc.currentTarget.setSelectionRange(0,0),null==mb?void 0:mb())},[mb]),pc=Im.useCallback(Tc=>{$a&&Ob.current&&document.activeElement===Tc.currentTarget&&Tc.currentTarget.select()},[$a]),lc=Im.useCallback(Tc=>{$a&&Tc.stopPropagation()},[$a]);Im.useEffect(()=>{$a&&requestAnimationFrame(()=>{Ob.current=!0;const Tc=Vb.current;Tc&&(Tc.focus(),Tc.select())})},[$a,mb]);const Rc=Im.useRef(null);Im.useLayoutEffect(()=>
{const Tc=Rc.current;if(Tc){var Dd=Vg(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ha,lineHeight:1,fontWeight:na},4);Tc.style.transform=`scale(${Ua}, ${Ua}) translate(${ua}px, ${Ha}px)`;Tc.style.width=Dd[0]+1+"px";Tc.style.height=Dd[1]+1+"px"}},[d,na,ha,Ha,ua,Ua]);return(0,Sw.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Sw.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Rc,style:{font:a,fontStyle:L,fontSize:ha,fontWeight:na,color:m,pointerEvents:jb?"all":"none",
userSelect:$a?"text":"none"},children:[$a?(0,Sw.jsx)("textarea",{ref:Vb,style:{font:a,color:m,fontStyle:L,fontSize:ha,fontWeight:na},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:m,onFocus:pc,onChange:jc,onKeyDown:xc,onBlur:bc,onPointerDown:lc,onContextMenu:lu,onCopy:lu,onPaste:lu,onCut:lu}):
d,""]})})}),lp=ba(614),io={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Rn=class extends vn{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,isBinding:m,isSelected:L,isEditing:ha,onEditingEnd:na})=>{const {props:{size:[ua,Ha],stroke:Ua,fill:$a,noFill:jb,strokeWidth:mb,strokeType:Kb,borderRadius:Vb,opacity:Ob,label:jc,italic:xc,fontWeight:bc,fontSize:pc}}=this;var lc=jc||ha?Vg(jc,{fontFamily:"var(--ls-font-family)",fontSize:pc,lineHeight:1,fontWeight:bc},
4):[0,0];const Rc=me.mul(this.props.size,.5);lc=Math.max(.5,Math.min(1,ua/lc[0],Ha/lc[1]));const Tc=this.getBounds(),Dd=ju.useMemo(()=>me.sub(Rc,me.toFixed([Tc.width/2,Tc.height/2])),[Tc,lc,Rc]),Ud=ju.useCallback(kf=>{var re;null==(re=this.update)?void 0:re.call(this,{label:kf})},[jc]);return(0,lp.jsxs)("div",Bf(qe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,lp.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:jc,color:wf(Ua,"text"),offsetX:Dd[0],
offsetY:Dd[1],fontSize:pc,scale:lc,isEditing:ha,onChange:Ud,onBlur:na,fontStyle:xc?"italic":"normal",fontWeight:bc,pointerEvents:!!jc}),(0,lp.jsxs)(fp,{opacity:d?.2:Ob,children:[m&&(0,lp.jsx)(js,{mode:"svg",strokeWidth:mb,size:[ua,Ha]}),(0,lp.jsx)("rect",{className:L||!jb?"tl-hitarea-fill":"tl-hitarea-stroke",x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,ua-mb),height:Math.max(.01,Ha-mb),pointerEvents:"all"}),(0,lp.jsx)("rect",{x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,ua-mb),height:Math.max(.01,
Ha-mb),strokeWidth:mb,stroke:wf(Ua,"stroke"),strokeDasharray:"dashed"===Kb?"8 2":void 0,fill:jb?"none":wf($a,"background")})]})]}))}));kb(this,"setScaleLevel",a=>wi(this,null,function*(){this.update({scaleLevel:a,fontSize:io[null!=a?a:"md"],strokeWidth:io[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],borderRadius:m,isLocked:L}}=this;return(0,lp.jsx)("g",{children:(0,lp.jsx)("rect",{width:a,height:d,rx:m,ry:m,fill:"transparent",strokeDasharray:L?
"8 2":void 0})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Vm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(Rn,"id","box");kb(Rn,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});le([Wf],Rn.prototype,"scaleLevel",1);le([Tg],Rn.prototype,"setScaleLevel",2);var Tw=Jf(ba(22)),mp=ba(614),uv={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ys=class extends wx{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({isSelected:a,isErasing:d,events:m,isEditing:L,onEditingEnd:ha})=>{const {size:[na,ua],stroke:Ha,fill:Ua,noFill:$a,strokeWidth:jb,strokeType:mb,opacity:Kb,label:Vb,italic:Ob,fontWeight:jc,fontSize:xc}=this.props;var bc=Vb||L?Vg(Vb,
{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:jc},4):[0,0];const pc=me.mul(this.props.size,.5);bc=Math.max(.5,Math.min(1,na/bc[0],ua/bc[1]));const lc=this.getBounds(),Rc=Tw.useMemo(()=>me.sub(pc,me.toFixed([lc.width/2,lc.height/2])),[lc,bc,pc]),Tc=Tw.useCallback(Dd=>{var Ud;null==(Ud=this.update)?void 0:Ud.call(this,{label:Dd})},[Vb]);return(0,mp.jsxs)("div",Bf(qe({},m),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,mp.jsx)(mu,
{font:"18px / 1 var(--ls-font-family)",text:Vb,color:wf(Ha,"text"),offsetX:Rc[0],offsetY:Rc[1],scale:bc,isEditing:L,onChange:Tc,onBlur:ha,fontStyle:Ob?"italic":"normal",fontSize:xc,fontWeight:jc,pointerEvents:!!Vb}),(0,mp.jsxs)(fp,Bf(qe({},m),{opacity:d?.2:Kb,children:[(0,mp.jsx)("ellipse",{className:a||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",cx:na/2,cy:ua/2,rx:Math.max(.01,(na-jb)/2),ry:Math.max(.01,(ua-jb)/2)}),(0,mp.jsx)("ellipse",{cx:na/2,cy:ua/2,rx:Math.max(.01,(na-jb)/2),ry:Math.max(.01,(ua-
jb)/2),strokeWidth:jb,stroke:wf(Ha,"stroke"),strokeDasharray:"dashed"===mb?"8 2":void 0,fill:$a?"none":wf(Ua,"background")})]}))]}))}));kb(this,"setScaleLevel",a=>wi(this,null,function*(){this.update({scaleLevel:a,fontSize:uv[null!=a?a:"md"],strokeWidth:uv[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {size:[a,d],isLocked:m}=this.props;return(0,mp.jsx)("g",{children:(0,mp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:m?
"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Vm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,m],stroke:L,fill:ha,noFill:na,strokeWidth:ua,strokeType:Ha,opacity:Ua}=this.props;return(0,mp.jsxs)("g",{opacity:Ua,children:[(0,mp.jsx)("ellipse",{className:na?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:m/2,rx:Math.max(.01,(d-ua)/2),ry:Math.max(.01,
(m-ua)/2)}),(0,mp.jsx)("ellipse",{cx:d/2,cy:m/2,rx:Math.max(.01,(d-ua)/2),ry:Math.max(.01,(m-ua)/2),strokeWidth:ua,stroke:wf(L,"stroke"),strokeDasharray:"dashed"===Ha?"8 2":void 0,fill:na?"none":wf(ha,"background")})]})}};kb(Ys,"id","ellipse");kb(Ys,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});le([Wf],Ys.prototype,"scaleLevel",1);le([Tg],Ys.prototype,
"setScaleLevel",2);var Vr=ba(614),Uw=class extends Wv{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a})=>{const d=this.getBounds(),m=Ie(),L=m.selectedShapesArray.some(na=>m.shapesInGroups([this]).includes(na)),ha=this.ReactIndicator;return(0,Vr.jsxs)(fp,Bf(qe({},a),{className:"tl-group-container",children:[(0,Vr.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),L&&(0,Vr.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,Vr.jsx)(ha,{})})]}))}));kb(this,"ReactIndicator",If(()=>{const a=this.getBounds();return(0,Vr.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};kb(Uw,"id","group");kb(Uw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var vv=ba(614),dz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Wr=class extends Bt{constructor(a={}){super(a);kb(this,"ReactComponent",If(({events:d,isErasing:m})=>{const {pointsPath:L,
props:{stroke:ha,strokeWidth:na,opacity:ua}}=this;return(0,vv.jsx)(fp,Bf(qe({},d),{opacity:m?.2:1,children:(0,vv.jsx)("path",{d:L,strokeWidth:16*na,stroke:wf(ha,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:ua})}))}));kb(this,"setScaleLevel",d=>wi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:dz[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {pointsPath:d,props:m}=this;return(0,vv.jsx)("path",{d,fill:"none",
strokeDasharray:m.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=Vm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});cd(this)}get pointsPath(){const {points:a}=this.props;return wu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:m,opacity:L}}=this;return(0,vv.jsx)("path",{d:a,strokeWidth:16*m,stroke:wf(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:L})}};kb(Wr,"id","highlighter");kb(Wr,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});le([Wf],Wr.prototype,"pointsPath",1);le([Wf],Wr.prototype,"scaleLevel",1);le([Tg],Wr.prototype,"setScaleLevel",2);var Zs=Jf(ba(22)),Cf=ba(614),qh={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Ep=class extends vn{constructor(){super(...arguments);
kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"htmlAnchorRef",Zs.createRef());kb(this,"setScaleLevel",a=>wi(this,null,function*(){var d;const m=me.mul(this.props.size,qh[null!=a?a:"md"]/qh[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield gc();this.update({size:m})}));kb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const m=this.htmlAnchorRef.current.getBoundingClientRect(),[L,ha]=me.div([m.width,m.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(L||400,1400),10),Math.max(Math.min(ha||400,1400),10)]})}return this});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const {props:{html:L,scaleLevel:ha}}=this,na=pn(),ua=Ie(),Ha=ua.selectedIds.has(this.id),Ua=na||Ha&&!m||"select"!==ua.selectedTool.id,$a=Zs.useCallback(mb=>{Ua||mb.stopPropagation()},[Ua]),jb=qh[null!=ha?ha:"md"];Zs.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:ua.viewport.camera.zoom}),
ua.persist(!0))},[]);return(0,Cf.jsx)(Eo,Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Cf.jsx)("div",{onWheelCapture:$a,onPointerDown:$a,onPointerUp:$a,className:"tl-html-container",style:{pointerEvents:na||!m&&!Ha?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${jb})`,height:`calc(100% / ${jb})`,transform:`scale(${jb})`},children:(0,Cf.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:L.trim()}})})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,Cf.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Vm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(Ep,"id","html");kb(Ep,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});le([Wf],
Ep.prototype,"scaleLevel",1);le([Tg],Ep.prototype,"setScaleLevel",2);var ez=Jf(ba(22)),nu=ba(614),Xr=class extends vn{constructor(){super(...arguments);kb(this,"frameRef",ez.createRef());kb(this,"canEdit",!0);kb(this,"onIFrameSourceChange",a=>{this.update({url:a})});kb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{ez.useRef(null);const L=
Ie();return(0,nu.jsx)(Eo,Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,nu.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m||L.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,nu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,nu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}))}};kb(Xr,"id","iframe");kb(Xr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});le([Tg],Xr.prototype,"onIFrameSourceChange",2);le([Tg],Xr.prototype,"reload",2);var fz=Jf(ba(22)),$s=ba(614),wv=class extends xx{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a,
isErasing:d,isBinding:m,asset:L})=>{const {props:{opacity:ha,objectFit:na,clipping:ua,size:[Ha,Ua]}}=this,[$a,jb,mb,Kb]=Array.isArray(ua)?ua:[ua,ua,ua,ua],{handlers:Vb}=fz.useContext(kj);return(0,$s.jsxs)(Eo,Bf(qe({},a),{opacity:d?.2:ha,children:[m&&(0,$s.jsx)(js,{mode:"html",strokeWidth:4,size:[Ha,Ua]}),(0,$s.jsx)("div",{"data-asset-loaded":!!L,className:"tl-image-shape-container",children:L?(0,$s.jsx)("img",{src:Vb?Vb.makeAssetUrl(L.src):L.src,draggable:!1,style:{position:"relative",top:-$a,left:-Kb,
width:Ha+(Kb-jb),height:Ua+($a-mb),objectFit:na}}):"Asset is missing"})]}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,$s.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,m;const L=this.getBounds(),{assetId:ha,clipping:na}=this.props;if(a=a.find(ua=>ua.id===ha)){Array.isArray(na);const ua=null==(m=null==(d=window.logseq)?void 0:d.api)?void 0:m.make_asset_url;return(0,$s.jsx)("image",
{width:L.width,height:L.height,href:ua?ua(a.src):a.src})}return super.getShapeSVGJsx({})}};kb(wv,"id","image");kb(wv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var mj=Jf(ba(22)),dD=Jf(ba(22)),Vw=ba(614),$q=ba(614),eD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ou=dD.memo(function({style:a,start:d,end:m,decorationStart:L,decorationEnd:ha,scaleLevel:na}){const ua=me.dist(d,m);if(2>ua)return null;
const {strokeWidth:Ha}=a,Ua=1+Ha*eD[null!=na?na:"md"]/10,$a="M"+me.toFixed(d)+"L"+me.toFixed(m);na=Math.min(ua/3,Ha*eD[null!=na?na:"md"]);L=L?Eq(d,m,na):null;ha=ha?Eq(m,d,na):null;return(0,$q.jsxs)($q.Fragment,{children:[(0,$q.jsx)("path",{className:"tl-stroke-hitarea",d:$a}),(0,$q.jsx)("path",{d:$a,strokeWidth:Ua,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),L&&(0,$q.jsx)(Cq,{left:L.left,middle:d,right:L.right,
stroke:a.stroke,strokeWidth:Ua}),ha&&(0,$q.jsx)(Cq,{left:ha.left,middle:m,right:ha.right,stroke:a.stroke,strokeWidth:Ua})]})}),xv=ba(614),Sn=ba(614),Yr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},at=class extends Iu{constructor(){super(...arguments);kb(this,"hideSelection",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m,onEditingEnd:L})=>{const {stroke:ha,handles:{start:na,end:ua},opacity:Ha,label:Ua,italic:$a,fontWeight:jb,fontSize:mb,id:Kb}=this.props,Vb=Ua||
m?Vg(Ua||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:mb,lineHeight:1,fontWeight:jb},6):[0,0],Ob=me.med(na.point,ua.point);var jc=me.dist(na.point,ua.point);jc=Math.max(.5,Math.min(1,Math.max(jc/(Vb[1]+128),jc/(Vb[0]+128))));const xc=this.getBounds(),bc=mj.useMemo(()=>me.sub(Ob,me.toFixed([xc.width/2,xc.height/2])),[xc,jc,Ob]),pc=mj.useCallback(lc=>{var Rc;null==(Rc=this.update)?void 0:Rc.call(this,{label:lc})},[Ua]);return(0,Sn.jsxs)("div",Bf(qe({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Sn.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Ua,fontSize:mb,color:wf(ha,"text"),offsetX:bc[0],offsetY:bc[1],scale:jc,isEditing:m,onChange:pc,onBlur:L,fontStyle:$a?"italic":"normal",fontWeight:jb,pointerEvents:!!Ua}),(0,Sn.jsxs)(fp,{opacity:d?.2:Ha,id:Kb+"_svg",children:[(0,Sn.jsx)(hs,{id:Kb,bounds:xc,labelSize:Vb,offset:bc,scale:jc}),(0,Sn.jsx)("g",{pointerEvents:"none",mask:Ua||m?`url(#${Kb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
kb(this,"setScaleLevel",a=>wi(this,null,function*(){this.update({scaleLevel:a,fontSize:Yr[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(({isEditing:a})=>{const {id:d,decorations:m,label:L,strokeWidth:ha,fontSize:na,fontWeight:ua,handles:{start:Ha,end:Ua},isLocked:$a}=this.props,jb=this.getBounds(),mb=L||a?Vg(L,{fontFamily:"var(--ls-font-family)",fontSize:na,lineHeight:1,fontWeight:ua},6):[0,0],Kb=me.med(Ha.point,Ua.point);var Vb=me.dist(Ha.point,Ua.point);Vb=Math.max(.5,Math.min(1,
Math.max(Vb/(mb[1]+128),Vb/(mb[0]+128))));const Ob=mj.useMemo(()=>me.sub(Kb,me.toFixed([jb.width/2,jb.height/2])),[jb,Vb,Kb]);return(0,Sn.jsxs)("g",{children:[(0,Sn.jsx)("path",{mask:L?`url(#${d}_clip)`:"",d:Tl({strokeWidth:ha},Ha.point,Ua.point,null==m?void 0:m.start,null==m?void 0:m.end),strokeDasharray:$a?"8 2":"undefined"}),L&&!a&&(0,Sn.jsx)("rect",{x:jb.width/2-mb[0]/2*Vb+Ob[0],y:jb.height/2-mb[1]/2*Vb+Ob[1],width:mb[0]*Vb,height:mb[1]*Vb,rx:4*Vb,ry:4*Vb,fill:"transparent"})]})}));kb(this,"validateProps",
a=>Vm(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:m,strokeWidth:L,strokeType:ha,decorations:na,label:ua,scaleLevel:Ha,handles:{start:Ua,end:$a}}=this.props,jb=me.med(Ua.point,$a.point);return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(ou,{style:{stroke:wf(d,"text"),fill:m,strokeWidth:L,strokeType:ha},scaleLevel:Ha,start:Ua.point,end:$a.point,decorationStart:null==na?void 0:na.start,decorationEnd:null==na?void 0:na.end}),
a&&(0,Sn.jsx)(Sn.Fragment,{children:(0,Sn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${jb[0]}, ${jb[1]})`,textAnchor:"middle",fill:wf(d,"text"),stroke:wf(d,"text"),children:ua})})]})}};kb(at,"id","line");kb(at,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});le([Wf],at.prototype,"scaleLevel",1);le([Tg],at.prototype,"setScaleLevel",2);var Tn=Jf(ba(22)),Dj=ba(614),np={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Fp=If(({type:a,fill:d,opacity:m,children:L})=>{const ha="var(--ls-secondary-background-color)"!==d?wf(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?uf(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,Dj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,Dj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:m,background:"P"===a?ha:`linear-gradient(0deg, ${d}, ${ha})`}}),(0,Dj.jsx)("div",{className:"relative",children:L})]})}),Lk=class extends vn{constructor(a={}){var d;super(a);kb(this,"hideRotateHandle",!0);kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"persist",null);kb(this,
"initialHeightCalculated",!0);kb(this,"getInnerHeight",null);kb(this,"setCollapsed",m=>wi(this,null,function*(){var L;if("B"===this.props.blockType){if(this.update({compact:m}),this.canResize[1]=!m,!m)this.onResetBounds()}else{const ha=this.props.size[1];this.canResize[1]=!m;this.update({isAutoResizing:!m,collapsed:m,size:[this.props.size[0],m?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:m?ha:this.props.collapsedHeight})}null==(L=this.persist)?void 0:L.call(this)}));kb(this,
"setScaleLevel",m=>wi(this,null,function*(){var L;const ha=me.mul(this.props.size,np[null!=m?m:"md"]/np[null!=(L=this.props.scaleLevel)?L:"md"]);this.update({scaleLevel:m});yield gc();this.update({size:ha})}));kb(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(m,L)=>{var ha;const {bounds:na,rotation:ua,scale:[Ha,Ua]}=L;m=[...this.scale];0>
Ha&&(m[0]*=-1);0>Ua&&(m[1]*=-1);L=na.height;this.props.isAutoResizing&&(L=null!=(ha=this.getAutoResizeHeight())?ha:L);return this.update({point:[na.minX,na.minY],size:[Math.max(1,na.width),Math.max(1,L)],scale:m,rotation:ua})});kb(this,"PortalComponent",If(({})=>{const {props:{pageId:m,fill:L,opacity:ha}}=this,{renderers:na}=Tn.useContext(kj),ua=Ie(),Ha=Tn.useRef(null),[,Ua]=this.useComponentSize(Ha,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==na||!na.Page)return null;const {Page:$a,Block:jb}=na,[mb,Kb]=Tn.useState(!1);Tn.useEffect(()=>{var Vb,Ob;if(this.props.isAutoResizing){const jc=(null!=(Ob=null==(Vb=this.getInnerHeight)?void 0:Vb.call(this))?Ob:Ua)+this.getHeaderHeight();Ua&&1<Math.abs(jc-this.props.size[1])&&(this.update({size:[this.props.size[0],jc]}),mb&&ua.persist(!0))}},[Ua,this.props.isAutoResizing]);Tn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ua.persist(!0)})},[this.initialHeightCalculated]);
Tn.useEffect(()=>{setTimeout(function(){Kb(!0)})},[]);return(0,Dj.jsxs)(Dj.Fragment,{children:[(0,Dj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>ua.viewport.camera.zoom?"optimizeSpeed":"auto",background:L&&"var(--ls-secondary-background-color)"!==L?uf(L)?`var(--ls-highlight-color-${L})`:L:"var(--ls-secondary-background-color)",opacity:ha}}),(0,Dj.jsx)("div",{ref:Ha,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(mb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,Dj.jsx)(jb,{blockId:m}):(0,Dj.jsx)($a,{pageName:m}))})]})}));kb(this,"ReactComponent",If(m=>{var L;const {events:ha,isErasing:na,isEditing:ua,isBinding:Ha}=m,{props:{opacity:Ua,pageId:$a,fill:jb,scaleLevel:mb,strokeWidth:Kb,size:Vb}}=this,Ob=Ie(),{renderers:jc,handlers:xc}=Tn.useContext(kj);this.persist=()=>Ob.persist();const bc=pn(),pc=Ob.selectedIds.has(this.id)&&1===Ob.selectedIds.size,
lc=Ob.isIn("logseq-portal.creating")&&!$a,Rc=(bc||pc&&!ua||"select"!==Ob.selectedTool.id)&&!lc,Tc=Tn.useCallback(qd=>{Rc||qd.stopPropagation()},[Rc]),Dd=1===Ob.selectedShapesArray.length&&Ob.selectedShapesArray.some(qd=>"logseq-portal"===qd.type&&qd.props.id!==this.props.id&&$a&&qd.props.pageId===$a),Ud=np[null!=mb?mb:"md"];Tn.useEffect(()=>this.props.collapsed&&ua?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[ua,this.props.collapsed]);Tn.useEffect(()=>{if(lc){const qd=[Ob.viewport.bounds.width,Ob.viewport.bounds.height],Zd=Ob.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Zd[0]>qd[0]-400||Zd[1]>qd[1]-240||1.5<Ob.viewport.camera.zoom||.5>Ob.viewport.camera.zoom)&&Ob.viewport.zoomToBounds(Bf(qe({},this.bounds),{minY:this.bounds.maxY+25}))}},[Ob.viewport.bounds.height.toFixed(2)]);const kf=Tn.useCallback(qd=>{this.initialHeightCalculated=!1;const Zd=Wg(qd)?"B":"P";this.update({pageId:qd,
size:[400,320],blockType:Zd,compact:"B"===Zd});Ob.selectTool("select");Ob.history.resume();Ob.history.persist()},[]),re=this.PortalComponent;var Ue=Tn.useMemo(()=>{var qd;if($a&&"B"===this.props.blockType)return null==(qd=null==xc?void 0:xc.queryBlockByUUID($a))?void 0:qd.content},[null==xc?void 0:xc.queryBlockByUUID,$a]);Ue="B"===this.props.blockType&&"string"!==typeof Ue;const Tf=(!this.props.collapsed||ua)&&!Ue;if(null==jc||!jc.Page)return null;const {Breadcrumb:gf,PageName:lf}=jc,Yd={width:`calc(100% / ${Ud})`,
height:`calc(100% / ${Ud})`,opacity:na?.2:1};1!==Ud&&(Yd.transform=`scale(${Ud})`);return(0,Dj.jsxs)(Eo,Bf(qe({style:{pointerEvents:"all"}},ha),{children:[Ha&&(0,Dj.jsx)(js,{mode:"html",strokeWidth:Kb,size:Vb}),(0,Dj.jsx)("div",{"data-inner-events":!Rc,onWheelCapture:Tc,onPointerDown:Tc,onPointerUp:Tc,style:{width:"100%",height:"100%",pointerEvents:bc||!ua&&!pc?"none":"all"},children:lc?(0,Dj.jsx)(ft,{onChange:kf,onAddBlock:qd=>{setTimeout(()=>{var Zd,nd,Ld;Ob.api.editShape(this);null==(Ld=null==
(nd=null==(Zd=window.logseq)?void 0:Zd.api)?void 0:nd.edit_block)?void 0:Ld.call(nd,qd)})},placeholder:"Create or search your graph..."}):(0,Dj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":$a,"data-portal-selected":Dd,"data-editing":ua,style:Yd,children:[!this.props.compact&&!Ue&&(0,Dj.jsx)(Fp,{type:null!=(L=this.props.blockType)?L:"P",fill:jb,opacity:Ua,children:"P"===this.props.blockType?(0,Dj.jsx)(lf,{pageName:$a}):(0,Dj.jsx)(gf,{blockId:$a})}),
Ue&&(0,Dj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Tf&&(0,Dj.jsx)(re,qe({},m))]})})]}))}));kb(this,"ReactIndicator",If(()=>{const m=this.getBounds();return(0,Dj.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",m=>{var L;if(void 0!==m.size){const ha=np[null!=(L=this.props.scaleLevel)?L:"md"];m.size[0]=Math.max(m.size[0],60*ha);m.size[1]=Math.max(m.size[1],40*ha)}return Vm(this,
m)});cd(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [m,L]=Tn.useState([0,0]),ha=Ie();Tn.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const na=
d?a.current.querySelector(d):a.current;if(na){const ua=()=>{const {width:Ua,height:$a}=na.getBoundingClientRect(),jb=me.div([Ua,$a],ha.viewport.camera.zoom);L(jb);return jb};ua();this.getInnerHeight=()=>ua()[1];const Ha=new ResizeObserver(()=>{ua()});Ha.observe(na);return()=>{Ha.disconnect()}}}return()=>{}},10)},[a,d]);return m}getHeaderHeight(){var a;const d=np[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,m;const L=this.getBounds();return(0,Dj.jsxs)(Dj.Fragment,{children:[(0,Dj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?uf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:wf(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:L.width,rx:8,ry:8,
height:L.height}),!this.props.compact&&(0,Dj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?wf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:L.width-2,height:38,rx:8,ry:8}),(0,Dj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${L.width/2}, ${10+L.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};kb(Lk,"id","logseq-portal");kb(Lk,"defaultSearchQuery","");kb(Lk,"defaultSearchFilter",null);kb(Lk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});le([Wf],Lk.prototype,"collapsed",
1);le([Tg],Lk.prototype,"setCollapsed",2);le([Wf],Lk.prototype,"scaleLevel",1);le([Tg],Lk.prototype,"setScaleLevel",2);var {min:Gp,PI:fD}=Math,ar=fD+1E-4,yv=ba(614),Hp={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},bt={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},gz={easing:a=>a*a,simulatePressure:!1},ah=class extends Bt{constructor(a={}){super(a);kb(this,"ReactComponent",If(({events:d,isErasing:m})=>{const {props:{opacity:L}}=this;return(0,yv.jsx)(fp,Bf(qe({},d),{opacity:m?.2:L,children:this.getShapeSVGJsx()}))}));
kb(this,"setScaleLevel",d=>wi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Hp[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {pointsPath:d}=this;return(0,yv.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=Vm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});cd(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=Bf(qe({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?bt:gz),{last:a.isComplete}),a=lk(a.points,d),d=wu.getSvgPathFromStroke(Gq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:m,strokeType:L}}=this;return(0,yv.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:wf(d,"text"),fill:wf(d,"text"),strokeDasharray:"dashed"===L?"12 4":void 0})}};
kb(ah,"id","pencil");kb(ah,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});le([Wf],ah.prototype,"pointsPath",1);le([Wf],ah.prototype,"scaleLevel",1);le([Tg],ah.prototype,"setScaleLevel",2);var zv=Jf(ba(22)),Oo=ba(614),br={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Po=class extends Ar{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,
isSelected:m,isEditing:L,onEditingEnd:ha})=>{const {offset:[na,ua],props:{stroke:Ha,fill:Ua,noFill:$a,strokeWidth:jb,opacity:mb,strokeType:Kb,label:Vb,italic:Ob,fontWeight:jc,fontSize:xc}}=this,bc=this.getVertices(jb/2).join();var pc=Vb||L?Vg(Vb,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:jc},4):[0,0];const lc=[this.props.size[0]/2,2*this.props.size[1]/3];pc=Math.max(.5,Math.min(1,this.props.size[0]/(2*pc[0]),this.props.size[1]/(2*pc[1])));const Rc=this.getBounds(),Tc=
zv.useMemo(()=>me.sub(lc,me.toFixed([Rc.width/2,Rc.height/2])),[Rc,pc,lc]),Dd=zv.useCallback(Ud=>{var kf;null==(kf=this.update)?void 0:kf.call(this,{label:Ud})},[Vb]);return(0,Oo.jsxs)("div",Bf(qe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Oo.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Vb,fontSize:xc,color:wf(Ha,"text"),offsetX:Tc[0],offsetY:Tc[1]/pc,scale:pc,isEditing:L,onChange:Dd,onBlur:ha,fontStyle:Ob?"italic":"normal",fontWeight:jc,pointerEvents:!!Vb}),(0,Oo.jsx)(fp,
{opacity:d?.2:mb,children:(0,Oo.jsxs)("g",{transform:`translate(${na}, ${ua})`,children:[(0,Oo.jsx)("polygon",{className:m||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",points:bc}),(0,Oo.jsx)("polygon",{points:bc,stroke:wf(Ha,"stroke"),fill:$a?"none":wf(Ua,"background"),strokeWidth:jb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Kb?"8 2":void 0})]})})]}))}));kb(this,"setScaleLevel",a=>wi(this,null,function*(){this.update({scaleLevel:a,fontSize:br[null!=a?a:"md"],strokeWidth:br[null!=a?
a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {offset:[a,d],props:{strokeWidth:m,isLocked:L}}=this;return(0,Oo.jsx)("g",{children:(0,Oo.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(m/2).join(),strokeDasharray:L?"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Vm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,m],props:{stroke:L,
fill:ha,noFill:na,strokeWidth:ua,opacity:Ha,strokeType:Ua}}=this;a=this.getVertices(ua/2).join();return(0,Oo.jsxs)("g",{transform:`translate(${d}, ${m})`,opacity:Ha,children:[(0,Oo.jsx)("polygon",{className:na?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Oo.jsx)("polygon",{points:a,stroke:wf(L,"stroke"),fill:na?"none":wf(ha,"background"),strokeWidth:ua,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ua?"8 2":void 0})]})}};kb(Po,"id","polygon");kb(Po,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});le([Wf],Po.prototype,"scaleLevel",1);le([Tg],Po.prototype,"setScaleLevel",2);var op=Jf(ba(22)),Jm=ba(614),gD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},gn=class extends yx{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m,onEditingEnd:L})=>{const {props:{opacity:ha,
fontFamily:na,fontSize:ua,fontWeight:Ha,italic:Ua,lineHeight:$a,text:jb,stroke:mb,padding:Kb}}=this,Vb=op.useRef(null),Ob=op.useRef(!1),jc=op.useRef(null),xc=op.useCallback(Tc=>{const {isSizeLocked:Dd}=this.props;Tc=It.normalizeText(Tc.currentTarget.value);Dd?this.update({text:Tc,size:this.getAutoSizedBoundingBox({text:Tc})}):this.update({text:Tc})},[]),bc=op.useCallback(Tc=>{if("Escape"!==Tc.key)if("Tab"===Tc.key&&0===jb.length)Tc.preventDefault();else{if("Meta"!==Tc.key&&!Tc.metaKey)Tc.stopPropagation();
else if("z"===Tc.key&&Tc.metaKey){Tc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Tc.stopPropagation();Tc.preventDefault();return}"Tab"===Tc.key&&(Tc.preventDefault(),Tc.shiftKey?ho.unindent(Tc.currentTarget):ho.indent(Tc.currentTarget),this.update({text:It.normalizeText(Tc.currentTarget.value)}))}},[]),pc=op.useCallback(Tc=>{m&&(null==L?void 0:L())},[L]),lc=op.useCallback(Tc=>{m&&Ob.current&&document.activeElement===Tc.currentTarget&&Tc.currentTarget.select()},[m]),Rc=
op.useCallback(Tc=>{m&&Tc.stopPropagation()},[m]);op.useEffect(()=>{m&&requestAnimationFrame(()=>{Ob.current=!0;const Tc=Vb.current;Tc&&(Tc.focus(),Tc.select())})},[m,L]);op.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Jm.jsx)(Eo,Bf(qe({},a),{opacity:d?.2:ha,children:(0,Jm.jsx)("div",{ref:jc,className:"tl-text-shape-wrapper","data-hastext":!!jb,"data-isediting":m,style:{fontFamily:na,fontStyle:Ua?"italic":"normal",fontSize:ua,fontWeight:Ha,
padding:Kb,lineHeight:$a,color:wf(mb,"text")},children:m?(0,Jm.jsx)("textarea",{ref:Vb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:jb,onFocus:lc,onChange:xc,onKeyDown:bc,onBlur:pc,onPointerDown:Rc}):(0,Jm.jsxs)(Jm.Fragment,{children:[jb,""]})})}))}));kb(this,"setScaleLevel",a=>wi(this,null,function*(){this.update({scaleLevel:a,
fontSize:gD[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:m},bounds:L}=this;return a?null:(0,Jm.jsx)("rect",{width:L.width,height:L.height,rx:d,ry:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>Vm(this,a));kb(this,"getBounds",()=>{const [a,d]=this.props.point,[m,L]=this.props.size;return{minX:a,minY:d,maxX:a+m,maxY:d+L,width:m,height:L}});kb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});kb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:m=this.props.fontFamily,fontSize:L=this.props.fontSize,fontWeight:ha=this.props.fontWeight,lineHeight:na=this.props.lineHeight,padding:ua=
this.props.padding}=a,[Ha,Ua]=Vg(d,{fontFamily:m,fontSize:L,lineHeight:na,fontWeight:ha},ua);return[Ha,Ua]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:m,fontSize:L,fontFamily:ha}}=this;a=this.getBounds();return(0,Jm.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Jm.jsx)("div",{style:{color:wf(m,"text"),fontSize:L,fontFamily:ha,display:"contents"},children:d})})}};
kb(gn,"id","text");kb(gn,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});le([Wf],gn.prototype,"scaleLevel",1);le([Tg],gn.prototype,"setScaleLevel",2);var ct=Jf(ba(22)),pu=ba(614),Zr=class extends vn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",
!0);kb(this,"canChangeAspectRatio",!1);kb(this,"ReactComponent",If(({events:a,isErasing:d,asset:m,isEditing:L})=>{const {props:{opacity:ha}}=this,na=pn();var ua=Ie();const Ha=ua.selectedIds.has(this.id),Ua=na||Ha&&!L||"select"!==ua.selectedTool.id;ua=ct.useCallback(jb=>{Ua||jb.stopPropagation()},[Ua]);const {handlers:$a}=ct.useContext(kj);return(0,pu.jsx)(Eo,Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:ha}},a),{children:(0,pu.jsx)("div",{onWheelCapture:ua,onPointerDown:ua,onPointerUp:ua,
className:"tl-video-container",style:{pointerEvents:na||!L&&!Ha?"none":"all",overflow:L?"auto":"hidden"},children:m&&(0,pu.jsx)("video",{controls:!0,src:$a?$a.makeAssetUrl(m.src):m.src})})}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,pu.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}))}};kb(Zr,"id","video");kb(Zr,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var am=ba(614),Av=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Ww=class extends vn{constructor(){super(...arguments);kb(this,"aspectRatio",480/853);kb(this,"canChangeAspectRatio",!1);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Ww.defaultProps.size})});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const L=Ie();return(0,am.jsx)(Eo,
Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,am.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:m||L.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,am.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,am.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,am.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,am.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,am.jsxs)("g",
{children:[(0,am.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,am.jsx)("g",{children:(0,am.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,am.jsxs)("g",{fill:"#fff",children:[(0,am.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,am.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,am.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Vm(this,a)})}get embedId(){var a,d;const m=this.props.url,
L=m.match(Av);return null!=(d=null!=(a=null==L?void 0:L[1])?a:m)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,am.jsxs)("g",{children:[(0,am.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,am.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,am.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},cr=Ww;kb(cr,"id","youtube");kb(cr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});le([Wf],cr.prototype,"embedId",1);le([Tg],cr.prototype,"onYoutubeLinkChange",2);var $r=Jf(ba(22)),uq=ba(614),Xw=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,hz=class extends vn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"initialHeightCalculated",
!0);kb(this,"getInnerHeight",null);kb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:hz.defaultProps.size})});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const {renderers:{Tweet:L}}=$r.useContext(kj),ha=Ie(),na=$r.useRef(null),[,ua]=this.useComponentSize(na);$r.useEffect(()=>{var Ha,Ua;const $a=null!=(Ua=null==(Ha=this.getInnerHeight)?void 0:Ha.call(this))?Ua:ua;ua&&1<Math.abs($a-this.props.size[1])&&(this.update({size:[this.props.size[0],$a]}),ha.persist(!0))},[ua]);
$r.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ha.persist(!0)})},[this.initialHeightCalculated]);return(0,uq.jsx)(Eo,Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,uq.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:m||ha.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,uq.jsx)("div",{ref:na,children:(0,uq.jsx)(L,{tweetId:this.embedId})}):null})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,uq.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}));kb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(a,d)=>{var m;const {bounds:L,rotation:ha,scale:[na,ua]}=d;a=[...this.scale];0>na&&(a[0]*=-1);0>ua&&(a[1]*=
-1);d=null!=(m=this.getAutoResizeHeight())?m:L.height;return this.update({point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,d)],scale:a,rotation:ha})});kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Vm(this,a)})}get embedId(){var a,d;const m=this.props.url,L=m.match(Xw);return null!=(d=null!=(a=null==L?void 0:L[1])?a:m)?d:""}useComponentSize(a,d=""){const [m,L]=$r.useState([0,0]),ha=Ie();$r.useEffect(()=>
{if(null==a?0:a.current){const na=d?a.current.querySelector(d):a.current;if(na){const ua=()=>{const {width:Ua,height:$a}=na.getBoundingClientRect(),jb=me.div([Ua,$a],ha.viewport.camera.zoom);L(jb);return jb};ua();this.getInnerHeight=()=>ua()[1];const Ha=new ResizeObserver(()=>{ua()});Ha.observe(na);return()=>{Ha.disconnect()}}}return()=>{}},[a,d]);return m}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,uq.jsxs)("g",
{children:[(0,uq.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,uq.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,uq.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},dt=hz;kb(dt,"id","tweet");kb(dt,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});le([Wf],dt.prototype,"embedId",1);le([Tg],dt.prototype,"onTwitterLinkChange",2);var Yw=Jf(ba(22)),Bv=ba(614),Ip=class extends vn{constructor(){super(...arguments);kb(this,"frameRef",Yw.createRef());kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",
If(({events:a,asset:d,isErasing:m,isEditing:L})=>{Yw.useRef(null);const {handlers:ha}=Yw.useContext(kj);Ie();const na=pn();return(0,Bv.jsx)(Eo,Bf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:m?.2:1}},a),{children:d?(0,Bv.jsx)("embed",{src:ha?ha.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!na&&L?"all":"none"}}):null}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,
d],isLocked:m}}=this;return(0,Bv.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}))}};kb(Ip,"id","pdf");kb(Ip,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ba(614);var Zw=[Rn,Ys,Wr,wv,Zr,at,ah,Po,gn,cr,dt,Xr,Ep,Ip,Lk,Uw],Km=class extends Oq{constructor(){super(...arguments);kb(this,"Shape",Rn)}};kb(Km,"id","box");kb(Km,"shortcut","whiteboard/rectangle");var et=class extends Oq{constructor(){super(...arguments);
kb(this,"Shape",Ys)}};kb(et,"id","ellipse");kb(et,"shortcut","whiteboard/ellipse");var hn=class extends Xv{};kb(hn,"id","erase");kb(hn,"shortcut","whiteboard/eraser");var iz=class extends Ju{constructor(){super(...arguments);kb(this,"Shape",Wr);kb(this,"simplify",!0);kb(this,"simplifyTolerance",.618)}};kb(iz,"id","highlighter");kb(iz,"shortcut","whiteboard/highlighter");var Lm=class extends Yv{constructor(){super(...arguments);kb(this,"Shape",at)}};kb(Lm,"id","line");kb(Lm,"shortcut","whiteboard/connector");
var pp=class extends Ju{constructor(){super(...arguments);kb(this,"Shape",ah);kb(this,"simplify",!1)}};kb(pp,"id","pencil");kb(pp,"shortcut","whiteboard/pencil");var jz=class extends Oq{constructor(){super(...arguments);kb(this,"Shape",Po)}};kb(jz,"id","polygon");var kz=class extends Zv{constructor(){super(...arguments);kb(this,"Shape",gn)}};kb(kz,"id","text");kb(kz,"shortcut","whiteboard/text");var hD=class extends Oq{constructor(){super(...arguments);kb(this,"Shape",cr)}};kb(hD,"id","youtube");
var Al=class extends Wi{constructor(){super(...arguments);kb(this,"creatingShape");kb(this,"offset",[0,0]);kb(this,"onEnter",()=>{this.app.history.pause();bd(()=>{var a=me.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=me.snap(a,8));this.creatingShape=a=new Lk({id:ek(),parentId:this.app.currentPage.id,point:a,size:Lk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});kb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};kb(Al,"id","creating");var dr=class extends Wi{constructor(){super(...arguments);
kb(this,"cursor","crosshair");kb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};kb(dr,"id","idle");var xn=class extends Br{constructor(){super(...arguments);kb(this,"Shape",Lk);kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};kb(xn,"id","logseq-portal");kb(xn,"shortcut","whiteboard/portal");kb(xn,"states",[dr,Al]);kb(xn,"initial","idle");var $w=class extends Oq{constructor(){super(...arguments);kb(this,"Shape",Ep)}};kb($w,"id","youtube");var mi=class extends Oq{constructor(){super(...arguments);
kb(this,"Shape",Xr)}};kb(mi,"id","iframe");var GH=Jf(ba(617)),qp=ba(614),iD=new Map(Zw.map(a=>[a.id,a])),ii=class{constructor(a){kb(this,"shapes");kb(this,"pageId");kb(this,"assets");a&&this.load(a)}load(a){var d;const m=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==m?void 0:m.id;this.assets=a.assets;this.shapes=null==m?void 0:m.shapes.map(L=>{var ha=L.type;if(!ha)throw Error("No shape type provided.");const na=iD.get(ha);if(!na)throw Error(`Could not find shape class for ${ha}`);
return new na(L)}).filter(L=>"group"!==L.type)}generatePreviewJsx(a,d){var m,L;const ha=[...(null!=(m=this.shapes)?m:[]).map($a=>$a.getRotatedBounds())];(m=null==a?void 0:a.currentView)&&ha.push(m);let na=Of.getCommonBounds(ha);if(!na)return null;na=Of.expandBounds(na,16);na=d?Of.ensureRatio(na,d):na;const ua=$a=>[($a[0]-na.minX).toFixed(2),($a[1]-na.minY).toFixed(2)],[Ha,Ua]=m?ua([m.minX,m.minY]):[0,0];return na&&(0,qp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":na.minX.toFixed(2),
"data-common-bound-y":na.minY.toFixed(2),"data-common-bound-width":na.width.toFixed(2),"data-common-bound-height":na.height.toFixed(2),viewBox:[0,0,na.width,na.height].join(" "),children:[(0,qp.jsx)("defs",{children:m&&(0,qp.jsxs)(qp.Fragment,{children:[(0,qp.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ha}, ${Ua})`,width:m.width,height:m.height}),(0,qp.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,qp.jsx)("rect",{width:na.width,height:na.height,fill:"white"}),(0,qp.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,qp.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(L=this.shapes)?void 0:L.map($a=>{var jb,mb;const {bounds:Kb,props:{rotation:Vb}}=$a,[Ob,jc]=ua([Kb.minX,Kb.minY]),xc=+(180*((null!=Vb?Vb:0)+(null!=(jb=Kb.rotation)?jb:0))/Math.PI).toFixed(2),[bc,pc]=[(Kb.width/2).toFixed(2),(Kb.height/2).toFixed(2)];return(0,qp.jsx)("g",{transform:[`translate(${Ob}, ${jc})`,`rotate(${xc}, ${bc}, ${pc})`].join(" "),children:$a.getShapeSVGJsx({assets:null!=
(mb=this.assets)?mb:[]})},$a.id)})}),(0,qp.jsx)("rect",{mask:m?`url(#${this.pageId}-camera-mask)`:"",width:na.width,height:na.height,fill:"transparent"}),m&&(0,qp.jsx)("use",{id:"minimap-camera-rect","data-x":Ha,"data-y":Ua,"data-width":m.width,"data-height":m.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?GH.default.renderToString(a):""}},qu=Jf(ba(22)),Qo=ba(614),Jp=qu.forwardRef((a,
d)=>{var {value:m,className:L}=a;a=ag(a,["autoResize","value","className"]);return(0,Qo.jsx)("div",{className:"tl-input"+(L?" "+L:""),children:(0,Qo.jsxs)("div",{className:"tl-input-sizer",children:[(0,Qo.jsx)("div",{className:"tl-input-hidden",children:m}),(0,Qo.jsx)("input",qe({ref:d,value:m,className:"tl-text-input",type:"text"},a))]})})}),ui=ba(614),Kp=({type:a,active:d})=>(0,ui.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,ui.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),jD=(a,d)=>(0,ui.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((m,L)=>1===L%2?(0,ui.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,L)=>(0,ui.jsx)(Kk.default.Fragment,{children:m},L))}),HH=(a,d)=>{const {handlers:m}=Kk.default.useContext(kj),[L,ha]=Kk.default.useState(null),na=Fn(a,200);Kk.default.useEffect(()=>{let ua=
!1;if(0<na.length){const Ha={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ha["pages?"]=!1:"P"===d&&(Ha["blocks?"]=!1);m.search(na,Ha).then(Ua=>{ua||ha(Ua)})}else ha(null);return()=>{ua=!0}},[na,null==m?void 0:m.search]);return L},ft=If(({className:a,style:d,placeholder:m,onChange:L,onBlur:ha,onAddBlock:na})=>{const [ua,Ha]=Kk.default.useState(Lk.defaultSearchQuery),[Ua,$a]=Kk.default.useState(Lk.defaultSearchFilter),jb=Kk.default.useRef(null),{handlers:mb,renderers:Kb}=Kk.default.useContext(kj),
Vb=mb.t,Ob=Kk.default.useCallback(re=>{var Ue;setTimeout(()=>L(re));null==(Ue=jb.current)?void 0:Ue.blur();re&&(Lk.defaultSearchQuery="",Lk.defaultSearchFilter=null)},[]),jc=Kk.default.useCallback(re=>{if(re=null==mb?void 0:mb.addNewBlock(re))Ob(re),null==na?void 0:na(re);return re},[na]),xc=Kk.default.useRef(null),[bc,pc]=Kk.default.useState(0),lc=HH(ua,Ua),[Rc,Tc]=Kk.default.useState("circle-plus"),[Dd,Ud]=Kk.default.useState(!1);Kk.default.useEffect(()=>{setTimeout(()=>{var re;null==(re=jb.current)?
void 0:re.focus()})},[Ua]);Kk.default.useEffect(()=>{Lk.defaultSearchQuery=ua;Lk.defaultSearchFilter=Ua},[ua,Ua]);const kf=Kk.default.useMemo(()=>{var re;const Ue=[],Tf=null==Kb?void 0:Kb.Breadcrumb;if(!Tf||!mb)return[];na&&Ue.push({actionIcon:"circle-plus",onChosen:()=>!!jc(ua),element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{active:!0,type:"BA"}),0<ua.length?(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)("strong",{children:Vb("whiteboard/new-block")}),ua]}):
(0,ui.jsx)("strong",{children:Vb("whiteboard/new-block-no-colon")})]})});(null==(re=null==lc?void 0:lc.pages)?0:re.some(gf=>gf.toLowerCase()===ua.toLowerCase()))||!ua||Ue.push({actionIcon:"circle-plus",onChosen:()=>{Ob(ua);return!0},element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{active:!0,type:"PA"}),(0,ui.jsx)("strong",{children:Vb("whiteboard/new-page")}),ua]})},{actionIcon:"circle-plus",onChosen:()=>{null==mb?void 0:mb.addNewWhiteboard(ua);Ob(ua);return!0},
element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{active:!0,type:"WA"}),(0,ui.jsx)("strong",{children:Vb("whiteboard/new-whiteboard")}),ua]})});0===ua.length&&null===Ua&&Ue.push({actionIcon:"search",onChosen:()=>{$a("B");return!0},element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{type:"BS"}),Vb("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{$a("P");return!0},element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ui.jsx)(Kp,{type:"PS"}),Vb("whiteboard/search-only-pages")]})});Ua&&"P"!==Ua||!lc||!lc.pages||Ue.push(...lc.pages.map(gf=>({actionIcon:"search",onChosen:()=>{Ob(gf);return!0},element:(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{type:mb.isWhiteboardPage(gf)?"WP":"P"}),jD(gf,ua)]})})));Ua&&"B"!==Ua||!lc||!lc.blocks||Ue.push(...lc.blocks.filter(gf=>gf.content&&gf.uuid).map(({content:gf,uuid:lf})=>{const Yd=mb.queryBlockByUUID(lf);return{actionIcon:"search",
onChosen:()=>{var qd,Zd,nd;return Yd?(Ob(lf),null==(nd=null==(Zd=null==(qd=window.logseq)?void 0:qd.api)?void 0:Zd.set_blocks_id)?void 0:nd.call(Zd,[lf]),!0):!1},element:Yd?(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)(Kp,{type:"B"}),(0,ui.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,ui.jsx)(Tf,{blockId:lf})})]}),(0,ui.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ui.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
jD(gf,ua)]})]}):(0,ui.jsx)("div",{className:"tl-quick-search-option-row",children:Vb("whiteboard/cache-outdated")})}}));return Ue},[ua,Ua,lc,null==Kb?void 0:Kb.Breadcrumb,mb]);Kk.default.useEffect(()=>{const re=Ue=>{var Tf,gf;let lf=bc;"ArrowDown"===Ue.key?lf=Math.min(kf.length-1,bc+1):"ArrowUp"===Ue.key?lf=Math.max(0,bc-1):"Enter"===Ue.key?(null==(Tf=kf[bc])?void 0:Tf.onChosen(),Ue.stopPropagation(),Ue.preventDefault()):"Backspace"===Ue.key&&0===ua.length?$a(null):"Escape"===Ue.key&&Ob("");lf!==
bc&&(Tf=kf[lf],pc(lf),Tc(Tf.actionIcon),Ue.stopPropagation(),Ue.preventDefault(),(Ue=null==(gf=xc.current)?void 0:gf.querySelector(".tl-quick-search-option:nth-child("+(lf+1)+")"))&&(null==Ue?void 0:Ue.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",re,!0);return()=>{document.removeEventListener("keydown",re,!0)}},[kf,bc,ua]);return(0,ui.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,ui.jsx)(WG,{icon:Rc,onClick:()=>{var re;null==(re=kf[bc])?void 0:
re.onChosen()}}),(0,ui.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ua&&(0,ui.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ui.jsx)(Kp,{type:Ua}),"B"===Ua?"Search blocks":"Search pages",(0,ui.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>$a(null),children:(0,ui.jsx)(Wh,{name:"x"})})]}),(0,ui.jsx)(Jp,{ref:jb,type:"text",value:ua,className:"tl-quick-search-input",placeholder:null!=m?m:"Create or search your graph...",onChange:re=>
Ha(re.target.value),onKeyDown:re=>{"Enter"===re.key&&Ob(ua);re.stopPropagation()},onFocus:()=>{Ud(!0)},onBlur:()=>{Ud(!1);null==ha?void 0:ha()}})]}),0<kf.length&&(0,ui.jsx)("div",{onWheelCapture:re=>re.stopPropagation(),className:"tl-quick-search-options",ref:xc,style:{visibility:Dd?"visible":"hidden",pointerEvents:Dd?"all":"none"},children:(0,ui.jsx)(Zy,{style:{height:40*Math.min(Math.max(1,kf.length),12)},totalCount:kf.length,itemContent:re=>{const {actionIcon:Ue,onChosen:Tf,element:gf}=kf[re];
return(0,ui.jsx)("div",{"data-focused":re===bc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Tc(Ue);pc(re)},onPointerDownCapture:lf=>{Tf()&&(lf.stopPropagation(),lf.preventDefault())},children:gf},re)}})})]})}),Xi=ba(614),ax=If(function(a){var {pageId:d,portalType:m,refs:L,side:ha,onRefsChange:na}=a;a=ag(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:ua}}=Py.default.useContext(kj),Ha=L.length+(d?1:0),Ua=0===L.length,$a=mb=>{mb&&!L.includes(mb)&&
Ua&&na([...L,mb])},jb=!(!d||!m);return(0,Xi.jsx)(Ln,Bf(qe({},a),{side:ha,align:"start",alignOffset:-6,label:(0,Xi.jsx)(ck,{content:ua("whiteboard/link"),sideOffset:14,children:(0,Xi.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Xi.jsx)(Wh,{name:0<Ha?"link":"add-link"}),0<Ha&&(0,Xi.jsx)("div",{className:"tl-shape-links-count",children:Ha})]})}),children:(0,Xi.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":jb,children:[jb&&(0,Xi.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(Wh,{className:"opacity-50",name:"internal-link"}),ua("whiteboard/references")]}),(0,Xi.jsx)(Qm,{type:m,id:d})]}),(0,Xi.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(Wh,{className:"opacity-50",name:"add-link"}),ua("whiteboard/link-to-any-page-or-block")]}),
Ua&&(0,Xi.jsx)(ft,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:ua("whiteboard/start-typing-to-search"),onChange:$a}),0<L.length&&(0,Xi.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:L.map((mb,Kb)=>(0,Xi.jsx)(Qm,{id:mb,type:Wg(mb)?"B":"P",onRemove:()=>{na(L.filter((Vb,Ob)=>Kb!==Ob))},showContent:!0},mb))})]})]})}))}),sk=Jf(ba(22)),[Cv]=oj("ToggleGroup",[lw]),Dv=lw(),kD=sk.default.forwardRef((a,d)=>{const {type:m}=a;a=ag(a,["type"]);if("single"===m)return sk.default.createElement(IH,
nf({},a,{ref:d}));if("multiple"===m)return sk.default.createElement(JH,nf({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[lz,Lp]=Cv("ToggleGroup"),IH=sk.default.forwardRef((a,d)=>{const {value:m,defaultValue:L,onValueChange:ha=()=>{}}=a,na=ag(a,["value","defaultValue","onValueChange"]),[ua,Ha]=oi({prop:m,defaultProp:L,onChange:ha});return sk.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"single",value:ua?[ua]:[],onItemActivate:Ha,onItemDeactivate:sk.default.useCallback(()=>
Ha(""),[Ha])},sk.default.createElement(mD,nf({},na,{ref:d})))}),JH=sk.default.forwardRef((a,d)=>{const {value:m,defaultValue:L,onValueChange:ha=()=>{}}=a,na=ag(a,["value","defaultValue","onValueChange"]),[ua=[],Ha]=oi({prop:m,defaultProp:L,onChange:ha}),Ua=sk.default.useCallback(jb=>Ha((mb=[])=>[...mb,jb]),[Ha]),$a=sk.default.useCallback(jb=>Ha((mb=[])=>mb.filter(Kb=>Kb!==jb)),[Ha]);return sk.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"multiple",value:ua,onItemActivate:Ua,onItemDeactivate:$a},
sk.default.createElement(mD,nf({},na,{ref:d})))}),[KH,lD]=Cv("ToggleGroup"),mD=sk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:m,disabled:L=!1,rovingFocus:ha=!0,orientation:na,dir:ua,loop:Ha=!0}=a;var Ua=ag(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Dv(m);const $a=Wn(ua);Ua=qe({role:"group",dir:$a},Ua);return sk.default.createElement(KH,{scope:m,rovingFocus:ha,disabled:L},ha?sk.default.createElement(YB,nf({asChild:!0},a,{orientation:na,dir:$a,loop:Ha}),
sk.default.createElement(Vk.div,nf({},Ua,{ref:d}))):sk.default.createElement(Vk.div,nf({},Ua,{ref:d})))}),Ev=sk.default.forwardRef((a,d)=>{var m=Lp("ToggleGroupItem",a.__scopeToggleGroup);const L=lD("ToggleGroupItem",a.__scopeToggleGroup),ha=Dv(a.__scopeToggleGroup);m=m.value.includes(a.value);const na=L.disabled||a.disabled;a=Bf(qe({},a),{pressed:m,disabled:na});const ua=sk.default.useRef(null);return L.rovingFocus?sk.default.createElement(ZB,nf({asChild:!0},ha,{focusable:!na,active:m,ref:ua}),sk.default.createElement(nD,
nf({},a,{ref:d}))):sk.default.createElement(nD,nf({},a,{ref:d}))}),nD=sk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:m,value:L}=a,ha=ag(a,["__scopeToggleGroup","value"]),na=Lp("ToggleGroupItem",m);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return sk.default.createElement(SB,nf({},"single"===na.type?a:void 0,ha,{ref:d,onPressedChange:ua=>{if(ua)na.onItemActivate(L);else na.onItemDeactivate(L)}}))}),oD=kD,pD=Ev,er=ba(614),yi=ba(614),Fv="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
qD=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Un=new Map,mz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},LH=Object.entries(mz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),MH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("AutoResizing"),L=m.every(ha=>
ha.props.isAutoResizing);return(0,yi.jsx)(cj,{tooltip:d("whiteboard/auto-resize"),toggle:m.every(ha=>"logseq-portal"===ha.props.type),className:"tl-button",pressed:L,onPressedChange:ha=>{m.forEach(na=>{if("logseq-portal"===na.props.type)na.update({isAutoResizing:ha});else na.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,yi.jsx)(Wh,{name:"dimensions"})})}),NH=If(()=>{const a=Ie();var {handlers:{t:d}}=$l.default.useContext(kj);const m=Za("LogseqPortalViewMode"),L=m.every(ha=>
ha.collapsed);if(!L&&!m.every(ha=>!ha.collapsed))return null;d=(0,yi.jsxs)("div",{className:"flex",children:[L?d("whiteboard/expand"):d("whiteboard/collapse"),(0,yi.jsx)(cn,{action:L?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,yi.jsx)(cj,{tooltip:d,toggle:m.every(ha=>"logseq-portal"===ha.props.type),className:"tl-button",pressed:L,onPressedChange:()=>a.api.setCollapsed(!L),children:(0,yi.jsx)(Wh,{name:L?"object-expanded":"object-compact"})})}),OH=If(()=>{const {handlers:{isMobile:a}}=
$l.default.useContext(kj);var d=Za("ScaleLevel");d=1<(new Set(d.map(m=>m.scaleLevel))).size?"":d[0].scaleLevel;return(0,yi.jsx)(Uo,{scaleLevel:d,compact:a()})}),PH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("IFrameSource")[0],L=$l.default.useCallback(na=>{m.onIFrameSourceChange(na.target.value.trim().toLowerCase());a.persist()},[]),ha=$l.default.useCallback(()=>{m.reload()},[]);return(0,yi.jsxs)("span",{className:"flex gap-3",children:[(0,yi.jsx)(Ug,{tooltip:d("whiteboard/reload"),
type:"button",onClick:ha,children:(0,yi.jsx)(Wh,{name:"refresh"})}),(0,yi.jsx)(Jp,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${m.props.url}`,onChange:L}),(0,yi.jsx)(Ug,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(m.props.url),children:(0,yi.jsx)(Wh,{name:"external-link"})})]})}),vq=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("YoutubeLink")[0],L=$l.default.useCallback(ha=>{m.onYoutubeLinkChange(ha.target.value);a.persist()},
[]);return(0,yi.jsxs)("span",{className:"flex gap-3",children:[(0,yi.jsx)(Jp,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${m.props.url}`,onChange:L}),(0,yi.jsx)(Ug,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ha,na,ua;return null==(ua=null==(na=null==(ha=window.logseq)?void 0:ha.api)?void 0:na.open_external_link)?void 0:ua.call(na,m.props.url)},children:(0,yi.jsx)(Wh,{name:"external-link"})})]})}),QH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),
m=Za("TwitterLink")[0],L=$l.default.useCallback(ha=>{m.onTwitterLinkChange(ha.target.value);a.persist()},[]);return(0,yi.jsxs)("span",{className:"flex gap-3",children:[(0,yi.jsx)(Jp,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${m.props.url}`,onChange:L}),(0,yi.jsx)(Ug,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var ha,na,ua;return null==(ua=null==(na=null==(ha=window.logseq)?void 0:ha.api)?void 0:na.open_external_link)?void 0:ua.call(na,m.props.url)},
children:(0,yi.jsx)(Wh,{name:"external-link"})})]})}),RH=If(()=>{const a=Ie(),{handlers:{t:d,setCurrentPdf:m}}=$l.default.useContext(kj),L=a.selectedShapesArray[0];return(0,yi.jsx)(Ug,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>m(a.assets[L.props.assetId].src),children:(0,yi.jsx)(Wh,{name:"edit"})})}),SH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj);var m=Za("NoFill");const L=$l.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>na.update({noFill:ha}));a.persist()},
[]);m=m.every(ha=>ha.props.noFill);return(0,yi.jsx)(cj,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:m,onPressedChange:L,children:(0,yi.jsx)(Wh,{name:m?"droplet-off":"droplet"})})}),TH=If(()=>{const a=Ie(),d=Za("Swatch"),m=$l.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>{na.update({fill:ha,stroke:ha})});a.persist()},[]),L=$l.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>{na.update({opacity:ha})});a.persist()},[]);return(0,yi.jsx)(Xm,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:L,setColor:m})}),UH=If(()=>{const a=Ie(),d=$l.default.useCallback(m=>{a.api.convertShapes(m.currentTarget.dataset.tool)},[]);return(0,yi.jsx)(Ay,{popoverSide:"top",chevron:!1,setGeometry:d})}),VH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("StrokeType"),L=m.every(ha=>"dashed"===ha.props.strokeType)?"dashed":m.every(ha=>"line"===ha.props.strokeType)?"line":"mixed";return(0,yi.jsx)(la,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:L,onValueChange:ha=>{m.forEach(na=>{na.update({strokeType:ha})});a.persist()}})}),rD=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("ArrowMode");var L=m.every(na=>{var ua;return"arrow"===(null==(ua=na.props.decorations)?void 0:ua.start)});const ha=m.every(na=>{var ua;return"arrow"===(null==(ua=na.props.decorations)?void 0:ua.end)});L=[L?"start":null,ha?"end":null].filter(ic);
return(0,yi.jsx)(Da,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:L,onValueChange:na=>{m.forEach(ua=>{var Ha=ua.update;var Ua={start:na.includes("start")?"arrow":null,end:na.includes("end")?"arrow":null};Ha.call(ua,{decorations:Ua})});a.persist()}})}),WH=If(()=>{const a=Ie(),{handlers:{t:d}}=$l.default.useContext(kj),m=Za("TextStyle"),L=m.every(na=>500<na.props.fontWeight),ha=m.every(na=>na.props.italic);return(0,yi.jsxs)("span",
{className:"flex gap-1",children:[(0,yi.jsx)(cj,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:L,onPressedChange:na=>{m.forEach(ua=>{ua.update({fontWeight:na?700:400});ua.onResetBounds()});a.persist()},children:(0,yi.jsx)(Wh,{name:"bold"})}),(0,yi.jsx)(cj,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:ha,onPressedChange:na=>{m.forEach(ua=>{ua.update({italic:na});ua.onResetBounds()});a.persist()},children:(0,yi.jsx)(Wh,{name:"italic"})})]})}),XH=If(()=>{var a;const d=Ie(),
m=d.selectedShapesArray[0];return(0,yi.jsx)(ax,{onRefsChange:L=>{m.update({refs:L});d.persist()},refs:null!=(a=m.props.refs)?a:[],shapeType:m.props.type,side:"right",pageId:"logseq-portal"===m.props.type?m.props.pageId:void 0,portalType:"logseq-portal"===m.props.type?m.props.blockType:void 0})});Un.set("Geometry",UH);Un.set("AutoResizing",MH);Un.set("LogseqPortalViewMode",NH);Un.set("ScaleLevel",OH);Un.set("YoutubeLink",vq);Un.set("TwitterLink",QH);Un.set("IFrameSource",PH);Un.set("NoFill",SH);Un.set("Swatch",
TH);Un.set("StrokeType",VH);Un.set("ArrowMode",rD);Un.set("TextStyle",WH);Un.set("Links",XH);Un.set("EditPdf",RH);var sD=a=>{var d;return(null!=(d=mz[a])?d:[]).filter(ic)},tD=a=>{const d=a.map(L=>L.props.type),m=new Set(0<a.length?sD(d[0]):[]);for(let L=1;L<d.length&&0<m.size;L++){const ha=sD(d[L]);m.forEach(na=>{ha.includes(na)||m.delete(na)})}1<a.length&&qD.forEach(L=>{m.has(L)&&m.delete(L)});return Array.from(m).sort((L,ha)=>Fv.indexOf(L)-Fv.indexOf(ha)).map(L=>Un.get(L))},Gv=ba(614),YH=If(({shapes:a,
offsets:d,hidden:m})=>{const L=Ie(),ha=Mo.useRef(null),na=Mo.useRef(null);Mo.useLayoutEffect(()=>{setTimeout(()=>{const Ha=na.current;if(Ha){var {offsetWidth:Ua,offsetHeight:$a}=Ha;ha.current=[Ua,$a]}})});Mo.useLayoutEffect(()=>{var Ha;const Ua=na.current;if(Ua){var $a=null!=(Ha=ha.current)?Ha:[0,0];Ha=0;if(116>d.top){var jb=d.height/2+40;140>d.bottom&&(jb+=d.bottom-140)}else jb=-(d.height/2+40);16>d.left+d.width/2-$a[0]/2?Ha+=-(d.left+d.width/2-$a[0]/2-16):16>d.right+d.width/2-$a[0]/2&&(Ha+=d.right+
d.width/2-$a[0]/2-16);var [mb,Kb]=[Ha,jb];Ua.style.transform=`translateX(${mb}px) translateY(${Kb}px)`}},[d]);if(!L)return null;const ua=tD(a);return(0,Gv.jsx)(Eo,{centered:!0,children:0<ua.length&&(0,Gv.jsx)("div",{ref:na,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:ua.map((Ha,Ua)=>(0,Gv.jsxs)(Mo.Fragment,{children:[(0,Gv.jsx)(Ha,{}),Ua<ua.length-1&&(0,Gv.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ua))})})}),
bx=Jf(ba(22)),Bl=ba(22),[ZH]=oj("ContextMenu",[Ot]),ru=Ot(),[uD,su]=ZH("ContextMenu"),Hv=(0,Bl.forwardRef)((a,d)=>{const {__scopeContextMenu:m,disabled:L=!1}=a,ha=ag(a,["__scopeContextMenu","disabled"]),na=su("ContextMenuTrigger",m),ua=ru(m),Ha=(0,Bl.useRef)({x:0,y:0}),Ua=(0,Bl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(qe({width:0,height:0},Ha.current))}),$a=(0,Bl.useRef)(0),jb=(0,Bl.useCallback)(()=>window.clearTimeout($a.current),[]);(0,Bl.useEffect)(()=>jb,[jb]);(0,Bl.useEffect)(()=>
void(L&&jb()),[L,jb]);return(0,Bl.createElement)(Bl.Fragment,null,(0,Bl.createElement)(Ns,nf({},ua,{virtualRef:Ua})),(0,Bl.createElement)(Vk.span,nf({"data-state":na.open?"open":"closed","data-disabled":L?"":void 0},ha,{ref:d,style:qe({WebkitTouchCallout:"none"},a.style),onContextMenu:L?a.onContextMenu:vg(a.onContextMenu,mb=>{jb();Ha.current={x:mb.clientX,y:mb.clientY};na.onOpenChange(!0);mb.preventDefault()}),onPointerDown:L?a.onPointerDown:vg(a.onPointerDown,Wb(mb=>{jb();$a.current=window.setTimeout(()=>
{Ha.current={x:mb.clientX,y:mb.clientY};na.onOpenChange(!0)},700)})),onPointerMove:L?a.onPointerMove:vg(a.onPointerMove,Wb(jb)),onPointerCancel:L?a.onPointerCancel:vg(a.onPointerCancel,Wb(jb)),onPointerUp:L?a.onPointerUp:vg(a.onPointerUp,Wb(jb))})))}),nz=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;const L=ag(a,["__scopeContextMenu"]),ha=su("ContextMenuContent",m);m=ru(m);const na=(0,Bl.useRef)(!1);return(0,Bl.createElement)(Tu,nf({},m,L,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:ua=>
{var Ha;null===(Ha=a.onCloseAutoFocus)||void 0===Ha||Ha.call(a,ua);!ua.defaultPrevented&&na.current&&ua.preventDefault();na.current=!1},onInteractOutside:ua=>{var Ha;null===(Ha=a.onInteractOutside)||void 0===Ha||Ha.call(a,ua);ua.defaultPrevented||ha.modal||(na.current=!0)},style:Bf(qe({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Cl=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;a=ag(a,["__scopeContextMenu"]);m=ru(m);return(0,Bl.createElement)(uw,
nf({},m,a,{ref:d}))}),fr=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;a=ag(a,["__scopeContextMenu"]);m=ru(m);return(0,Bl.createElement)(iC,nf({},m,a,{ref:d}))}),$H=a=>{const {__scopeContextMenu:d,children:m,onOpenChange:L,dir:ha,modal:na=!0}=a,[ua,Ha]=(0,Bl.useState)(!1);a=ru(d);const Ua=ij(L),$a=(0,Bl.useCallback)(jb=>{Ha(jb);Ua(jb)},[Ua]);return(0,Bl.createElement)(uD,{scope:d,open:ua,onOpenChange:$a,modal:na},(0,Bl.createElement)(ty,nf({},a,{dir:ha,open:ua,onOpenChange:$a,modal:na}),
m))},cg=ba(614),as=If(function({children:a,collisionRef:d}){var m,L,ha,na,ua,Ha,Ua,$a,jb,mb,Kb,Vb,Ob,jc,xc,bc,pc;const lc=Ie(),{handlers:Rc}=bx.useContext(kj),Tc=Rc.t,Dd=bx.useRef(null),Ud=re=>{re();lc.transition("select")},kf=bx.useMemo(()=>Mb(),[]);return(0,cg.jsxs)($H,{onOpenChange:re=>{re&&!lc.isIn("select.contextMenu")?lc.transition("select").selectedTool.transition("contextMenu"):!re&&lc.isIn("select.contextMenu")&&lc.selectedTool.transition("idle")},children:[(0,cg.jsx)(Hv,{disabled:lc.editingShape&&
0!==Object.keys(lc.editingShape).length,children:a}),(0,cg.jsx)(nz,{className:"tl-menu tl-context-menu",ref:Dd,onEscapeKeyDown:()=>lc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,cg.jsxs)("div",{children:[1<(null==(m=lc.selectedShapes)?void 0:m.size)&&!lc.readOnly&&(null==(L=lc.selectedShapesArray)?void 0:L.some(re=>!re.props.isLocked))&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsxs)(Cl,{children:[(0,cg.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,cg.jsx)(Ug,
{tooltip:Tc("whiteboard/align-left"),onClick:()=>Ud(()=>lc.align("left")),children:(0,cg.jsx)(Wh,{name:"layout-align-left"})}),(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/align-center-horizontally"),onClick:()=>Ud(()=>lc.align("centerHorizontal")),children:(0,cg.jsx)(Wh,{name:"layout-align-center"})}),(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/align-right"),onClick:()=>Ud(()=>lc.align("right")),children:(0,cg.jsx)(Wh,{name:"layout-align-right"})}),(0,cg.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/distribute-horizontally"),onClick:()=>Ud(()=>lc.distribute("horizontal")),children:(0,cg.jsx)(Wh,{name:"layout-distribute-vertical"})})]}),(0,cg.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/align-top"),onClick:()=>Ud(()=>lc.align("top")),children:(0,cg.jsx)(Wh,{name:"layout-align-top"})}),(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/align-center-vertically"),onClick:()=>Ud(()=>lc.align("centerVertical")),children:(0,cg.jsx)(Wh,
{name:"layout-align-middle"})}),(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/align-bottom"),onClick:()=>Ud(()=>lc.align("bottom")),children:(0,cg.jsx)(Wh,{name:"layout-align-bottom"})}),(0,cg.jsx)(Kr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,cg.jsx)(Ug,{tooltip:Tc("whiteboard/distribute-vertically"),onClick:()=>Ud(()=>lc.distribute("vertical")),children:(0,cg.jsx)(Wh,{name:"layout-distribute-horizontal"})})]})]}),(0,cg.jsx)(fr,{className:"menu-separator"}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",
onClick:()=>Ud(lc.packIntoRectangle),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"layout-grid"}),Tc("whiteboard/pack-into-rectangle")]}),(0,cg.jsx)(fr,{className:"menu-separator"})]}),0<(null==(ha=lc.selectedShapes)?void 0:ha.size)&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.api.zoomToSelection),children:[Tc("whiteboard/zoom-to-fit"),(0,cg.jsx)(cn,{action:"whiteboard/zoom-to-fit"})]}),(0,cg.jsx)(fr,{className:"menu-separator"})]}),(lc.selectedShapesArray.some(re=>
"group"===re.type||lc.getParentGroup(re))||1<lc.selectedShapesArray.length)&&(null==(na=lc.selectedShapesArray)?void 0:na.some(re=>!re.props.isLocked))&&!lc.readOnly&&(0,cg.jsxs)(cg.Fragment,{children:[lc.selectedShapesArray.some(re=>"group"===re.type||lc.getParentGroup(re))&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.api.unGroup),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"ungroup"}),Tc("whiteboard/ungroup"),(0,cg.jsx)(cn,{action:"whiteboard/ungroup"})]}),1<lc.selectedShapesArray.length&&
(null==(ua=lc.selectedShapesArray)?void 0:ua.some(re=>!re.props.isLocked))&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.api.doGroup),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"group"}),Tc("whiteboard/group"),(0,cg.jsx)(cn,{action:"whiteboard/group"})]}),(0,cg.jsx)(fr,{className:"menu-separator"})]}),0<(null==(Ha=lc.selectedShapes)?void 0:Ha.size)&&(null==(Ua=lc.selectedShapesArray)?void 0:Ua.some(re=>!re.props.isLocked))&&(0,cg.jsxs)(cg.Fragment,{children:[!lc.readOnly&&
(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.cut),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"cut"}),Tc("whiteboard/cut")]}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.copy),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"copy"}),Tc("whiteboard/copy"),(0,cg.jsx)(cn,{action:"editor/copy"})]})]}),!lc.readOnly&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.paste),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"clipboard"}),Tc("whiteboard/paste"),
(0,cg.jsx)("div",{className:"tl-menu-right-slot",children:(0,cg.jsx)("span",{className:"keyboard-shortcut",children:(0,cg.jsxs)("code",{children:[CA,"+v"]})})})]}),1===(null==($a=lc.selectedShapes)?void 0:$a.size)&&!lc.readOnly&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(()=>lc.paste(void 0,!0)),children:[Tc("whiteboard/paste-as-link"),(0,cg.jsx)("div",{className:"tl-menu-right-slot",children:(0,cg.jsx)("span",{className:"keyboard-shortcut",children:(0,cg.jsxs)("code",{children:[CA,"++v"]})})})]}),
0<(null==(jb=lc.selectedShapes)?void 0:jb.size)&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsx)(fr,{className:"menu-separator"}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(()=>{var re,Ue;return Rc.exportToImage(lc.currentPageId,{x:lc.selectionBounds.minX+lc.viewport.camera.point[0]-8,y:lc.selectionBounds.minY+lc.viewport.camera.point[1]-8,width:(null==(re=lc.selectionBounds)?void 0:re.width)+16,height:(null==(Ue=lc.selectionBounds)?void 0:Ue.height)+16,zoom:lc.viewport.camera.zoom})}),
children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"file-export"}),Tc("whiteboard/export"),(0,cg.jsx)("div",{className:"tl-menu-right-slot",children:(0,cg.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,cg.jsx)(fr,{className:"menu-separator"}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.api.selectAll),children:[Tc("whiteboard/select-all"),(0,cg.jsx)(cn,{action:"editor/select-parent"})]}),1<(null==(mb=lc.selectedShapes)?void 0:mb.size)&&(0,cg.jsx)(Cl,{className:"tl-menu-item",
onClick:()=>Ud(lc.api.deselectAll),children:Tc("whiteboard/deselect-all")}),!lc.readOnly&&0<(null==(Kb=lc.selectedShapes)?void 0:Kb.size)&&(null==(Vb=lc.selectedShapesArray)?void 0:Vb.some(re=>!re.props.isLocked))&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(()=>lc.setLocked(!0)),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"lock"}),Tc("whiteboard/lock"),(0,cg.jsx)(cn,{action:"whiteboard/lock"})]}),!lc.readOnly&&0<(null==(Ob=lc.selectedShapes)?void 0:Ob.size)&&(null==(jc=lc.selectedShapesArray)?
void 0:jc.some(re=>re.props.isLocked))&&(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(()=>lc.setLocked(!1)),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"lock-open"}),Tc("whiteboard/unlock"),(0,cg.jsx)(cn,{action:"whiteboard/unlock"})]}),0<(null==(xc=lc.selectedShapes)?void 0:xc.size)&&!lc.readOnly&&(null==(bc=lc.selectedShapesArray)?void 0:bc.some(re=>!re.props.isLocked))&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.api.deleteShapes),
children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"backspace"}),Tc("whiteboard/delete"),(0,cg.jsx)(cn,{action:"editor/delete"})]}),1<(null==(pc=lc.selectedShapes)?void 0:pc.size)&&!lc.readOnly&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsx)(fr,{className:"menu-separator"}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.flipHorizontal),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"flip-horizontal"}),Tc("whiteboard/flip-horizontally")]}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",
onClick:()=>Ud(lc.flipVertical),children:[(0,cg.jsx)(Wh,{className:"tl-menu-icon",name:"flip-vertical"}),Tc("whiteboard/flip-vertically")]})]}),!lc.readOnly&&(0,cg.jsxs)(cg.Fragment,{children:[(0,cg.jsx)(fr,{className:"menu-separator"}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.bringToFront),children:[Tc("whiteboard/move-to-front"),(0,cg.jsx)(cn,{action:"whiteboard/bring-to-front"})]}),(0,cg.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Ud(lc.sendToBack),children:[Tc("whiteboard/move-to-back"),
(0,cg.jsx)(cn,{action:"whiteboard/send-to-back"})]})]}),kf&&(0,cg.jsx)(Cl,{className:"tl-menu-item",onClick:()=>{1===lc.selectedShapesArray.length?console.log(uc(lc.selectedShapesArray[0].serialized)):console.log(lc.selectedShapesArray.map(re=>uc(re.serialized)))},children:Tc("whiteboard/dev-print-shape-props")})]})]})})]})}),wq=Jf(ba(22)),cx=ba(614),vD=If(({shape:a})=>{const d=Ie(),{handlers:m}=wq.default.useContext(kj),L=m.t,ha=wq.default.useMemo(()=>{var na;const ua=[...(null!=(na=a.props.refs)?
na:[])].map(Ha=>[Ha,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&ua.unshift([a.props.pageId,!1]);return ua.filter(Ha=>Ha[0].toLowerCase()!==d.currentPage.name&&m.getBlockPageName(Ha[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===ha.length?null:(0,cx.jsx)("div",{className:"tl-quick-links",title:L("whiteboard/shape-quick-links"),children:ha.map(([na,ua])=>(0,cx.jsx)("div",{className:"tl-quick-links-row",children:(0,cx.jsx)(Qy,{id:na,showReferenceContent:ua})},
na))})}),aI=Jf(ba(22)),wD=Jf(ba(22)),gr={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},xD=(a,d,m)=>wi(void 0,[a,d,m],function*(L,{point:ha,shiftKey:na,dataTransfer:ua,fromDrop:Ha},Ua){function $a(nd,Ld){return wi(this,null,function*(){const $e=Object.values(L.assets).find(Df=>Df.src===nd);return $e?$e:{id:ek(),type:Ld,src:nd,size:yield Pi(Ua.makeAssetUrl(nd),Ld)}})}function jb(nd){return wi(this,null,function*(){const Ld=nd.filter($e=>"unknown"!==vc($e.name)).map($e=>
wi(this,null,function*(){try{const Df=yield Ua.saveAsset($e);return yield $a(Df,vc($e.name))}catch(Df){console.error(Df)}return null}));return(yield Promise.all(Ld)).filter(ic)})}function mb(nd){return[Bf(qe({},Ep.defaultProps),{html:nd,point:[ha[0],ha[1]]})]}function Kb(nd){return wi(this,null,function*(){return Oc(Ob,jc,pc,bc,lc,xc,kf)(nd)})}function Vb(){return wi(this,null,function*(){const nd=yield navigator.clipboard.read(),Ld=Oc(lc,xc,kf);return(yield Promise.all(nd.map($e=>Ld($e)))).flat().filter(ic)})}
function Ob(nd){return wi(this,null,function*(){var Ld=nd.getData("file");if(!Ld)return null;const $e=yield $a(Ld,"pdf");L.addAssets([$e]);Ld=Bf(qe({},Ip.defaultProps),{id:ek(),assetId:$e.id,url:Ld,opacity:1});$e.size&&Object.assign(Ld,{point:[ha[0]-$e.size[0]/4+16,ha[1]-$e.size[1]/4+16],size:me.div($e.size,2)});return[Ld]})}function jc(nd){return wi(this,null,function*(){var Ld=Array.from(nd.files);return 0<Ld.length?(Tf=Ld=yield jb(Ld),Ld.map(($e,Df)=>{switch($e.type){case "video":var kg=Zr.defaultProps;
break;case "image":kg=wv.defaultProps;break;case "pdf":kg=Ip.defaultProps;break;default:return null}kg=Bf(qe({},kg),{id:ek(),assetId:$e.id,opacity:1});$e.size&&Object.assign(kg,{point:[ha[0]-$e.size[0]/4+16*Df,ha[1]-$e.size[1]/4+16*Df],size:me.div($e.size,2)});return kg})):null})}function xc(nd){return wi(this,null,function*(){if(nd.types.includes("text/plain")&&(na||Ha))return null;const Ld=yield yd(nd,"text/html");return Ld?Oc(Rc,mb)(Ld):null})}function bc(nd){return wi(this,null,function*(){var Ld,
$e,Df,kg,Uf,wg,uh=nd.getData("block-uuid");if(uh){uh=uh.trim();const eg=null==(Df=null==($e=null==(Ld=window.logseq)?void 0:Ld.api)?void 0:$e.get_selected_blocks)?void 0:Df.call($e);Ld=eg&&1<(null==eg?void 0:eg.length)?eg.map(oh=>oh.uuid):[uh];null==(wg=null==(Uf=null==(kg=window.logseq)?void 0:kg.api)?void 0:Uf.set_blocks_id)?void 0:wg.call(Uf,Ld);kg=Ld.map(oh=>Ud(`((${oh}))`));return(yield Promise.all(kg)).flat().filter(ic).map((oh,Sh)=>Bf(qe({},oh),{point:[ha[0]+(Lk.defaultProps.size[0]+16)*Sh,
ha[1]]}))}return null})}function pc(nd){return wi(this,null,function*(){var Ld=nd.getData("page-name");return Ld?(Ld=Ld.trim(),Ud(`[[${Ld}]]`)):null})}function lc(nd){return wi(this,null,function*(){var Ld=yield yd(nd,"text/plain");return Ld?(Ld=Ld.trim(),Oc(Tc,Dd)(Ld)):null})}function Rc(nd){if(nd=L.api.getClonedShapesFromTldrString(decodeURIComponent(nd),ha)){const {shapes:Ld,assets:$e,bindings:Df}=nd;gf.push(...$e);lf.push(...Df);return Ld}return null}function Tc(nd){return wi(this,null,function*(){try{const $e=
new URL(nd);var Ld=$e.host&&["http:","https:"].includes($e.protocol)}catch($e){Ld=!1}return Ld&&!na?Av.test(nd)?[Bf(qe({},cr.defaultProps),{url:nd,point:[ha[0],ha[1]]})]:Xw.test(nd)?[Bf(qe({},dt.defaultProps),{url:nd,point:[ha[0],ha[1]]})]:[Bf(qe({},Xr.defaultProps),{url:nd,point:[ha[0],ha[1]]})]:null})}function Dd(nd){return nd.startsWith("\x3ciframe")?[Bf(qe({},Ep.defaultProps),{html:nd,point:[ha[0],ha[1]]})]:null}function Ud(nd){return wi(this,null,function*(){if(/^\(\(.*\)\)$/.test(nd)&&40===
nd.length){var Ld=nd.slice(2,-2);if(Wg(Ld))return[Bf(qe({},Lk.defaultProps),{point:[ha[0],ha[1]],size:[400,0],pageId:Ld,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(nd))return Ld=nd.slice(2,-2),[Bf(qe({},Lk.defaultProps),{point:[ha[0],ha[1]],size:[400,0],pageId:Ld,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"P"})];return null})}function kf(nd){return wi(this,null,function*(){var Ld=
yield yd(nd,"text/plain");return Ld&&(Ld=Ld.trim(),Ld=null==Ua?void 0:Ua.addNewBlock(Ld))?[Bf(qe({},Lk.defaultProps),{size:[400,0],point:[ha[0],ha[1]],pageId:Ld,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var re,Ue;let Tf=[],gf=[];const lf=[];L.cursors.setCursor("progress");let Yd=[];try{ua?Yd.push(...(null!=(re=yield Kb(ua))?re:[])):Yd.push(...(null!=(Ue=yield Vb())?Ue:[]))}catch(nd){console.error(nd)}const qd=Yd.map(nd=>Bf(qe({},
nd),{parentId:L.currentPageId,isLocked:!1,id:Wg(nd.id)?nd.id:ek()})),Zd=null==ua?void 0:ua.types.every(nd=>"Files"===nd);L.wrapUpdate(()=>{var nd=[...Tf,...gf];0<nd.length&&L.createAssets(nd);0<qd.length&&L.createShapes(qd);L.currentPage.updateBindings(Object.fromEntries(lf.map(Ld=>[Ld.id,Ld])));if(1===L.selectedShapesArray.length&&1===qd.length&&Ha){nd=L.selectedShapesArray[0];const Ld=L.getShapeById(qd[0].id);L.createNewLineBinding(nd,Ld)}L.setSelectedShapes(qd.map(Ld=>Ld.id));L.selectedTool.transition("idle");
L.cursors.setCursor("default");(Ha||Zd)&&L.packIntoRectangle()})}),dx=Jf(ba(22)),ex=Jf(ba(22)),Mp=ba(614),yD=[Km,et,jz,hn,iz,Lm,pp,kz,hD,mi,$w,xn],zD=a=>{const {renderers:d}=Lt.useContext(kj);return(0,Mp.jsx)(d.BacklinksCount,Bf(qe({},a),{options:{"portal?":!1}}))},AD=()=>{const a=Lt.useRef(null),d=Ie(),m=Lt.useMemo(()=>({ContextBar:YH,BacklinksCount:zD,QuickLinks:vD}),[]);return(0,Mp.jsx)(as,{collisionRef:a,children:(0,Mp.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,Mp.jsx)(cG,{components:m,children:(0,Mp.jsx)(FC,{})})})})},BD=a=>{var {onPersist:d,readOnly:m,model:L}=a;a=ag(a,["onPersist","readOnly","model"]);const ha=pe(),na=Vd(),ua=Je(),Ha=m?null:rf(),Ua=Lt.useCallback(($a,jb)=>{null==d?void 0:d($a,jb)},[L]);return(0,Mp.jsx)(ZF,Bf(qe({Shapes:Zw,Tools:yD,onDrop:ha,onPaste:na,onCopy:ua,readOnly:m,onCanvasDBClick:Ha,onPersist:Ua,model:L},a),{children:(0,Mp.jsx)(AD,{})}))},CD=function(a){var {renderers:d,handlers:m}=a;a=ag(a,["renderers","handlers"]);
const L={renderers:Lt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([ha,na])=>[ha,Lt.memo(na)])),[]),handlers:m};return(0,Mp.jsx)(kj.Provider,{value:L,children:(0,Mp.jsx)(BD,qe({},a))})}};
'use strict';var WId=function(a){return a},XId=function(a,b){var c=$APP.B.j("db",$APP.U2a($APP.Onb))?$APP.UA.A($APP.TC.A(new $APP.N(null,2,5,$APP.O,[$APP.fq,"logseq.tldraw.shape"],null))):$APP.mC;return $APP.bl.j(function(d){var e=$APP.pf(d);d=$APP.H.j(e,$APP.UA);e=$APP.H.j(e,$APP.CD);e=$APP.H.j(e,c);return $APP.n(e)?new $APP.m(null,2,[$APP.nl,$APP.u.A(d),$APP.VTb,$APP.VTb.A(e)],null):null},$APP.X5a(a,b,new $APP.m(null,1,[$APP.js,new $APP.N(null,2,5,$APP.O,[$APP.UA,$APP.CD],null)],null)))},YId=function(a){return $APP.xp.F(a,
$APP.F([$APP.yp,!0]))},ZId=function(a,b,c,d){var e=$APP.RE(a);b=new $APP.m(null,2,[$APP.nC,$APP.Asb,$APP.oC,new $APP.m(null,6,[$APP.nl,$APP.oa(b,"id"),$APP.bp,$APP.oa(b,"name"),$APP.EF,YId($APP.oa(b,"bindings")),$APP.VTb,$APP.oa(b,"nonce"),$APP.WTb,YId(c),$APP.TTb,d],null)],null);c=$APP.tv();e=$APP.FC.A(e);e=$APP.n(e)?e:$APP.tv();return new $APP.m(null,5,[$APP.fq,a,$APP.xD,"whiteboard",$APP.CD,b,$APP.GC,c,$APP.FC,e],null)},$Id=function(a,b,c,d,e,f){a=YId(a.getCleanUpAssets());var g=b.shapes,h=$APP.Fh.j(function(D){return $APP.oa(D,
"id")},g),k=$APP.lh(h,$APP.Fj.A(g.length));g=$APP.ih($APP.Fh.j(function(D){D=$APP.pf(D);D=$APP.H.j(D,$APP.nl);return $APP.P.C(YId(b.getShapeById(D).serialized),$APP.rw,$APP.H.j(k,D))},$APP.Jy.j(c,d)));d=$APP.ih($APP.Fh.j($APP.nl,d));var p=$APP.ih($APP.Fh.j($APP.nl,c)),q=$APP.ih($APP.um.j($APP.fk,$APP.Jy.j(p,d)));c=$APP.ih($APP.$f.j(function(D){D=$APP.nl.A(D);return q.A?q.A(D):q.call(null,D)},g));var r=$APP.um.j($APP.fk,$APP.Jy.j(d,p)),t=$APP.Sz();d=$APP.x(r)?$APP.Fh.j(function(D){return $APP.AI(D,
$APP.mC)},function(){var D=new $APP.N(null,1,5,$APP.O,[$APP.Ex],null),G=$APP.Ej.j(function(K){return new $APP.N(null,2,5,$APP.O,[$APP.UA,$APP.gi(K)],null)},r);return $APP.VC?$APP.VC(t,D,G):$APP.WC.call(null,t,D,G)}()):null;p=$APP.Ej.j(function(D){return new $APP.N(null,2,5,$APP.O,[$APP.DOa,new $APP.N(null,2,5,$APP.O,[$APP.UA,$APP.gi(D)],null)],null)},r);var y=$APP.Jy.j(g,c),A=$APP.x(y)?function(){var D=new $APP.N(null,1,5,$APP.O,[$APP.Ex],null),G=$APP.Ej.j(function(K){return new $APP.N(null,2,5,$APP.O,
[$APP.UA,$APP.gi($APP.nl.A(K))],null)},y);return $APP.VC?$APP.VC(t,D,G):$APP.WC.call(null,t,D,G)}():null;return new $APP.m(null,4,[$APP.hLc,ZId(e,b,a,h),$APP.N0c,$APP.Fh.j(function(D){return $APP.Td(q,$APP.u.A($APP.UA.A(D)))?$APP.P.C(D,$APP.GC,$APP.tv()):$APP.aDb(D)},$APP.Fh.j(function(D){D=new $APP.m(null,2,[$APP.nC,$APP.BI,$APP.mC,D],null);D=new $APP.m(null,3,[$APP.RC,new $APP.m(null,1,[$APP.fq,$APP.eq.A?$APP.eq.A(e):$APP.eq.call(null,e)],null),$APP.eD,new $APP.m(null,1,[$APP.fq,e],null),$APP.CD,
D],null);var G=$APP.Gsb(D,e);return $APP.Gl.F($APP.F([D,G]))},g)),$APP.dM,p,$APP.Jac,new $APP.m(null,3,[$APP.NPb,$APP.pb(f),$APP.QBb,f,$APP.Hu,new $APP.m(null,5,[$APP.RJ,e,$APP.lUb,d,$APP.mUb,c,$APP.nUb,y,$APP.oUb,A],null)],null)],null)},aJd=function(a,b,c){var d=$APP.Kc($APP.z(b.pages)),e=d.shapes,f=$APP.RE(a);f=$APP.AI(f,$APP.oC);f=$APP.TTb.A(f);var g=$APP.lh(f,$APP.Fj.A($APP.Ac(f)));e=$APP.ih($APP.en.j(function(q,r){var t=r.id;return new $APP.m(null,2,[$APP.nl,t,$APP.VTb,$APP.B.j(q,$APP.H.j(g,
t))?r.nonce:Date.now()],null)},e));var h=$APP.Sz();f=function(){var q=$APP.$w.j($APP.v($APP.isd),new $APP.N(null,2,5,$APP.O,[h,a],null));return $APP.n(q)?q:$APP.ih($APP.Fh.j(function(r){return $APP.oq.C(r,$APP.nl,$APP.u)},XId(h,a)))}();b=$Id(b,d,e,f,a,c);f=$APP.pf(b);d=$APP.H.j(f,$APP.hLc);b=$APP.H.j(f,$APP.N0c);c=$APP.H.j(f,$APP.dM);f=$APP.H.j(f,$APP.Jac);d=$APP.Sk.F(c,new $APP.N(null,1,5,$APP.O,[d],null),$APP.F([b]));var k=$APP.$w.j(f,new $APP.N(null,2,5,$APP.O,[$APP.Hu,$APP.mUb],null)),p=$APP.$w.j(f,
new $APP.N(null,2,5,$APP.O,[$APP.Hu,$APP.lUb],null));k=$APP.n($APP.Af(function(q){return $APP.B.j("group",$APP.wm.A(q))},k))?$APP.P.C(f,$APP.pUb,$APP.zu):$APP.n(function(){var q=$APP.qf(p);return $APP.n(q)?$APP.zf(function(r){return $APP.B.j("group",$APP.wm.A(r))},p):q}())?$APP.P.C(f,$APP.pUb,$APP.uMc):$APP.n($APP.Af(function(q){return $APP.B.j("line",$APP.wm.A(q))&&$APP.B.j("arrow ",$APP.Sn.A($APP.$Jc.A(q)))},k))?$APP.P.C(f,$APP.pUb,$APP.IXc):f;b=$APP.x($APP.Sk.j(b,c))?k:$APP.P.C(f,$APP.IBb,!0);
$APP.Rh.J($APP.isd,$APP.fu,new $APP.N(null,2,5,$APP.O,[h,a],null),e);if($APP.Td(new $APP.dh(null,new $APP.m(null,1,[$APP.IXc,null],null),null),$APP.pUb.A(b)))return $APP.Tz($APP.gdd,new $APP.m(null,2,[$APP.dx,d,$APP.Jac,b],null));e=$APP.gdd.A($APP.v($APP.Pz));c=$APP.Sk.j($APP.dx.A(e),d);e=$APP.Gl.F($APP.F([b,$APP.Jac.A(e)]));$APP.Tz($APP.gdd,$APP.nf);return $APP.aD(h,c,e)},bJd=function(a){a=$APP.V5a(a);return $APP.um.j($APP.Zob,a)},cJd=function(a){var b=$APP.ex.A($APP.RE(a));a=bJd(a);a=$APP.$f.j(function(d){return $APP.B.j(b,
$APP.ex.A($APP.eD.A(d)))},a);var c=$APP.ih($APP.um.j($APP.lb,$APP.Fh.j(function(d){return $APP.$w.C(d,new $APP.N(null,2,5,$APP.O,[$APP.fD,$APP.ex],null),null)},a)));a=$APP.um.j(function(d){d=$APP.ex.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.x(a)?$APP.z(a):null},dJd=function(){return $APP.Wl(null,function(){return $APP.Wl(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.Wl(a.text(),function(b){return $APP.Wl($APP.lq($APP.nf,b),function(c){return $APP.Ql(c)})})})})},eJd=function(a){var b=
$APP.W7a();return($APP.$c(b)||$APP.B.j(1,$APP.Ac(b))&&$APP.B.j(a,$APP.fq.A($APP.z(b))))&&$APP.pb($APP.$w.j($APP.v($APP.Pz),new $APP.N(null,1,5,$APP.O,[$APP.vZa],null)))},fJd=function(a){return null!=a?$APP.Zl($APP.Wl(null,function(){return $APP.Wl(dJd(),function(b){var c=$APP.pf(b);b=$APP.H.j(c,$APP.fF);c=$APP.H.j(c,$APP.qv);var d=$APP.z(b);b=$APP.UTb(d,c);d=$APP.AI(d,$APP.oC);c=$APP.WTb.A(d);d=$APP.EF.A(d);a.cloneShapesIntoCurrentPage($APP.Si(new $APP.m(null,3,[$APP.dUb,b,$APP.WTb,c,$APP.EF,d],null)));
b=$APP.xZa();return $APP.Ql(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},gJd=function(a){a.cleanup($APP.Fh.j(function(b){return b.id},a.shapes))},jJd=function(a,b){b=$APP.xp.F(b,$APP.F([new $APP.m(null,1,[$APP.yp,!0],null)]));b=$APP.pf(b);var c=$APP.H.j(b,hJd),d=$APP.H.j(b,$APP.YG),e=$APP.H.j(b,iJd),f=$APP.Sz();return $APP.Wl(null,function(){return $APP.Wl($APP.n(d)?$APP.Enb(f,a,new $APP.m(null,1,[$APP.Wv,100],null)):null,function(g){return $APP.Wl($APP.n(c)?
$APP.Jnb(a,10):null,function(h){return $APP.Wl($APP.n(e)?$APP.Lnb(a,100):null,function(k){return $APP.Ql($APP.Si(new $APP.m(null,3,[$APP.fF,h,$APP.qv,g,$APP.MH,k],null)))})})})})},kJd=function(a){return $APP.Vl($APP.RMb($APP.Sz(),new $APP.N(null,1,5,$APP.O,[$APP.xp.A(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.z(b):c;return $APP.n(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.TMb($APP.n(c)?c:b)):null})},lJd=function(){return $APP.RPb(null)},mJd=function(){return $APP.TPb(null)},
DJd=function(a){return $APP.Lg([nJd,oJd,pJd,qJd,rJd,sJd,tJd,uJd,$APP.nB,vJd,wJd,xJd,yJd,$APP.MS,zJd,AJd,BJd,CJd],[function(b){return $APP.fq.A($APP.a6a($APP.Sz(),$APP.Hi(b)))},function(b){return $APP.Si($APP.R8b(b))},function(b){return $APP.SE(b,!1)},function(b){return $APP.GZa($APP.n(b)?$APP.R8b(b):null)},function(b){return $APP.XTb(b)},$APP.Sv,function(b){return $APP.OLb(b,new $APP.m(null,1,[$APP.sO,!1],null))},$APP.dF,jJd,kJd,WId,function(b,c){return $APP.LKa(b,$APP.F([$APP.pv,c]))},function(b){var c=
$APP.u,d=c.A,e=$APP.hz(),f=$APP.RE(a),g=cJd(a);b=new $APP.m(null,6,[$APP.fD,$APP.ch($APP.n(g)?g:f,new $APP.N(null,1,5,$APP.O,[$APP.ex],null)),$APP.UA,e,$APP.RA,$APP.n(b)?b:"",$APP.KD,$APP.gq,$APP.RC,new $APP.m(null,2,[$APP.fq,$APP.eq.A?$APP.eq.A(a):$APP.eq.call(null,a),$APP.yv,a],null),$APP.eD,new $APP.m(null,1,[$APP.fq,a],null)],null);$APP.ZC(new $APP.N(null,1,5,$APP.O,[b],null));return d.call(c,e)},function(b){return $APP.fI.F($APP.F([$APP.Gh.A(b)]))},function(b,c){return $APP.jB(function(){return(0,$APP.Z4b)(b,
$APP.Gl.F($APP.F([$APP.xp.F(c,$APP.F([$APP.yp,!0])),new $APP.m(null,1,[$APP.pO,!0],null)])))})},function(b,c){return $APP.PA($APP.Sz(),$APP.ex.A($APP.RE(b)),$APP.Gh.A(c))},function(b){var c=$APP.Xu(b)?$APP.fq.A($APP.a6a($APP.Sz(),$APP.Hi(b))):null;c=$APP.n(c)?c:b;var d=$APP.NE(c),e=$APP.dF(c);return $APP.n(d)?$APP.n(e)?$APP.DJ(c,new $APP.m(null,1,[$APP.CJ,b],null)):$APP.BJ($APP.SE(b,!1)):null},function(b){return $APP.Si($APP.h5a($APP.Hi(b)))}])},CJd=new $APP.J(null,"queryBlockByUUID","queryBlockByUUID",
2091812895),zJd=new $APP.J(null,"exportToImage","exportToImage",-154356643),yJd=new $APP.J(null,"addNewBlock","addNewBlock",1426762680),EJd=new $APP.J(null,"KeyboardShortcut","KeyboardShortcut",1250004264),iJd=new $APP.J(null,"files?","files?",-1267491104),nJd=new $APP.J(null,"getBlockPageName","getBlockPageName",-1656908032),FJd=new $APP.J(null,"renderers","renderers",-1460292282),GJd=new $APP.J(null,"model","model",331153215),pJd=new $APP.J(null,"getRedirectPageName","getRedirectPageName",-1858136925),
sJd=new $APP.J(null,"isMobile","isMobile",-2043133877),qJd=new $APP.J(null,"setCurrentPdf","setCurrentPdf",-63289336),HJd=new $APP.J(null,"onMount","onMount",-876858467),tJd=new $APP.J(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),wJd=new $APP.J(null,"makeAssetUrl","makeAssetUrl",217779988),IJd=new $APP.J(null,"onPersist","onPersist",-1848738852),JJd=new $APP.J(null,"Breadcrumb","Breadcrumb",-1351298906),xJd=new $APP.J(null,"copyToClipboard","copyToClipboard",1092115063),BJd=new $APP.J(null,
"redirectToPage","redirectToPage",87147838),rJd=new $APP.J(null,"addNewWhiteboard","addNewWhiteboard",554297706),vJd=new $APP.J(null,"saveAsset","saveAsset",-668047853),KJd=new $APP.J(null,"BacklinksCount","BacklinksCount",364670631),LJd=new $APP.J(null,"Block","Block",-1959785792),AJd=new $APP.J(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),MJd=new $APP.J(null,"Page","Page",-1267059506),hJd=new $APP.J(null,"pages?","pages?",-2065014049),NJd=new $APP.J(null,"PageName","PageName",-164991013),
OJd=new $APP.J(null,"Tweet","Tweet",-452258680),uJd=new $APP.J(null,"isWhiteboardPage","isWhiteboardPage",-134150579),PJd=new $APP.J(null,"BlockReference","BlockReference",-120254741),oJd=new $APP.J(null,"inflateAsset","inflateAsset",-1449040639);$APP.lda("tldraw");var QJd=$APP.fm(618);var RJd,SJd;$APP.mzd={};RJd=$APP.WO($APP.oa(QJd,"App"));$APP.pzd=$APP.oa(QJd,"generateJSXFromModel");
SJd=new $APP.m(null,8,[MJd,$APP.Gq($APP.Kq,function(a){return(0,$APP.UU)(new $APP.m(null,2,[$APP.RJ,$APP.SE($APP.oa(a,"pageName"),!1),$APP.pO,!0],null))},null,"frontend.extensions.tldraw/page-cp"),LJd,$APP.Gq($APP.Kq,function(a){a=$APP.gi($APP.oa(a,"blockId"));var b=$APP.IYa($APP.apc);a=b.A?b.A(a):b.call(null,a);return $APP.tq(a)},null,"frontend.extensions.tldraw/block-cp"),JJd,$APP.Gq($APP.Kq,function(a){return $APP.tq($APP.HR(new $APP.m(null,1,[$APP.dW,!0],null),$APP.Sz(),$APP.gi($APP.oa(a,"blockId")),
new $APP.m(null,2,[$APP.Acc,$APP.oa(a,"endSeparator"),$APP.Bcc,$APP.oa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),OJd,$APP.Gq($APP.Kq,function(a){return(0,$APP.ubc)($APP.oa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),NJd,$APP.Gq($APP.Kq,function(a){return(0,$APP.sR)(new $APP.m(null,1,[$APP.dW,!0],null),new $APP.m(null,1,[$APP.fq,$APP.oa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),KJd,function(a){return $APP.Cf.j($APP.szd,$APP.Fh.j(function(b){return $APP.xp.F($APP.oa(a,
b),$APP.F([new $APP.m(null,1,[$APP.yp,!0],null)]))},new $APP.N(null,3,5,$APP.O,["id","className","options"],null)))},PJd,$APP.Gq($APP.Kq,function(a){return(0,$APP.Fac)($APP.nf,$APP.oa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),EJd,$APP.Gq($APP.Kq,function(a){a=$APP.dP($APP.Gh.A($APP.oa(a,"action")));return"string"===typeof a?$APP.tq($APP.$O(a)):$APP.tq($APP.yo.j(" | ",$APP.Fh.j($APP.$O,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.nzd=$APP.Gq($APP.Kq,function(a,b){function c(k){if($APP.n(k)){k.appUndo=lJd;k.appRedo=mJd;var p=$APP.oa(k,"api");return $APP.n(p)?$APP.Vl(d?fJd(p):null,function(){gJd(k.currentPage);$APP.HZa(k,b);return h.A?h.A(k):h.call(null,k)}):null}return null}var d=eJd(a),e=$APP.eUb(a),f=$APP.Tq(null),g=$APP.C.C(f,0,null),h=$APP.C.C(f,1,null);$APP.Uq(function(){$APP.n($APP.n(g)?b:g)&&$APP.HZa(g,b);return function(){return $APP.kc}},new $APP.N(null,2,5,$APP.O,[b,g],null));return $APP.n(e)?$APP.W("div",{style:{overscrollBehavior:"none"},
onBlur:function(k){k=$APP.oa(k,"target").tagName;var p=new $APP.dh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);k=p.A?p.A(k):p.call(null,k);return $APP.n(k)?$APP.TA():null},onWheel:$APP.jv,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.pb(g)?$APP.W("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.tq($APP.hP("Loading onboarding whiteboard ..."))]):null,$APP.tq(function(){var k=new $APP.m(null,6,[FJd,SJd,$APP.kTa,
DJd(a),HJd,c,$APP.t2c,!0,IJd,function(p,q){$APP.Tz(new $APP.N(null,2,5,$APP.O,[$APP.v4c,$APP.Sz()],null),$APP.tv());return $APP.n(!1)?(console.time("tldraw persist"),p=aJd(a,p,q.replace),console.timeEnd("tldraw persist"),p):aJd(a,p,q.replace)},GJd,e],null);return RJd.A?RJd.A(k):RJd.call(null,k)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ma.bj();
}).call(this);